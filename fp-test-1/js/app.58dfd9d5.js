(function(e){function t(t){for(var r,o,s=t[0],c=t[1],l=t[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},i={app:0},a=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d22d746":"83e5083b","chunk-35cc0210":"52b3c3e7","chunk-728f3a93":"c6339a01"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-35cc0210":1,"chunk-728f3a93":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2d22d746":"31d6cfe0","chunk-35cc0210":"5f404623","chunk-728f3a93":"914bdefd"}[e]+".css",i=c.p+r,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var l=a[s],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===r||d===i))return t()}var h=document.getElementsByTagName("style");for(s=0;s<h.length;s++){l=h[s],d=l.getAttribute("data-href");if(d===r||d===i)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var r=t&&t.target&&t.target.src||i,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete o[e],u.parentNode.removeChild(u),n(a)},u.href=i;var v=document.getElementsByTagName("head")[0];v.appendChild(u)})).then((function(){o[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=a);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e);var h=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",h.name="ChunkLoadError",h.type=r,h.request=o,n[1](h)}i[e]=void 0}};var u=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/fp-test-1/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var h=0;h<l.length;h++)t(l[h]);var u=d;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";n("85ec")},"08fd":function(e,t,n){var r={"./GlassFrontShader/F.glsl":"f430"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="08fd"},1333:function(e,t){e.exports="varying vec2 vUv;\r\n\r\nuniform float vTextureMix;\r\n\r\nuniform sampler2D vTextures[ 2 ];\r\n\r\nvoid main()\r\n{\r\n    vec4 tColor1 = vec4(texture2D( vTextures[0], vUv ));\r\n    vec4 tColor2 = vec4(texture2D( vTextures[1], vUv ));\r\n    gl_FragColor = mix( tColor1, tColor2, vTextureMix );\r\n    // gl_FragColor = mix( tColor1, tColor2, 0.5 );\r\n    // gl_FragColor = tColor2;\r\n}"},"16a7":function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\nuniform samplerCube tSkybox;\r\nuniform vec3 absorbColor;\r\nuniform float refractionFactor;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 5000.0;\r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nvoid main() {\r\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n}\r\n\r\nvoid main1() {\r\n\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.25;\r\n    \r\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\r\n    vCameraRay = normalize(vCameraRay);\r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\r\n    offset = normalize(offset);\r\n\r\n    // reflect\r\n    vec3 vReflect = reflect( vCameraRay, vNormal );\r\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= sinTheta2;\r\n    offset *= 50.0;\r\n\r\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\r\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\r\n\r\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\r\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\r\n\r\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\r\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\r\n    \r\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\r\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\r\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\r\n\r\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\r\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\r\n\r\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\r\n\r\n    // gl_FragColor = vec4(refCol, 1.0);\r\n    float reflectionCoeff = 0.5 * pow(sinTheta1, 4.0);\r\n    // reflectionCoeff = 1.0;\r\n    gl_FragColor = vec4(mix(backColor + absorbColor, refCol, reflectionCoeff), 1.0);\r\n    // gl_FragColor = vec4(vec3(backDepthlinear*0.01), 1.0);\r\n}"},"232b":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return d}));var r,o=n("3835"),i=n("d4ec"),a=n("bee2"),s=n("ade3"),c=(n("d3b7"),n("159b"),n("5a89")),l=n("4e0a");(function(e){e[e["RECT"]=0]="RECT",e[e["CIRCLE"]=1]="CIRCLE"})(r||(r={}));var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0,h=arguments.length>6?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r.RECT,v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:16711680;if(Object(i["a"])(this,e),Object(s["a"])(this,"cardGeometry",void 0),Object(s["a"])(this,"cardMaterial",void 0),Object(s["a"])(this,"cardMesh",void 0),Object(s["a"])(this,"stencilId",void 0),Object(s["a"])(this,"cardOutsideScene",void 0),Object(s["a"])(this,"cardInsideScene",void 0),Object(s["a"])(this,"isFocused",void 0),Object(s["a"])(this,"height",void 0),Object(s["a"])(this,"width",void 0),Object(s["a"])(this,"frontWallGeom",void 0),Object(s["a"])(this,"frontWallMesh",void 0),this.stencilId=o,this.height=t,this.width=n,u==r.RECT?this.cardGeometry=new c["N"](n,t):this.cardGeometry=new c["e"](n,64),this.cardMaterial=new c["F"]({color:15790320,stencilWrite:!0,stencilRef:o,stencilZPass:c["T"],depthWrite:!1}),this.cardMesh=new c["E"](this.cardGeometry,this.cardMaterial),this.cardMesh["tardis"]=this,this.cardMesh.position.copy(d),this.cardMesh.rotation.copy(h),this.cardOutsideScene=a,this.cardInsideScene=l,this.cardOutsideScene.add(this.cardMesh),this.isFocused=!1,this.frontWallGeom=new c["d"],this.frontWallMesh=new c["E"],null!=v){var m=(new c["E"]).copy(this.cardMesh);m.material=new c["F"]({color:f}),v.add(m)}}return Object(a["a"])(e,[{key:"addVisibleObjectGroup",value:function(e){var t=this;this._recursiveGetGroupProperty(e,(function(e){e.stencilWrite=!0,e.stencilRef=t.stencilId,e.stencilFunc=c["n"]})),this.cardOutsideScene.add(e)}},{key:"_recursiveGetGroupProperty",value:function(e,t){var n=this;e.children.forEach((function(e){e instanceof c["E"]?e.material instanceof c["C"]?t(e.material):e.material instanceof Array&&e.material.forEach((function(e){t(e)})):e instanceof c["u"]&&n._recursiveGetGroupProperty(e,t)}))}},{key:"addFrontWall",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=[new c["fb"](-this.width/2,-this.height/2,0),new c["fb"](-this.width/2,this.height/2,0),new c["fb"](this.width/2,this.height/2,0),new c["fb"](this.width/2,-this.height/2,0),new c["fb"](-this.width/2,-this.height/2,-e),new c["fb"](-this.width/2,this.height/2,-e),new c["fb"](this.width/2,this.height/2,-e),new c["fb"](this.width/2,-this.height/2,-e)],r=[1,0,4,5,1,4,2,1,5,6,2,5,3,2,6,7,3,6,0,3,7,4,0,7],o=[];r.forEach((function(e){var t=new c["fb"];t.copy(n[e]),o.push(t)})),this.frontWallGeom.setFromPoints(o),this.frontWallGeom.computeVertexNormals();var i=void 0==t?new c["G"]({color:10526880}):t;i.stencilWrite=!0,i.stencilRef=this.stencilId,i.stencilFunc=c["n"],this.frontWallMesh=new c["E"](this.frontWallGeom,i),this.frontWallMesh.position.copy(this.cardMesh.position),this.cardOutsideScene.add(this.frontWallMesh)}},{key:"addSkybox",value:function(e){var t=Object(l["a"])("CardSkyboxShader"),n=Object(o["a"])(t,2),r=n[0],i=n[1],a={tCube:{type:"t",value:e}},s=new c["V"]({uniforms:a,vertexShader:r,fragmentShader:i,stencilWrite:!0,stencilRef:this.stencilId,stencilZPass:c["T"],depthWrite:!1});this.cardMaterial=s,this.cardMesh.material=this.cardMaterial}}]),e}()},"26e3":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n("d4ec"),o=n("bee2"),i=n("ade3"),a=(n("4c53"),n("d3b7"),n("159b"),n("5a89")),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;Object(r["a"])(this,e),Object(i["a"])(this,"damp",void 0),Object(i["a"])(this,"attract",void 0),Object(i["a"])(this,"object",void 0),Object(i["a"])(this,"velocity",void 0),Object(i["a"])(this,"childObjects",void 0),this.damp=n,this.attract=o,this.object=t,this.velocity=new a["fb"],this.childObjects=[]}return Object(o["a"])(e,[{key:"addChildObj",value:function(e){this.childObjects.push(e)}},{key:"update",value:function(e){var t=this;this.velocity.multiplyScalar(this.damp);var n=e.sub(this.object.position);this.velocity.add(n.multiplyScalar(this.attract)),this.object.position.add(this.velocity),this.childObjects.forEach((function(e){e.position.copy(t.object.position),e.rotation.copy(t.object.rotation)}))}}]),e}(),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;Object(r["a"])(this,e),Object(i["a"])(this,"damp",void 0),Object(i["a"])(this,"attract",void 0),Object(i["a"])(this,"velocity",void 0),Object(i["a"])(this,"currentVec3",void 0),this.damp=n,this.attract=o,this.velocity=new a["fb"],this.currentVec3=t}return Object(o["a"])(e,[{key:"update",value:function(e){this.velocity.multiplyScalar(this.damp);var t=(new a["fb"]).copy(e).sub(this.currentVec3);this.velocity.add(t.multiplyScalar(this.attract)),this.currentVec3.add(this.velocity)}}]),e}()},"32a7":function(e,t,n){"use strict";n("4acd")},"44ec":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[n("div",{staticClass:"loading-container",class:{"loading-container--hidden":e.loadingStat.isLoaded,"loading-container--none":e.loadingStat.noLoadingStat}},[n("div",{staticClass:"load-stat"},[n("div",{staticClass:"load-pgbar",style:{width:100*e.loadingStat.loaded/e.loadingStat.total+"%"}}),n("div",{staticClass:"load-text"},[e._v(e._s(Math.round(100*e.loadingStat.loaded/e.loadingStat.total))+" %")])])])]),n("div",{ref:"dom3d-container",attrs:{id:"dom3d-container"}},[n("div",{ref:"dom3d-test",attrs:{id:"dom3d-test"}},[n("p",[e._v("HTML element: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua")])]),n("div",{ref:"dom3d-glass",attrs:{id:"dom3d-glass"},on:{click:e.onGlassClick}},[e._m(0)])])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dom3d-glass-ball"},[n("div",{staticClass:"dom3d-glass-ball__text"},[e._v("html element following object")])])}],i=n("5a89"),a=n("2b0e"),s=n("d4ec"),c=n("bee2"),l=n("ade3"),d=(n("d3b7"),n("159b"),n("38cf"),n("4c53"),n("32d9")),h=n("93e9"),u=n("257e"),v=n("262e"),f=n("2caf"),m=n("5a59"),p=function(e){Object(v["a"])(n,e);var t=Object(f["a"])(n);function n(e,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s["a"])(this,n),o=t.call(this,e),Object(l["a"])(Object(u["a"])(o),"material",void 0);var c=Object(u["a"])(o),d=(void 0!==a.color?new i["g"](a.color):new i["g"](16777215),a.textureWidth||512),h=a.textureHeight||512,v=a.clipBias||0,f=a.flowDirection||new i["eb"](1,0),p=a.flowSpeed||.01,b=a.reflectivity||.5,w=a.scale||1,y=g,x=new i["ab"],j=a.normalMap0||x.load("./water/Water_1_M_Normal.jpg"),O=a.normalMap1||x.load("./water/Water_2_M_Normal.jpg"),C=.15,P=.5*C,M=new i["D"],k=new i["f"];o.material=new i["V"];var R=new m["a"](e,{textureWidth:d,textureHeight:h,clipBias:v});function T(e){M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(e.projectionMatrix),M.multiply(e.matrixWorldInverse),M.multiply(c.matrixWorld)}function _(){var e=k.getDelta(),t=c.material.uniforms["config"];t.value.x+=p*e,t.value.y=t.value.x+P,t.value.x>=C?(t.value.x=0,t.value.y=P):t.value.y>=C&&(t.value.y=t.value.y-C)}return R.matrixAutoUpdate=!1,o.material=new i["V"]({uniforms:i["cb"].merge([i["bb"]["fog"],y.uniforms]),vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,transparent:!0,fog:!0}),o.material.uniforms["flowDirection"].value=f,j.wrapS=j.wrapT=i["S"],O.wrapS=O.wrapT=i["S"],o.material.uniforms["tReflectionMap"].value=R.getRenderTarget().texture,o.material.uniforms["tNormalMap0"].value=j,o.material.uniforms["tNormalMap1"].value=O,o.material.uniforms["reflectivity"].value=b,o.material.uniforms["textureMatrix"].value=M,o.material.uniforms["config"].value.x=0,o.material.uniforms["config"].value.y=P,o.material.uniforms["config"].value.z=P,o.material.uniforms["config"].value.w=w,o.onBeforeRender=function(e,t,n,o,i,a){T(n),_(),c.visible=!1,R.matrixWorld.copy(c.matrixWorld),R.onBeforeRender(e,r,n,o,i,a),c.visible=!0},o}return Object(c["a"])(n)}(i["E"]),g={uniforms:{reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new i["gb"]},flowDirection:{type:"v2",value:new i["eb"]}},vertexShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\tuniform vec2 flowDirection;\n\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\tflow = flowDirection;\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n            reflectance = pow(reflectance + 0.3, 4.0);\n            reflectance = floor(reflectance *  2.0) / 2.0;\n            vec4 refractColor = vec4(1.0);\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\n\t\t\tgl_FragColor = mix(refractColor, reflectColor, reflectance);\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}"},b=n("61d9"),w=n("232b"),y=n("1da1"),x=n("3835"),j=(n("96cf"),n("a434"),n("d81d"),n("4e82"),n("b64b"),n("22b5")),O=function(){function e(){var t=this;Object(s["a"])(this,e),Object(l["a"])(this,"animationObjectCount",void 0),Object(l["a"])(this,"requestId",void 0),Object(l["a"])(this,"loopAnim",(function(){j["c"](),t.requestId>=0&&(t.requestId=window.requestAnimationFrame(t.loopAnim))})),Object(l["a"])(this,"startAnim",(function(){t.requestId<0&&(t.requestId=window.requestAnimationFrame(t.loopAnim))})),Object(l["a"])(this,"stopAnim",(function(){t.requestId>=0&&(window.cancelAnimationFrame(t.requestId),t.requestId=-1)})),this.animationObjectCount=0,this.requestId=-1}return Object(c["a"])(e,[{key:"addTweenAnimObject",value:function(){this.animationObjectCount<=0&&this.startAnim(),this.animationObjectCount++}},{key:"removeTweenAnimObject",value:function(){this.animationObjectCount<=0||(1==this.animationObjectCount&&this.stopAnim(),this.animationObjectCount--)}},{key:"tweenNumber",value:function(e,t,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j["a"].Quadratic.InOut,s={a:e};this.addTweenAnimObject(),new j["b"](s).to({a:t},i).easing(a).onUpdate((function(){return n(s.a)})).onComplete((function(){o.removeTweenAnimObject(),r(s.a)})).start()}},{key:"tweenVector2",value:function(e,t,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j["a"].Quadratic.InOut,s={x:e.x,y:e.y},c={x:t.x,y:t.y};this.addTweenAnimObject(),new j["b"](s).to(c,i).easing(a).onUpdate((function(){return n(s.x,s.y)})).onComplete((function(){o.removeTweenAnimObject(),r(s.x,s.y)})).start()}},{key:"tweenVector3",value:function(e,t,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j["a"].Quadratic.InOut,s={x:e.x,y:e.y,z:e.z},c={x:t.x,y:t.y,z:t.z};this.addTweenAnimObject(),new j["b"](s).to(c,i).easing(a).onUpdate((function(){return n(s.x,s.y,s.z)})).onComplete((function(){o.removeTweenAnimObject(),r(s.x,s.y,s.z)})).start()}},{key:"tweenEuler",value:function(e,t,n,r){var o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j["a"].Quadratic.InOut,c={x:e.x,y:e.y,z:e.z},l={x:t.x,y:t.y,z:t.z};this.addTweenAnimObject(),new j["b"](c).to(l,a).easing(s).onUpdate((function(){return n(new i["o"](c.x,c.y,c.z))})).onComplete((function(){o.removeTweenAnimObject(),r(new i["o"](c.x,c.y,c.z))})).start()}},{key:"tweenThreeVector3",value:function(e,t,n,r){var o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j["a"].Quadratic.InOut,c={x:e.x,y:e.y,z:e.z},l={x:t.x,y:t.y,z:t.z};this.addTweenAnimObject(),new j["b"](c).to(l,a).easing(s).onUpdate((function(){return n(new i["fb"](c.x,c.y,c.z))})).onComplete((function(){o.removeTweenAnimObject(),r(new i["fb"](c.x,c.y,c.z))})).start()}}]),e}(),C=new O,P=n("4e0a"),M=function(){function e(t,n,r){Object(s["a"])(this,e),Object(l["a"])(this,"index",void 0),Object(l["a"])(this,"mesh",void 0),Object(l["a"])(this,"uniforms",void 0),Object(l["a"])(this,"textureList",void 0),Object(l["a"])(this,"isPushingTexture",void 0),this.index=t,this.mesh=n,this.uniforms=r,this.mesh=n,this.textureList=[],this.isPushingTexture=!1}return Object(c["a"])(e,[{key:"pushNewTexture",value:function(e){0==this.textureList.length?this.textureList.push(void 0,e):(1==this.textureList.length||this.textureList.splice(1,this.textureList.length-2),this.textureList.push(e)),0==this.isPushingTexture&&this.recPushTexture()}},{key:"recPushTexture",value:function(){var e=this;this.textureList.length<=1?this.isPushingTexture=!1:(this.isPushingTexture=!0,2==this.textureList.length&&(this.uniforms.vTextureMix.value=0,this.uniforms.vTextures.value[0]=this.textureList[0],this.uniforms.vTextures.value[1]=this.textureList[1],this.isPushingTexture=!1,C.tweenNumber(0,1,(function(t){e.uniforms.vTextureMix.value=t}),(function(){e.uniforms.vTextures.value[0]=e.textureList[1],e.uniforms.vTextures.value[1]=e.textureList[1],e.uniforms.vTextureMix.value=1,e.textureList.splice(0,1),e.recPushTexture()}),500)))}}]),e}(),k=function(e){Object(v["a"])(n,e);var t=Object(f["a"])(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{numOfVisiblePics:3};Object(s["a"])(this,n),e=t.call(this),Object(l["a"])(Object(u["a"])(e),"numOfVisiblePics",void 0),Object(l["a"])(Object(u["a"])(e),"rotateNode",void 0),Object(l["a"])(Object(u["a"])(e),"isRotating",void 0),Object(l["a"])(Object(u["a"])(e),"planes",void 0),Object(l["a"])(Object(u["a"])(e),"planeWidth",void 0),Object(l["a"])(Object(u["a"])(e),"planeHeight",void 0),Object(l["a"])(Object(u["a"])(e),"planeGap",void 0),Object(l["a"])(Object(u["a"])(e),"preloadImgs",void 0),Object(l["a"])(Object(u["a"])(e),"maxPreloadImgCount",void 0),Object(l["a"])(Object(u["a"])(e),"carouselArrayRadius",void 0),Object(l["a"])(Object(u["a"])(e),"carouselArrayAngle",void 0),Object(l["a"])(Object(u["a"])(e),"currentCenter",void 0),e.isRotating=!1,e.rotateNode=new i["u"],e.add(e.rotateNode),e.currentCenter=0,e.numOfVisiblePics=r.numOfVisiblePics,e.planes=[],e.planeWidth=r.planeWidth||50,e.planeHeight=r.planeHeight||50,e.planeGap=r.planeGap||10,e.preloadImgs={},e.maxPreloadImgCount=2*e.numOfVisiblePics,e.carouselArrayRadius=r.carouselArrayRadius||100,e.carouselArrayAngle=2*Math.atan((e.planeWidth+e.planeGap)/(2*e.carouselArrayRadius));for(var o=Object(P["a"])("CarouselBasicShader"),a=Object(x["a"])(o,2),c=a[0],d=a[1],h=0;h<e.numOfVisiblePics;h++){var v={vColor:{type:"c",value:new i["g"](16711680)},vTextures:{type:"tv",value:[void 0,void 0]},vTextureMix:{type:"f",value:1}},f=new i["E"](new i["M"](e.planeWidth,e.planeHeight,1,1),new i["V"]({uniforms:v,vertexShader:c,fragmentShader:d})),m=h-(e.numOfVisiblePics-1)/2;f.rotation.y=-m*e.carouselArrayAngle,f.position.x=e.carouselArrayRadius*Math.sin(m*e.carouselArrayAngle),f.position.z=-e.carouselArrayRadius*Math.cos(m*e.carouselArrayAngle),e.planes.push(new M(h,f,v)),e.rotateNode.add(f)}return e.planes.forEach((function(t){e.__imgSrcToTex("https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")).then((function(e){t.pushNewTexture(e)}))})),e}return Object(c["a"])(n,[{key:"clickToChangeTex",value:function(e,t){var n=this,r=this.planes.map((function(e){return e.mesh})),o=e.intersectObjects(r);if(1==o.length){var a=o[0].object;if(a instanceof i["E"]){var s=r.indexOf(a),c=t(s);this.__imgSrcToTex(c).then((function(e){n.planes[s].pushNewTexture(e)}))}}}},{key:"clickToRotate",value:function(e,t){var n=this.planes.map((function(e){return e.mesh})),r=e.intersectObjects(n);if(1==r.length){var o=r[0].object;if(o instanceof i["E"]){var a=n.indexOf(o),s=this.planes[a].index-this.currentCenter-Math.floor(this.planes.length/2);s<0?this.moveLeft(-s,t):s>0&&this.moveRight(s,t)}}}},{key:"moveLeft",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;if(!this.isRotating){this.isRotating=!0;for(var r=function(t){e.planes.sort((function(e,t){return t.index-e.index}));var r=e.planes[0];r.index=e.planes[e.planes.length-1].index-1;var o=r.index-(e.numOfVisiblePics-1)/2;r.mesh.rotation.y=-o*e.carouselArrayAngle,r.mesh.position.x=e.carouselArrayRadius*Math.sin(o*e.carouselArrayAngle),r.mesh.position.z=-e.carouselArrayRadius*Math.cos(o*e.carouselArrayAngle);var i=n(r.index);e.__imgSrcToTex(i).then((function(e){r.pushNewTexture(e)}))},o=0;o<t;o++)r(o);C.tweenNumber(0,t,(function(t){var n=e.carouselArrayAngle*(e.currentCenter-t);e.rotateNode.rotation.y=n}),(function(){e.currentCenter-=t,e.isRotating=!1}),500)}}},{key:"moveRight",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;if(!this.isRotating){this.isRotating=!0;for(var r=function(t){e.planes.sort((function(e,t){return e.index-t.index}));var r=e.planes[0];r.index=e.planes[e.planes.length-1].index+1;var o=r.index-(e.numOfVisiblePics-1)/2;r.mesh.rotation.y=-o*e.carouselArrayAngle,r.mesh.position.x=e.carouselArrayRadius*Math.sin(o*e.carouselArrayAngle),r.mesh.position.z=-e.carouselArrayRadius*Math.cos(o*e.carouselArrayAngle);var i=n(r.index);e.__imgSrcToTex(i).then((function(e){r.pushNewTexture(e)}))},o=0;o<t;o++)r(o);C.tweenNumber(0,t,(function(t){var n=e.carouselArrayAngle*(e.currentCenter+t);e.rotateNode.rotation.y=n}),(function(){e.currentCenter+=t,e.isRotating=!1}),500)}}},{key:"__imgSrcToTex",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",new Promise((function(e,r){n.preloadImgs[t]&&e(n.preloadImgs[t]);var o=new i["w"];o.setCrossOrigin("anonymous"),o.load(t,(function(r){var o=new i["Z"](r);if(o.needsUpdate=!0,n.preloadImgs[t]=o,Object.keys(n.preloadImgs).length>=n.maxPreloadImgCount)for(var a in n.preloadImgs){for(var s=n.preloadImgs[a],c=!0,l=0;l<n.planes.length;l++)if(n.planes[l].uniforms.vTextures.value.indexOf(s)>-1){c=!1;break}if(c){s.dispose(),delete n.preloadImgs[a];break}}e(o)}))})));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(i["u"]),R=n("25ae"),T=n("fb12"),_=n("26e3"),S=n("7d52"),F=n("7612"),D=function(){function e(t,n,r,o){var a=this;Object(s["a"])(this,e),Object(l["a"])(this,"container",void 0),Object(l["a"])(this,"renderer",void 0),Object(l["a"])(this,"cardInsideScene",void 0),Object(l["a"])(this,"scene",void 0),Object(l["a"])(this,"reflectionScene",void 0),Object(l["a"])(this,"composer",void 0),Object(l["a"])(this,"stats",void 0),Object(l["a"])(this,"refractionManager",void 0),Object(l["a"])(this,"glassMesh1Controller",void 0),Object(l["a"])(this,"mousePosX",void 0),Object(l["a"])(this,"mousePosY",void 0),Object(l["a"])(this,"pointer",void 0),Object(l["a"])(this,"camera",void 0),Object(l["a"])(this,"cameraZPosition",void 0),Object(l["a"])(this,"cameraPositionController",void 0),Object(l["a"])(this,"cameraTargetPosition",void 0),Object(l["a"])(this,"cameraWithMouseMoveFactor",void 0),Object(l["a"])(this,"cameraWithMouseRotateFactor",void 0),Object(l["a"])(this,"cursorLightGroup",void 0),Object(l["a"])(this,"cursorLight",void 0),Object(l["a"])(this,"cursorLightController",void 0),Object(l["a"])(this,"raycaster",void 0),Object(l["a"])(this,"intersectTardisCardObjs",void 0),Object(l["a"])(this,"intersectGlassObjs",void 0),Object(l["a"])(this,"glassSelected",void 0),Object(l["a"])(this,"glassIsRotating",void 0),Object(l["a"])(this,"cssScene",void 0),Object(l["a"])(this,"cssRenderer",void 0),Object(l["a"])(this,"cssAttachObject",void 0),Object(l["a"])(this,"carousel1",void 0),Object(l["a"])(this,"carousel2",void 0),Object(l["a"])(this,"loadingManager",void 0),Object(l["a"])(this,"animate",(function(){requestAnimationFrame(a.animate),a.updatecornerObject(),a.updateCamera(),a.updateCursorLight(),a.render(),a.stats.update()})),this.cameraZPosition=500,this.container=t,this.camera=new i["K"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new i["jb"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.stats=new b["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.scene=new i["U"],this.cssScene=new i["U"],this.cardInsideScene=new i["U"],this.reflectionScene=new i["U"],this.loadingManager=new i["A"]((function(){n&&n()}),(function(e,t,n){r&&r(e,t,n)}),(function(e){o&&o(e)}));var c="./cube1/",u=[c+"px.jpg",c+"nx.jpg",c+"py.jpg",c+"ny.jpg",c+"pz.jpg",c+"nz.jpg"],v=new i["i"](this.loadingManager).load(u);v.mapping=i["h"],this.scene.environment=v;var f=new i["l"];f.intensity=.8,f.position.x=80,f.position.y=80,f.position.z=100,this.scene.add(f),this.refractionManager=new S["a"](this.scene,this.container,this.renderer,this.camera);var m=new i["E"](new F["a"](40,40,40,5,5),new i["G"]({})),g=new i["E"](new i["c"](40,40,40),new i["F"]({}));g.visible=!1,m.add(g),m.rotation.set(1,1,1),this.refractionManager.addRefractionMesh(m,!0,65280,4219135,1.3,.8),this.glassMesh1Controller=new _["a"](m,.2,.1);var y=new h["a"](this.scene,this.camera);y.clear=!0;var x=new h["a"](this.cardInsideScene,this.camera);x.clearDepth=!0,x.clear=!1,this.composer=new d["a"](this.renderer,new i["hb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)),this.composer.addPass(y),this.composer.addPass(x),this.composer.renderTarget1.stencilBuffer=!0,this.composer.renderTarget2.stencilBuffer=!0,this.refractionManager.scene.background=this.composer.renderTarget2.texture;var j=new w["a"](100,400,110,this.scene,this.cardInsideScene,new i["fb"](0,200,0),new i["o"],w["b"].RECT,null);j.addSkybox(v);var O=new i["u"],C=new i["ab"](this.loadingManager).load("./title.png"),P=new i["E"](new i["M"](390,90,1,1),new i["F"]({color:16777215,alphaMap:C,alphaToCoverage:!0,transparent:!0}));O.add(P),O.position.copy(j.cardMesh.position),j.addVisibleObjectGroup(O),this.cssAttachObject=j.cardMesh;var M=new w["a"](200,200,111,this.scene,this.cardInsideScene,new i["fb"](0,0,0),new i["o"],w["b"].RECT,this.reflectionScene,12636368),T=new i["ab"](this.loadingManager).load("./marble/diffuse.jpg"),D=new i["ab"](this.loadingManager).load("./marble/normal.jpg"),z=new i["ab"](this.loadingManager).load("./marble/specular.jpg"),E=[T,D,z];E.forEach((function(e){e.wrapS=e.wrapT=i["S"],e.repeat.set(1,2)}));var W=new i["u"],A=new i["ab"](this.loadingManager).load("./jutabag3ds/texture/normal.jpg"),N=new R["a"](this.loadingManager);N.setResourcePath("./jutabag3ds/texture/"),N.load("./jutabag3ds/portalgun.3ds",(function(e){if(e instanceof i["u"]){e.traverse((function(e){e instanceof i["E"]&&(console.log(e.material),e.material.color=new i["g"](16777215),e.material.normalMap=A)})),e.scale.multiplyScalar(80),e.position.x-=20,e.position.y+=10,e.position.z-=80,e.rotation.x=-2,e.rotation.z=.7,W.add(e);var t=new i["E"](new i["M"](500,500,1,1),new i["H"]({color:13434879,map:T,normalMap:D,normalScale:new i["eb"](.1,.1),specularColorMap:z,specularIntensity:4,reflectivity:1,metalness:.2,roughness:.1,clearcoat:.5}));t.position.set(0,0,-150),W.add(t),W.position.copy(M.cardMesh.position),M.addVisibleObjectGroup(W)}}));var L=new w["a"](100,100,112,this.scene,this.cardInsideScene,new i["fb"](200,0,0),new i["o"],w["b"].CIRCLE,this.reflectionScene,13680848);this.carousel1=new k({numOfVisiblePics:5,planeWidth:80,planeHeight:80,carouselArrayRadius:120});var I=new i["ab"](this.loadingManager).load("./painting/crop1_diffuse.png"),U=new i["ab"](this.loadingManager).load("./painting/crop1_normal.png"),V=new i["ab"](this.loadingManager).load("./painting/crop1_specular.png");E=[I,U,V];var G=new i["E"](new i["M"](500,500,1,1),new i["H"]({map:I,normalMap:U,specularColorMap:V,normalScale:new i["eb"](.4,.4),specularIntensity:.2,reflectivity:.1,metalness:.1,roughness:.4}));G.position.set(0,0,-150);var H=new i["u"];H.add(this.carousel1),H.add(G),H.position.copy(L.cardMesh.position),L.addVisibleObjectGroup(H);var B=new w["a"](100,100,113,this.scene,this.cardInsideScene,new i["fb"](-200,0,0),new i["o"],w["b"].CIRCLE,this.reflectionScene,10535056);this.carousel2=new k({numOfVisiblePics:4,planeWidth:70,planeHeight:70,carouselArrayRadius:120});var X=new i["ab"](this.loadingManager).load("./painting/crop2_diffuse.png"),Y=new i["ab"](this.loadingManager).load("./painting/crop2_normal.png"),q=new i["ab"](this.loadingManager).load("./painting/crop2_specular.png");E=[X,Y],G=new i["E"](new i["M"](500,500,1,1),new i["H"]({color:16777088,map:X,normalMap:Y,specularColorMap:q,normalScale:new i["eb"](.5,.5),specularIntensity:.2,reflectivity:.8,metalness:0,roughness:.2})),G.position.set(0,0,-150);var $=new i["u"];$.add(this.carousel2),$.add(G),$.position.copy(B.cardMesh.position),B.addVisibleObjectGroup($);var Z=new i["N"](1e3,400),Q=new p(Z,this.reflectionScene,{flowDirection:new i["eb"](1,1),textureWidth:512,textureHeight:512});Q.position.z+=200,Q.position.y-=110,Q.rotation.x=-.5*Math.PI,this.scene.add(Q),this.cameraTargetPosition=new i["fb"](0,0,this.cameraZPosition),this.camera.position.copy(this.cameraTargetPosition),this.camera.lookAt(0,0,0),this.cameraWithMouseMoveFactor=.04,this.cameraWithMouseRotateFactor=.015,this.cameraPositionController=new _["b"](this.camera.position,.5,.05),window.addEventListener("mousemove",(function(e){K.onMouseMove(e)})),this.cursorLightGroup=new i["u"],this.cursorLight=new i["O"],this.cursorLight.intensity=1,this.cursorLight.decay=1,this.cursorLight.distance=200,this.cursorLight.color=new i["g"](11193599),this.cursorLightGroup.add(this.cursorLight),this.scene.add(this.cursorLightGroup),this.cursorLightController=new _["a"](this.cursorLightGroup,.3,.1),this.raycaster=new i["R"],this.intersectTardisCardObjs=[],this.intersectTardisCardObjs.push(j.cardMesh,M.cardMesh,L.cardMesh,B.cardMesh),this.intersectGlassObjs=[],this.glassSelected=void 0,this.glassIsRotating=!1,this.intersectGlassObjs.push(g),this.mousePosX=0,this.mousePosY=0,this.pointer=new i["eb"];var K=this;window.addEventListener("resize",(function(){K.onWindowResize()})),window.addEventListener("click",(function(e){K.onClick(e)})),this.animate()}return Object(c["a"])(e,[{key:"render",value:function(){this.composer.render(),this.renderer.clearDepth(),this.refractionManager.render(),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.refractionManager.onWindowResize(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.cssRenderer&&this.cssRenderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseMove",value:function(e){var t=this;this.mousePosX=e.clientX,this.mousePosY=e.clientY,this.pointer.x=e.clientX/window.innerWidth*2-1,this.pointer.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var n=this.raycaster.intersectObjects(this.intersectGlassObjs,!1);if(1!=n.length||this.glassIsRotating||this.glassSelected===n[0].object.parent){if(0==n.length&&!this.glassIsRotating&&void 0!==this.glassSelected){console.log("out"),this.glassIsRotating=!0;var r=this.glassSelected,o=this.glassSelected["refractionObject"];C.tweenEuler(this.glassSelected.rotation,new i["o"](1,1,1),(function(e){r.rotation.copy(e)}),(function(){t.glassIsRotating=!1}),500),C.tweenNumber(0,1,(function(e){o.refractionMaterialUniforms["absorbColor"].value.b=e}),(function(){}),500),this.glassSelected=void 0}}else{console.log("in"),this.glassIsRotating=!0;var a=n[0].object.parent,s=a?a["refractionObject"]:null;a instanceof i["E"]&&s instanceof S["b"]&&(this.glassSelected=a,C.tweenEuler(this.glassSelected.rotation,new i["o"](1,6,1),(function(e){a.rotation.copy(e)}),(function(){t.glassIsRotating=!1}),500),C.tweenNumber(1,0,(function(e){s.refractionMaterialUniforms["absorbColor"].value.b=e}),(function(){}),500))}}},{key:"onClick",value:function(e){var t=this;if(!this.glassSelected){var n=this.raycaster.intersectObjects(this.intersectTardisCardObjs,!1);if(1==n.length){var r=n[0];C.tweenThreeVector3(this.cameraTargetPosition,new i["fb"](r.object.position.x,r.object.position.y,this.cameraTargetPosition.z),(function(e){t.cameraTargetPosition.copy(e)}),(function(){}),750),this.carousel1.clickToRotate(this.raycaster,(function(e){return console.log("new carousel img index",e),"https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")})),this.carousel2.clickToChangeTex(this.raycaster,(function(e){return console.log("new carousel img index",e),"https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")}))}}}},{key:"getRaycastPos",value:function(e,t){var n=2*e/window.innerWidth-1,r=1-2*t/window.innerHeight,o=new i["fb"](n,r,.995);return o.unproject(this.camera),o}},{key:"updatecornerObject",value:function(){var e=this.getRaycastPos(window.innerWidth-200,window.innerHeight/2);this.glassMesh1Controller.update(e)}},{key:"updateCamera",value:function(){var e=window.innerWidth/2-this.mousePosX,t=window.innerHeight/2-this.mousePosY,n=new i["fb"](-e*this.cameraWithMouseMoveFactor,t*this.cameraWithMouseMoveFactor,0).add(this.cameraTargetPosition);this.cameraPositionController.update(n);var r=this.cameraPositionController.velocity;this.camera.rotation.x=r.y*this.cameraWithMouseRotateFactor,this.camera.rotation.y=-r.x*this.cameraWithMouseRotateFactor}},{key:"updateCursorLight",value:function(){if(!isNaN(this.mousePosX)&&!isNaN(this.mousePosY)){var e=this.getRaycastPos(this.mousePosX,this.mousePosY),t=this.camera.position.z,n=(new i["fb"]).copy(e);n=n.sub(this.camera.position);var r=-200,o=(r-t)/n.z;e.copy(this.camera.position),n.multiplyScalar(o),e.add(n),e.z+=100,this.cursorLightController.update(e)}}},{key:"registerCSSCoordinator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i["fb"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;void 0==this.cssRenderer&&(this.cssRenderer=new T["b"](e),this.cssRenderer.setSize(window.innerWidth,window.innerHeight));var o=new T["a"](t);return o.position.copy(n),o.scale.multiplyScalar(r),this.cssScene.add(o),o}}]),e}(),z=a["a"].extend({data:function(){return{fpm:null,loadingStat:{loaded:1,total:2,isLoaded:!1,noLoadingStat:!1}}},mounted:function(){var e=this,t=this;if(this.$refs["canvas-container"]instanceof HTMLElement){if(this.fpm=new D(this.$refs["canvas-container"],(function(){console.log("loaded"),t.loadingStat.isLoaded=!0,setTimeout((function(){t.loadingStat.noLoadingStat=!0}),501)}),(function(t,n,r){e.loadingStat.loaded=n,e.loadingStat.total=r}),(function(e){console.error("failed to load asset: "+e),t.loadingStat.isLoaded=!0})),this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-glass"]instanceof HTMLElement){var n=this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-glass"],new i["fb"](0,20,10));n.setFollowObject(this.fpm.glassMesh1Controller.object,new i["fb"])}this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-test"]instanceof HTMLElement&&this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-test"],new i["fb"](-200,110,0))}},methods:{onGlassClick:function(){alert("glass clicked!")}}}),E=z,W=(n("32a7"),n("2877")),A=Object(W["a"])(E,r,o,!1,null,"530f970e",null);t["default"]=A.exports},"4acd":function(e,t,n){},"4e0a":function(e,t,n){"use strict";function r(e){try{var t=n("5d16")("./"+e+"/V.glsl"),r=n("8e1c")("./"+e+"/F.glsl");return[t,r]}catch(o){return console.error("failed to fetch shader",o),["",""]}}n.d(t,"a",(function(){return r}))},5303:function(e,t,n){var r={"./GlassFrontShader/V.glsl":"c444"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="5303"},"5d16":function(e,t,n){var r={"./CardSkyboxShader/V.glsl":"8437","./CarouselBasicShader/V.glsl":"f4ce","./FresnelShader/V.glsl":"8c9f","./GlassFrontShader/V.glsl":"c182","./ParticleShader/V.glsl":"b837","./Refraction2.0/GlassFrontShader/V.glsl":"79c3"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="5d16"},"71cc":function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraRay;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 20000.0; \r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nfloat refractionFactor = 1.49; // glass\r\n\r\nvoid main() {\r\n\r\n\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.005;\r\n    \r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec4 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos);\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= theta2;\r\n\r\n    float samplePointX = gl_FragCoord.x / resolution.x + backToFrontDepth * offset.x;\r\n    float samplePointY = gl_FragCoord.y / resolution.y + backToFrontDepth * offset.y;\r\n    \r\n    vec3 backColor = texture2D( tBackground, vec2( samplePointX, samplePointY ) ).xyz;\r\n    // vec4 vNewSample = projectionMatrix * (vec4(vRefract, 0.0) + worldPosition);\r\n    // vRefractOffset = vNewSample.xy / vNewSample.w;\r\n    // // vNormal = normal;\r\n    // vec3 vRefractOffsetT = vRefract + 0.5;\r\n    // gl_FragColor = vec4(backColor * 0.5 + vNormal * 0.2 + depthColor * 0.1, 1.0);\r\n    gl_FragColor = vec4(backColor, 1.0);\r\n    // gl_FragColor = vec4(vec3(backToFrontDepth) * 100.0, 1.0);\r\n    // gl_FragColor = vec4(offset.xy / offset.w + 0.5, 0.0, 1.0);\r\n    // gl_FragColor = vec4(vec3(theta2), 1.0);\r\n\r\n    // gl_FragColor = vec4(vec3(gl_FragCoord.z / gl_FragCoord.w - fragColor2.x * 10.0) / 2000.0, 1.0);\r\n}"},"79c3":function(e,t){e.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraPosition = cameraPosition;\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n}\r\n"},"7bcb":function(e,t){e.exports="uniform samplerCube tCube;\r\nvarying vec3 vReflect;\r\nvarying vec3 vRefract[3];\r\nvarying float vReflectionFactor;\r\nvarying vec2 vUv;\r\n\r\nuniform sampler2D tNormal;\r\n\r\nvoid main() {\r\n\r\n    vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\r\n    vec4 refractedColor = vec4( 1.0 );\r\n\r\n    vec3 tnm = vec3(texture2D(tNormal, vUv));\r\n    tnm = tnm * 2.0 - 1.0;\r\n    tnm = 0.0 * tnm;\r\n    // tnm *= 0.01;\r\n    refractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) - tnm ).r;\r\n    refractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) - tnm ).g;\r\n    refractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) - tnm ).b;\r\n\r\n    gl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\r\n}"},"7d52":function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return x}));var r=n("3835"),o=n("bee2"),i=n("d4ec"),a=n("ade3"),s=(n("d3b7"),n("159b"),n("38cf"),n("5a89")),c=n("4721"),l=n("7612");function d(e){try{var t=n("5303")("./"+e+"/V.glsl"),r=n("08fd")("./"+e+"/F.glsl");return[t,r]}catch(o){return console.error("failed to fetch shader",o),["",""]}}var h,u,v,f,m,p,g,b=n("61d9"),w=Object(o["a"])((function e(t,n,o,c,l,h,u,v,f){if(Object(i["a"])(this,e),Object(a["a"])(this,"mesh",void 0),Object(a["a"])(this,"originalMaterial",void 0),Object(a["a"])(this,"refractionMaterial",void 0),Object(a["a"])(this,"backColor",void 0),Object(a["a"])(this,"refractionMaterialUniforms",void 0),this.mesh=n,this.mesh["refractionObject"]=this,this.mesh.material instanceof Array){this.originalMaterial=new Array;for(var m=0;m<this.mesh.material.length;m++)this.originalMaterial.push(this.mesh.material[m].clone())}else this.originalMaterial=this.mesh.material.clone();this.backColor=h,this.refractionMaterialUniforms={resolution:{value:o},tBackground:{value:c},tBackDepth:{value:l},tSkybox:{value:t.environment},refractionFactor:{value:v},opacity:{value:f},absorbColor:{value:new s["g"](u)}};var p=d("GlassFrontShader"),g=Object(r["a"])(p,2),b=g[0],w=g[1];this.refractionMaterial=new s["V"]({vertexShader:b,fragmentShader:w,uniforms:this.refractionMaterialUniforms,side:s["t"]})})),y=function(){function e(t,n,r,o){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512;Object(i["a"])(this,e),Object(a["a"])(this,"container",void 0),Object(a["a"])(this,"backgroundScene",void 0),Object(a["a"])(this,"scene",void 0),Object(a["a"])(this,"renderer",void 0),Object(a["a"])(this,"camera",void 0),Object(a["a"])(this,"frontScene",void 0),Object(a["a"])(this,"backdepthTexture",void 0),Object(a["a"])(this,"backRenderTarget",void 0),Object(a["a"])(this,"refractionObjectList",void 0),Object(a["a"])(this,"suResolution",void 0),this.container=n,this.backgroundScene=t,this.scene=new s["U"],this.renderer=r,this.camera=o,this.scene.environment=this.backgroundScene.environment,this.frontScene=new s["U"],this.backdepthTexture=new s["k"](c,c,s["s"]),this.backRenderTarget=new s["ib"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio),this.backRenderTarget.depthBuffer=!0,this.backRenderTarget.depthTexture=this.backdepthTexture,this.backRenderTarget.depthTexture.type=s["db"],this.frontScene.background=this.backRenderTarget.texture,this.refractionObjectList=[],this.suResolution=new s["eb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)}return Object(o["a"])(e,[{key:"addRefractionMesh",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16777215,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.49,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,a=new s["g"](n);t&&(e.material=new s["H"]({color:a,transparent:!0,opacity:.5,metalness:1,reflectivity:.1,roughness:0,clearcoat:1,side:s["b"]})),this.refractionObjectList.push(new w(this.backgroundScene,e,this.suResolution,this.backRenderTarget.texture,this.backRenderTarget.depthTexture,a,r,o,i)),this.scene.add(e)}},{key:"onWindowResize",value:function(){this.suResolution.x=this.container.offsetWidth*window.devicePixelRatio,this.suResolution.y=this.container.offsetHeight*window.devicePixelRatio}},{key:"render",value:function(){var e=this;this.refractionObjectList.forEach((function(t){t.mesh.material=t.originalMaterial,e.scene.add(t.mesh)})),this.renderer.setRenderTarget(this.backRenderTarget),this.renderer.render(this.scene,this.camera),this.refractionObjectList.forEach((function(t){t.mesh.material=t.refractionMaterial,e.frontScene.add(t.mesh)})),this.renderer.setRenderTarget(null),this.renderer.render(this.frontScene,this.camera)}}]),e}();function x(e){h=e,v=new s["K"](45,window.innerWidth/window.innerHeight,1,5e3),v.position.set(30,20,200),v.lookAt(0,0,0),p=new s["U"],u=new s["jb"]({antialias:!0,alpha:!0}),u.setClearColor(16777215),u.setPixelRatio(window.devicePixelRatio),u.setSize(window.innerWidth,window.innerHeight),h.appendChild(u.domElement),f=new c["a"](v,h),h.style.position="absolute",h.style.top="0px",h.style.left="0px",m=new b["Stats"],m.domElement.style.zIndex="100",h.appendChild(m.domElement);var t="./cube/",n=[t+"px.jpg",t+"nx.jpg",t+"py.jpg",t+"ny.jpg",t+"pz.jpg",t+"nz.jpg"],r=(new s["i"]).load(n);r.mapping=s["h"],p.background=r,p.environment=r;var o=new s["l"];o.position.x=300,o.position.y=200,o.position.z=100,p.add(o);var i=(new s["ab"]).load("./checkerboard.jpg");i.wrapS=i.wrapT=s["S"],i.repeat.set(10,10);var a=new s["F"]({map:i,side:s["m"]}),d=new s["N"](1e3,1e3,1,1),w=new s["E"](d,a);w.position.y-=20.1,w.rotation.x=Math.PI/2,g=new y(p,h,u,v);var x=new s["E"](new l["a"](40,40,40,5,5),new s["G"]({}));x.position.x-=40;var C=new s["E"](new s["W"](20),new s["G"]({})),P=new s["E"](new s["j"](20,20,80,36),new s["G"]({}));P.position.x+=40,P.position.y+=20,g.addRefractionMesh(x,!0,0,0),g.addRefractionMesh(C,!0,24576,24576),g.addRefractionMesh(P,!0,1587,1587);var M=new s["E"](new s["W"](20),new s["G"]({color:16711680}));M.position.copy(x.position),M.position.z-=50,p.add(M),window.addEventListener("resize",j),O()}function j(){v.aspect=window.innerWidth/window.innerHeight,v.updateProjectionMatrix(),g.onWindowResize(),u.setSize(window.innerWidth,window.innerHeight)}function O(){requestAnimationFrame(O),C(),f.update(),m.update()}function C(){g.render()}},8437:function(e,t){e.exports="varying vec3 vPos;\r\n\r\nvoid main() {\r\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vPos = worldPosition.xyz - cameraPosition;\r\n}\r\n"},"85ec":function(e,t,n){},"8c9f":function(e,t){e.exports="uniform float mRefractionRatio;\r\nuniform float mFresnelBias;\r\nuniform float mFresnelScale;\r\nuniform float mFresnelPower;\r\n\r\nvarying vec3 vReflect;\r\nvarying vec3 vRefract[3];\r\nvarying float vReflectionFactor;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n\r\n    vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n\r\n    vec3 I = worldPosition.xyz - cameraPosition;\r\n\r\n    vReflect = reflect( I, worldNormal );\r\n    vRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );\r\n    vRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );\r\n    vRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );\r\n    vReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );\r\n\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n}\r\n"},"8e1c":function(e,t,n){var r={"./CardSkyboxShader/F.glsl":"91bc","./CarouselBasicShader/F.glsl":"1333","./FresnelShader/F.glsl":"7bcb","./GlassFrontShader/F.glsl":"71cc","./ParticleShader/F.glsl":"d32d","./Refraction2.0/GlassFrontShader/F.glsl":"16a7"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="8e1c"},"91bc":function(e,t){e.exports="uniform samplerCube tCube;\r\nvarying vec3 vPos;\r\n\r\nvoid main() {\r\n    vec4 reflectedColor = textureCube( tCube, vec3(-vPos.x, vPos.yz) );\r\n    gl_FragColor = reflectedColor;\r\n}"},b837:function(e,t){e.exports="precision highp float;\r\n\r\nuniform mat4 modelViewMatrix;\r\nuniform mat4 projectionMatrix;\r\n\r\nuniform vec2 uv;\r\nattribute vec3 position;\r\nattribute vec3 vPos;\r\n\r\nattribute vec3  customColor;\r\nattribute float customOpacity;\r\nattribute float customSize;\r\nattribute float customAngle;\r\nattribute float customVisible;  // float used as boolean (0 = false, 1 = true)\r\n\r\nvarying vec2 vUv;\r\nvarying vec4  vColor;\r\nvarying float vAngle;\r\n\r\nvoid main()\r\n{\r\n\tif ( customVisible > 0.5 ) \t\t\t\t// true\r\n\t\tvColor = vec4( customColor, customOpacity ); //     set color associated to vertex; use later in fragment shader.\r\n\telse\t\t\t\t\t\t\t// false\r\n\t\tvColor = vec4(0.0, 0.0, 0.0, 0.0); \t\t//     make particle invisible.\r\n\t\t\r\n\tvAngle = customAngle;\r\n\r\n\tvec4 mvPosition = modelViewMatrix * vec4( vPos + position, 1.0 );\r\n\tgl_PointSize = customSize * ( 300.0 / length( mvPosition.xyz ) );     // scale particles as objects in 3D space\r\n\tgl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n    // gl_Position = projectionMatrix * modelViewMatrix * vec4( vPos + position, 1.0 );\r\n}"},c182:function(e,t){e.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraRay;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraRay = normalize(vWorldPosition.xyz - cameraPosition);\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n}\r\n"},c444:function(e,t){e.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraPosition = cameraPosition;\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n}\r\n"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("ThreeFrontpageTest")],1)},i=[],a=n("44ec"),s=r["a"].extend({components:{ThreeFrontpageTest:a["default"]}}),c=s,l=(n("034f"),n("2877")),d=Object(l["a"])(c,o,i,!1,null,null,null),h=d.exports,u=n("2f62"),v=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f"));r["a"].use(v["a"]);var f=[{path:"/",name:"Home",component:function(){return Promise.resolve().then(n.bind(null,"44ec"))}},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/ThreeSceneTest",name:"ThreeSceneTest",component:function(){return n.e("chunk-728f3a93").then(n.bind(null,"1da8"))}},{path:"/ThreeGlassRefractionTest",name:"ThreeGlassRefractionTest",component:function(){return n.e("chunk-35cc0210").then(n.bind(null,"b7b6"))}}],m=new v["a"]({mode:"history",base:"/fp-test-1/",routes:f}),p=m;r["a"].use(u["a"]);var g=new u["a"].Store({state:{mouseX:0,mouseY:0},mutations:{onMouseMove:function(e,t){e.mouseX=t.clientX,e.mouseY=t.clientY}}}),b=g;r["a"].config.productionTip=!1,r["a"].use(u["a"]),new r["a"]({router:p,store:b,render:function(e){return e(h)}}).$mount("#app")},d32d:function(e,t){e.exports="precision highp float;\r\n\r\nuniform sampler2D texture;\r\nvarying vec2 vUv;\r\nvarying vec4 vColor;\r\nvarying float vAngle;\r\nvoid main()\r\n{\r\n\tgl_FragColor = vColor;\r\n\t\r\n\tfloat c = cos(vAngle);\r\n\tfloat s = sin(vAngle);\r\n\t// vec2 rotatedUV = vec2(c * (gl_PointCoord.x - 0.5) + s * (gl_PointCoord.y - 0.5) + 0.5,\r\n\t//                       c * (gl_PointCoord.y - 0.5) - s * (gl_PointCoord.x - 0.5) + 0.5);  // rotate UV coordinates to rotate texture\r\n    // vec4 rotatedTexture = texture2D( texture,  rotatedUV );\r\n    vec4 rotatedTexture = texture2D( texture,  vUv );\r\n\tgl_FragColor = rotatedTexture;    // sets an otherwise white particle texture to desired color\r\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n}"},f430:function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\nuniform samplerCube tSkybox;\r\nuniform vec3 absorbColor;\r\nuniform float refractionFactor;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 5000.0;\r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nvoid main() {\r\n\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.25;\r\n    \r\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\r\n    vCameraRay = normalize(vCameraRay);\r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\r\n    offset = normalize(offset);\r\n\r\n    // reflect\r\n    vec3 vReflect = reflect( vCameraRay, vNormal );\r\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= sinTheta2;\r\n    offset *= 50.0;\r\n\r\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\r\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\r\n\r\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\r\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\r\n\r\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\r\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\r\n    \r\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\r\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\r\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\r\n\r\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\r\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\r\n\r\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\r\n\r\n    // gl_FragColor = vec4(refCol, 1.0);\r\n    float reflectionCoeff = 0.5 * pow(sinTheta1, 4.0);\r\n    // reflectionCoeff = 1.0;\r\n    gl_FragColor = vec4(mix(backColor + absorbColor, refCol, reflectionCoeff), 1.0);\r\n    // gl_FragColor = vec4(vec3(backDepthlinear*0.01), 1.0);\r\n}"},f4ce:function(e,t){e.exports="varying vec2 vUv;\r\nvoid main() {\r\n    vUv = uv;\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}"},fb12:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g}));var r=n("d4ec"),o=n("bee2"),i=n("257e"),a=n("262e"),s=n("2caf"),c=n("ade3"),l=(n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("ac1f"),n("00b4"),n("5a89")),d=new l["fb"],h=new l["P"],u=new l["fb"],v=function(e){Object(a["a"])(n,e);var t=Object(s["a"])(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");return Object(r["a"])(this,n),e=t.call(this),Object(c["a"])(Object(i["a"])(e),"element",void 0),Object(c["a"])(Object(i["a"])(e),"followObject",void 0),Object(c["a"])(Object(i["a"])(e),"followObjectOffset",void 0),e.element=o,e.element.style.position="absolute",e.element.style.pointerEvents="all",null!==o.parentNode?o.parentNode.removeChild(o):document.removeChild(o),e.followObject=null,e.followObjectOffset=new l["fb"],e}return Object(o["a"])(n,[{key:"setFollowObject",value:function(e,t){this.followObject=e,this.followObjectOffset=t}}]),n}(l["I"]),f=function(e){Object(a["a"])(n,e);var t=Object(s["a"])(n);function n(e){var o;return Object(r["a"])(this,n),o=t.call(this,e),Object(c["a"])(Object(i["a"])(o),"rotation2D",void 0),o.rotation2D=0,o}return Object(o["a"])(n)}(v),m=new l["D"],p=new l["D"],g=function(){function e(t){Object(r["a"])(this,e),Object(c["a"])(this,"domElement",void 0),Object(c["a"])(this,"cameraElement",void 0),Object(c["a"])(this,"_width",void 0),Object(c["a"])(this,"_height",void 0),Object(c["a"])(this,"_widthHalf",void 0),Object(c["a"])(this,"_heightHalf",void 0),Object(c["a"])(this,"cache",void 0),this._width=0,this._height=0,this._widthHalf=0,this._heightHalf=0,this.cache={camera:{fov:0,style:""},objects:new WeakMap},this.domElement=void 0!==t?t:document.createElement("div"),this.domElement.style.position="absolute",this.domElement.style.overflow="visible",this.domElement.style.pointerEvents="none",this.cameraElement=document.createElement("div"),this.cameraElement.style.overflow="visible",this.cameraElement.style.transformStyle="preserve-3d",this.cameraElement.style.pointerEvents="none",t.appendChild(this.cameraElement)}return Object(o["a"])(e,[{key:"getSize",value:function(){return{width:this._width,height:this._height}}},{key:"render",value:function(e,t){var n=t.projectionMatrix.elements[5]*this._heightHalf;this.cache.camera.fov!==n&&(this.domElement.style.perspective=n+"px",this.cache.camera.fov=n),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld();var r="translateZ("+n+"px)"+this.getCameraCSSMatrix(t.matrixWorldInverse),o=r+"translate("+this._widthHalf+"px,"+this._heightHalf+"px)";this.cache.camera.style!==o&&(this.cameraElement.style.transform=o,this.cache.camera.style=o),this.renderObject(e,e,t,r)}},{key:"setSize",value:function(e,t){this._width=e,this._height=t,this._widthHalf=this._width/2,this._heightHalf=this._height/2,this.domElement.style.width=this._width+"px",this.domElement.style.height=this._height+"px",this.cameraElement.style.width=this._width+"px",this.cameraElement.style.height=this._height+"px"}},{key:"epsilon",value:function(e){return Math.abs(e)<1e-10?0:e}},{key:"getCameraCSSMatrix",value:function(e){var t=e.elements;return"matrix3d("+this.epsilon(t[0])+","+this.epsilon(-t[1])+","+this.epsilon(t[2])+","+this.epsilon(t[3])+","+this.epsilon(t[4])+","+this.epsilon(-t[5])+","+this.epsilon(t[6])+","+this.epsilon(t[7])+","+this.epsilon(t[8])+","+this.epsilon(-t[9])+","+this.epsilon(t[10])+","+this.epsilon(t[11])+","+this.epsilon(t[12])+","+this.epsilon(-t[13])+","+this.epsilon(t[14])+","+this.epsilon(t[15])+")"}},{key:"getObjectCSSMatrix",value:function(e){var t=e.elements,n="matrix3d("+this.epsilon(t[0])+","+this.epsilon(t[1])+","+this.epsilon(t[2])+","+this.epsilon(t[3])+","+this.epsilon(-t[4])+","+this.epsilon(-t[5])+","+this.epsilon(-t[6])+","+this.epsilon(-t[7])+","+this.epsilon(t[8])+","+this.epsilon(t[9])+","+this.epsilon(t[10])+","+this.epsilon(t[11])+","+this.epsilon(t[12])+","+this.epsilon(t[13])+","+this.epsilon(t[14])+","+this.epsilon(t[15])+")";return n}},{key:"renderObject",value:function(e,t,n,r){if(e instanceof v){var o=e.visible&&e.layers.test(n.layers);if(e.element.style.display=o?"":"none",o){var i;void 0!=e.followObject&&(e.position.copy(e.followObject.position),e.position.add(e.followObjectOffset)),e instanceof f?(m.copy(n.matrixWorldInverse),m.transpose(),0!==e.rotation2D&&m.multiply(p.makeRotationZ(e.rotation2D)),e.matrixWorld.decompose(d,h,u),m.setPosition(d),m.scale(u),m.elements[3]=0,m.elements[7]=0,m.elements[11]=0,m.elements[15]=1,i=this.getObjectCSSMatrix(m)):i=this.getObjectCSSMatrix(e.matrixWorld);var a=e.element,s=this.cache.objects.get(e);if(void 0===s||s.style!==i){a.style.transform=i;var c={style:i};this.cache.objects.set(e,c)}a.parentNode!==this.cameraElement&&this.cameraElement.appendChild(a)}}for(var l=0,g=e.children.length;l<g;l++)e.children[l]instanceof v&&this.renderObject(e.children[l],t,n,r)}}]),e}()}});
//# sourceMappingURL=app.58dfd9d5.js.map
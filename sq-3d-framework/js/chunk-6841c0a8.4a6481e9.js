(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6841c0a8"],{"057f":function(e,t,r){var n=r("c6b6"),o=r("fc6a"),a=r("241c").f,i=r("4dae"),c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return i(c)}};e.exports.f=function(e){return c&&"Window"==n(e)?s(e):a(o(e))}},"08fd":function(e,t,r){var n={"./GlassFrontShader/F.glsl":"f430"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="08fd"},1148:function(e,t,r){"use strict";var n=r("da84"),o=r("5926"),a=r("577e"),i=r("1d80"),c=n.RangeError;e.exports=function(e){var t=a(i(this)),r="",n=o(e);if(n<0||n==1/0)throw c("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r}},"159b":function(e,t,r){var n=r("da84"),o=r("fdbc"),a=r("785a"),i=r("17c2"),c=r("9112"),s=function(e){if(e&&e.forEach!==i)try{c(e,"forEach",i)}catch(t){e.forEach=i}};for(var f in o)o[f]&&s(n[f]&&n[f].prototype);s(a)},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,o=r("a640"),a=o("forEach");e.exports=a?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"38cf":function(e,t,r){var n=r("23e7"),o=r("1148");n({target:"String",proto:!0},{repeat:o})},"428f":function(e,t,r){var n=r("da84");e.exports=n},"4dae":function(e,t,r){var n=r("da84"),o=r("23cb"),a=r("07fa"),i=r("8418"),c=n.Array,s=Math.max;e.exports=function(e,t,r){for(var n=a(e),f=o(t,n),l=o(void 0===r?n:r,n),u=c(s(l-f,0)),v=0;f<l;f++,v++)i(u,v,e[f]);return u.length=v,u}},5303:function(e,t,r){var n={"./GlassFrontShader/V.glsl":"c444"};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id="5303"},6189:function(e,t,r){},"746f":function(e,t,r){var n=r("428f"),o=r("1a2d"),a=r("e538"),i=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||i(t,e,{value:a.f(e)})}},7612:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("5a89");const o=new n["Fb"];function a(e,t,r,n,a,i){const c=2*Math.PI*a/4,s=Math.max(i-2*a,0),f=Math.PI/4;o.copy(t),o[n]=0,o.normalize();const l=.5*c/(c+s),u=1-o.angleTo(e)/f;if(1===Math.sign(o[r]))return u*l;{const e=s/(c+s);return e+l+l*(1-u)}}class i extends n["g"]{constructor(e=1,t=1,r=1,o=2,i=.1){if(o=2*o+1,i=Math.min(e/2,t/2,r/2,i),super(1,1,1,o,o,o),1===o)return;const c=this.toNonIndexed();this.index=null,this.attributes.position=c.attributes.position,this.attributes.normal=c.attributes.normal,this.attributes.uv=c.attributes.uv;const s=new n["Fb"],f=new n["Fb"],l=new n["Fb"](e,t,r).divideScalar(2).subScalar(i),u=this.attributes.position.array,v=this.attributes.normal.array,d=this.attributes.uv.array,h=u.length/6,b=new n["Fb"],g=.5/o;for(let n=0,p=0;n<u.length;n+=3,p+=2){s.fromArray(u,n),f.copy(s),f.x-=Math.sign(f.x)*g,f.y-=Math.sign(f.y)*g,f.z-=Math.sign(f.z)*g,f.normalize(),u[n+0]=l.x*Math.sign(s.x)+f.x*i,u[n+1]=l.y*Math.sign(s.y)+f.y*i,u[n+2]=l.z*Math.sign(s.z)+f.z*i,v[n+0]=f.x,v[n+1]=f.y,v[n+2]=f.z;const o=Math.floor(n/h);switch(o){case 0:b.set(1,0,0),d[p+0]=a(b,f,"z","y",i,r),d[p+1]=1-a(b,f,"y","z",i,t);break;case 1:b.set(-1,0,0),d[p+0]=1-a(b,f,"z","y",i,r),d[p+1]=1-a(b,f,"y","z",i,t);break;case 2:b.set(0,1,0),d[p+0]=1-a(b,f,"x","z",i,e),d[p+1]=a(b,f,"z","x",i,r);break;case 3:b.set(0,-1,0),d[p+0]=1-a(b,f,"x","z",i,e),d[p+1]=1-a(b,f,"z","x",i,r);break;case 4:b.set(0,0,1),d[p+0]=1-a(b,f,"x","y",i,e),d[p+1]=1-a(b,f,"y","x",i,t);break;case 5:b.set(0,0,-1),d[p+0]=a(b,f,"x","y",i,e),d[p+1]=1-a(b,f,"y","x",i,t);break}}}}},"7d52":function(e,t,r){"use strict";r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return x})),r.d(t,"c",(function(){return w}));var n=r("3835"),o=r("bee2"),a=r("d4ec"),i=r("ade3"),c=(r("d3b7"),r("159b"),r("38cf"),r("5a89")),s=r("4721"),f=r("7612");function l(e){try{var t=r("5303")("./"+e+"/V.glsl"),n=r("08fd")("./"+e+"/F.glsl");return[t,n]}catch(o){return console.error("failed to fetch shader",o),["",""]}}var u,v,d,h,b,g,p,m=r("61d9"),y=Object(o["a"])((function e(t,r,o,s,f,u,v,d,h,b){if(Object(a["a"])(this,e),Object(i["a"])(this,"mesh",void 0),Object(i["a"])(this,"originalMaterial",void 0),Object(i["a"])(this,"refractionMaterial",void 0),Object(i["a"])(this,"backColor",void 0),Object(i["a"])(this,"refractionMaterialUniforms",void 0),this.mesh=r,this.mesh["refractionObject"]=this,this.mesh.material instanceof Array){this.originalMaterial=new Array;for(var g=0;g<this.mesh.material.length;g++)this.originalMaterial.push(this.mesh.material[g].clone())}else this.originalMaterial=this.mesh.material.clone();this.backColor=v,this.refractionMaterialUniforms={resolution:{value:o},tBackground:{value:s},tBackDepth:{value:u},tDisplayImage:{value:f},tSkybox:{value:t.environment},refractionFactor:{value:h},opacity:{value:b},absorbColor:{value:new c["m"](d)},objectCenter:{value:r.position}};var p=l("GlassFrontShader"),m=Object(n["a"])(p,2),y=m[0],x=m[1];this.refractionMaterial=new c["qb"]({vertexShader:y,fragmentShader:x,uniforms:this.refractionMaterialUniforms,side:c["C"]})})),x=function(){function e(t,r,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512;Object(a["a"])(this,e),Object(i["a"])(this,"container",void 0),Object(i["a"])(this,"backgroundScene",void 0),Object(i["a"])(this,"renderer",void 0),Object(i["a"])(this,"camera",void 0),Object(i["a"])(this,"frontScene",void 0),Object(i["a"])(this,"backdepthTexture",void 0),Object(i["a"])(this,"backRenderTarget",void 0),Object(i["a"])(this,"refractionObjectList",void 0),Object(i["a"])(this,"suResolution",void 0),this.container=r,this.backgroundScene=t,this.renderer=n,this.camera=o,this.frontScene=new c["ob"],this.backdepthTexture=new c["r"](s,s,c["B"]),this.backRenderTarget=new c["Jb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio),this.backRenderTarget.depthBuffer=!0,this.backRenderTarget.depthTexture=this.backdepthTexture,this.backRenderTarget.depthTexture.type=c["Db"],this.frontScene.background=this.backRenderTarget.texture,this.frontScene.environment=this.backgroundScene.environment,this.refractionObjectList=[],this.suResolution=new c["Eb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)}return Object(o["a"])(e,[{key:"genFresnelMaterial",value:function(e){var t=c["pb"].lib["fresnel"],r=c["Cb"].clone(t.uniforms);r["tCube"].value=e;var n={fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:r},o=new c["qb"](n);return o}},{key:"addRefractionMesh",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16777215,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1.49,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.2,s=new c["m"](n);t&&(e.material=new c["X"]({color:s,transparent:!0,opacity:.5,metalness:1,reflectivity:0,roughness:0,side:c["e"]})),this.refractionObjectList.push(new y(this.backgroundScene,e,this.suResolution,this.backRenderTarget.texture,r,this.backRenderTarget.depthTexture,s,o,a,i)),this.backgroundScene.add(e)}},{key:"onWindowResize",value:function(){this.suResolution.x=this.container.offsetWidth*window.devicePixelRatio,this.suResolution.y=this.container.offsetHeight*window.devicePixelRatio}},{key:"render",value:function(){var e=this;this.refractionObjectList.forEach((function(t){t.mesh.material=t.refractionMaterial,e.frontScene.add(t.mesh)})),this.renderer.setRenderTarget(null),this.renderer.render(this.frontScene,this.camera),this.refractionObjectList.forEach((function(t){t.mesh.material=t.originalMaterial,e.backgroundScene.add(t.mesh)}))}}]),e}();function w(e){u=e,d=new c["cb"](45,window.innerWidth/window.innerHeight,1,5e3),d.position.set(30,20,200),d.lookAt(0,0,0),g=new c["ob"],v=new c["Kb"]({antialias:!0,alpha:!0}),v.setClearColor(16777215),v.setPixelRatio(window.devicePixelRatio),v.setSize(window.innerWidth,window.innerHeight),u.appendChild(v.domElement),h=new s["a"](d,u),u.style.position="absolute",u.style.top="0px",u.style.left="0px",b=new m["Stats"],b.domElement.style.zIndex="100",u.appendChild(b.domElement);var t="./cube/",r=[t+"px.jpg",t+"nx.jpg",t+"py.jpg",t+"ny.jpg",t+"pz.jpg",t+"nz.jpg"],n=(new c["o"]).load(r);n.mapping=c["n"],g.background=n,g.environment=n;var o=new c["s"];o.position.x=300,o.position.y=200,o.position.z=100,g.add(o);var a=(new c["zb"]).load("./checkerboard.jpg");a.wrapS=a.wrapT=c["mb"],a.repeat.set(10,10);var i=new c["U"]({map:a,side:c["t"]}),l=new c["fb"](1e3,1e3,1,1),y=new c["T"](l,i);y.position.y-=20.1,y.rotation.x=Math.PI/2,p=new x(g,u,v,d);var w=new c["T"](new f["a"](40,40,40,5,5),new c["W"]({}));w.position.x-=40;var P=new c["T"](new c["ub"](20),new c["W"]({})),j=new c["T"](new c["q"](20,20,80,36),new c["W"]({}));j.position.x+=40,j.position.y+=20,p.addRefractionMesh(w,!0,null,0,0),p.addRefractionMesh(P,!0,null,24576,24576),p.addRefractionMesh(j,!0,null,1587,1587);var F=new c["T"](new c["ub"](20),new c["W"]({color:16711680}));F.position.copy(w.position),F.position.z-=50,g.add(F),window.addEventListener("resize",C),k()}function C(){d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),p.onWindowResize(),v.setSize(window.innerWidth,window.innerHeight)}function k(){requestAnimationFrame(k),P(),h.update(),b.update()}function P(){p.render()}},8418:function(e,t,r){"use strict";var n=r("a04b"),o=r("9bf2"),a=r("5c6c");e.exports=function(e,t,r){var i=n(t);i in e?o.f(e,i,a(0,r)):e[i]=r}},a4d3:function(e,t,r){"use strict";var n=r("23e7"),o=r("da84"),a=r("d066"),i=r("2ba4"),c=r("c65b"),s=r("e330"),f=r("c430"),l=r("83ab"),u=r("4930"),v=r("d039"),d=r("1a2d"),h=r("e8b5"),b=r("1626"),g=r("861d"),p=r("3a9b"),m=r("d9b5"),y=r("825a"),x=r("7b0b"),w=r("fc6a"),C=r("a04b"),k=r("577e"),P=r("5c6c"),j=r("7c73"),F=r("df75"),O=r("241c"),D=r("057f"),S=r("7418"),_=r("06cf"),M=r("9bf2"),R=r("37e8"),T=r("d1e7"),z=r("f36a"),W=r("6eeb"),E=r("5692"),U=r("f772"),N=r("d012"),I=r("90e3"),L=r("b622"),B=r("e538"),V=r("746f"),q=r("d44e"),H=r("69f3"),X=r("b727").forEach,A=U("hidden"),Y="Symbol",J="prototype",$=L("toPrimitive"),G=H.set,K=H.getterFor(Y),Q=Object[J],Z=o.Symbol,ee=Z&&Z[J],te=o.TypeError,re=o.QObject,ne=a("JSON","stringify"),oe=_.f,ae=M.f,ie=D.f,ce=T.f,se=s([].push),fe=E("symbols"),le=E("op-symbols"),ue=E("string-to-symbol-registry"),ve=E("symbol-to-string-registry"),de=E("wks"),he=!re||!re[J]||!re[J].findChild,be=l&&v((function(){return 7!=j(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=oe(Q,t);n&&delete Q[t],ae(e,t,r),n&&e!==Q&&ae(Q,t,n)}:ae,ge=function(e,t){var r=fe[e]=j(ee);return G(r,{type:Y,tag:e,description:t}),l||(r.description=t),r},pe=function(e,t,r){e===Q&&pe(le,t,r),y(e);var n=C(t);return y(r),d(fe,n)?(r.enumerable?(d(e,A)&&e[A][n]&&(e[A][n]=!1),r=j(r,{enumerable:P(0,!1)})):(d(e,A)||ae(e,A,P(1,{})),e[A][n]=!0),be(e,n,r)):ae(e,n,r)},me=function(e,t){y(e);var r=w(t),n=F(r).concat(ke(r));return X(n,(function(t){l&&!c(xe,r,t)||pe(e,t,r[t])})),e},ye=function(e,t){return void 0===t?j(e):me(j(e),t)},xe=function(e){var t=C(e),r=c(ce,this,t);return!(this===Q&&d(fe,t)&&!d(le,t))&&(!(r||!d(this,t)||!d(fe,t)||d(this,A)&&this[A][t])||r)},we=function(e,t){var r=w(e),n=C(t);if(r!==Q||!d(fe,n)||d(le,n)){var o=oe(r,n);return!o||!d(fe,n)||d(r,A)&&r[A][n]||(o.enumerable=!0),o}},Ce=function(e){var t=ie(w(e)),r=[];return X(t,(function(e){d(fe,e)||d(N,e)||se(r,e)})),r},ke=function(e){var t=e===Q,r=ie(t?le:w(e)),n=[];return X(r,(function(e){!d(fe,e)||t&&!d(Q,e)||se(n,fe[e])})),n};if(u||(Z=function(){if(p(ee,this))throw te("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?k(arguments[0]):void 0,t=I(e),r=function(e){this===Q&&c(r,le,e),d(this,A)&&d(this[A],t)&&(this[A][t]=!1),be(this,t,P(1,e))};return l&&he&&be(Q,t,{configurable:!0,set:r}),ge(t,e)},ee=Z[J],W(ee,"toString",(function(){return K(this).tag})),W(Z,"withoutSetter",(function(e){return ge(I(e),e)})),T.f=xe,M.f=pe,R.f=me,_.f=we,O.f=D.f=Ce,S.f=ke,B.f=function(e){return ge(L(e),e)},l&&(ae(ee,"description",{configurable:!0,get:function(){return K(this).description}}),f||W(Q,"propertyIsEnumerable",xe,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Z}),X(F(de),(function(e){V(e)})),n({target:Y,stat:!0,forced:!u},{for:function(e){var t=k(e);if(d(ue,t))return ue[t];var r=Z(t);return ue[t]=r,ve[r]=t,r},keyFor:function(e){if(!m(e))throw te(e+" is not a symbol");if(d(ve,e))return ve[e]},useSetter:function(){he=!0},useSimple:function(){he=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!l},{create:ye,defineProperty:pe,defineProperties:me,getOwnPropertyDescriptor:we}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:Ce,getOwnPropertySymbols:ke}),n({target:"Object",stat:!0,forced:v((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(x(e))}}),ne){var Pe=!u||v((function(){var e=Z();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));n({target:"JSON",stat:!0,forced:Pe},{stringify:function(e,t,r){var n=z(arguments),o=t;if((g(t)||void 0!==e)&&!m(e))return h(t)||(t=function(e,t){if(b(o)&&(t=c(o,this,e,t)),!m(t))return t}),n[1]=t,i(ne,null,n)}})}if(!ee[$]){var je=ee.valueOf;W(ee,$,(function(e){return c(je,this)}))}q(Z,Y),N[A]=!0},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},b7b6:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{ref:"canvas-container",attrs:{id:"canvas-container"}})])},o=[],a=r("2b0e"),i=r("7d52"),c=a["a"].extend({mounted:function(){this.$refs["canvas-container"]instanceof HTMLElement&&i["c"](this.$refs["canvas-container"])}}),s=c,f=(r("b7e4"),r("2877")),l=Object(f["a"])(s,n,o,!1,null,"bb4bef88",null);t["default"]=l.exports},b7e4:function(e,t,r){"use strict";r("6189")},c444:function(e,t){e.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\nvarying vec4 vImageUVCenter;\r\n\r\nuniform vec3 objectCenter;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraPosition = cameraPosition;\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n    vImageUVCenter = vProjectionMatrix * vec4( objectCenter, 1.0 );\r\n}\r\n"},d28b:function(e,t,r){var n=r("746f");n("iterator")},e01a:function(e,t,r){"use strict";var n=r("23e7"),o=r("83ab"),a=r("da84"),i=r("e330"),c=r("1a2d"),s=r("1626"),f=r("3a9b"),l=r("577e"),u=r("9bf2").f,v=r("e893"),d=a.Symbol,h=d&&d.prototype;if(o&&s(d)&&(!("description"in h)||void 0!==d().description)){var b={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=f(h,this)?new d(e):void 0===e?d():d(e);return""===e&&(b[t]=!0),t};v(g,d),g.prototype=h,h.constructor=g;var p="Symbol(test)"==String(d("test")),m=i(h.toString),y=i(h.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=i("".replace),C=i("".slice);u(h,"description",{configurable:!0,get:function(){var e=y(this),t=m(e);if(c(b,e))return"";var r=p?C(t,7,-1):w(t,x,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:g})}},e538:function(e,t,r){var n=r("b622");t.f=n},f430:function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\nuniform sampler2D tDisplayImage;\r\n\r\nuniform samplerCube tSkybox;\r\nuniform vec3 absorbColor;\r\nuniform float refractionFactor;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\nvarying vec4 vImageUVCenter;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 5000.0;\r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nvoid main() {\r\n\r\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n    // return;\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    if (frontDepth > backDepth) {\r\n        discard;\r\n    }\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.5;\r\n    \r\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\r\n    vCameraRay = normalize(vCameraRay);\r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\r\n    offset = normalize(offset);\r\n\r\n    // reflect\r\n    vec3 vReflect = reflect( vCameraRay, vNormal );\r\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= sinTheta2;\r\n    offset *= 100.0;\r\n\r\n    offset /= backDepth;\r\n\r\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\r\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\r\n\r\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\r\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\r\n\r\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\r\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\r\n    \r\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\r\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\r\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\r\n\r\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\r\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\r\n    float sqrtDepth = sqrt(backToFrontDepth) * opacity;\r\n    float absorbFactor = sqrtDepth / (1.0 + sqrtDepth);\r\n    vec3 refractCol = mix(backColor, absorbColor, absorbFactor);\r\n\r\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\r\n\r\n    // gl_FragColor = vec4(refCol, 1.0);\r\n    float reflectionCoeff = pow(sinTheta1, 4.0);\r\n    // reflectionCoeff = 1.0;\r\n\r\n    // vec4 image = vec4(vec3(texture2D( tDisplayImage, vec2( (gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y ) )), 1.0);\r\n    // vec4 image = vec4((gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y, 1.0, 1.0);\r\n    // vec4 image = vec4(1.0, 0.0, 0.0, 1.0);\r\n\r\n    // gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    // gl_FragColor = image;\r\n    // if (gl_FragCoord.x < 600.0) {\r\n    //     gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    // }\r\n    // gl_FragColor = vec4(backColor, 1.0);\r\n    // gl_FragColor = vec4(vec3(backDepthlinear * 0.01), 1.0);\r\n}"}}]);
//# sourceMappingURL=chunk-6841c0a8.4a6481e9.js.map
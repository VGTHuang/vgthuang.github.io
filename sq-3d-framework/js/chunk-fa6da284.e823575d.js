(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa6da284"],{"0da5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[i("div",{staticClass:"loading-container",class:{"loading-container--hidden":t.loadingStat.isLoaded,"loading-container--none":t.loadingStat.noLoadingStat}},[i("div",{staticClass:"load-stat"},[i("div",{staticClass:"load-pgbar",style:{width:100*t.loadingStat.loaded/t.loadingStat.total+"%"}}),i("div",{staticClass:"load-text"},[t._v(t._s(Math.round(100*t.loadingStat.loaded/t.loadingStat.total))+" %")])])])])])},s=[],o=i("2b0e"),n=i("6970"),r=o["a"].extend({data:function(){return{fpm:null,loadingStat:{loaded:0,total:1,isLoaded:!1,noLoadingStat:!1},cardInfos:new Array}},mounted:function(){for(var t=this,e=this,i=0;i<10;i++)this.cardInfos.push({imgUrl:"card".concat(Math.floor(i%3)+1,".jpg"),url:"fakeUrl_"+i});this.$refs["canvas-container"]instanceof HTMLElement&&(this.fpm=new n["b"](this.$refs["canvas-container"],this.cardInfos,(function(){console.log("loaded"),e.loadingStat.isLoaded=!0,setTimeout((function(){e.loadingStat.noLoadingStat=!0}),501)}),(function(e,i,a){t.loadingStat.loaded=i,t.loadingStat.total=a}),(function(t){console.error("failed to load asset: "+t),e.loadingStat.isLoaded=!0}),(function(t){console.log("focused on card: ",t)})))},methods:{onGlassClick:function(){alert("glass clicked!")}}}),c=r,d=(i("6d80"),i("2877")),h=Object(d["a"])(c,a,s,!1,null,"3bcc601a",null);e["default"]=h.exports},"26e3":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return d}));var a=i("d4ec"),s=i("bee2"),o=i("ade3"),n=(i("4c53"),i("d3b7"),i("159b"),i("5a89")),r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;Object(a["a"])(this,t),Object(o["a"])(this,"damp",void 0),Object(o["a"])(this,"attract",void 0),Object(o["a"])(this,"object",void 0),Object(o["a"])(this,"velocity",void 0),Object(o["a"])(this,"childObjects",void 0),this.damp=i,this.attract=s,this.object=e,this.velocity=new n["Fb"],this.childObjects=[]}return Object(s["a"])(t,[{key:"addChildObj",value:function(t){this.childObjects.push(t)}},{key:"update",value:function(t){var e=this;this.velocity.multiplyScalar(this.damp);var i=t.sub(this.object.position);this.velocity.add(i.multiplyScalar(this.attract)),this.object.position.add(this.velocity),this.childObjects.forEach((function(t){t.position.copy(e.object.position),t.rotation.copy(e.object.rotation)}))}}]),t}(),c=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;Object(a["a"])(this,t),Object(o["a"])(this,"damp",void 0),Object(o["a"])(this,"attract",void 0),Object(o["a"])(this,"velocity",void 0),Object(o["a"])(this,"currentVec3",void 0),this.damp=i,this.attract=s,this.velocity=new n["Fb"],this.currentVec3=e}return Object(s["a"])(t,[{key:"update",value:function(t){this.velocity.multiplyScalar(this.damp);var e=(new n["Fb"]).copy(t).sub(this.currentVec3);this.velocity.add(e.multiplyScalar(this.attract)),this.currentVec3.add(this.velocity)}}]),t}();function d(){var t=0,e=0;while(0===t)t=Math.random();while(0===e)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}},"2af1":function(t,e,i){var a=i("23e7"),s=i("f748");a({target:"Math",stat:!0},{sign:s})},"4c53":function(t,e,i){"use strict";var a=i("23e7"),s=i("857a"),o=i("af03");a({target:"String",proto:!0,forced:o("sub")},{sub:function(){return s(this,"sub","","")}})},6970:function(t,e,i){"use strict";i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return l}));var a=i("d4ec"),s=i("bee2"),o=i("ade3"),n=(i("2af1"),i("d3b7"),i("159b"),i("5a89")),r=i("61d9"),c=i("26e3"),d=function(){function t(e,i,s,n,r,c){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.01;Object(a["a"])(this,t),Object(o["a"])(this,"angle",void 0),Object(o["a"])(this,"radius",void 0),Object(o["a"])(this,"z",void 0),Object(o["a"])(this,"angleTarget",void 0),Object(o["a"])(this,"radiusTarget",void 0),Object(o["a"])(this,"zTarget",void 0),Object(o["a"])(this,"angleV",void 0),Object(o["a"])(this,"radiusV",void 0),Object(o["a"])(this,"zV",void 0),Object(o["a"])(this,"momentum",void 0),Object(o["a"])(this,"attraction",void 0),Object(o["a"])(this,"relVelocity",void 0),Object(o["a"])(this,"isAlmostStatic",void 0),Object(o["a"])(this,"staticThreshold",void 0),Object(o["a"])(this,"afterStaticEvent",void 0),this.angle=e,this.radius=i,this.z=s,this.angleTarget=e,this.radiusTarget=i,this.zTarget=s,this.angleV=0,this.radiusV=0,this.zV=0,this.momentum=n,this.attraction=r,this.relVelocity=c,this.isAlmostStatic=!0,this.staticThreshold=d,this.afterStaticEvent=void 0}return Object(s["a"])(t,[{key:"getPosition",value:function(){return new n["Fb"](-this.radius*Math.cos(this.angle+Math.PI/2),this.radius*Math.sin(this.angle+Math.PI/2),-this.z)}},{key:"getRotation",value:function(){return new n["x"](0,0,-this.angle-Math.PI/2)}},{key:"nonlinear",value:function(t){return Math.sqrt(Math.abs(t))*Math.sign(t)}},{key:"update",value:function(){this.angleV=this.attraction*this.nonlinear(this.angleTarget-this.angle)+this.momentum*this.angleV,this.radiusV=this.attraction*this.nonlinear(this.radiusTarget-this.radius)+this.momentum*this.radiusV,this.zV=this.attraction*this.nonlinear(this.zTarget-this.z)+this.momentum*this.zV,this.angle+=this.relVelocity*this.angleV*.1,this.radius+=this.relVelocity*this.radiusV,this.z+=this.relVelocity*this.zV;var t=this.isAlmostStatic;this.isAlmostStatic=Math.abs(this.radiusTarget-this.radius)+Math.abs(this.angleTarget-this.angle)+Math.abs(this.zTarget-this.z)<this.staticThreshold,!t&&this.isAlmostStatic&&this.afterStaticEvent&&(this.afterStaticEvent(),this.afterStaticEvent=void 0)}}]),t}(),h=function(){function t(e,i,s){Object(a["a"])(this,t),Object(o["a"])(this,"mesh",void 0),Object(o["a"])(this,"info",void 0),Object(o["a"])(this,"controller",void 0),this.mesh=e,this.info=i,this.controller=s,this.mesh.position.copy(this.controller.getPosition()),this.mesh.rotation.copy(this.controller.getRotation())}return Object(s["a"])(t,[{key:"updateByController",value:function(){this.controller.update(),this.mesh.position.copy(this.controller.getPosition()),this.mesh.rotation.copy(this.controller.getRotation())}}]),t}(),l=function(){function t(e,i,s,l,u,v,f){var p=this,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{cardSizeX:70,cardSizeY:50,cardHelixRadius:80,cardHelixZGap:10,cardHelixRotateRadGap:.3,cardHelixFocusRadius:100,cardHelixFocusRotateRadGap:.5,cardMomentum:.85,cardAttraction:.36,cardRelVelocity:.16};Object(a["a"])(this,t),Object(o["a"])(this,"container",void 0),Object(o["a"])(this,"renderer",void 0),Object(o["a"])(this,"scene",void 0),Object(o["a"])(this,"stats",void 0),Object(o["a"])(this,"mousePosX",void 0),Object(o["a"])(this,"mousePosY",void 0),Object(o["a"])(this,"pointer",void 0),Object(o["a"])(this,"camera",void 0),Object(o["a"])(this,"cameraBasicLookAt",void 0),Object(o["a"])(this,"cameraBasicPosition",void 0),Object(o["a"])(this,"raycaster",void 0),Object(o["a"])(this,"intersectObjs",void 0),Object(o["a"])(this,"cssScene",void 0),Object(o["a"])(this,"cssRenderer",void 0),Object(o["a"])(this,"loadingManager",void 0),Object(o["a"])(this,"cards",void 0),Object(o["a"])(this,"cardGroup",void 0),Object(o["a"])(this,"configs",void 0),Object(o["a"])(this,"cardGroupStatus",void 0),Object(o["a"])(this,"pickedCardIndex",void 0),Object(o["a"])(this,"onCardFocus",void 0),Object(o["a"])(this,"onCardRouteJump",void 0),Object(o["a"])(this,"cameraPositionController",void 0),Object(o["a"])(this,"cameraWithMouseRotateFactor",void 0),Object(o["a"])(this,"isScenePaused",void 0),Object(o["a"])(this,"animate",(function(){p.isScenePaused||(requestAnimationFrame(p.animate),p.updateCamera(),p.cards.forEach((function(t){t.updateByController()})),p.render(),p.stats.update())})),Object(o["a"])(this,"onWindowResize",(function(){p.camera.aspect=window.innerWidth/window.innerHeight,p.camera.updateProjectionMatrix(),p.renderer.setSize(window.innerWidth,window.innerHeight),p.cssRenderer&&p.cssRenderer.setSize(window.innerWidth,window.innerHeight)})),Object(o["a"])(this,"onMouseWheel",(function(t){2==p.cardGroupStatus&&(t.deltaY>0?p.pickedCardIndex<p.cards.length-1&&p.pickedCardIndex++:p.pickedCardIndex>0&&p.pickedCardIndex--,p.pickCard(p.pickedCardIndex))})),Object(o["a"])(this,"onMouseMove",(function(t){p.mousePosX=t.clientX,p.mousePosY=t.clientY,p.pointer.x=t.clientX/window.innerWidth*2-1,p.pointer.y=-t.clientY/window.innerHeight*2+1})),Object(o["a"])(this,"onClick",(function(t){p.raycaster.setFromCamera(p.pointer,p.camera);var e=p.raycaster.intersectObjects(p.intersectObjs,!1);if(e.length>=1)if(0==p.cardGroupStatus)p.cardGroupStatus=1,p.fanCard();else{for(var i=0;i<p.cards.length;i++)if(e[0].object==p.cards[i].mesh)break;1==p.cardGroupStatus?(p.cardGroupStatus=2,p.pickCard(i),p.pickedCardIndex=i):2==p.cardGroupStatus&&(p.pickedCardIndex==i?(p.cardGroupStatus=3,p.focusOnCard(p.pickedCardIndex)):(p.pickCard(i),p.pickedCardIndex=i))}else 3==p.cardGroupStatus?(p.cardGroupStatus=2,p.pickCard(p.pickedCardIndex)):2==p.cardGroupStatus?(p.cardGroupStatus=1,p.fanCard()):1==p.cardGroupStatus&&(p.cardGroupStatus=0,p.stackCard())}));this.container=e,this.camera=new n["cb"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new n["Kb"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=n["bb"],this.stats=new r["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.cameraBasicLookAt=new n["Fb"](0),this.cameraBasicPosition=new n["Fb"](0,300,350),this.camera.position.copy(this.cameraBasicPosition),this.camera.lookAt(this.cameraBasicLookAt),this.scene=new n["ob"],this.cssScene=new n["ob"],this.loadingManager=new n["N"]((function(){s&&(s(),p.stackCard())}),(function(t,e,i){l&&l(t,e,i)}),(function(t){u&&u(t)}));var m=new n["s"](16777215);m.position.set(0,500,0),m.castShadow=!0,m.shadow.camera.left=-150,m.shadow.camera.right=150,m.shadow.camera.bottom=-150,m.shadow.camera.top=150,m.shadow.camera.near=10,m.shadow.camera.far=511,m.shadow.mapSize.width=1024,m.shadow.mapSize.height=1024,m.shadow.bias=-1e-4,this.scene.add(m);var b=new n["fb"](1e3,1e3),w=new n["T"](b,new n["W"]({color:6316128}));w.castShadow=!1,w.receiveShadow=!0,w.position.y=-10,w.rotation.x=-.5*Math.PI,this.scene.add(w),this.intersectObjs=[],this.cardGroup=new n["D"],this.cards=[],this.configs=g;var j=new n["fb"](g.cardSizeX,g.cardSizeY);i.forEach((function(t,e){var i=new n["zb"](p.loadingManager).load(t.imgUrl),a=new h(new n["T"](j,new n["U"]({map:i,side:n["t"]})),t,new d(e,200,50*e+250,p.configs.cardMomentum,p.configs.cardAttraction,p.configs.cardRelVelocity));a.mesh.castShadow=!0,a.mesh.receiveShadow=!0,p.cards.push(a),p.cardGroup.add(a.mesh),p.intersectObjs.push(a.mesh)})),this.cardGroup.rotation.x=Math.PI/2,this.scene.add(this.cardGroup),this.pickedCardIndex=0,this.cardGroupStatus=0,this.onCardFocus=v,this.onCardRouteJump=f,this.raycaster=new n["lb"],this.cameraPositionController=new c["b"](new n["Fb"],.9,.002),this.cameraWithMouseRotateFactor=35,this.mousePosX=0,this.mousePosY=0,this.pointer=new n["Eb"],this.isScenePaused=!1,this.resumeScene()}return Object(s["a"])(t,[{key:"render",value:function(){this.renderer.render(this.scene,this.camera),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"stackCard",value:function(){this.cards.forEach((function(t,e){t.controller.angleTarget=0,t.controller.radiusTarget=0,t.controller.zTarget=2*e}))}},{key:"pickCard",value:function(t){if(!(t<0||t>this.cards.length-1)){for(var e=t-1;e>=0;e--){var i=this.cards[e];i.controller.angleTarget=(e-t)*this.configs.cardHelixRotateRadGap-(this.configs.cardHelixFocusRotateRadGap-this.configs.cardHelixRotateRadGap),i.controller.radiusTarget=this.configs.cardHelixRadius,i.controller.zTarget=this.configs.cardHelixZGap*e}for(var a=t+1;a<this.cards.length;a++){var s=this.cards[a];s.controller.angleTarget=(a-t)*this.configs.cardHelixRotateRadGap+(this.configs.cardHelixFocusRotateRadGap-this.configs.cardHelixRotateRadGap),s.controller.radiusTarget=this.configs.cardHelixRadius,s.controller.zTarget=this.configs.cardHelixZGap*a}var o=this.cards[t];o.controller.angleTarget=0,o.controller.radiusTarget=this.configs.cardHelixFocusRadius,o.controller.zTarget=this.configs.cardHelixZGap*t,this.onCardFocus&&this.onCardFocus(t)}}},{key:"fanCard",value:function(){var t=this;this.cards.forEach((function(e,i){e.controller.angleTarget=(i+.5-t.cards.length/2)*t.configs.cardHelixRotateRadGap,e.controller.radiusTarget=t.configs.cardHelixRadius,e.controller.zTarget=t.configs.cardHelixZGap*i}))}},{key:"focusOnCard",value:function(t){var e=this;this.cards.forEach((function(i,a){t==a?(i.controller.radiusTarget=0,i.controller.zTarget=10,i.controller.afterStaticEvent=function(){e.pauseScene(),console.log("url jumps to: ",e.cards[t].info.url)}):(i.controller.radiusTarget=500,i.controller.afterStaticEvent=void 0)}))}},{key:"updateCamera",value:function(){var t=new n["Fb"](this.pointer.x*this.cameraWithMouseRotateFactor,this.pointer.y*this.cameraWithMouseRotateFactor,-this.pointer.y*this.cameraWithMouseRotateFactor);this.cameraPositionController.update(t),t.copy(this.cameraPositionController.currentVec3).add(this.cameraBasicPosition),this.camera.position.copy(t),this.camera.lookAt(this.cameraBasicLookAt)}},{key:"pauseScene",value:function(){this.isScenePaused=!0;var t=this;window.removeEventListener("resize",t.onWindowResize),window.removeEventListener("wheel",t.onMouseWheel),window.removeEventListener("mousemove",t.onMouseMove),window.removeEventListener("click",t.onClick)}},{key:"resumeScene",value:function(){this.isScenePaused=!1,this.animate();var t=this;window.addEventListener("resize",t.onWindowResize),window.addEventListener("wheel",t.onMouseWheel),window.addEventListener("mousemove",t.onMouseMove),window.addEventListener("click",t.onClick)}}]),t}()},"6d80":function(t,e,i){"use strict";i("9697")},"857a":function(t,e,i){var a=i("e330"),s=i("1d80"),o=i("577e"),n=/"/g,r=a("".replace);t.exports=function(t,e,i,a){var c=o(s(t)),d="<"+e;return""!==i&&(d+=" "+i+'="'+r(o(a),n,"&quot;")+'"'),d+">"+c+"</"+e+">"}},9697:function(t,e,i){},af03:function(t,e,i){var a=i("d039");t.exports=function(t){return a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},f748:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}}}]);
//# sourceMappingURL=chunk-fa6da284.e823575d.js.map
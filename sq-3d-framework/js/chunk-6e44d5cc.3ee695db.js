(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e44d5cc"],{"0da5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[i("div",{staticClass:"loading-container",class:{"loading-container--hidden":t.loadingStat.isLoaded,"loading-container--none":t.loadingStat.noLoadingStat}},[i("div",{staticClass:"load-stat"},[i("div",{staticClass:"load-pgbar",style:{width:100*t.loadingStat.loaded/t.loadingStat.total+"%"}}),i("div",{staticClass:"load-text"},[t._v(t._s(Math.round(100*t.loadingStat.loaded/t.loadingStat.total))+" %")])])])])])},s=[],n=i("2b0e"),o=i("d4ec"),r=i("bee2"),c=i("ade3"),d=(i("2af1"),i("d3b7"),i("159b"),i("5a89")),h=i("61d9"),l=function(){function t(e,i,a,s,n,r){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.001;Object(o["a"])(this,t),Object(c["a"])(this,"angle",void 0),Object(c["a"])(this,"radius",void 0),Object(c["a"])(this,"z",void 0),Object(c["a"])(this,"angleTarget",void 0),Object(c["a"])(this,"radiusTarget",void 0),Object(c["a"])(this,"zTarget",void 0),Object(c["a"])(this,"angleV",void 0),Object(c["a"])(this,"radiusV",void 0),Object(c["a"])(this,"zV",void 0),Object(c["a"])(this,"momentum",void 0),Object(c["a"])(this,"attraction",void 0),Object(c["a"])(this,"relVelocity",void 0),Object(c["a"])(this,"isAlmostStatic",void 0),Object(c["a"])(this,"staticThreshold",void 0),this.angle=e,this.radius=i,this.z=a,this.angleTarget=e,this.radiusTarget=i,this.zTarget=a,this.angleV=0,this.radiusV=0,this.zV=0,this.momentum=s,this.attraction=n,this.relVelocity=r,this.isAlmostStatic=!0,this.staticThreshold=d}return Object(r["a"])(t,[{key:"getPosition",value:function(){return new d["Fb"](-this.radius*Math.cos(this.angle+Math.PI/2),this.radius*Math.sin(this.angle+Math.PI/2),-this.z)}},{key:"getRotation",value:function(){return new d["x"](0,0,-this.angle-Math.PI/2)}},{key:"nonlinear",value:function(t){return Math.sqrt(Math.abs(t))*Math.sign(t)}},{key:"update",value:function(){this.angleV=this.attraction*this.nonlinear(this.angleTarget-this.angle)+this.momentum*this.angleV,this.radiusV=this.attraction*this.nonlinear(this.radiusTarget-this.radius)+this.momentum*this.radiusV,this.zV=this.attraction*this.nonlinear(this.zTarget-this.z)+this.momentum*this.zV,this.angle+=this.relVelocity*this.angleV*.1,this.radius+=this.relVelocity*this.radiusV,this.z+=this.relVelocity*this.zV,this.isAlmostStatic=Math.abs(this.angleTarget-this.angle)<this.staticThreshold}}]),t}(),u=function(){function t(e,i,a){Object(o["a"])(this,t),Object(c["a"])(this,"mesh",void 0),Object(c["a"])(this,"info",void 0),Object(c["a"])(this,"controller",void 0),this.mesh=e,this.info=i,this.controller=a,this.mesh.position.copy(this.controller.getPosition()),this.mesh.rotation.copy(this.controller.getRotation())}return Object(r["a"])(t,[{key:"updateByController",value:function(){this.controller.update(),this.mesh.position.copy(this.controller.getPosition()),this.mesh.rotation.copy(this.controller.getRotation())}}]),t}(),g=function(){function t(e,i,a,s,n,r,g){var p=this,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{cardSizeX:70,cardSizeY:50,cardHelixRadius:80,cardHelixZGap:10,cardHelixRotateRadGap:.3,cardHelixFocusRadius:100,cardHelixFocusRotateRadGap:.5,cardMomentum:.85,cardAttraction:.36,cardRelVelocity:.16};Object(o["a"])(this,t),Object(c["a"])(this,"container",void 0),Object(c["a"])(this,"renderer",void 0),Object(c["a"])(this,"scene",void 0),Object(c["a"])(this,"stats",void 0),Object(c["a"])(this,"mousePosX",void 0),Object(c["a"])(this,"mousePosY",void 0),Object(c["a"])(this,"pointer",void 0),Object(c["a"])(this,"camera",void 0),Object(c["a"])(this,"cameraZPosition",void 0),Object(c["a"])(this,"raycaster",void 0),Object(c["a"])(this,"intersectObjs",void 0),Object(c["a"])(this,"cssScene",void 0),Object(c["a"])(this,"cssRenderer",void 0),Object(c["a"])(this,"loadingManager",void 0),Object(c["a"])(this,"cards",void 0),Object(c["a"])(this,"cardGroup",void 0),Object(c["a"])(this,"configs",void 0),Object(c["a"])(this,"cardGroupStatus",void 0),Object(c["a"])(this,"pickedCardIndex",void 0),Object(c["a"])(this,"onCardFocus",void 0),Object(c["a"])(this,"onCardRouteJump",void 0),Object(c["a"])(this,"animate",(function(){requestAnimationFrame(p.animate),p.cards.forEach((function(t){t.updateByController()})),p.render(),p.stats.update()}));var v=this;this.cameraZPosition=500,this.container=e,this.camera=new d["cb"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new d["Kb"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=d["bb"],this.stats=new h["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.camera.position.set(0,300,350),this.camera.lookAt(new d["Fb"](0)),this.scene=new d["ob"],this.cssScene=new d["ob"],this.loadingManager=new d["N"]((function(){a&&(a(),p.stackCard())}),(function(t,e,i){s&&s(t,e,i)}),(function(t){n&&n(t)}));var m="./cube1/",w=[m+"px.jpg",m+"nx.jpg",m+"py.jpg",m+"ny.jpg",m+"pz.jpg",m+"nz.jpg"],b=new d["o"](this.loadingManager).load(w);b.mapping=d["n"],this.scene.background=b,this.scene.environment=b;var j=new d["s"](16777215);j.position.set(0,500,0),j.castShadow=!0,j.shadow.camera.left=-150,j.shadow.camera.right=150,j.shadow.camera.bottom=-150,j.shadow.camera.top=150,j.shadow.camera.near=10,j.shadow.camera.far=511,j.shadow.mapSize.width=1024,j.shadow.mapSize.height=1024,j.shadow.bias=-1e-4,this.scene.add(j);var O=new d["fb"](1e3,1e3),S=new d["T"](O,new d["W"]({color:6316128}));S.castShadow=!1,S.receiveShadow=!0,S.position.y=-10,S.rotation.x=-.5*Math.PI,this.scene.add(S),this.intersectObjs=[],this.cardGroup=new d["D"],this.cards=[],this.configs=f;var k=new d["fb"](70,50);i.forEach((function(t,e){var i=new u(new d["T"](k,new d["W"]({side:d["t"]})),t,new l(e,200,50*e+250,p.configs.cardMomentum,p.configs.cardAttraction,p.configs.cardRelVelocity));i.mesh.castShadow=!0,i.mesh.receiveShadow=!0,p.cards.push(i),p.cardGroup.add(i.mesh),p.intersectObjs.push(i.mesh)})),this.cardGroup.rotation.x=Math.PI/2,this.scene.add(this.cardGroup),this.pickedCardIndex=0,this.cardGroupStatus=0,this.onCardFocus=r,this.onCardRouteJump=g,this.raycaster=new d["lb"],this.mousePosX=0,this.mousePosY=0,this.pointer=new d["Eb"],window.addEventListener("resize",(function(t){v.onWindowResize()})),window.addEventListener("wheel",(function(t){v.onMouseWheel(t)})),window.addEventListener("mousemove",(function(t){v.onMouseMove(t)})),window.addEventListener("click",(function(t){v.onClick(t)})),this.animate()}return Object(r["a"])(t,[{key:"render",value:function(){this.renderer.render(this.scene,this.camera),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.cssRenderer&&this.cssRenderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseWheel",value:function(t){2==this.cardGroupStatus&&(t.deltaY>0?this.pickedCardIndex<this.cards.length-1&&this.pickedCardIndex++:this.pickedCardIndex>0&&this.pickedCardIndex--,this.pickCard(this.pickedCardIndex))}},{key:"onMouseMove",value:function(t){this.mousePosX=t.clientX,this.mousePosY=t.clientY,this.pointer.x=t.clientX/window.innerWidth*2-1,this.pointer.y=-t.clientY/window.innerHeight*2+1}},{key:"onClick",value:function(t){this.raycaster.setFromCamera(this.pointer,this.camera);var e=this.raycaster.intersectObjects(this.intersectObjs,!1);if(e.length>=1)if(0==this.cardGroupStatus)this.cardGroupStatus=1,this.fanCard();else{for(var i=0;i<this.cards.length;i++)if(e[0].object==this.cards[i].mesh)break;1==this.cardGroupStatus?(this.cardGroupStatus=2,this.pickCard(i),this.pickedCardIndex=i):2==this.cardGroupStatus&&(this.pickedCardIndex==i?(this.cardGroupStatus=3,this.focusOnCard(this.pickedCardIndex)):(this.pickCard(i),this.pickedCardIndex=i))}else 3==this.cardGroupStatus?(this.cardGroupStatus=2,this.pickCard(this.pickedCardIndex)):2==this.cardGroupStatus?(this.cardGroupStatus=1,this.fanCard()):1==this.cardGroupStatus&&(this.cardGroupStatus=0,this.stackCard())}},{key:"stackCard",value:function(){this.cards.forEach((function(t,e){t.controller.angleTarget=0,t.controller.radiusTarget=0,t.controller.zTarget=2*e}))}},{key:"pickCard",value:function(t){if(!(t<0||t>this.cards.length-1)){for(var e=t-1;e>=0;e--){var i=this.cards[e];i.controller.angleTarget=(e-t)*this.configs.cardHelixRotateRadGap-(this.configs.cardHelixFocusRotateRadGap-this.configs.cardHelixRotateRadGap),i.controller.radiusTarget=this.configs.cardHelixRadius,i.controller.zTarget=this.configs.cardHelixZGap*e}for(var a=t+1;a<this.cards.length;a++){var s=this.cards[a];s.controller.angleTarget=(a-t)*this.configs.cardHelixRotateRadGap+(this.configs.cardHelixFocusRotateRadGap-this.configs.cardHelixRotateRadGap),s.controller.radiusTarget=this.configs.cardHelixRadius,s.controller.zTarget=this.configs.cardHelixZGap*a}var n=this.cards[t];n.controller.angleTarget=0,n.controller.radiusTarget=this.configs.cardHelixFocusRadius,n.controller.zTarget=this.configs.cardHelixZGap*t,this.onCardFocus&&this.onCardFocus(t)}}},{key:"fanCard",value:function(){var t=this;this.cards.forEach((function(e,i){e.controller.angleTarget=(i+.5-t.cards.length/2)*t.configs.cardHelixRotateRadGap,e.controller.radiusTarget=t.configs.cardHelixRadius,e.controller.zTarget=t.configs.cardHelixZGap*i}))}},{key:"focusOnCard",value:function(t){this.cards.forEach((function(e,i){t==i?(e.controller.radiusTarget=0,e.controller.zTarget=10):e.controller.radiusTarget=500}))}},{key:"pauseScene",value:function(){}},{key:"resumeScene",value:function(){}}]),t}(),p=n["a"].extend({data:function(){return{fpm:null,loadingStat:{loaded:0,total:1,isLoaded:!1,noLoadingStat:!1},cardInfos:new Array}},mounted:function(){for(var t=this,e=this,i=0;i<10;i++)this.cardInfos.push({imgUrl:"",url:"fakeUrl_"+i});this.$refs["canvas-container"]instanceof HTMLElement&&(this.fpm=new g(this.$refs["canvas-container"],this.cardInfos,(function(){console.log("loaded"),e.loadingStat.isLoaded=!0,setTimeout((function(){e.loadingStat.noLoadingStat=!0}),501)}),(function(e,i,a){t.loadingStat.loaded=i,t.loadingStat.total=a}),(function(t){console.error("failed to load asset: "+t),e.loadingStat.isLoaded=!0}),(function(t){console.log("focused on card: ",t)})))},methods:{onGlassClick:function(){alert("glass clicked!")}}}),f=p,v=(i("46e1"),i("2877")),m=Object(v["a"])(f,a,s,!1,null,"1d273790",null);e["default"]=m.exports},"28ee":function(t,e,i){},"2af1":function(t,e,i){var a=i("23e7"),s=i("f748");a({target:"Math",stat:!0},{sign:s})},"46e1":function(t,e,i){"use strict";i("28ee")},f748:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}}}]);
//# sourceMappingURL=chunk-6e44d5cc.3ee695db.js.map
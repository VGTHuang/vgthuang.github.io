(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5e495e2"],{"0538":function(e,t,r){"use strict";var i=r("da84"),n=r("e330"),o=r("59ed"),s=r("861d"),a=r("1a2d"),c=r("f36a"),l=r("40d5"),h=i.Function,f=n([].concat),d=n([].join),u={},v=function(e,t,r){if(!a(u,t)){for(var i=[],n=0;n<t;n++)i[n]="a["+n+"]";u[t]=h("C,a","return new C("+d(i,",")+")")}return u[t](e,r)};e.exports=l?h.bind:function(e){var t=o(this),r=t.prototype,i=c(arguments,1),n=function(){var r=f(i,c(arguments));return this instanceof n?v(t,r.length,r):t.apply(e,r)};return s(r)&&(n.prototype=r),n}},"10d1":function(e,t,r){"use strict";var i,n=r("da84"),o=r("e330"),s=r("e2cc"),a=r("f183"),c=r("6d61"),l=r("acac"),h=r("861d"),f=r("4fad"),d=r("69f3").enforce,u=r("7f9a"),v=!n.ActiveXObject&&"ActiveXObject"in n,p=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},m=c("WeakMap",p,l);if(u&&v){i=l.getConstructor(p,"WeakMap",!0),a.enable();var b=m.prototype,g=o(b["delete"]),y=o(b.has),w=o(b.get),x=o(b.set);s(b,{delete:function(e){if(h(e)&&!f(e)){var t=d(this);return t.frozen||(t.frozen=new i),g(this,e)||t.frozen["delete"](e)}return g(this,e)},has:function(e){if(h(e)&&!f(e)){var t=d(this);return t.frozen||(t.frozen=new i),y(this,e)||t.frozen.has(e)}return y(this,e)},get:function(e){if(h(e)&&!f(e)){var t=d(this);return t.frozen||(t.frozen=new i),y(this,e)?w(this,e):t.frozen.get(e)}return w(this,e)},set:function(e,t){if(h(e)&&!f(e)){var r=d(this);r.frozen||(r.frozen=new i),y(this,e)?x(this,e,t):r.frozen.set(e,t)}else x(this,e,t);return this}})}},1333:function(e,t){e.exports="varying vec2 vUv;\r\n\r\nuniform float vTextureMix;\r\n\r\nuniform sampler2D vTextures[ 2 ];\r\n\r\nvoid main()\r\n{\r\n    vec4 tColor1 = vec4(texture2D( vTextures[0], vUv ));\r\n    vec4 tColor2 = vec4(texture2D( vTextures[1], vUv ));\r\n    gl_FragColor = mix( tColor1, tColor2, vTextureMix );\r\n    // gl_FragColor = mix( tColor1, tColor2, 0.5 );\r\n    // gl_FragColor = tColor2;\r\n}"},"1b53":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var i=r("5a89");class n{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const o=new i["J"](-1,1,1,-1,0,1),s=new i["d"];s.setAttribute("position",new i["r"]([-1,3,0,-1,-1,0,3,-1,0],3)),s.setAttribute("uv",new i["r"]([0,2,0,0,2,0],2));class a{constructor(e){this._mesh=new i["E"](s,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,o)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},"232b":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return h}));var i,n=r("3835"),o=r("d4ec"),s=r("bee2"),a=r("ade3"),c=(r("d3b7"),r("159b"),r("5a89")),l=r("4e0a");(function(e){e[e["RECT"]=0]="RECT",e[e["CIRCLE"]=1]="CIRCLE"})(i||(i={}));var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0,f=arguments.length>6?arguments[6]:void 0,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:i.RECT,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:16711680;if(Object(o["a"])(this,e),Object(a["a"])(this,"cardGeometry",void 0),Object(a["a"])(this,"cardMaterial",void 0),Object(a["a"])(this,"cardMesh",void 0),Object(a["a"])(this,"stencilId",void 0),Object(a["a"])(this,"cardOutsideScene",void 0),Object(a["a"])(this,"cardInsideScene",void 0),Object(a["a"])(this,"isFocused",void 0),Object(a["a"])(this,"height",void 0),Object(a["a"])(this,"width",void 0),Object(a["a"])(this,"frontWallGeom",void 0),Object(a["a"])(this,"frontWallMesh",void 0),this.stencilId=n,this.height=t,this.width=r,d==i.RECT?this.cardGeometry=new c["N"](r,t):this.cardGeometry=new c["e"](r,64),this.cardMaterial=new c["F"]({color:15790320,stencilWrite:!0,stencilRef:n,stencilZPass:c["T"],depthWrite:!1}),this.cardMesh=new c["E"](this.cardGeometry,this.cardMaterial),this.cardMesh["tardis"]=this,this.cardMesh.position.copy(h),this.cardMesh.rotation.copy(f),this.cardOutsideScene=s,this.cardInsideScene=l,this.cardOutsideScene.add(this.cardMesh),this.isFocused=!1,this.frontWallGeom=new c["d"],this.frontWallMesh=new c["E"],null!=u){var p=(new c["E"]).copy(this.cardMesh);p.material=new c["F"]({color:v}),u.add(p)}}return Object(s["a"])(e,[{key:"addVisibleObjectGroup",value:function(e){var t=this;this._recursiveGetGroupProperty(e,(function(e){e.stencilWrite=!0,e.stencilRef=t.stencilId,e.stencilFunc=c["n"]})),this.cardOutsideScene.add(e)}},{key:"_recursiveGetGroupProperty",value:function(e,t){var r=this;e.children.forEach((function(e){e instanceof c["E"]?e.material instanceof c["C"]?t(e.material):e.material instanceof Array&&e.material.forEach((function(e){t(e)})):e instanceof c["u"]&&r._recursiveGetGroupProperty(e,t)}))}},{key:"addFrontWall",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[new c["fb"](-this.width/2,-this.height/2,0),new c["fb"](-this.width/2,this.height/2,0),new c["fb"](this.width/2,this.height/2,0),new c["fb"](this.width/2,-this.height/2,0),new c["fb"](-this.width/2,-this.height/2,-e),new c["fb"](-this.width/2,this.height/2,-e),new c["fb"](this.width/2,this.height/2,-e),new c["fb"](this.width/2,-this.height/2,-e)],i=[1,0,4,5,1,4,2,1,5,6,2,5,3,2,6,7,3,6,0,3,7,4,0,7],n=[];i.forEach((function(e){var t=new c["fb"];t.copy(r[e]),n.push(t)})),this.frontWallGeom.setFromPoints(n),this.frontWallGeom.computeVertexNormals();var o=void 0==t?new c["G"]({color:10526880}):t;o.stencilWrite=!0,o.stencilRef=this.stencilId,o.stencilFunc=c["n"],this.frontWallMesh=new c["E"](this.frontWallGeom,o),this.frontWallMesh.position.copy(this.cardMesh.position),this.cardOutsideScene.add(this.frontWallMesh)}},{key:"addSkybox",value:function(e){var t=Object(l["a"])("CardSkyboxShader"),r=Object(n["a"])(t,2),i=r[0],o=r[1],s={tCube:{type:"t",value:e}},a=new c["V"]({uniforms:s,vertexShader:i,fragmentShader:o,stencilWrite:!0,stencilRef:this.stencilId,stencilZPass:c["T"],depthWrite:!1});this.cardMaterial=a,this.cardMesh.material=this.cardMaterial}}]),e}()},"257e":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("d9e2");function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},"262e":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d9e2");function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}},"26e3":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c}));var i=r("d4ec"),n=r("bee2"),o=r("ade3"),s=(r("4c53"),r("d3b7"),r("159b"),r("5a89")),a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;Object(i["a"])(this,e),Object(o["a"])(this,"damp",void 0),Object(o["a"])(this,"attract",void 0),Object(o["a"])(this,"object",void 0),Object(o["a"])(this,"velocity",void 0),Object(o["a"])(this,"childObjects",void 0),this.damp=r,this.attract=n,this.object=t,this.velocity=new s["fb"],this.childObjects=[]}return Object(n["a"])(e,[{key:"addChildObj",value:function(e){this.childObjects.push(e)}},{key:"update",value:function(e){var t=this;this.velocity.multiplyScalar(this.damp);var r=e.sub(this.object.position);this.velocity.add(r.multiplyScalar(this.attract)),this.object.position.add(this.velocity),this.childObjects.forEach((function(e){e.position.copy(t.object.position),e.rotation.copy(t.object.rotation)}))}}]),e}(),c=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;Object(i["a"])(this,e),Object(o["a"])(this,"damp",void 0),Object(o["a"])(this,"attract",void 0),Object(o["a"])(this,"velocity",void 0),Object(o["a"])(this,"currentVec3",void 0),this.damp=r,this.attract=n,this.velocity=new s["fb"],this.currentVec3=t}return Object(n["a"])(e,[{key:"update",value:function(e){this.velocity.multiplyScalar(this.damp);var t=(new s["fb"]).copy(e).sub(this.currentVec3);this.velocity.add(t.multiplyScalar(this.attract)),this.currentVec3.add(this.velocity)}}]),e}()},"2caf":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("4ae1"),r("d3b7"),r("f8c9"),r("3410");function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}r("d9e2"),r("a4d3"),r("e01a"),r("d28b"),r("3ca3"),r("ddb0");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var s=r("257e");function a(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Object(s["a"])(e)}function c(e){var t=n();return function(){var r,n=i(e);if(t){var o=i(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}},"32d9":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r("5a89"),n={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"},o=r("360d"),s=r("1b53");class a extends s["b"]{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){const i=e.getContext(),n=e.state;let o,s;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),n.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),n.buffers.stencil.setClear(s),n.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(i.EQUAL,1,4294967295),n.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),n.buffers.stencil.setLocked(!0)}}class c extends s["b"]{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class l{constructor(e,t){if(this.renderer=e,void 0===t){const r={minFilter:i["x"],magFilter:i["x"],format:i["Q"]},n=e.getSize(new i["eb"]);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,t=new i["ib"](this._width*this._pixelRatio,this._height*this._pixelRatio,r),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===n&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o["a"]&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o["a"](n),this.clock=new i["f"]}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let r=!1;for(let i=0,n=this.passes.length;i<n;i++){const t=this.passes[i];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){const t=this.renderer.getContext(),r=this.renderer.state.buffers.stencil;r.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),r.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==a&&(t instanceof a?r=!0:t instanceof c&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new i["eb"]);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new i["J"](-1,1,1,-1,0,1);const h=new i["d"];h.setAttribute("position",new i["r"]([-1,3,0,-1,-1,0,3,-1,0],3)),h.setAttribute("uv",new i["r"]([0,2,0,0,2,0],2))},3410:function(e,t,r){var i=r("23e7"),n=r("d039"),o=r("7b0b"),s=r("e163"),a=r("e177"),c=n((function(){s(1)}));i({target:"Object",stat:!0,forced:c,sham:!a},{getPrototypeOf:function(e){return s(o(e))}})},"360d":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r("5a89"),n=r("1b53");class o extends n["b"]{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof i["V"]?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=i["cb"].clone(e.uniforms),this.material=new i["V"]({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new n["a"](this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}},"4ae1":function(e,t,r){var i=r("23e7"),n=r("d066"),o=r("2ba4"),s=r("0538"),a=r("5087"),c=r("825a"),l=r("861d"),h=r("7c73"),f=r("d039"),d=n("Reflect","construct"),u=Object.prototype,v=[].push,p=f((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),m=!f((function(){d((function(){}))})),b=p||m;i({target:"Reflect",stat:!0,forced:b,sham:b},{construct:function(e,t){a(e),c(t);var r=arguments.length<3?e:a(arguments[2]);if(m&&!p)return d(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return o(v,i,t),new(o(s,e,i))}var n=r.prototype,f=h(l(n)?n:u),b=o(e,f,t);return l(b)?b:f}})},"4c53":function(e,t,r){"use strict";var i=r("23e7"),n=r("857a"),o=r("af03");i({target:"String",proto:!0,forced:o("sub")},{sub:function(){return n(this,"sub","","")}})},"4e0a":function(e,t,r){"use strict";function i(e){try{var t=r("5d16")("./"+e+"/V.glsl"),i=r("8e1c")("./"+e+"/F.glsl");return[t,i]}catch(n){return console.error("failed to fetch shader",n),["",""]}}r.d(t,"a",(function(){return i}))},"4fad":function(e,t,r){var i=r("d039"),n=r("861d"),o=r("c6b6"),s=r("d86b"),a=Object.isExtensible,c=i((function(){a(1)}));e.exports=c||s?function(e){return!!n(e)&&((!s||"ArrayBuffer"!=o(e))&&(!a||a(e)))}:a},"5d16":function(e,t,r){var i={"./CardSkyboxShader/V.glsl":"8437","./CarouselBasicShader/V.glsl":"f4ce","./FresnelShader/V.glsl":"8c9f","./GlassFrontShader/V.glsl":"c182"};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id="5d16"},"6d61":function(e,t,r){"use strict";var i=r("23e7"),n=r("da84"),o=r("e330"),s=r("94ca"),a=r("6eeb"),c=r("f183"),l=r("2266"),h=r("19aa"),f=r("1626"),d=r("861d"),u=r("d039"),v=r("1c7e"),p=r("d44e"),m=r("7156");e.exports=function(e,t,r){var b=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),y=b?"set":"add",w=n[e],x=w&&w.prototype,C=w,O={},j=function(e){var t=o(x[e]);a(x,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!d(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return g&&!d(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!d(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})},_=s(e,!f(w)||!(g||x.forEach&&!u((function(){(new w).entries().next()}))));if(_)C=r.getConstructor(t,e,b,y),c.enable();else if(s(e,!0)){var R=new C,P=R[y](g?{}:-0,1)!=R,S=u((function(){R.has(1)})),E=v((function(e){new w(e)})),M=!g&&u((function(){var e=new w,t=5;while(t--)e[y](t,t);return!e.has(-0)}));E||(C=t((function(e,t){h(e,x);var r=m(new w,e,C);return void 0!=t&&l(t,r[y],{that:r,AS_ENTRIES:b}),r})),C.prototype=x,x.constructor=C),(S||M)&&(j("delete"),j("has"),b&&j("get")),(M||P)&&j(y),g&&x.clear&&delete x.clear}return O[e]=C,i({global:!0,forced:C!=w},O),p(C,e),g||r.setStrong(C,e,b),C}},"71cc":function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraRay;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 20000.0; \r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nfloat refractionFactor = 1.49; // glass\r\n\r\nvoid main() {\r\n\r\n\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.005;\r\n    \r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec4 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos);\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= theta2;\r\n\r\n    float samplePointX = gl_FragCoord.x / resolution.x + backToFrontDepth * offset.x;\r\n    float samplePointY = gl_FragCoord.y / resolution.y + backToFrontDepth * offset.y;\r\n    \r\n    vec3 backColor = texture2D( tBackground, vec2( samplePointX, samplePointY ) ).xyz;\r\n    // vec4 vNewSample = projectionMatrix * (vec4(vRefract, 0.0) + worldPosition);\r\n    // vRefractOffset = vNewSample.xy / vNewSample.w;\r\n    // // vNormal = normal;\r\n    // vec3 vRefractOffsetT = vRefract + 0.5;\r\n    // gl_FragColor = vec4(backColor * 0.5 + vNormal * 0.2 + depthColor * 0.1, 1.0);\r\n    gl_FragColor = vec4(backColor, 1.0);\r\n    // gl_FragColor = vec4(vec3(backToFrontDepth) * 100.0, 1.0);\r\n    // gl_FragColor = vec4(offset.xy / offset.w + 0.5, 0.0, 1.0);\r\n    // gl_FragColor = vec4(vec3(theta2), 1.0);\r\n\r\n    // gl_FragColor = vec4(vec3(gl_FragCoord.z / gl_FragCoord.w - fragColor2.x * 10.0) / 2000.0, 1.0);\r\n}"},"7bcb":function(e,t){e.exports="uniform samplerCube tCube;\r\nvarying vec3 vReflect;\r\nvarying vec3 vRefract[3];\r\nvarying float vReflectionFactor;\r\nvarying vec2 vUv;\r\n\r\nuniform sampler2D tNormal;\r\n\r\nvoid main() {\r\n\r\n    vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\r\n    vec4 refractedColor = vec4( 1.0 );\r\n\r\n    vec3 tnm = vec3(texture2D(tNormal, vUv));\r\n    tnm = tnm * 2.0 - 1.0;\r\n    tnm = 0.0 * tnm;\r\n    // tnm *= 0.01;\r\n    refractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) - tnm ).r;\r\n    refractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) - tnm ).g;\r\n    refractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) - tnm ).b;\r\n\r\n    gl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\r\n}"},8437:function(e,t){e.exports="varying vec3 vPos;\r\n\r\nvoid main() {\r\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vPos = worldPosition.xyz - cameraPosition;\r\n}\r\n"},"857a":function(e,t,r){var i=r("e330"),n=r("1d80"),o=r("577e"),s=/"/g,a=i("".replace);e.exports=function(e,t,r,i){var c=o(n(e)),l="<"+t;return""!==r&&(l+=" "+r+'="'+a(o(i),s,"&quot;")+'"'),l+">"+c+"</"+t+">"}},"8c9f":function(e,t){e.exports="uniform float mRefractionRatio;\r\nuniform float mFresnelBias;\r\nuniform float mFresnelScale;\r\nuniform float mFresnelPower;\r\n\r\nvarying vec3 vReflect;\r\nvarying vec3 vRefract[3];\r\nvarying float vReflectionFactor;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n\r\n    vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n\r\n    vec3 I = worldPosition.xyz - cameraPosition;\r\n\r\n    vReflect = reflect( I, worldNormal );\r\n    vRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );\r\n    vRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );\r\n    vRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );\r\n    vReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );\r\n\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n}\r\n"},"8e1c":function(e,t,r){var i={"./CardSkyboxShader/F.glsl":"91bc","./CarouselBasicShader/F.glsl":"1333","./FresnelShader/F.glsl":"7bcb","./GlassFrontShader/F.glsl":"71cc"};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id="8e1c"},"91bc":function(e,t){e.exports="uniform samplerCube tCube;\r\nvarying vec3 vPos;\r\n\r\nvoid main() {\r\n    vec4 reflectedColor = textureCube( tCube, vec3(-vPos.x, vPos.yz) );\r\n    gl_FragColor = reflectedColor;\r\n}"},"93e9":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r("5a89"),n=r("1b53");class o extends n["b"]{constructor(e,t,r,n,o){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new i["g"]}render(e,t,r){const i=e.autoClear;let n,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),n=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,n),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=i}}},acac:function(e,t,r){"use strict";var i=r("e330"),n=r("e2cc"),o=r("f183").getWeakData,s=r("825a"),a=r("861d"),c=r("19aa"),l=r("2266"),h=r("b727"),f=r("1a2d"),d=r("69f3"),u=d.set,v=d.getterFor,p=h.find,m=h.findIndex,b=i([].splice),g=0,y=function(e){return e.frozen||(e.frozen=new w)},w=function(){this.entries=[]},x=function(e,t){return p(e.entries,(function(e){return e[0]===t}))};w.prototype={get:function(e){var t=x(this,e);if(t)return t[1]},has:function(e){return!!x(this,e)},set:function(e,t){var r=x(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&b(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,i){var h=e((function(e,n){c(e,d),u(e,{type:t,id:g++,frozen:void 0}),void 0!=n&&l(n,e[i],{that:e,AS_ENTRIES:r})})),d=h.prototype,p=v(t),m=function(e,t,r){var i=p(e),n=o(s(t),!0);return!0===n?y(i).set(t,r):n[i.id]=r,e};return n(d,{delete:function(e){var t=p(this);if(!a(e))return!1;var r=o(e);return!0===r?y(t)["delete"](e):r&&f(r,t.id)&&delete r[t.id]},has:function(e){var t=p(this);if(!a(e))return!1;var r=o(e);return!0===r?y(t).has(e):r&&f(r,t.id)}}),n(d,r?{get:function(e){var t=p(this);if(a(e)){var r=o(e);return!0===r?y(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return m(this,e,t)}}:{add:function(e){return m(this,e,!0)}}),h}}},af03:function(e,t,r){var i=r("d039");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},bb2f:function(e,t,r){var i=r("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c182:function(e,t){e.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraRay;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraRay = normalize(vWorldPosition.xyz - cameraPosition);\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n}\r\n"},d86b:function(e,t,r){var i=r("d039");e.exports=i((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},f183:function(e,t,r){var i=r("23e7"),n=r("e330"),o=r("d012"),s=r("861d"),a=r("1a2d"),c=r("9bf2").f,l=r("241c"),h=r("057f"),f=r("4fad"),d=r("90e3"),u=r("bb2f"),v=!1,p=d("meta"),m=0,b=function(e){c(e,p,{value:{objectID:"O"+m++,weakData:{}}})},g=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,p)){if(!f(e))return"F";if(!t)return"E";b(e)}return e[p].objectID},y=function(e,t){if(!a(e,p)){if(!f(e))return!0;if(!t)return!1;b(e)}return e[p].weakData},w=function(e){return u&&v&&f(e)&&!a(e,p)&&b(e),e},x=function(){C.enable=function(){},v=!0;var e=l.f,t=n([].splice),r={};r[p]=1,e(r).length&&(l.f=function(r){for(var i=e(r),n=0,o=i.length;n<o;n++)if(i[n]===p){t(i,n,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:h.f}))},C=e.exports={enable:x,fastKey:g,getWeakData:y,onFreeze:w};o[p]=!0},f4ce:function(e,t){e.exports="varying vec2 vUv;\r\nvoid main() {\r\n    vUv = uv;\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}"},f8c9:function(e,t,r){var i=r("23e7"),n=r("da84"),o=r("d44e");i({global:!0},{Reflect:{}}),o(n.Reflect,"Reflect",!0)},fb12:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return b}));var i=r("d4ec"),n=r("bee2"),o=r("257e"),s=r("262e"),a=r("2caf"),c=r("ade3"),l=(r("d3b7"),r("3ca3"),r("10d1"),r("ddb0"),r("ac1f"),r("00b4"),r("5a89")),h=new l["fb"],f=new l["P"],d=new l["fb"],u=function(e){Object(s["a"])(r,e);var t=Object(a["a"])(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");return Object(i["a"])(this,r),e=t.call(this),Object(c["a"])(Object(o["a"])(e),"element",void 0),Object(c["a"])(Object(o["a"])(e),"followObject",void 0),Object(c["a"])(Object(o["a"])(e),"followObjectOffset",void 0),e.element=n,e.element.style.position="absolute",e.element.style.pointerEvents="all",null!==n.parentNode?n.parentNode.removeChild(n):document.removeChild(n),e.followObject=null,e.followObjectOffset=new l["fb"],e}return Object(n["a"])(r,[{key:"setFollowObject",value:function(e,t){this.followObject=e,this.followObjectOffset=t}}]),r}(l["I"]),v=function(e){Object(s["a"])(r,e);var t=Object(a["a"])(r);function r(e){var n;return Object(i["a"])(this,r),n=t.call(this,e),Object(c["a"])(Object(o["a"])(n),"rotation2D",void 0),n.rotation2D=0,n}return Object(n["a"])(r)}(u),p=new l["D"],m=new l["D"],b=function(){function e(t){Object(i["a"])(this,e),Object(c["a"])(this,"domElement",void 0),Object(c["a"])(this,"cameraElement",void 0),Object(c["a"])(this,"_width",void 0),Object(c["a"])(this,"_height",void 0),Object(c["a"])(this,"_widthHalf",void 0),Object(c["a"])(this,"_heightHalf",void 0),Object(c["a"])(this,"cache",void 0),this._width=0,this._height=0,this._widthHalf=0,this._heightHalf=0,this.cache={camera:{fov:0,style:""},objects:new WeakMap},this.domElement=void 0!==t?t:document.createElement("div"),this.domElement.style.position="absolute",this.domElement.style.overflow="visible",this.domElement.style.pointerEvents="none",this.cameraElement=document.createElement("div"),this.cameraElement.style.overflow="visible",this.cameraElement.style.transformStyle="preserve-3d",this.cameraElement.style.pointerEvents="none",t.appendChild(this.cameraElement)}return Object(n["a"])(e,[{key:"getSize",value:function(){return{width:this._width,height:this._height}}},{key:"render",value:function(e,t){var r=t.projectionMatrix.elements[5]*this._heightHalf;this.cache.camera.fov!==r&&(this.domElement.style.perspective=r+"px",this.cache.camera.fov=r),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld();var i="translateZ("+r+"px)"+this.getCameraCSSMatrix(t.matrixWorldInverse),n=i+"translate("+this._widthHalf+"px,"+this._heightHalf+"px)";this.cache.camera.style!==n&&(this.cameraElement.style.transform=n,this.cache.camera.style=n),this.renderObject(e,e,t,i)}},{key:"setSize",value:function(e,t){this._width=e,this._height=t,this._widthHalf=this._width/2,this._heightHalf=this._height/2,this.domElement.style.width=this._width+"px",this.domElement.style.height=this._height+"px",this.cameraElement.style.width=this._width+"px",this.cameraElement.style.height=this._height+"px"}},{key:"epsilon",value:function(e){return Math.abs(e)<1e-10?0:e}},{key:"getCameraCSSMatrix",value:function(e){var t=e.elements;return"matrix3d("+this.epsilon(t[0])+","+this.epsilon(-t[1])+","+this.epsilon(t[2])+","+this.epsilon(t[3])+","+this.epsilon(t[4])+","+this.epsilon(-t[5])+","+this.epsilon(t[6])+","+this.epsilon(t[7])+","+this.epsilon(t[8])+","+this.epsilon(-t[9])+","+this.epsilon(t[10])+","+this.epsilon(t[11])+","+this.epsilon(t[12])+","+this.epsilon(-t[13])+","+this.epsilon(t[14])+","+this.epsilon(t[15])+")"}},{key:"getObjectCSSMatrix",value:function(e){var t=e.elements,r="matrix3d("+this.epsilon(t[0])+","+this.epsilon(t[1])+","+this.epsilon(t[2])+","+this.epsilon(t[3])+","+this.epsilon(-t[4])+","+this.epsilon(-t[5])+","+this.epsilon(-t[6])+","+this.epsilon(-t[7])+","+this.epsilon(t[8])+","+this.epsilon(t[9])+","+this.epsilon(t[10])+","+this.epsilon(t[11])+","+this.epsilon(t[12])+","+this.epsilon(t[13])+","+this.epsilon(t[14])+","+this.epsilon(t[15])+")";return r}},{key:"renderObject",value:function(e,t,r,i){if(e instanceof u){var n=e.visible&&e.layers.test(r.layers);if(e.element.style.display=n?"":"none",n){var o;void 0!=e.followObject&&(e.position.copy(e.followObject.position),e.position.add(e.followObjectOffset)),e instanceof v?(p.copy(r.matrixWorldInverse),p.transpose(),0!==e.rotation2D&&p.multiply(m.makeRotationZ(e.rotation2D)),e.matrixWorld.decompose(h,f,d),p.setPosition(h),p.scale(d),p.elements[3]=0,p.elements[7]=0,p.elements[11]=0,p.elements[15]=1,o=this.getObjectCSSMatrix(p)):o=this.getObjectCSSMatrix(e.matrixWorld);var s=e.element,a=this.cache.objects.get(e);if(void 0===a||a.style!==o){s.style.transform=o;var c={style:o};this.cache.objects.set(e,c)}s.parentNode!==this.cameraElement&&this.cameraElement.appendChild(s)}}for(var l=0,b=e.children.length;l<b;l++)e.children[l]instanceof u&&this.renderObject(e.children[l],t,r,i)}}]),e}()}}]);
//# sourceMappingURL=chunk-a5e495e2.ab27d273.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b0cdaca"],{"04d1":function(e,t,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"08fd":function(e,t,n){var r={"./GlassFrontShader/F.glsl":"f430"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="08fd"},1148:function(e,t,n){"use strict";var r=n("da84"),i=n("5926"),a=n("577e"),o=n("1d80"),s=r.RangeError;e.exports=function(e){var t=a(o(this)),n="",r=i(e);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},"22b5":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var r,i={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-i.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*i.Bounce.In(2*e):.5*i.Bounce.Out(2*e-1)+.5}}};r="undefined"===typeof self&&"undefined"!==typeof e&&e.hrtime?function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var a=r,o=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=a()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!t;i&&!1===i.update(e,o)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),s={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=s.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,a=s.Utils.Bernstein,o=0;o<=r;o++)n+=i(1-t,r-o)*i(t,o)*e[o]*a(r,o);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=s.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=s.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var a=.5*(n-e),o=.5*(r-t),s=i*i,c=i*s;return(2*t-2*n+a+o)*c+(-3*t+3*n-2*a-o)*s+a*i+t}}},c=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),l=new o,u=function(){function e(e,t){void 0===t&&(t=l),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=c.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?a()+parseFloat(e):e:a(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,r){for(var i in n){var a=e[i],o=Array.isArray(a),s=o?"array":typeof a,c=!o&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(c){var l=n[i];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,a)),n[i]=[a].concat(l)}if("object"!==s&&!o||!a||c)"undefined"===typeof t[i]&&(t[i]=a),o||(t[i]*=1),r[i]=c?n[i].slice().reverse():t[i]||0;else{for(var u in t[i]=o?[]:{},a)t[i][u]=a[u];r[i]=o?[]:{},this._setupProperties(a,t[i],n[i],r[i])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=a()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=a()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=a()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var a=t[i]||0,o=n[i],s=Array.isArray(e[i]),c=Array.isArray(o),l=!s&&c;l?e[i]=this._interpolationFunction(o,r):"object"===typeof o&&o?this._updateProperties(e[i],a,o,r):(o=this._handleRelativeValue(a,o),"number"===typeof o&&(e[i]=a+(o-a)*r))}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),h=(c.nextId,l),d=(h.getAll.bind(h),h.removeAll.bind(h),h.add.bind(h),h.remove.bind(h),h.update.bind(h))}).call(this,n("4362"))},"32a7":function(e,t,n){"use strict";n("4acd")},"38cf":function(e,t,n){var r=n("23e7"),i=n("1148");r({target:"String",proto:!0},{repeat:i})},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ec":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[n("div",{staticClass:"loading-container",class:{"loading-container--hidden":e.loadingStat.isLoaded,"loading-container--none":e.loadingStat.noLoadingStat}},[n("div",{staticClass:"load-stat"},[n("div",{staticClass:"load-pgbar",style:{width:100*e.loadingStat.loaded/e.loadingStat.total+"%"}}),n("div",{staticClass:"load-text"},[e._v(e._s(Math.round(100*e.loadingStat.loaded/e.loadingStat.total))+" %")])])])]),n("div",{ref:"dom3d-container",attrs:{id:"dom3d-container"}},[n("div",{ref:"dom3d-test",attrs:{id:"dom3d-test"}},[n("p",[e._v("HTML element: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua")])]),n("div",{ref:"dom3d-glass",attrs:{id:"dom3d-glass"},on:{click:e.onGlassClick}},[e._m(0)])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dom3d-glass-ball"},[n("div",{staticClass:"dom3d-glass-ball__text"},[e._v("html element following object")])])}],a=n("5a89"),o=n("2b0e"),s=n("d4ec"),c=n("bee2"),l=n("ade3"),u=(n("d3b7"),n("159b"),n("38cf"),n("4c53"),n("32d9")),h=n("93e9"),d=n("f93b"),f=n("61d9"),p=n("232b");function v(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){v(a,r,i,o,s,"next",e)}function s(e){v(a,r,i,o,s,"throw",e)}o(void 0)}))}}var m=n("3835"),b=n("257e"),y=n("262e"),w=n("2caf"),x=(n("96cf"),n("a434"),n("d81d"),n("4e82"),n("b64b"),n("f998")),M=n("4e0a"),_=function(){function e(t,n,r){Object(s["a"])(this,e),Object(l["a"])(this,"index",void 0),Object(l["a"])(this,"mesh",void 0),Object(l["a"])(this,"uniforms",void 0),Object(l["a"])(this,"textureList",void 0),Object(l["a"])(this,"isPushingTexture",void 0),this.index=t,this.mesh=n,this.uniforms=r,this.mesh=n,this.textureList=[],this.isPushingTexture=!1}return Object(c["a"])(e,[{key:"pushNewTexture",value:function(e){0==this.textureList.length?this.textureList.push(void 0,e):(1==this.textureList.length||this.textureList.splice(1,this.textureList.length-2),this.textureList.push(e)),0==this.isPushingTexture&&this.recPushTexture()}},{key:"recPushTexture",value:function(){var e=this;this.textureList.length<=1?this.isPushingTexture=!1:(this.isPushingTexture=!0,2==this.textureList.length&&(this.uniforms.vTextureMix.value=0,this.uniforms.vTextures.value[0]=this.textureList[0],this.uniforms.vTextures.value[1]=this.textureList[1],this.isPushingTexture=!1,x["a"].tweenNumber(0,1,(function(t){e.uniforms.vTextureMix.value=t}),(function(){e.uniforms.vTextures.value[0]=e.textureList[1],e.uniforms.vTextures.value[1]=e.textureList[1],e.uniforms.vTextureMix.value=1,e.textureList.splice(0,1),e.recPushTexture()}),500)))}}]),e}(),C=function(e){Object(y["a"])(n,e);var t=Object(w["a"])(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{numOfVisiblePics:3};Object(s["a"])(this,n),e=t.call(this),Object(l["a"])(Object(b["a"])(e),"numOfVisiblePics",void 0),Object(l["a"])(Object(b["a"])(e),"rotateNode",void 0),Object(l["a"])(Object(b["a"])(e),"isRotating",void 0),Object(l["a"])(Object(b["a"])(e),"planes",void 0),Object(l["a"])(Object(b["a"])(e),"planeWidth",void 0),Object(l["a"])(Object(b["a"])(e),"planeHeight",void 0),Object(l["a"])(Object(b["a"])(e),"planeGap",void 0),Object(l["a"])(Object(b["a"])(e),"preloadImgs",void 0),Object(l["a"])(Object(b["a"])(e),"maxPreloadImgCount",void 0),Object(l["a"])(Object(b["a"])(e),"carouselArrayRadius",void 0),Object(l["a"])(Object(b["a"])(e),"carouselArrayAngle",void 0),Object(l["a"])(Object(b["a"])(e),"currentCenter",void 0),e.isRotating=!1,e.rotateNode=new a["D"],e.add(e.rotateNode),e.currentCenter=0,e.numOfVisiblePics=r.numOfVisiblePics,e.planes=[],e.planeWidth=r.planeWidth||50,e.planeHeight=r.planeHeight||50,e.planeGap=r.planeGap||10,e.preloadImgs={},e.maxPreloadImgCount=2*e.numOfVisiblePics,e.carouselArrayRadius=r.carouselArrayRadius||100,e.carouselArrayAngle=2*Math.atan((e.planeWidth+e.planeGap)/(2*e.carouselArrayRadius));for(var i=Object(M["a"])("CarouselBasicShader"),o=Object(m["a"])(i,2),c=o[0],u=o[1],h=0;h<e.numOfVisiblePics;h++){var d={vColor:{type:"c",value:new a["m"](16711680)},vTextures:{type:"tv",value:[void 0,void 0]},vTextureMix:{type:"f",value:1}},f=new a["T"](new a["eb"](e.planeWidth,e.planeHeight,1,1),new a["qb"]({uniforms:d,vertexShader:c,fragmentShader:u})),p=h-(e.numOfVisiblePics-1)/2;f.rotation.y=-p*e.carouselArrayAngle,f.position.x=e.carouselArrayRadius*Math.sin(p*e.carouselArrayAngle),f.position.z=-e.carouselArrayRadius*Math.cos(p*e.carouselArrayAngle),e.planes.push(new _(h,f,d)),e.rotateNode.add(f)}return e.planes.forEach((function(t){e.__imgSrcToTex("https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")).then((function(e){t.pushNewTexture(e)}))})),e}return Object(c["a"])(n,[{key:"clickToChangeTex",value:function(e,t){var n=this,r=this.planes.map((function(e){return e.mesh})),i=e.intersectObjects(r);if(1==i.length){var o=i[0].object;if(o instanceof a["T"]){var s=r.indexOf(o),c=t(s);this.__imgSrcToTex(c).then((function(e){n.planes[s].pushNewTexture(e)}))}}}},{key:"clickToRotate",value:function(e,t){var n=this.planes.map((function(e){return e.mesh})),r=e.intersectObjects(n);if(1==r.length){var i=r[0].object;if(i instanceof a["T"]){var o=n.indexOf(i),s=this.planes[o].index-this.currentCenter-Math.floor(this.planes.length/2);s<0?this.moveLeft(-s,t):s>0&&this.moveRight(s,t)}}}},{key:"moveLeft",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;if(!this.isRotating){this.isRotating=!0;for(var r=function(t){e.planes.sort((function(e,t){return t.index-e.index}));var r=e.planes[0];r.index=e.planes[e.planes.length-1].index-1;var i=r.index-(e.numOfVisiblePics-1)/2;r.mesh.rotation.y=-i*e.carouselArrayAngle,r.mesh.position.x=e.carouselArrayRadius*Math.sin(i*e.carouselArrayAngle),r.mesh.position.z=-e.carouselArrayRadius*Math.cos(i*e.carouselArrayAngle);var a=n(r.index);e.__imgSrcToTex(a).then((function(e){r.pushNewTexture(e)}))},i=0;i<t;i++)r(i);x["a"].tweenNumber(0,t,(function(t){var n=e.carouselArrayAngle*(e.currentCenter-t);e.rotateNode.rotation.y=n}),(function(){e.currentCenter-=t,e.isRotating=!1}),500)}}},{key:"moveRight",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;if(!this.isRotating){this.isRotating=!0;for(var r=function(t){e.planes.sort((function(e,t){return e.index-t.index}));var r=e.planes[0];r.index=e.planes[e.planes.length-1].index+1;var i=r.index-(e.numOfVisiblePics-1)/2;r.mesh.rotation.y=-i*e.carouselArrayAngle,r.mesh.position.x=e.carouselArrayRadius*Math.sin(i*e.carouselArrayAngle),r.mesh.position.z=-e.carouselArrayRadius*Math.cos(i*e.carouselArrayAngle);var a=n(r.index);e.__imgSrcToTex(a).then((function(e){r.pushNewTexture(e)}))},i=0;i<t;i++)r(i);x["a"].tweenNumber(0,t,(function(t){var n=e.carouselArrayAngle*(e.currentCenter+t);e.rotateNode.rotation.y=n}),(function(){e.currentCenter+=t,e.isRotating=!1}),500)}}},{key:"__imgSrcToTex",value:function(){var e=g(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",new Promise((function(e,r){n.preloadImgs[t]&&e(n.preloadImgs[t]);var i=new a["F"];i.setCrossOrigin("anonymous"),i.load(t,(function(r){var i=new a["yb"](r);if(i.needsUpdate=!0,n.preloadImgs[t]=i,Object.keys(n.preloadImgs).length>=n.maxPreloadImgCount)for(var o in n.preloadImgs){for(var s=n.preloadImgs[o],c=!0,l=0;l<n.planes.length;l++)if(n.planes[l].uniforms.vTextures.value.indexOf(s)>-1){c=!1;break}if(c){s.dispose(),delete n.preloadImgs[o];break}}e(i)}))})));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(a["D"]);class O extends a["L"]{constructor(e){super(e),this.debug=!1,this.group=null,this.materials=[],this.meshes=[]}load(e,t,n,r){const i=this,o=""===this.path?a["M"].extractUrlBase(e):this.path,s=new a["z"](this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(i.parse(n,o))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}parse(e,t){this.group=new a["D"],this.materials=[],this.meshes=[],this.readFile(e,t);for(let n=0;n<this.meshes.length;n++)this.group.add(this.meshes[n]);return this.group}readFile(e,t){const n=new DataView(e),r=new j(n,0,this.debugMessage);if(r.id===T||r.id===S||r.id===k){let e=r.readChunk();while(e){if(e.id===P){const t=e.readDWord();this.debugMessage("3DS file version: "+t)}else e.id===L?this.readMeshData(e,t):this.debugMessage("Unknown main chunk: "+e.hexId);e=r.readChunk()}}this.debugMessage("Parsed "+this.meshes.length+" meshes")}readMeshData(e,t){let n=e.readChunk();while(n){if(n.id===E){const e=+n.readDWord();this.debugMessage("Mesh Version: "+e)}else if(n.id===W){const e=n.readFloat();this.debugMessage("Master scale: "+e),this.group.scale.set(e,e,e)}else n.id===oe?(this.debugMessage("Named Object"),this.readNamedObject(n)):n.id===U?(this.debugMessage("Material"),this.readMaterialEntry(n,t)):this.debugMessage("Unknown MDATA chunk: "+n.hexId);n=e.readChunk()}}readNamedObject(e){const t=e.readString();let n=e.readChunk();while(n){if(n.id===se){const e=this.readMesh(n);e.name=t,this.meshes.push(e)}else this.debugMessage("Unknown named object chunk: "+n.hexId);n=e.readChunk()}}readMaterialEntry(e,t){let n=e.readChunk();const r=new a["W"];while(n){if(n.id===N)r.name=n.readString(),this.debugMessage("   Name: "+r.name);else if(n.id===$)this.debugMessage("   Wireframe"),r.wireframe=!0;else if(n.id===Q){const e=n.readByte();r.wireframeLinewidth=e,this.debugMessage("   Wireframe Thickness: "+e)}else if(n.id===X)r.side=a["t"],this.debugMessage("   DoubleSided");else if(n.id===Y)this.debugMessage("   Additive Blending"),r.blending=a["b"];else if(n.id===V)this.debugMessage("   Diffuse Color"),r.color=this.readColor(n);else if(n.id===G)this.debugMessage("   Specular Color"),r.specular=this.readColor(n);else if(n.id===B)this.debugMessage("   Ambient color"),r.color=this.readColor(n);else if(n.id===H){const e=this.readPercentage(n);r.shininess=100*e,this.debugMessage("   Shininess : "+e)}else if(n.id===q){const e=this.readPercentage(n);r.opacity=1-e,this.debugMessage("  Transparency : "+e),r.transparent=r.opacity<1}else n.id===J?(this.debugMessage("   ColorMap"),r.map=this.readMap(n,t)):n.id===Z?(this.debugMessage("   BumpMap"),r.bumpMap=this.readMap(n,t)):n.id===K?(this.debugMessage("   OpacityMap"),r.alphaMap=this.readMap(n,t)):n.id===ee?(this.debugMessage("   SpecularMap"),r.specularMap=this.readMap(n,t)):this.debugMessage("   Unknown material chunk: "+n.hexId);n=e.readChunk()}this.materials[r.name]=r}readMesh(e){let t=e.readChunk();const n=new a["h"],r=new a["W"],i=new a["T"](n,r);i.name="mesh";while(t){if(t.id===ce){const e=t.readWord();this.debugMessage("   Vertex: "+e);const r=[];for(let n=0;n<e;n++)r.push(t.readFloat()),r.push(t.readFloat()),r.push(t.readFloat());n.setAttribute("position",new a["A"](r,3))}else if(t.id===le)this.readFaceArray(t,i);else if(t.id===he){const e=t.readWord();this.debugMessage("   UV: "+e);const r=[];for(let n=0;n<e;n++)r.push(t.readFloat()),r.push(t.readFloat());n.setAttribute("uv",new a["A"](r,2))}else if(t.id===de){this.debugMessage("   Tranformation Matrix (TODO)");const e=[];for(let n=0;n<12;n++)e[n]=t.readFloat();const r=new a["S"];r.elements[0]=e[0],r.elements[1]=e[6],r.elements[2]=e[3],r.elements[3]=e[9],r.elements[4]=e[2],r.elements[5]=e[8],r.elements[6]=e[5],r.elements[7]=e[11],r.elements[8]=e[1],r.elements[9]=e[7],r.elements[10]=e[4],r.elements[11]=e[10],r.elements[12]=0,r.elements[13]=0,r.elements[14]=0,r.elements[15]=1,r.transpose();const o=new a["S"];o.copy(r).invert(),n.applyMatrix4(o),r.decompose(i.position,i.quaternion,i.scale)}else this.debugMessage("   Unknown mesh chunk: "+t.hexId);t=e.readChunk()}return n.computeVertexNormals(),i}readFaceArray(e,t){const n=e.readWord();this.debugMessage("   Faces: "+n);const r=[];for(let o=0;o<n;++o)r.push(e.readWord(),e.readWord(),e.readWord()),e.readWord();t.geometry.setIndex(r);let i=0,a=0;while(!e.endOfChunk){const n=e.readChunk();if(n.id===ue){this.debugMessage("      Material Group");const e=this.readMaterialGroup(n),r=3*e.index.length;t.geometry.addGroup(a,r,i),a+=r,i++;const o=this.materials[e.name];!1===Array.isArray(t.material)&&(t.material=[]),void 0!==o&&t.material.push(o)}else this.debugMessage("      Unknown face array chunk: "+n.hexId)}1===t.material.length&&(t.material=t.material[0])}readMap(e,t){let n=e.readChunk(),r={};const i=new a["zb"](this.manager);i.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);while(n){if(n.id===te){const e=n.readString();r=i.load(e),this.debugMessage("      File: "+t+e)}else n.id===ie?(r.offset.x=n.readFloat(),this.debugMessage("      OffsetX: "+r.offset.x)):n.id===ae?(r.offset.y=n.readFloat(),this.debugMessage("      OffsetY: "+r.offset.y)):n.id===ne?(r.repeat.x=n.readFloat(),this.debugMessage("      RepeatX: "+r.repeat.x)):n.id===re?(r.repeat.y=n.readFloat(),this.debugMessage("      RepeatY: "+r.repeat.y)):this.debugMessage("      Unknown map chunk: "+n.hexId);n=e.readChunk()}return r}readMaterialGroup(e){const t=e.readString(),n=e.readWord();this.debugMessage("         Name: "+t),this.debugMessage("         Faces: "+n);const r=[];for(let i=0;i<n;++i)r.push(e.readWord());return{name:t,index:r}}readColor(e){const t=e.readChunk(),n=new a["m"];if(t.id===F||t.id===A){const e=t.readByte(),r=t.readByte(),i=t.readByte();n.setRGB(e/255,r/255,i/255),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else if(t.id===R||t.id===I){const e=t.readFloat(),r=t.readFloat(),i=t.readFloat();n.setRGB(e,r,i),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else this.debugMessage("      Unknown color chunk: "+t.hexId);return n}readPercentage(e){const t=e.readChunk();switch(t.id){case z:return t.readShort()/100;case D:return t.readFloat();default:return this.debugMessage("      Unknown percentage chunk: "+t.hexId),0}}debugMessage(e){this.debug&&console.log(e)}}class j{constructor(e,t,n){this.data=e,this.offset=t,this.position=t,this.debugMessage=n,this.debugMessage instanceof Function&&(this.debugMessage=function(){}),this.id=this.readWord(),this.size=this.readDWord(),this.end=this.offset+this.size,this.end>e.byteLength&&this.debugMessage("Bad chunk size for chunk at "+t)}readChunk(){if(this.endOfChunk)return null;try{const e=new j(this.data,this.position,this.debugMessage);return this.position+=e.size,e}catch(e){return this.debugMessage("Unable to read chunk at "+this.position),null}}get hexId(){return this.id.toString(16)}get endOfChunk(){return this.position>=this.end}readByte(){const e=this.data.getUint8(this.position,!0);return this.position+=1,e}readFloat(){try{const e=this.data.getFloat32(this.position,!0);return this.position+=4,e}catch(e){return this.debugMessage(e+" "+this.position+" "+this.data.byteLength),0}}readInt(){const e=this.data.getInt32(this.position,!0);return this.position+=4,e}readShort(){const e=this.data.getInt16(this.position,!0);return this.position+=2,e}readDWord(){const e=this.data.getUint32(this.position,!0);return this.position+=4,e}readWord(){const e=this.data.getUint16(this.position,!0);return this.position+=2,e}readString(){let e="",t=this.readByte();while(t)e+=String.fromCharCode(t),t=this.readByte();return e}}const k=19789,T=15786,S=49725,P=2,R=16,F=17,A=18,I=19,z=48,D=49,L=15677,E=15678,W=256,U=45055,N=40960,B=40976,V=40992,G=41008,H=41024,q=41040,X=41089,Y=41091,$=41093,Q=41095,J=41472,K=41488,Z=41520,ee=41476,te=41728,ne=41812,re=41814,ie=41816,ae=41818,oe=16384,se=16640,ce=16656,le=16672,ue=16688,he=16704,de=16736;var fe=n("fb12"),pe=n("26e3"),ve=n("7d52"),ge=n("7612"),me=function(){function e(t,n,r,i){var o=this;Object(s["a"])(this,e),Object(l["a"])(this,"container",void 0),Object(l["a"])(this,"renderer",void 0),Object(l["a"])(this,"cardInsideScene",void 0),Object(l["a"])(this,"scene",void 0),Object(l["a"])(this,"reflectionScene",void 0),Object(l["a"])(this,"composer",void 0),Object(l["a"])(this,"stats",void 0),Object(l["a"])(this,"refractionManager",void 0),Object(l["a"])(this,"glassMesh1Controller",void 0),Object(l["a"])(this,"mousePosX",void 0),Object(l["a"])(this,"mousePosY",void 0),Object(l["a"])(this,"pointer",void 0),Object(l["a"])(this,"camera",void 0),Object(l["a"])(this,"cameraZPosition",void 0),Object(l["a"])(this,"cameraPositionController",void 0),Object(l["a"])(this,"cameraTargetPosition",void 0),Object(l["a"])(this,"cameraWithMouseMoveFactor",void 0),Object(l["a"])(this,"cameraWithMouseRotateFactor",void 0),Object(l["a"])(this,"cursorLightGroup",void 0),Object(l["a"])(this,"cursorLight",void 0),Object(l["a"])(this,"cursorLightController",void 0),Object(l["a"])(this,"raycaster",void 0),Object(l["a"])(this,"intersectTardisCardObjs",void 0),Object(l["a"])(this,"intersectGlassObjs",void 0),Object(l["a"])(this,"glassSelected",void 0),Object(l["a"])(this,"glassIsRotating",void 0),Object(l["a"])(this,"cssScene",void 0),Object(l["a"])(this,"cssRenderer",void 0),Object(l["a"])(this,"cssAttachObject",void 0),Object(l["a"])(this,"carousel1",void 0),Object(l["a"])(this,"carousel2",void 0),Object(l["a"])(this,"loadingManager",void 0),Object(l["a"])(this,"animate",(function(){requestAnimationFrame(o.animate),o.updatecornerObject(),o.updateCamera(),o.updateCursorLight(),o.render(),o.stats.update()})),this.cameraZPosition=500,this.container=t,this.camera=new a["cb"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new a["Kb"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.stats=new f["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.scene=new a["ob"],this.cssScene=new a["ob"],this.cardInsideScene=new a["ob"],this.reflectionScene=new a["ob"],this.loadingManager=new a["N"]((function(){n&&n()}),(function(e,t,n){r&&r(e,t,n)}),(function(e){i&&i(e)}));var c="./cube1/",v=[c+"px.jpg",c+"nx.jpg",c+"py.jpg",c+"ny.jpg",c+"pz.jpg",c+"nz.jpg"],g=new a["o"](this.loadingManager).load(v);g.mapping=a["n"],this.scene.environment=g;var m=new a["s"];m.intensity=.8,m.position.x=80,m.position.y=80,m.position.z=100,this.scene.add(m),this.refractionManager=new ve["a"](this.scene,this.container,this.renderer,this.camera);var b=new a["T"](new ge["a"](40,40,40,5,5),new a["W"]({})),y=new a["T"](new a["g"](40,40,40),new a["U"]({}));y.visible=!1,b.add(y),b.rotation.set(1,1,1),this.refractionManager.addRefractionMesh(b,!0,null,65280,4219135,1.3,.8),this.glassMesh1Controller=new pe["a"](b,.2,.1);var w=new h["a"](this.scene,this.camera);w.clear=!0;var x=new h["a"](this.cardInsideScene,this.camera);x.clearDepth=!0,x.clear=!1,this.composer=new u["a"](this.renderer,new a["Ib"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)),this.composer.addPass(w),this.composer.addPass(x),this.composer.renderTarget1.stencilBuffer=!0,this.composer.renderTarget2.stencilBuffer=!0;var M=new p["a"](100,400,110,this.scene,this.cardInsideScene,new a["Fb"](0,200,0),new a["x"],p["b"].RECT,null);M.addSkybox(g);var _=new a["D"],j=new a["zb"](this.loadingManager).load("./title.png"),k=new a["T"](new a["eb"](390,90,1,1),new a["U"]({color:16777215,alphaMap:j,alphaToCoverage:!0,transparent:!0}));_.add(k),_.position.copy(M.cardMesh.position),M.addVisibleObjectGroup(_),this.cssAttachObject=M.cardMesh;var T=new p["a"](200,200,111,this.scene,this.cardInsideScene,new a["Fb"](0,0,0),new a["x"],p["b"].RECT,this.reflectionScene,12636368),S=new a["zb"](this.loadingManager).load("./marble/diffuse.jpg"),P=new a["zb"](this.loadingManager).load("./marble/normal.jpg"),R=new a["zb"](this.loadingManager).load("./marble/specular.jpg"),F=[S,P,R];F.forEach((function(e){e.wrapS=e.wrapT=a["mb"],e.repeat.set(1,2)}));var A=new a["D"],I=new a["zb"](this.loadingManager).load("./jutabag3ds/texture/normal.jpg"),z=new O(this.loadingManager);z.setResourcePath("./jutabag3ds/texture/"),z.load("./jutabag3ds/portalgun.3ds",(function(e){if(e instanceof a["D"]){e.traverse((function(e){e instanceof a["T"]&&(console.log(e.material),e.material.color=new a["m"](16777215),e.material.normalMap=I)})),e.scale.multiplyScalar(80),e.position.x-=20,e.position.y+=10,e.position.z-=80,e.rotation.x=-2,e.rotation.z=.7,A.add(e);var t=new a["T"](new a["eb"](500,500,1,1),new a["X"]({color:13434879,map:S,normalMap:P,normalScale:new a["Eb"](.1,.1),specularColorMap:R,specularIntensity:4,reflectivity:1,metalness:.2,roughness:.1,clearcoat:.5}));t.position.set(0,0,-150),A.add(t),A.position.copy(T.cardMesh.position),T.addVisibleObjectGroup(A)}}));var D=new p["a"](100,100,112,this.scene,this.cardInsideScene,new a["Fb"](200,0,0),new a["x"],p["b"].CIRCLE,this.reflectionScene,13680848);this.carousel1=new C({numOfVisiblePics:5,planeWidth:80,planeHeight:80,carouselArrayRadius:120});var L=new a["zb"](this.loadingManager).load("./painting/crop1_diffuse.png"),E=new a["zb"](this.loadingManager).load("./painting/crop1_normal.png"),W=new a["zb"](this.loadingManager).load("./painting/crop1_specular.png");F=[L,E,W];var U=new a["T"](new a["eb"](500,500,1,1),new a["X"]({map:L,normalMap:E,specularColorMap:W,normalScale:new a["Eb"](.4,.4),specularIntensity:.2,reflectivity:.1,metalness:.1,roughness:.4}));U.position.set(0,0,-150);var N=new a["D"];N.add(this.carousel1),N.add(U),N.position.copy(D.cardMesh.position),D.addVisibleObjectGroup(N);var B=new p["a"](100,100,113,this.scene,this.cardInsideScene,new a["Fb"](-200,0,0),new a["x"],p["b"].CIRCLE,this.reflectionScene,10535056);this.carousel2=new C({numOfVisiblePics:4,planeWidth:70,planeHeight:70,carouselArrayRadius:120});var V=new a["zb"](this.loadingManager).load("./painting/crop2_diffuse.png"),G=new a["zb"](this.loadingManager).load("./painting/crop2_normal.png"),H=new a["zb"](this.loadingManager).load("./painting/crop2_specular.png");F=[V,G],U=new a["T"](new a["eb"](500,500,1,1),new a["X"]({color:16777088,map:V,normalMap:G,specularColorMap:H,normalScale:new a["Eb"](.5,.5),specularIntensity:.2,reflectivity:.8,metalness:0,roughness:.2})),U.position.set(0,0,-150);var q=new a["D"];q.add(this.carousel2),q.add(U),q.position.copy(B.cardMesh.position),B.addVisibleObjectGroup(q);var X=new a["fb"](1e3,400),Y=new d["a"](X,this.reflectionScene,{flowDirection:new a["Eb"](1,1),textureWidth:512,textureHeight:512});Y.position.z+=200,Y.position.y-=110,Y.rotation.x=-.5*Math.PI,this.scene.add(Y),this.cameraTargetPosition=new a["Fb"](0,0,this.cameraZPosition),this.camera.position.copy(this.cameraTargetPosition),this.camera.lookAt(0,0,0),this.cameraWithMouseMoveFactor=.04,this.cameraWithMouseRotateFactor=.015,this.cameraPositionController=new pe["b"](this.camera.position,.5,.05),window.addEventListener("mousemove",(function(e){$.onMouseMove(e)})),this.cursorLightGroup=new a["D"],this.cursorLight=new a["gb"],this.cursorLight.intensity=1,this.cursorLight.decay=1,this.cursorLight.distance=200,this.cursorLight.color=new a["m"](11193599),this.cursorLightGroup.add(this.cursorLight),this.scene.add(this.cursorLightGroup),this.cursorLightController=new pe["a"](this.cursorLightGroup,.3,.1),this.raycaster=new a["lb"],this.intersectTardisCardObjs=[],this.intersectTardisCardObjs.push(M.cardMesh,T.cardMesh,D.cardMesh,B.cardMesh),this.intersectGlassObjs=[],this.glassSelected=void 0,this.glassIsRotating=!1,this.intersectGlassObjs.push(y),this.mousePosX=0,this.mousePosY=0,this.pointer=new a["Eb"];var $=this;window.addEventListener("resize",(function(){$.onWindowResize()})),window.addEventListener("click",(function(e){$.onClick(e)})),this.animate()}return Object(c["a"])(e,[{key:"render",value:function(){this.composer.render(),this.renderer.clearDepth(),this.refractionManager.render(),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.refractionManager.onWindowResize(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.cssRenderer&&this.cssRenderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseMove",value:function(e){var t=this;this.mousePosX=e.clientX,this.mousePosY=e.clientY,this.pointer.x=e.clientX/window.innerWidth*2-1,this.pointer.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var n=this.raycaster.intersectObjects(this.intersectGlassObjs,!1);if(1!=n.length||this.glassIsRotating||this.glassSelected===n[0].object.parent){if(0==n.length&&!this.glassIsRotating&&void 0!==this.glassSelected){console.log("out"),this.glassIsRotating=!0;var r=this.glassSelected,i=this.glassSelected["refractionObject"];x["a"].tweenEuler(this.glassSelected.rotation,new a["x"](1,1,1),(function(e){r.rotation.copy(e)}),(function(){t.glassIsRotating=!1}),500),x["a"].tweenNumber(0,1,(function(e){i.refractionMaterialUniforms["absorbColor"].value.b=e}),(function(){}),500),this.glassSelected=void 0}}else{console.log("in"),this.glassIsRotating=!0;var o=n[0].object.parent,s=o?o["refractionObject"]:null;o instanceof a["T"]&&s instanceof ve["b"]&&(this.glassSelected=o,x["a"].tweenEuler(this.glassSelected.rotation,new a["x"](1,6,1),(function(e){o.rotation.copy(e)}),(function(){t.glassIsRotating=!1}),500),x["a"].tweenNumber(1,0,(function(e){s.refractionMaterialUniforms["absorbColor"].value.b=e}),(function(){}),500))}}},{key:"onClick",value:function(e){var t=this;if(!this.glassSelected){var n=this.raycaster.intersectObjects(this.intersectTardisCardObjs,!1);if(1==n.length){var r=n[0];x["a"].tweenThreeVector3(this.cameraTargetPosition,new a["Fb"](r.object.position.x,r.object.position.y,this.cameraTargetPosition.z),(function(e){t.cameraTargetPosition.copy(e)}),(function(){}),750),this.carousel1.clickToRotate(this.raycaster,(function(e){return console.log("new carousel img index",e),"https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")})),this.carousel2.clickToChangeTex(this.raycaster,(function(e){return console.log("new carousel img index",e),"https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")}))}}}},{key:"getRaycastPos",value:function(e,t){var n=2*e/window.innerWidth-1,r=1-2*t/window.innerHeight,i=new a["Fb"](n,r,.995);return i.unproject(this.camera),i}},{key:"updatecornerObject",value:function(){var e=this.getRaycastPos(window.innerWidth-200,window.innerHeight/2);this.glassMesh1Controller.update(e)}},{key:"updateCamera",value:function(){var e=window.innerWidth/2-this.mousePosX,t=window.innerHeight/2-this.mousePosY,n=new a["Fb"](-e*this.cameraWithMouseMoveFactor,t*this.cameraWithMouseMoveFactor,0).add(this.cameraTargetPosition);this.cameraPositionController.update(n);var r=this.cameraPositionController.velocity;this.camera.rotation.x=r.y*this.cameraWithMouseRotateFactor,this.camera.rotation.y=-r.x*this.cameraWithMouseRotateFactor}},{key:"updateCursorLight",value:function(){if(!isNaN(this.mousePosX)&&!isNaN(this.mousePosY)){var e=this.getRaycastPos(this.mousePosX,this.mousePosY),t=this.camera.position.z,n=(new a["Fb"]).copy(e);n=n.sub(this.camera.position);var r=-200,i=(r-t)/n.z;e.copy(this.camera.position),n.multiplyScalar(i),e.add(n),e.z+=100,this.cursorLightController.update(e)}}},{key:"registerCSSCoordinator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a["Fb"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;void 0==this.cssRenderer&&(this.cssRenderer=new fe["b"](e),this.cssRenderer.setSize(window.innerWidth,window.innerHeight));var i=new fe["a"](t);return i.position.copy(n),i.scale.multiplyScalar(r),this.cssScene.add(i),i}}]),e}(),be=o["a"].extend({data:function(){return{fpm:null,loadingStat:{loaded:1,total:2,isLoaded:!1,noLoadingStat:!1}}},mounted:function(){var e=this,t=this;if(this.$refs["canvas-container"]instanceof HTMLElement){if(this.fpm=new me(this.$refs["canvas-container"],(function(){console.log("loaded"),t.loadingStat.isLoaded=!0,setTimeout((function(){t.loadingStat.noLoadingStat=!0}),501)}),(function(t,n,r){e.loadingStat.loaded=n,e.loadingStat.total=r}),(function(e){console.error("failed to load asset: "+e),t.loadingStat.isLoaded=!0})),this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-glass"]instanceof HTMLElement){var n=this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-glass"],new a["Fb"](0,20,10));n.setFollowObject(this.fpm.glassMesh1Controller.object,new a["Fb"])}this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-test"]instanceof HTMLElement&&this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-test"],new a["Fb"](-200,110,0))}},methods:{onGlassClick:function(){alert("glass clicked!")}}}),ye=be,we=(n("32a7"),n("2877")),xe=Object(we["a"])(ye,r,i,!1,null,"530f970e",null);t["default"]=xe.exports},"4acd":function(e,t,n){},"4e82":function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),a=n("59ed"),o=n("7b0b"),s=n("07fa"),c=n("577e"),l=n("d039"),u=n("addb"),h=n("a640"),d=n("04d1"),f=n("d998"),p=n("2d00"),v=n("512c"),g=[],m=i(g.sort),b=i(g.push),y=l((function(){g.sort(void 0)})),w=l((function(){g.sort(null)})),x=h("sort"),M=!l((function(){if(p)return p<70;if(!(d&&d>3)){if(f)return!0;if(v)return v<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:t+r,v:n})}for(g.sort((function(e,t){return t.v-e.v})),r=0;r<g.length;r++)t=g[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),_=y||!w||!x||!M,C=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}};r({target:"Array",proto:!0,forced:_},{sort:function(e){void 0!==e&&a(e);var t=o(this);if(M)return void 0===e?m(t):m(t,e);var n,r,i=[],c=s(t);for(r=0;r<c;r++)r in t&&b(i,t[r]);u(i,C(e)),n=i.length,r=0;while(r<n)t[r]=i[r++];while(r<c)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5303:function(e,t,n){var r={"./GlassFrontShader/V.glsl":"c444"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="5303"},7612:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("5a89");const i=new r["Fb"];function a(e,t,n,r,a,o){const s=2*Math.PI*a/4,c=Math.max(o-2*a,0),l=Math.PI/4;i.copy(t),i[r]=0,i.normalize();const u=.5*s/(s+c),h=1-i.angleTo(e)/l;if(1===Math.sign(i[n]))return h*u;{const e=c/(s+c);return e+u+u*(1-h)}}class o extends r["g"]{constructor(e=1,t=1,n=1,i=2,o=.1){if(i=2*i+1,o=Math.min(e/2,t/2,n/2,o),super(1,1,1,i,i,i),1===i)return;const s=this.toNonIndexed();this.index=null,this.attributes.position=s.attributes.position,this.attributes.normal=s.attributes.normal,this.attributes.uv=s.attributes.uv;const c=new r["Fb"],l=new r["Fb"],u=new r["Fb"](e,t,n).divideScalar(2).subScalar(o),h=this.attributes.position.array,d=this.attributes.normal.array,f=this.attributes.uv.array,p=h.length/6,v=new r["Fb"],g=.5/i;for(let r=0,m=0;r<h.length;r+=3,m+=2){c.fromArray(h,r),l.copy(c),l.x-=Math.sign(l.x)*g,l.y-=Math.sign(l.y)*g,l.z-=Math.sign(l.z)*g,l.normalize(),h[r+0]=u.x*Math.sign(c.x)+l.x*o,h[r+1]=u.y*Math.sign(c.y)+l.y*o,h[r+2]=u.z*Math.sign(c.z)+l.z*o,d[r+0]=l.x,d[r+1]=l.y,d[r+2]=l.z;const i=Math.floor(r/p);switch(i){case 0:v.set(1,0,0),f[m+0]=a(v,l,"z","y",o,n),f[m+1]=1-a(v,l,"y","z",o,t);break;case 1:v.set(-1,0,0),f[m+0]=1-a(v,l,"z","y",o,n),f[m+1]=1-a(v,l,"y","z",o,t);break;case 2:v.set(0,1,0),f[m+0]=1-a(v,l,"x","z",o,e),f[m+1]=a(v,l,"z","x",o,n);break;case 3:v.set(0,-1,0),f[m+0]=1-a(v,l,"x","z",o,e),f[m+1]=1-a(v,l,"z","x",o,n);break;case 4:v.set(0,0,1),f[m+0]=1-a(v,l,"x","y",o,e),f[m+1]=1-a(v,l,"y","x",o,t);break;case 5:v.set(0,0,-1),f[m+0]=a(v,l,"x","y",o,e),f[m+1]=1-a(v,l,"y","x",o,t);break}}}}},"7d52":function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return x}));var r=n("3835"),i=n("bee2"),a=n("d4ec"),o=n("ade3"),s=(n("d3b7"),n("159b"),n("38cf"),n("5a89")),c=n("4721"),l=n("7612");function u(e){try{var t=n("5303")("./"+e+"/V.glsl"),r=n("08fd")("./"+e+"/F.glsl");return[t,r]}catch(i){return console.error("failed to fetch shader",i),["",""]}}var h,d,f,p,v,g,m,b=n("61d9"),y=Object(i["a"])((function e(t,n,i,c,l,h,d,f,p,v){if(Object(a["a"])(this,e),Object(o["a"])(this,"mesh",void 0),Object(o["a"])(this,"originalMaterial",void 0),Object(o["a"])(this,"refractionMaterial",void 0),Object(o["a"])(this,"backColor",void 0),Object(o["a"])(this,"refractionMaterialUniforms",void 0),this.mesh=n,this.mesh["refractionObject"]=this,this.mesh.material instanceof Array){this.originalMaterial=new Array;for(var g=0;g<this.mesh.material.length;g++)this.originalMaterial.push(this.mesh.material[g].clone())}else this.originalMaterial=this.mesh.material.clone();this.backColor=d,this.refractionMaterialUniforms={resolution:{value:i},tBackground:{value:c},tBackDepth:{value:h},tDisplayImage:{value:l},tSkybox:{value:t.environment},refractionFactor:{value:p},opacity:{value:v},absorbColor:{value:new s["m"](f)},objectCenter:{value:n.position}};var m=u("GlassFrontShader"),b=Object(r["a"])(m,2),y=b[0],w=b[1];this.refractionMaterial=new s["qb"]({vertexShader:y,fragmentShader:w,uniforms:this.refractionMaterialUniforms,side:s["C"]})})),w=function(){function e(t,n,r,i){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512;Object(a["a"])(this,e),Object(o["a"])(this,"container",void 0),Object(o["a"])(this,"backgroundScene",void 0),Object(o["a"])(this,"renderer",void 0),Object(o["a"])(this,"camera",void 0),Object(o["a"])(this,"frontScene",void 0),Object(o["a"])(this,"backdepthTexture",void 0),Object(o["a"])(this,"backRenderTarget",void 0),Object(o["a"])(this,"refractionObjectList",void 0),Object(o["a"])(this,"suResolution",void 0),this.container=n,this.backgroundScene=t,this.renderer=r,this.camera=i,this.frontScene=new s["ob"],this.backdepthTexture=new s["r"](c,c,s["B"]),this.backRenderTarget=new s["Jb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio),this.backRenderTarget.depthBuffer=!0,this.backRenderTarget.depthTexture=this.backdepthTexture,this.backRenderTarget.depthTexture.type=s["Db"],this.frontScene.background=this.backRenderTarget.texture,this.frontScene.environment=this.backgroundScene.environment,this.refractionObjectList=[],this.suResolution=new s["Eb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)}return Object(i["a"])(e,[{key:"genFresnelMaterial",value:function(e){var t=s["pb"].lib["fresnel"],n=s["Cb"].clone(t.uniforms);n["tCube"].value=e;var r={fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n},i=new s["qb"](r);return i}},{key:"addRefractionMesh",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16777215,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1.49,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.2,c=new s["m"](r);t&&(e.material=new s["X"]({color:c,transparent:!0,opacity:.5,metalness:1,reflectivity:0,roughness:0,side:s["e"]})),this.refractionObjectList.push(new y(this.backgroundScene,e,this.suResolution,this.backRenderTarget.texture,n,this.backRenderTarget.depthTexture,c,i,a,o)),this.backgroundScene.add(e)}},{key:"onWindowResize",value:function(){this.suResolution.x=this.container.offsetWidth*window.devicePixelRatio,this.suResolution.y=this.container.offsetHeight*window.devicePixelRatio}},{key:"render",value:function(){var e=this;this.refractionObjectList.forEach((function(t){t.mesh.material=t.refractionMaterial,e.frontScene.add(t.mesh)})),this.renderer.setRenderTarget(null),this.renderer.render(this.frontScene,this.camera),this.refractionObjectList.forEach((function(t){t.mesh.material=t.originalMaterial,e.backgroundScene.add(t.mesh)}))}}]),e}();function x(e){h=e,f=new s["cb"](45,window.innerWidth/window.innerHeight,1,5e3),f.position.set(30,20,200),f.lookAt(0,0,0),g=new s["ob"],d=new s["Kb"]({antialias:!0,alpha:!0}),d.setClearColor(16777215),d.setPixelRatio(window.devicePixelRatio),d.setSize(window.innerWidth,window.innerHeight),h.appendChild(d.domElement),p=new c["a"](f,h),h.style.position="absolute",h.style.top="0px",h.style.left="0px",v=new b["Stats"],v.domElement.style.zIndex="100",h.appendChild(v.domElement);var t="./cube/",n=[t+"px.jpg",t+"nx.jpg",t+"py.jpg",t+"ny.jpg",t+"pz.jpg",t+"nz.jpg"],r=(new s["o"]).load(n);r.mapping=s["n"],g.background=r,g.environment=r;var i=new s["s"];i.position.x=300,i.position.y=200,i.position.z=100,g.add(i);var a=(new s["zb"]).load("./checkerboard.jpg");a.wrapS=a.wrapT=s["mb"],a.repeat.set(10,10);var o=new s["U"]({map:a,side:s["t"]}),u=new s["fb"](1e3,1e3,1,1),y=new s["T"](u,o);y.position.y-=20.1,y.rotation.x=Math.PI/2,m=new w(g,h,d,f);var x=new s["T"](new l["a"](40,40,40,5,5),new s["W"]({}));x.position.x-=40;var C=new s["T"](new s["ub"](20),new s["W"]({})),O=new s["T"](new s["q"](20,20,80,36),new s["W"]({}));O.position.x+=40,O.position.y+=20,m.addRefractionMesh(x,!0,null,0,0),m.addRefractionMesh(C,!0,null,24576,24576),m.addRefractionMesh(O,!0,null,1587,1587);var j=new s["T"](new s["ub"](20),new s["W"]({color:16711680}));j.position.copy(x.position),j.position.z-=50,g.add(j),window.addEventListener("resize",M),_()}function M(){f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),m.onWindowResize(),d.setSize(window.innerWidth,window.innerHeight)}function _(){requestAnimationFrame(_),C(),p.update(),v.update()}function C(){m.render()}},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(F){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=O(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(F){return{type:"throw",arg:F}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",v={};function g(){}function m(){}function b(){}var y={};c(y,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(P([])));x&&x!==n&&r.call(x,a)&&(y=x);var M=b.prototype=g.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,o,s){var c=u(e[i],e,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var i;function a(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}this._invoke=a}function O(e,t,n){var r=h;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return R()}n.method=i,n.arg=a;while(1){var o=n.delegate;if(o){var s=j(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}function j(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return m.prototype=b,c(M,"constructor",b),c(b,"constructor",m),m.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},_(C.prototype),c(C.prototype,o,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new C(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(M),c(M,s,"Generator"),c(M,a,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("23cb"),o=n("5926"),s=n("07fa"),c=n("7b0b"),l=n("65f0"),u=n("8418"),h=n("1dde"),d=h("splice"),f=i.TypeError,p=Math.max,v=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,i,h,d,b,y=c(this),w=s(y),x=a(e,w),M=arguments.length;if(0===M?n=r=0:1===M?(n=0,r=w-x):(n=M-2,r=v(p(o(t),0),w-x)),w+n-r>g)throw f(m);for(i=l(y,r),h=0;h<r;h++)d=x+h,d in y&&u(i,h,y[d]);if(i.length=r,n<r){for(h=x;h<w-r;h++)d=h+r,b=h+n,d in y?y[b]=y[d]:delete y[b];for(h=w;h>w-r+n;h--)delete y[h-1]}else if(n>r)for(h=w-r;h>x;h--)d=h+r-1,b=h+n-1,d in y?y[b]=y[d]:delete y[b];for(h=0;h<n;h++)y[h+x]=arguments[h+2];return y.length=w-r+n,i}})},addb:function(e,t,n){var r=n("4dae"),i=Math.floor,a=function(e,t){var n=e.length,c=i(n/2);return n<8?o(e,t):s(e,a(r(e,0,c),t),a(r(e,c),t),t)},o=function(e,t){var n,r,i=e.length,a=1;while(a<i){r=a,n=e[a];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},s=function(e,t,n,r){var i=t.length,a=n.length,o=0,s=0;while(o<i||s<a)e[o+s]=o<i&&s<a?r(t[o],n[s])<=0?t[o++]:n[s++]:o<i?t[o++]:n[s++];return e};e.exports=a},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),a=n("df75"),o=n("d039"),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return a(i(e))}})},c444:function(e,t){e.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\nvarying vec4 vImageUVCenter;\r\n\r\nuniform vec3 objectCenter;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraPosition = cameraPosition;\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n    vImageUVCenter = vProjectionMatrix * vec4( objectCenter, 1.0 );\r\n}\r\n"},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,a=n("1dde"),o=a("map");r({target:"Array",proto:!0,forced:!o},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,r="/"===o.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),o="/"===a(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,c=0;c<o;c++)if(i[c]!==a[c]){s=c;break}var l=[];for(c=s;c<i.length;c++)l.push("..");return l=l.concat(a.slice(s)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,a=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=o+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},f430:function(e,t){e.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\nuniform sampler2D tDisplayImage;\r\n\r\nuniform samplerCube tSkybox;\r\nuniform vec3 absorbColor;\r\nuniform float refractionFactor;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\nvarying vec4 vImageUVCenter;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 5000.0;\r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nvoid main() {\r\n\r\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n    // return;\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    if (frontDepth > backDepth) {\r\n        discard;\r\n    }\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.5;\r\n    \r\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\r\n    vCameraRay = normalize(vCameraRay);\r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\r\n    offset = normalize(offset);\r\n\r\n    // reflect\r\n    vec3 vReflect = reflect( vCameraRay, vNormal );\r\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= sinTheta2;\r\n    offset *= 100.0;\r\n\r\n    offset /= backDepth;\r\n\r\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\r\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\r\n\r\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\r\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\r\n\r\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\r\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\r\n    \r\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\r\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\r\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\r\n\r\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\r\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\r\n    float sqrtDepth = sqrt(backToFrontDepth) * opacity;\r\n    float absorbFactor = sqrtDepth / (1.0 + sqrtDepth);\r\n    vec3 refractCol = mix(backColor, absorbColor, absorbFactor);\r\n\r\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\r\n\r\n    // gl_FragColor = vec4(refCol, 1.0);\r\n    float reflectionCoeff = pow(sinTheta1, 4.0);\r\n    // reflectionCoeff = 1.0;\r\n\r\n    // vec4 image = vec4(vec3(texture2D( tDisplayImage, vec2( (gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y ) )), 1.0);\r\n    // vec4 image = vec4((gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y, 1.0, 1.0);\r\n    // vec4 image = vec4(1.0, 0.0, 0.0, 1.0);\r\n\r\n    // gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    // gl_FragColor = image;\r\n    // if (gl_FragCoord.x < 600.0) {\r\n    //     gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    // }\r\n    // gl_FragColor = vec4(backColor, 1.0);\r\n    // gl_FragColor = vec4(vec3(backDepthlinear * 0.01), 1.0);\r\n}"},f93b:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("bee2"),i=n("d4ec"),a=n("257e"),o=n("262e"),s=n("2caf"),c=n("ade3"),l=n("5a89");class u extends l["T"]{constructor(e,t={}){super(e),this.type="Reflector";const n=this,r=void 0!==t.color?new l["m"](t.color):new l["m"](8355711),i=t.textureWidth||512,a=t.textureHeight||512,o=t.clipBias||0,s=t.shader||u.ReflectorShader,c=new l["db"],h=new l["Fb"],d=new l["Fb"],f=new l["Fb"],p=new l["S"],v=new l["Fb"](0,0,-1),g=new l["Gb"],m=new l["Fb"],b=new l["Fb"],y=new l["Gb"],w=new l["S"],x=new l["cb"],M=new l["Jb"](i,a),_=new l["qb"]({uniforms:l["Cb"].clone(s.uniforms),fragmentShader:s.fragmentShader,vertexShader:s.vertexShader});_.uniforms["tDiffuse"].value=M.texture,_.uniforms["color"].value=r,_.uniforms["textureMatrix"].value=w,this.material=_,this.onBeforeRender=function(e,t,r){if(d.setFromMatrixPosition(n.matrixWorld),f.setFromMatrixPosition(r.matrixWorld),p.extractRotation(n.matrixWorld),h.set(0,0,1),h.applyMatrix4(p),m.subVectors(d,f),m.dot(h)>0)return;m.reflect(h).negate(),m.add(d),p.extractRotation(r.matrixWorld),v.set(0,0,-1),v.applyMatrix4(p),v.add(f),b.subVectors(d,v),b.reflect(h).negate(),b.add(d),x.position.copy(m),x.up.set(0,1,0),x.up.applyMatrix4(p),x.up.reflect(h),x.lookAt(b),x.far=r.far,x.updateMatrixWorld(),x.projectionMatrix.copy(r.projectionMatrix),w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(x.projectionMatrix),w.multiply(x.matrixWorldInverse),w.multiply(n.matrixWorld),c.setFromNormalAndCoplanarPoint(h,d),c.applyMatrix4(x.matrixWorldInverse),g.set(c.normal.x,c.normal.y,c.normal.z,c.constant);const i=x.projectionMatrix;y.x=(Math.sign(g.x)+i.elements[8])/i.elements[0],y.y=(Math.sign(g.y)+i.elements[9])/i.elements[5],y.z=-1,y.w=(1+i.elements[10])/i.elements[14],g.multiplyScalar(2/g.dot(y)),i.elements[2]=g.x,i.elements[6]=g.y,i.elements[10]=g.z+1-o,i.elements[14]=g.w,M.texture.encoding=e.outputEncoding,n.visible=!1;const a=e.getRenderTarget(),s=e.xr.enabled,l=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(M),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,x),e.xr.enabled=s,e.shadowMap.autoUpdate=l,e.setRenderTarget(a);const u=r.viewport;void 0!==u&&e.state.viewport(u),n.visible=!0},this.getRenderTarget=function(){return M},this.dispose=function(){M.dispose(),n.material.dispose()}}}u.prototype.isReflector=!0,u.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"};var h=function(e){Object(o["a"])(n,e);var t=Object(s["a"])(n);function n(e,r){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i["a"])(this,n),o=t.call(this,e),Object(c["a"])(Object(a["a"])(o),"material",void 0);var h=Object(a["a"])(o),f=(void 0!==s.color?new l["m"](s.color):new l["m"](16777215),s.textureWidth||512),p=s.textureHeight||512,v=s.clipBias||0,g=s.flowDirection||new l["Eb"](1,0),m=s.flowSpeed||.01,b=s.reflectivity||.5,y=s.scale||1,w=d,x=new l["zb"],M=s.normalMap0||x.load("./water/Water_1_M_Normal.jpg"),_=s.normalMap1||x.load("./water/Water_2_M_Normal.jpg"),C=.15,O=.5*C,j=new l["S"],k=new l["l"];o.material=new l["qb"];var T=new u(e,{textureWidth:f,textureHeight:p,clipBias:v});function S(e){j.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),j.multiply(e.projectionMatrix),j.multiply(e.matrixWorldInverse),j.multiply(h.matrixWorld)}function P(){var e=k.getDelta(),t=h.material.uniforms["config"];t.value.x+=m*e,t.value.y=t.value.x+O,t.value.x>=C?(t.value.x=0,t.value.y=O):t.value.y>=C&&(t.value.y=t.value.y-C)}return T.matrixAutoUpdate=!1,o.material=new l["qb"]({uniforms:l["Cb"].merge([l["Bb"]["fog"],w.uniforms]),vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,transparent:!0,fog:!0}),o.material.uniforms["flowDirection"].value=g,M.wrapS=M.wrapT=l["mb"],_.wrapS=_.wrapT=l["mb"],o.material.uniforms["tReflectionMap"].value=T.getRenderTarget().texture,o.material.uniforms["tNormalMap0"].value=M,o.material.uniforms["tNormalMap1"].value=_,o.material.uniforms["reflectivity"].value=b,o.material.uniforms["textureMatrix"].value=j,o.material.uniforms["config"].value.x=0,o.material.uniforms["config"].value.y=O,o.material.uniforms["config"].value.z=O,o.material.uniforms["config"].value.w=y,o.onBeforeRender=function(e,t,n,i,a,o){S(n),P(),h.visible=!1,T.matrixWorld.copy(h.matrixWorld),T.onBeforeRender(e,r,n,i,a,o),h.visible=!0},o}return Object(r["a"])(n)}(l["T"]),d={uniforms:{reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new l["Gb"]},flowDirection:{type:"v2",value:new l["Eb"]}},vertexShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\tuniform vec2 flowDirection;\n\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\tflow = flowDirection;\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n            reflectance = pow(reflectance + 0.3, 4.0);\n            // reflectance = floor(reflectance *  2.0) / 4.0;\n            vec4 refractColor = vec4(1.0);\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n            reflectColor *= vec4(1.0, 1.0, 1.0, 1.0);\n\t\t\treflectColor *= 0.5;\n\t\t\treflectColor += 0.5;\n\n\t\t\tgl_FragColor = mix(refractColor, reflectColor, reflectance);\n\t\t\t// gl_FragColor = reflectColor;\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}"}},f998:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("d4ec"),i=n("bee2"),a=n("ade3"),o=n("22b5"),s=n("5a89"),c=function(){function e(){var t=this;Object(r["a"])(this,e),Object(a["a"])(this,"animationObjectCount",void 0),Object(a["a"])(this,"requestId",void 0),Object(a["a"])(this,"loopAnim",(function(){o["c"](),t.requestId>=0&&(t.requestId=window.requestAnimationFrame(t.loopAnim))})),Object(a["a"])(this,"startAnim",(function(){t.requestId<0&&(t.requestId=window.requestAnimationFrame(t.loopAnim))})),Object(a["a"])(this,"stopAnim",(function(){t.requestId>=0&&(window.cancelAnimationFrame(t.requestId),t.requestId=-1)})),this.animationObjectCount=0,this.requestId=-1}return Object(i["a"])(e,[{key:"addTweenAnimObject",value:function(){this.animationObjectCount<=0&&this.startAnim(),this.animationObjectCount++}},{key:"removeTweenAnimObject",value:function(){this.animationObjectCount<=0||(1==this.animationObjectCount&&this.stopAnim(),this.animationObjectCount--)}},{key:"tweenNumber",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,c={a:e};this.addTweenAnimObject(),new o["b"](c).to({a:t},a).easing(s).onUpdate((function(){return n(c.a)})).onComplete((function(){i.removeTweenAnimObject(),r(c.a)})).start()}},{key:"tweenVector2",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,c={x:e.x,y:e.y},l={x:t.x,y:t.y};this.addTweenAnimObject(),new o["b"](c).to(l,a).easing(s).onUpdate((function(){return n(c.x,c.y)})).onComplete((function(){i.removeTweenAnimObject(),r(c.x,c.y)})).start()}},{key:"tweenVector3",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,c={x:e.x,y:e.y,z:e.z},l={x:t.x,y:t.y,z:t.z};this.addTweenAnimObject(),new o["b"](c).to(l,a).easing(s).onUpdate((function(){return n(c.x,c.y,c.z)})).onComplete((function(){i.removeTweenAnimObject(),r(c.x,c.y,c.z)})).start()}},{key:"tweenEuler",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,l={x:e.x,y:e.y,z:e.z},u={x:t.x,y:t.y,z:t.z};this.addTweenAnimObject(),new o["b"](l).to(u,a).easing(c).onUpdate((function(){return n(new s["x"](l.x,l.y,l.z))})).onComplete((function(){i.removeTweenAnimObject(),r(new s["x"](l.x,l.y,l.z))})).start()}},{key:"tweenThreeVector3",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,l={x:e.x,y:e.y,z:e.z},u={x:t.x,y:t.y,z:t.z};this.addTweenAnimObject(),new o["b"](l).to(u,a).easing(c).onUpdate((function(){return n(new s["Fb"](l.x,l.y,l.z))})).onComplete((function(){i.removeTweenAnimObject(),r(new s["Fb"](l.x,l.y,l.z))})).start()}}]),e}(),l=new c}}]);
//# sourceMappingURL=chunk-4b0cdaca.4f5be60d.js.map
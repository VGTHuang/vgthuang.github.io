{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./src/scripts/ThreeRealisticRefraction sync ^\\.\\/.*\\/F\\.glsl$","webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./node_modules/@tweenjs/tween.js/dist/tween.esm.js","webpack:///./src/views/ThreeFrontpageTest.vue?b037","webpack:///./node_modules/core-js/modules/es.string.repeat.js","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./src/views/ThreeFrontpageTest.vue?8e9f","webpack:///./node_modules/three/examples/jsm/objects/Reflector.js","webpack:///./src/scripts/Three/SQWater.ts","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/scripts/Three/Carousel.ts","webpack:///./node_modules/three/examples/jsm/loaders/TDSLoader.js","webpack:///./src/scripts/Three/FrontPage.ts","webpack:///./src/views/ThreeFrontpageTest.vue","webpack:///./src/views/ThreeFrontpageTest.vue?e700","webpack:///./src/views/ThreeFrontpageTest.vue?5b81","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./src/scripts/ThreeRealisticRefraction sync ^\\.\\/.*\\/V\\.glsl$","webpack:///./node_modules/three/examples/jsm/geometries/RoundedBoxGeometry.js","webpack:///./src/scripts/ThreeRealisticRefraction/ShaderLoader.ts","webpack:///./src/scripts/ThreeRealisticRefraction/ThreeRealisticRefraction.ts","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./src/scripts/ThreeRealisticRefraction/GlassFrontShader/V.glsl","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./src/scripts/ThreeRealisticRefraction/GlassFrontShader/F.glsl","webpack:///./src/scripts/AnimUtils/TweenUtils.ts"],"names":["userAgent","firefox","match","module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","global","toIntegerOrInfinity","toString","requireObjectCoercible","RangeError","count","str","this","result","n","Infinity","now","Easing","Linear","None","amount","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","s","Bounce","self","process","hrtime","time","undefined","performance","bind","Date","getTime","now$1","Group","_tweens","_tweensAddedDuringUpdate","prototype","getAll","_this","tweenId","removeAll","add","tween","getId","remove","update","preserve","tweenIds","length","i","autoStart","Interpolation","v","k","m","f","floor","fn","Utils","Bezier","b","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","t3","Sequence","nextId","_nextId","mainGroup","Tween","_object","_group","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","_goToEnd","isPlaying","isPaused","to","properties","duration","create","d","start","property","_swapEndStartRepeatValues","parseFloat","_setupProperties","startValue","startValueIsArray","Array","isArray","propType","isInterpolationList","endValues","_handleRelativeValue","concat","slice","reverse","prop","stop","stopChainedTweens","_onStopCallback","end","pause","resume","numChainedTweens","group","delay","repeat","times","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","tweens","_i","arguments","onStart","callback","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","endTime","value","_updateProperties","isFinite","startIsArray","endIsArray","charAt","tmp","endValue","TWEEN","$","target","proto","nextTick","args","call","shift","setTimeout","apply","platform","arch","execPath","title","pid","browser","env","argv","binding","name","path","cwd","chdir","dir","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","render","_vm","_h","$createElement","_c","_self","ref","attrs","staticClass","class","loadingStat","isLoaded","noLoadingStat","style","width","loaded","total","_v","_s","round","on","onGlassClick","_m","staticRenderFns","geometry","options","super","type","scope","color","textureWidth","textureHeight","clipBias","shader","ReflectorShader","reflectorPlane","normal","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","view","q","textureMatrix","virtualCamera","renderTarget","material","uniforms","clone","fragmentShader","vertexShader","texture","onBeforeRender","renderer","scene","camera","setFromMatrixPosition","matrixWorld","extractRotation","set","applyMatrix4","subVectors","dot","reflect","negate","position","copy","up","lookAt","far","updateMatrixWorld","projectionMatrix","multiply","matrixWorldInverse","setFromNormalAndCoplanarPoint","x","y","z","constant","sign","elements","w","multiplyScalar","encoding","outputEncoding","visible","currentRenderTarget","getRenderTarget","currentXrEnabled","xr","enabled","currentShadowAutoUpdate","shadowMap","autoUpdate","setRenderTarget","state","buffers","depth","setMask","autoClear","clear","viewport","dispose","isReflector","reflectionScene","flowDirection","flowSpeed","reflectivity","scale","WaterShader","textureLoader","normalMap0","load","normalMap1","cycle","halfCycle","clock","reflector","updateTextureMatrix","updateFlow","delta","getDelta","config","matrixAutoUpdate","merge","transparent","fog","wrapS","wrapT","asyncGeneratorStep","gen","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","err","index","mesh","textureList","isPushingTexture","newTexture","push","splice","recPushTexture","vTextureMix","vTextures","tweenNumber","numOfVisiblePics","isRotating","rotateNode","currentCenter","planes","planeWidth","planeHeight","planeGap","preloadImgs","maxPreloadImgCount","carouselArrayRadius","carouselArrayAngle","atan","vs","fs","tempUniforms","vColor","tempPlane","offset","rotation","forEach","plane","__imgSrcToTex","ceil","random","pushNewTexture","raycaster","getImgSrcFunc","imgMeshes","intersects","intersectObjects","intersectObj","object","intersectIndex","indexOf","src","step","moveLeft","moveRight","moveStep","sort","v2","rightmostImg","tempRotationPosition","leftmostImg","imgSrc","imageLoader","setCrossOrigin","tempImageElement","needsUpdate","imgTex","canRemoveImg","planeIndex","manager","debug","materials","meshes","url","onLoad","onProgress","onError","extractUrlBase","loader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","data","parse","console","itemError","arraybuffer","readFile","DataView","chunk","Chunk","debugMessage","MLIBMAGIC","CMAGIC","M3DMAGIC","next","readChunk","M3D_VERSION","version","readDWord","MDATA","readMeshData","hexId","MESH_VERSION","MASTER_SCALE","readFloat","NAMED_OBJECT","readNamedObject","MAT_ENTRY","readMaterialEntry","readString","N_TRI_OBJECT","readMesh","MAT_NAME","MAT_WIRE","wireframe","MAT_WIRE_SIZE","readByte","wireframeLinewidth","MAT_TWO_SIDE","side","MAT_ADDITIVE","blending","MAT_DIFFUSE","readColor","MAT_SPECULAR","specular","MAT_AMBIENT","MAT_SHININESS","shininess","readPercentage","MAT_TRANSPARENCY","transparency","opacity","MAT_TEXMAP","readMap","MAT_BUMPMAP","bumpMap","MAT_OPACMAP","alphaMap","MAT_SPECMAP","specularMap","POINT_ARRAY","points","readWord","vertices","setAttribute","FACE_ARRAY","readFaceArray","TEX_VERTS","texels","uvs","MESH_MATRIX","values","matrix","transpose","inverse","invert","decompose","quaternion","computeVertexNormals","faces","setIndex","materialIndex","endOfChunk","subchunk","MSH_MAT_GROUP","readMaterialGroup","addGroup","resourcePath","crossOrigin","MAT_MAPNAME","MAT_MAP_UOFFSET","MAT_MAP_VOFFSET","MAT_MAP_USCALE","MAT_MAP_VSCALE","numFaces","subChunk","COLOR_24","LIN_COLOR_24","r","g","setRGB","COLOR_F","LIN_COLOR_F","INT_PERCENTAGE","readShort","FLOAT_PERCENTAGE","message","log","Function","size","byteLength","getUint8","getFloat32","getInt32","getInt16","getUint32","getUint16","c","String","fromCharCode","_container","requestAnimationFrame","animate","updatecornerObject","updateCamera","updateCursorLight","stats","cameraZPosition","container","window","innerWidth","innerHeight","alpha","setClearColor","setPixelRatio","devicePixelRatio","setSize","domElement","top","left","appendChild","zIndex","cssScene","cardInsideScene","loadingManager","urls","textureCube","mapping","environment","light","intensity","refractionManager","glassMesh1","RoundedBoxGeometry","glassMesh1InteractAgent","addRefractionMesh","glassMesh1Controller","renderPass1","RenderPass","renderPass2","clearDepth","composer","EffectComposer","offsetWidth","offsetHeight","addPass","renderTarget1","stencilBuffer","renderTarget2","tardisCardTop","TardisCard","RECT","addSkybox","contentGroupInTardisCardTop","titleTexture","tardisCardTopTitle","alphaToCoverage","cardMesh","addVisibleObjectGroup","cssAttachObject","tardisCard1","diffuseTexture","normalTexture","specTexture","texs","contentGroupInTardisCard1","pgnormal","setResourcePath","obj","traverse","child","normalMap","tardisCardBackground1","normalScale","specularColorMap","specularIntensity","metalness","roughness","clearcoat","tardisCard2","CIRCLE","carousel1","diffuseTexture2","normalTexture2","specTexture2","tardisCardBackground","contentGroupInTardisCard2","tardisCard3","carousel2","diffuseTexture3","normalTexture3","specTexture3","contentGroupInTardisCard3","waterGeometry","water","cameraTargetPosition","cameraWithMouseMoveFactor","cameraWithMouseRotateFactor","cameraPositionController","addEventListener","onMouseMove","cursorLightGroup","cursorLight","decay","distance","cursorLightController","intersectTardisCardObjs","intersectGlassObjs","glassSelected","glassIsRotating","mousePosX","mousePosY","pointer","onWindowResize","onClick","cssRenderer","aspect","updateProjectionMatrix","clientX","clientY","setFromCamera","parent","rotateObj","tweenEuler","val","refractionMaterialUniforms","refObj","tweenThreeVector3","updatedVec","clickToRotate","carouselIndex","clickToChangeTex","posX","posY","ray","unproject","targetPos","getRaycastPos","relX","relY","dampPos","vel","velocity","isNaN","camPosZ","targetPosVec","sub","newz","htmlContainer","htmlElem","CustomCSS3DRenderer","extend","fpm","mounted","$refs","HTMLElement","_","glassCSSObj","registerCSSCoordinator","setFollowObject","methods","alert","component","uncurryThis","aCallable","toObject","lengthOfArrayLike","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","un$Sort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","chr","FORCED","getSortCompare","comparefn","forced","array","itemsLength","items","arrayLength","webkit","_tempNormal","getUv","faceDirVector","uvAxis","projectionAxis","radius","sideLength","totArcLength","centerLength","max","halfArc","normalize","arcUvRatio","arcAngleRatio","angleTo","lenUv","height","segments","min","geometry2","toNonIndexed","attributes","uv","box","divideScalar","subScalar","positions","normals","faceTris","halfSegmentSize","j","fromArray","loadShader","shaderName","fragShader","controls","rm","suResolution","suBackground","suImage","suDepth","backColor","absorbColor","suRefractionFactor","suOpacity","originalMaterial","glassFrontVS","glassFrontFS","refractionMaterial","backgroundScene","backDepthTextureSize","frontScene","backdepthTexture","backRenderTarget","depthBuffer","depthTexture","background","refractionObjectList","lib","parameters","setDefaultBacksideMaterial","image","refractionFactor","opacityFactor","_backColor","initScene","antialias","OrbitControls","floorTexture","floorMaterial","floorGeometry","glassMesh2","glassMesh3","ballMesh","runtime","Op","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","makeInvokeMethod","tryCatch","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","method","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","enqueue","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","iter","pop","skipTempReset","prev","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","toAbsoluteIndex","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","deleteCount","insertCount","actualDeleteCount","A","from","O","len","actualStart","argumentsLength","arraySlice","mergeSort","middle","insertionSort","element","right","llength","rlength","lindex","rindex","nativeKeys","FAILS_ON_PRIMITIVES","stat","it","$map","callbackfn","UA","normalizeArray","parts","allowAboveRoot","last","unshift","basename","matchedSlash","charCodeAt","filter","xs","res","resolvedPath","resolvedAbsolute","split","p","join","isAbsolute","trailingSlash","substr","paths","relative","trim","arr","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","ext","extname","startDot","startPart","preDotState","TweenAnimController","requestId","loopAnim","cancelAnimationFrame","animationObjectCount","startAnim","stopAnim","fromValue","toValue","onUpdateFunc","onCompleteFunc","addTweenAnimObject","removeTweenAnimObject","controller"],"mappings":"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","file":"js/chunk-1f04e1f7.958421ba.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var map = {\n\t\"./GlassFrontShader/F.glsl\": \"f430\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"08fd\";","'use strict';\nvar global = require('../internals/global');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar RangeError = global.RangeError;\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = {\n    Linear: {\n        None: function (amount) {\n            return amount;\n        },\n    },\n    Quadratic: {\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    },\n    Cubic: {\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    },\n    Quartic: {\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    },\n    Quintic: {\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    },\n    Sinusoidal: {\n        In: function (amount) {\n            return 1 - Math.cos((amount * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.cos(Math.PI * amount));\n        },\n    },\n    Exponential: {\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    },\n    Circular: {\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    },\n    Elastic: {\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    },\n    Back: {\n        In: function (amount) {\n            var s = 1.70158;\n            return amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    },\n    Bounce: {\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    },\n};\n\nvar now;\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\n// eslint-disable-next-line\n// @ts-ignore\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n    now = function () {\n        // eslint-disable-next-line\n        // @ts-ignore\n        var time = process.hrtime();\n        // Convert [seconds, nanoseconds] to milliseconds.\n        return time[0] * 1000 + time[1] / 1000000;\n    };\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    now = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n    now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n    now = function () {\n        return new Date().getTime();\n    };\n}\nvar now$1 = now;\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now$1(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.to = function (properties, duration) {\n        // TODO? restore this, then update the 07_dynamic_to example to set fox\n        // tween's to on each update. That way the behavior is opt-in (there's\n        // currently no opt-out).\n        // for (const prop in properties) this._valuesEnd[prop] = properties[prop]\n        this._valuesEnd = Object.create(properties);\n        if (duration !== undefined) {\n            this._duration = duration;\n        }\n        return this;\n    };\n    Tween.prototype.duration = function (d) {\n        this._duration = d;\n        return this;\n    };\n    Tween.prototype.start = function (time) {\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time !== undefined ? (typeof time === 'string' ? now$1() + parseFloat(time) : time) : now$1();\n        this._startTime += this._delayTime;\n        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\n        return this;\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // handle an array of relative values\n                endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\n                // Create a local copy of the Array with the start value at the front\n                _valuesEnd[property] = [startValue].concat(endValues);\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                // eslint-disable-next-line\n                for (var prop in startValue) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property][prop] = startValue[prop];\n                }\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\n            }\n            else {\n                // Save the starting value, but only once.\n                if (typeof _valuesStart[property] === 'undefined') {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        if (time === void 0) { time = now$1(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var elapsed;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        elapsed = (time - this._startTime) / this._duration;\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (elapsed === 1) {\n            if (this._repeat > 0) {\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                if (this._repeatDelayTime !== undefined) {\n                    this._startTime = time + this._repeatDelayTime;\n                }\n                else {\n                    this._startTime = time + this._delayTime;\n                }\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        else {\n            return parseFloat(end);\n        }\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '18.6.4';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now$1,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport default exports;\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, getAll, nextId, now$1 as now, remove, removeAll, update };\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeFrontpageTest.vue?vue&type=style&index=0&id=530f970e&scoped=true&lang=css&\"","var $ = require('../internals/export');\nvar repeat = require('../internals/string-repeat');\n\n// `String.prototype.repeat` method\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"canvas-container\",attrs:{\"id\":\"canvas-container\"}},[_c('div',{staticClass:\"loading-container\",class:{\n            'loading-container--hidden': _vm.loadingStat.isLoaded,\n            'loading-container--none': _vm.loadingStat.noLoadingStat\n        }},[_c('div',{staticClass:\"load-stat\"},[_c('div',{staticClass:\"load-pgbar\",style:({\n                    width: 100 * _vm.loadingStat.loaded / _vm.loadingStat.total + '%'\n                })}),_c('div',{staticClass:\"load-text\"},[_vm._v(_vm._s(Math.round(100 * _vm.loadingStat.loaded / _vm.loadingStat.total))+\" %\")])])])]),_c('div',{ref:\"dom3d-container\",attrs:{\"id\":\"dom3d-container\"}},[_c('div',{ref:\"dom3d-test\",attrs:{\"id\":\"dom3d-test\"}},[_c('p',[_vm._v(\"HTML element: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\")])]),_c('div',{ref:\"dom3d-glass\",attrs:{\"id\":\"dom3d-glass\"},on:{\"click\":_vm.onGlassClick}},[_vm._m(0)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dom3d-glass-ball\"},[_c('div',{staticClass:\"dom3d-glass-ball__text\"},[_vm._v(\"html element following object\")])])}]\n\nexport { render, staticRenderFns }","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from 'three';\n\nclass Reflector extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Reflector';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Reflector.ReflectorShader;\n\n\t\t//\n\n\t\tconst reflectorPlane = new Plane();\n\t\tconst normal = new Vector3();\n\t\tconst reflectorWorldPosition = new Vector3();\n\t\tconst cameraWorldPosition = new Vector3();\n\t\tconst rotationMatrix = new Matrix4();\n\t\tconst lookAtPosition = new Vector3( 0, 0, - 1 );\n\t\tconst clipPlane = new Vector4();\n\n\t\tconst view = new Vector3();\n\t\tconst target = new Vector3();\n\t\tconst q = new Vector4();\n\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst virtualCamera = new PerspectiveCamera();\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight );\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader\n\t\t} );\n\n\t\tmaterial.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tmaterial.uniforms[ 'color' ].value = color;\n\t\tmaterial.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\tthis.material = material;\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\treflectorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\tview.subVectors( reflectorWorldPosition, cameraWorldPosition );\n\n\t\t\t// Avoid rendering when reflector is facing away\n\n\t\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\t\tview.reflect( normal ).negate();\n\t\t\tview.add( reflectorWorldPosition );\n\n\t\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\t\ttarget.subVectors( reflectorWorldPosition, lookAtPosition );\n\t\t\ttarget.reflect( normal ).negate();\n\t\t\ttarget.add( reflectorWorldPosition );\n\n\t\t\tvirtualCamera.position.copy( view );\n\t\t\tvirtualCamera.up.set( 0, 1, 0 );\n\t\t\tvirtualCamera.up.applyMatrix4( rotationMatrix );\n\t\t\tvirtualCamera.up.reflect( normal );\n\t\t\tvirtualCamera.lookAt( target );\n\n\t\t\tvirtualCamera.far = camera.far; // Used in WebGLBackground\n\n\t\t\tvirtualCamera.updateMatrixWorld();\n\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t// Update the texture matrix\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\t\t\ttextureMatrix.multiply( virtualCamera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( virtualCamera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\t\treflectorPlane.setFromNormalAndCoplanarPoint( normal, reflectorWorldPosition );\n\t\t\treflectorPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\tclipPlane.set( reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant );\n\n\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\tq.z = - 1.0;\n\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t// Calculate the scaled plane vector\n\t\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t\t// Replacing the third row of the projection matrix\n\t\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t\t// Render\n\n\t\t\trenderTarget.texture.encoding = renderer.outputEncoding;\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // Avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// Restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nReflector.prototype.isReflector = true;\n\nReflector.ReflectorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}`\n};\n\nexport { Reflector };\n","import {\r\n\tClock,\r\n\tColor,\r\n\tMatrix4,\r\n\tMesh,\r\n\tRepeatWrapping,\r\n\tShaderMaterial,\r\n\tTextureLoader,\r\n\tUniformsLib,\r\n\tUniformsUtils,\r\n\tVector2,\r\n\tVector4,\r\n    BufferGeometry,\r\n    Camera,\r\n    Material,\r\n    Group,\r\n    Scene\r\n} from 'three';\r\nimport { Reflector } from 'three/examples/jsm/objects/Reflector'\r\nimport { Refractor } from 'three/examples/jsm/objects/Refractor'\r\nimport { Water2Options } from 'three/examples/jsm/objects/Water2'\r\n/**\r\n * References:\r\n *\thttps://github.com/mrdoob/three.js/blob/dev/examples/jsm/objects/Water2.js\r\n *\r\n */\r\n\r\nclass SQWater extends Mesh {\r\n\r\n    material: ShaderMaterial\r\n\r\n\tconstructor( geometry: BufferGeometry, reflectionScene: Scene, options: Water2Options = {} ) {\r\n\r\n\t\tsuper( geometry );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0xFFFFFF );\r\n\t\tconst textureWidth = options.textureWidth || 512;\r\n\t\tconst textureHeight = options.textureHeight || 512;\r\n\t\tconst clipBias = options.clipBias || 0;\r\n\t\tconst flowDirection = options.flowDirection || new Vector2( 1, 0 );\r\n\t\tconst flowSpeed = options.flowSpeed || 0.01;\r\n\t\tconst reflectivity = options.reflectivity || 0.5;\r\n\t\tconst scale = options.scale || 1;\r\n\t\tconst shader = WaterShader;\r\n\r\n\t\tconst textureLoader = new TextureLoader();\r\n\r\n\t\tconst normalMap0 = options.normalMap0 || textureLoader.load( './water/Water_1_M_Normal.jpg' );\r\n\t\tconst normalMap1 = options.normalMap1 || textureLoader.load( './water/Water_2_M_Normal.jpg' );\r\n\r\n\t\tconst cycle = 0.15; // a cycle of a flow map phase\r\n\t\tconst halfCycle = cycle * 0.5;\r\n\t\tconst textureMatrix = new Matrix4();\r\n\t\tconst clock = new Clock();\r\n        this.material = new ShaderMaterial()\r\n\t\t// internal components\r\n\r\n\t\tconst reflector = new Reflector( geometry, {\r\n\t\t\ttextureWidth: textureWidth,\r\n\t\t\ttextureHeight: textureHeight,\r\n\t\t\tclipBias: clipBias\r\n\t\t} );\r\n\r\n\t\treflector.matrixAutoUpdate = false\r\n\r\n\t\t// material\r\n\r\n\t\tthis.material = new ShaderMaterial( {\r\n\t\t\tuniforms: UniformsUtils.merge( [\r\n\t\t\t\tUniformsLib[ 'fog' ],\r\n\t\t\t\tshader.uniforms\r\n\t\t\t] ),\r\n\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\tfragmentShader: shader.fragmentShader,\r\n\t\t\ttransparent: true,\r\n\t\t\tfog: true\r\n\t\t} );\r\n\r\n        this.material.uniforms[ 'flowDirection' ].value = flowDirection\r\n\r\n\t\t// maps\r\n\r\n\t\tnormalMap0.wrapS = normalMap0.wrapT = RepeatWrapping;\r\n\t\tnormalMap1.wrapS = normalMap1.wrapT = RepeatWrapping;\r\n\r\n\t\tthis.material.uniforms[ 'tReflectionMap' ].value = reflector.getRenderTarget().texture;\r\n\t\tthis.material.uniforms[ 'tNormalMap0' ].value = normalMap0;\r\n\t\tthis.material.uniforms[ 'tNormalMap1' ].value = normalMap1;\r\n\r\n\t\t// water\r\n\r\n\t\tthis.material.uniforms[ 'reflectivity' ].value = reflectivity;\r\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\r\n\r\n\t\t// inital values\r\n\r\n\t\tthis.material.uniforms[ 'config' ].value.x = 0; // flowMapOffset0\r\n\t\tthis.material.uniforms[ 'config' ].value.y = halfCycle; // flowMapOffset1\r\n\t\tthis.material.uniforms[ 'config' ].value.z = halfCycle; // halfCycle\r\n\t\tthis.material.uniforms[ 'config' ].value.w = scale; // scale\r\n\r\n\t\t// functions\r\n\r\n\t\tfunction updateTextureMatrix( camera: Camera ) {\r\n\r\n\t\t\ttextureMatrix.set(\r\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t);\r\n\r\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\r\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\r\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tfunction updateFlow() {\r\n\r\n\t\t\tconst delta = clock.getDelta();\r\n\t\t\tconst config = scope.material.uniforms[ 'config' ];\r\n\r\n\t\t\tconfig.value.x += flowSpeed * delta; // flowMapOffset0\r\n\t\t\tconfig.value.y = config.value.x + halfCycle; // flowMapOffset1\r\n\r\n\t\t\t// Important: The distance between offsets should be always the value of \"halfCycle\".\r\n\t\t\t// Moreover, both offsets should be in the range of [ 0, cycle ].\r\n\t\t\t// This approach ensures a smooth water flow and avoids \"reset\" effects.\r\n\r\n\t\t\tif ( config.value.x >= cycle ) {\r\n\r\n\t\t\t\tconfig.value.x = 0;\r\n\t\t\t\tconfig.value.y = halfCycle;\r\n\r\n\t\t\t} else if ( config.value.y >= cycle ) {\r\n\r\n\t\t\t\tconfig.value.y = config.value.y - cycle;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tthis.onBeforeRender = function ( renderer, scene, camera: Camera, geometry: BufferGeometry, material: Material, group: Group ) {\r\n\r\n\t\t\tupdateTextureMatrix( camera );\r\n\t\t\tupdateFlow();\r\n\r\n\t\t\tscope.visible = false;\r\n\r\n\t\t\treflector.matrixWorld.copy( scope.matrixWorld );\r\n\r\n\t\t\treflector.onBeforeRender( renderer, reflectionScene, camera, geometry, material, group );\r\n\r\n\t\t\tscope.visible = true;\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst WaterShader = {\r\n\r\n\tuniforms: {\r\n\r\n\t\t'reflectivity': {\r\n\t\t\ttype: 'f',\r\n\t\t\tvalue: 0\r\n\t\t},\r\n\r\n\t\t'tReflectionMap': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'tRefractionMap': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'tNormalMap0': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'tNormalMap1': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'textureMatrix': {\r\n\t\t\ttype: 'm4',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'config': {\r\n\t\t\ttype: 'v4',\r\n\t\t\tvalue: new Vector4()\r\n\t\t},\r\n\r\n\t\t'flowDirection': {\r\n            type: 'v2',\r\n            value: new Vector2()\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tvertexShader: /* glsl */`\r\n\r\n\t\t#include <common>\r\n\t\t#include <fog_pars_vertex>\r\n\t\t#include <logdepthbuf_pars_vertex>\r\n\r\n\t\tuniform mat4 textureMatrix;\r\n\r\n\t\tvarying vec4 vCoord;\r\n\t\tvarying vec2 vUv;\r\n\t\tvarying vec3 vToEye;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = uv;\r\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\r\n\r\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\r\n\t\t\tgl_Position = projectionMatrix * mvPosition;\r\n\r\n\t\t\t#include <logdepthbuf_vertex>\r\n\t\t\t#include <fog_vertex>\r\n\r\n\t\t}`,\r\n\r\n\tfragmentShader: /* glsl */`\r\n\r\n\t\t#include <common>\r\n\t\t#include <fog_pars_fragment>\r\n\t\t#include <logdepthbuf_pars_fragment>\r\n\r\n\t\tuniform sampler2D tReflectionMap;\r\n\t\tuniform sampler2D tRefractionMap;\r\n\t\tuniform sampler2D tNormalMap0;\r\n\t\tuniform sampler2D tNormalMap1;\r\n\r\n\t\tuniform vec2 flowDirection;\r\n\r\n\t\tuniform float reflectivity;\r\n\t\tuniform vec4 config;\r\n\r\n\t\tvarying vec4 vCoord;\r\n\t\tvarying vec2 vUv;\r\n\t\tvarying vec3 vToEye;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\t#include <logdepthbuf_fragment>\r\n\r\n\t\t\tfloat flowMapOffset0 = config.x;\r\n\t\t\tfloat flowMapOffset1 = config.y;\r\n\t\t\tfloat halfCycle = config.z;\r\n\t\t\tfloat scale = config.w;\r\n\r\n\t\t\tvec3 toEye = normalize( vToEye );\r\n\r\n\t\t\t// determine flow direction\r\n\t\t\tvec2 flow;\r\n\t\t\tflow = flowDirection;\r\n\t\t\tflow.x *= - 1.0;\r\n\r\n\t\t\t// sample normal maps (distort uvs with flowdata)\r\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\r\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\r\n\r\n\t\t\t// linear interpolate to get the final normal color\r\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\r\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\r\n\r\n\t\t\t// calculate normal vector\r\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\r\n\r\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\r\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\r\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\r\n            reflectance = pow(reflectance + 0.3, 4.0);\r\n            // reflectance = floor(reflectance *  2.0) / 4.0;\r\n            vec4 refractColor = vec4(1.0);\r\n\r\n\t\t\t// calculate final uv coords\r\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\r\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\r\n\r\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\r\n            reflectColor *= vec4(1.0, 1.0, 0.8, 1.0);\r\n\r\n\t\t\tgl_FragColor = mix(refractColor, reflectColor, reflectance);\r\n\r\n\t\t\t#include <tonemapping_fragment>\r\n\t\t\t#include <encodings_fragment>\r\n\t\t\t#include <fog_fragment>\r\n\r\n\t\t}`\r\n\r\n};\r\n\r\nexport { SQWater };","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import * as THREE from 'three'\r\nimport { controller } from '../AnimUtils/TweenUtils'\r\nimport { loadShader } from './ShaderLoader';\r\n\r\nexport interface CarouselOptions {\r\n    numOfVisiblePics: number;\r\n    planeWidth?: number;\r\n    planeHeight?: number;\r\n    planeGap?: number;\r\n    carouselArrayRadius?: number\r\n}\r\n\r\ninterface CarouselPlaneUniforms {\r\n    vColor: { type: string, value: THREE.Color };\r\n    vTextures: { type: string, value: Array<THREE.Texture | undefined> };\r\n    vTextureMix: { type: string, value: number };\r\n}\r\n\r\nclass CarouselPlane {\r\n    index: number\r\n    mesh: THREE.Mesh<THREE.PlaneBufferGeometry, THREE.ShaderMaterial>\r\n    uniforms: CarouselPlaneUniforms\r\n    textureList: Array<THREE.Texture | undefined>\r\n    isPushingTexture: Boolean\r\n    constructor(index: number, mesh: THREE.Mesh<THREE.PlaneBufferGeometry, THREE.ShaderMaterial>, uniforms: CarouselPlaneUniforms) {\r\n        this.index = index\r\n        this.mesh = mesh\r\n        this.uniforms = uniforms\r\n        this.mesh = mesh\r\n        this.textureList = []\r\n        this.isPushingTexture = false\r\n    }\r\n    pushNewTexture(newTexture: THREE.Texture) {\r\n        if (this.textureList.length == 0) {\r\n            this.textureList.push(undefined, newTexture)\r\n        }\r\n        else if (this.textureList.length == 1) {\r\n            this.textureList.push(newTexture)\r\n        }\r\n        else {\r\n            this.textureList.splice(1, this.textureList.length-2)\r\n            this.textureList.push(newTexture)\r\n        }\r\n        if (this.isPushingTexture == false) {\r\n            this.recPushTexture()\r\n        }\r\n    }\r\n    recPushTexture() {\r\n        if (this.textureList.length <= 1) {\r\n            this.isPushingTexture = false\r\n            return\r\n        }\r\n        this.isPushingTexture = true\r\n        if (this.textureList.length == 2) {\r\n            this.uniforms.vTextureMix.value = 0\r\n            // this.uniforms.vTexture1.value = undefined\r\n            // this.uniforms.vTexture2.value = undefined\r\n            this.uniforms.vTextures.value[0] = this.textureList[0]\r\n            this.uniforms.vTextures.value[1] = this.textureList[1]\r\n            // this.textureList.splice(0, 1)\r\n            this.isPushingTexture = false\r\n            controller.tweenNumber(0, 1, (v) => {\r\n                this.uniforms.vTextureMix.value = v\r\n            },\r\n            () => {\r\n                this.uniforms.vTextures.value[0] = this.textureList[1]\r\n                this.uniforms.vTextures.value[1] = this.textureList[1]\r\n                this.uniforms.vTextureMix.value = 1\r\n                this.textureList.splice(0, 1)\r\n                this.recPushTexture()\r\n            }, 500)\r\n        }\r\n    }\r\n}\r\n\r\nexport class Carousel extends THREE.Group {\r\n    numOfVisiblePics: number\r\n    rotateNode: THREE.Group\r\n    isRotating: Boolean\r\n    planes: Array<CarouselPlane>\r\n    planeWidth: number\r\n    planeHeight: number\r\n    planeGap: number\r\n    preloadImgs: { [key: string]: THREE.Texture }\r\n    maxPreloadImgCount: number\r\n    carouselArrayRadius: number\r\n    carouselArrayAngle: number\r\n    currentCenter: number\r\n    constructor(options: CarouselOptions = { numOfVisiblePics: 3 }) {\r\n\r\n        super()\r\n\r\n        this.isRotating = false\r\n        this.rotateNode = new THREE.Group()\r\n        this.add(this.rotateNode)\r\n        this.currentCenter = 0\r\n\r\n        this.numOfVisiblePics = options.numOfVisiblePics\r\n        this.planes = []\r\n        this.planeWidth = options.planeWidth || 50\r\n        this.planeHeight = options.planeHeight || 50\r\n        this.planeGap = options.planeGap || 10\r\n        this.preloadImgs = {}\r\n        this.maxPreloadImgCount = this.numOfVisiblePics * 2\r\n        this.carouselArrayRadius = options.carouselArrayRadius || 100\r\n        this.carouselArrayAngle = Math.atan((this.planeWidth + this.planeGap) / (this.carouselArrayRadius * 2)) * 2\r\n        var [vs, fs] = loadShader('CarouselBasicShader')\r\n        for (let i = 0; i < this.numOfVisiblePics; i++) {\r\n            const tempUniforms = {\r\n                vColor: { type: 'c', value: new THREE.Color(0xff0000) },\r\n                vTextures: { type: 'tv', value: [ undefined, undefined ] },\r\n                vTextureMix: { type: 'f', value: 1 },\r\n            }\r\n            const tempPlane = new THREE.Mesh(\r\n                new THREE.PlaneBufferGeometry(this.planeWidth, this.planeHeight, 1, 1),\r\n                new THREE.ShaderMaterial({\r\n                    uniforms : tempUniforms,\r\n                    vertexShader    : vs,\r\n                    fragmentShader  : fs\r\n                })\r\n            )\r\n            let offset = (i - (this.numOfVisiblePics - 1) / 2)\r\n            tempPlane.rotation.y = -(offset * this.carouselArrayAngle)\r\n            tempPlane.position.x = this.carouselArrayRadius * Math.sin(offset * this.carouselArrayAngle)\r\n            tempPlane.position.z = -this.carouselArrayRadius * Math.cos(offset * this.carouselArrayAngle)\r\n            this.planes.push(new CarouselPlane(i, tempPlane, tempUniforms))\r\n            this.rotateNode.add(tempPlane)\r\n        }\r\n        this.planes.forEach(plane => {\r\n            this.__imgSrcToTex(`https://picsum.photos/id/${Math.ceil(Math.random() * 50)}/200/200`).then((v) => {\r\n                plane.pushNewTexture(v)\r\n            })\r\n        })\r\n    }\r\n\r\n    clickToChangeTex(raycaster: THREE.Raycaster, getImgSrcFunc: (carouselIndex: number) => string) {\r\n        let imgMeshes = this.planes.map((v) => v.mesh)\r\n        let intersects = raycaster.intersectObjects(imgMeshes)\r\n        if (intersects.length == 1) {\r\n            const intersectObj = intersects[0].object\r\n            if (intersectObj instanceof THREE.Mesh) {\r\n                let intersectIndex = imgMeshes.indexOf(intersectObj)\r\n                let src = getImgSrcFunc(intersectIndex)\r\n                this.__imgSrcToTex(src).then((v) => {\r\n                    this.planes[intersectIndex].pushNewTexture(v)\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    clickToRotate(raycaster: THREE.Raycaster, getImgSrcFunc: (carouselIndex: number) => string) {\r\n        let imgMeshes = this.planes.map((v) => v.mesh)\r\n        let intersects = raycaster.intersectObjects(imgMeshes)\r\n        if (intersects.length == 1) {\r\n            const intersectObj = intersects[0].object\r\n            if (intersectObj instanceof THREE.Mesh) {\r\n                let intersectIndex = imgMeshes.indexOf(intersectObj)\r\n                let step = this.planes[intersectIndex].index - this.currentCenter - Math.floor(this.planes.length / 2)\r\n                if (step < 0) {\r\n                    this.moveLeft(-step, getImgSrcFunc)\r\n                }\r\n                else if (step > 0) {\r\n                    this.moveRight(step, getImgSrcFunc)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    moveLeft(moveStep: number = 1, getImgSrcFunc: (carouselIndex: number) => string) {\r\n        if (this.isRotating) {\r\n            return\r\n        }\r\n        this.isRotating = true\r\n        // move rightmost img to leftmost, change index, rotate rotateNode\r\n        for (let i = 0; i < moveStep; i++) {\r\n            this.planes.sort((v1, v2) => v2.index - v1.index)\r\n            const rightmostImg = this.planes[0]\r\n            rightmostImg.index = this.planes[this.planes.length - 1].index - 1\r\n            let offset = (rightmostImg.index - (this.numOfVisiblePics - 1) / 2)\r\n            rightmostImg.mesh.rotation.y = -(offset * this.carouselArrayAngle)\r\n            rightmostImg.mesh.position.x = this.carouselArrayRadius * Math.sin(offset * this.carouselArrayAngle)\r\n            rightmostImg.mesh.position.z = -this.carouselArrayRadius * Math.cos(offset * this.carouselArrayAngle)\r\n            let src = getImgSrcFunc(rightmostImg.index)\r\n            this.__imgSrcToTex(src).then((v) => {\r\n                rightmostImg.pushNewTexture(v)\r\n            })\r\n        }\r\n        controller.tweenNumber(0, moveStep, (v) => {\r\n            let tempRotationPosition = this.carouselArrayAngle * (this.currentCenter - v)\r\n            this.rotateNode.rotation.y = tempRotationPosition\r\n        }, () => {\r\n            this.currentCenter -= moveStep\r\n            this.isRotating = false\r\n        }, 500)\r\n    }\r\n\r\n    moveRight(moveStep: number = 1, getImgSrcFunc: (carouselIndex: number) => string) {\r\n        if (this.isRotating) {\r\n            return\r\n        }\r\n        this.isRotating = true\r\n        // move leftmost img to rightmost, change index, rotate rotateNode\r\n        for (let i = 0; i < moveStep; i++) {\r\n            this.planes.sort((v1, v2) => v1.index - v2.index)\r\n            const leftmostImg = this.planes[0]\r\n            leftmostImg.index = this.planes[this.planes.length - 1].index + 1\r\n            let offset = (leftmostImg.index - (this.numOfVisiblePics - 1) / 2)\r\n            leftmostImg.mesh.rotation.y = -(offset * this.carouselArrayAngle)\r\n            leftmostImg.mesh.position.x = this.carouselArrayRadius * Math.sin(offset * this.carouselArrayAngle)\r\n            leftmostImg.mesh.position.z = -this.carouselArrayRadius * Math.cos(offset * this.carouselArrayAngle)\r\n            let src = getImgSrcFunc(leftmostImg.index)\r\n            this.__imgSrcToTex(src).then((v) => {\r\n                leftmostImg.pushNewTexture(v)\r\n            })\r\n        }\r\n        controller.tweenNumber(0, moveStep, (v) => {\r\n            let tempRotationPosition = this.carouselArrayAngle * (this.currentCenter + v)\r\n            this.rotateNode.rotation.y = tempRotationPosition\r\n        }, () => {\r\n            this.currentCenter += moveStep\r\n            this.isRotating = false\r\n        }, 500)\r\n    }\r\n\r\n\r\n    async __imgSrcToTex(imgSrc: string): Promise<THREE.Texture> {\r\n        const self = this\r\n        return new Promise<THREE.Texture>((resolve, reject) => {\r\n            if (self.preloadImgs[imgSrc]) {\r\n                resolve(self.preloadImgs[imgSrc])\r\n            }\r\n            let imageLoader = new THREE.ImageLoader()\r\n            imageLoader.setCrossOrigin( 'anonymous' ) // TODO: debug\r\n            imageLoader.load(imgSrc, (tempImageElement) => {\r\n                let texture = new THREE.Texture( tempImageElement )\r\n                texture.needsUpdate = true\r\n                self.preloadImgs[imgSrc] = texture\r\n\r\n                // dispose textures\r\n                if (Object.keys(self.preloadImgs).length >= self.maxPreloadImgCount) {\r\n                    // remove an unused texture\r\n                    for (let k in self.preloadImgs) {\r\n                        let imgTex = self.preloadImgs[k]\r\n                        let canRemoveImg = true\r\n                        for (let planeIndex = 0; planeIndex < self.planes.length; planeIndex ++) {\r\n                            if (self.planes[planeIndex].uniforms.vTextures.value.indexOf(imgTex) > -1) {\r\n                                canRemoveImg = false\r\n                                break\r\n                            }\r\n                        }\r\n                        if (canRemoveImg) {\r\n                            // imgTex is not in use in any carousel card\r\n                            imgTex.dispose()\r\n                            delete self.preloadImgs[k]\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n                resolve(texture)\r\n            })\r\n        })\r\n    }\r\n}","import {\n\tAdditiveBlending,\n\tBufferGeometry,\n\tColor,\n\tDoubleSide,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLoader,\n\tLoaderUtils,\n\tMatrix4,\n\tMesh,\n\tMeshPhongMaterial,\n\tTextureLoader\n} from 'three';\n\n/**\n * Autodesk 3DS three.js file loader, based on lib3ds.\n *\n * Loads geometry with uv and materials basic properties with texture support.\n *\n * @class TDSLoader\n * @constructor\n */\n\nclass TDSLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.debug = false;\n\n\t\tthis.group = null;\n\n\t\tthis.materials = [];\n\t\tthis.meshes = [];\n\n\t}\n\n\t/**\n\t * Load 3ds file from url.\n\t *\n\t * @method load\n\t * @param {[type]} url URL for the file.\n\t * @param {Function} onLoad onLoad callback, receives group Object3D as argument.\n\t * @param {Function} onProgress onProgress callback.\n\t * @param {Function} onError onError callback.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( data, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/**\n\t * Parse arraybuffer data and load 3ds file.\n\t *\n\t * @method parse\n\t * @param {ArrayBuffer} arraybuffer Arraybuffer data to be loaded.\n\t * @param {String} path Path for external resources.\n\t * @return {Group} Group loaded from 3ds file.\n\t */\n\tparse( arraybuffer, path ) {\n\n\t\tthis.group = new Group();\n\t\tthis.materials = [];\n\t\tthis.meshes = [];\n\n\t\tthis.readFile( arraybuffer, path );\n\n\t\tfor ( let i = 0; i < this.meshes.length; i ++ ) {\n\n\t\t\tthis.group.add( this.meshes[ i ] );\n\n\t\t}\n\n\t\treturn this.group;\n\n\t}\n\n\t/**\n\t * Decode file content to read 3ds data.\n\t *\n\t * @method readFile\n\t * @param {ArrayBuffer} arraybuffer Arraybuffer data to be loaded.\n\t * @param {String} path Path for external resources.\n\t */\n\treadFile( arraybuffer, path ) {\n\n\t\tconst data = new DataView( arraybuffer );\n\t\tconst chunk = new Chunk( data, 0, this.debugMessage );\n\n\t\tif ( chunk.id === MLIBMAGIC || chunk.id === CMAGIC || chunk.id === M3DMAGIC ) {\n\n\t\t\tlet next = chunk.readChunk();\n\n\t\t\twhile ( next ) {\n\n\t\t\t\tif ( next.id === M3D_VERSION ) {\n\n\t\t\t\t\tconst version = next.readDWord();\n\t\t\t\t\tthis.debugMessage( '3DS file version: ' + version );\n\n\t\t\t\t} else if ( next.id === MDATA ) {\n\n\t\t\t\t\tthis.readMeshData( next, path );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.debugMessage( 'Unknown main chunk: ' + next.hexId );\n\n\t\t\t\t}\n\n\t\t\t\tnext = chunk.readChunk();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.debugMessage( 'Parsed ' + this.meshes.length + ' meshes' );\n\n\t}\n\n\t/**\n\t * Read mesh data chunk.\n\t *\n\t * @method readMeshData\n\t * @param {Chunk} chunk to read mesh from\n\t * @param {String} path Path for external resources.\n\t */\n\treadMeshData( chunk, path ) {\n\n\t\tlet next = chunk.readChunk();\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === MESH_VERSION ) {\n\n\t\t\t\tconst version = + next.readDWord();\n\t\t\t\tthis.debugMessage( 'Mesh Version: ' + version );\n\n\t\t\t} else if ( next.id === MASTER_SCALE ) {\n\n\t\t\t\tconst scale = next.readFloat();\n\t\t\t\tthis.debugMessage( 'Master scale: ' + scale );\n\t\t\t\tthis.group.scale.set( scale, scale, scale );\n\n\t\t\t} else if ( next.id === NAMED_OBJECT ) {\n\n\t\t\t\tthis.debugMessage( 'Named Object' );\n\t\t\t\tthis.readNamedObject( next );\n\n\t\t\t} else if ( next.id === MAT_ENTRY ) {\n\n\t\t\t\tthis.debugMessage( 'Material' );\n\t\t\t\tthis.readMaterialEntry( next, path );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( 'Unknown MDATA chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Read named object chunk.\n\t *\n\t * @method readNamedObject\n\t * @param {Chunk} chunk Chunk in use.\n\t */\n\treadNamedObject( chunk ) {\n\n\t\tconst name = chunk.readString();\n\n\t\tlet next = chunk.readChunk();\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === N_TRI_OBJECT ) {\n\n\t\t\t\tconst mesh = this.readMesh( next );\n\t\t\t\tmesh.name = name;\n\t\t\t\tthis.meshes.push( mesh );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( 'Unknown named object chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk( );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Read material data chunk and add it to the material list.\n\t *\n\t * @method readMaterialEntry\n\t * @param {Chunk} chunk Chunk in use.\n\t * @param {String} path Path for external resources.\n\t */\n\treadMaterialEntry( chunk, path ) {\n\n\t\tlet next = chunk.readChunk();\n\t\tconst material = new MeshPhongMaterial();\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === MAT_NAME ) {\n\n\t\t\t\tmaterial.name = next.readString();\n\t\t\t\tthis.debugMessage( '   Name: ' + material.name );\n\n\t\t\t} else if ( next.id === MAT_WIRE ) {\n\n\t\t\t\tthis.debugMessage( '   Wireframe' );\n\t\t\t\tmaterial.wireframe = true;\n\n\t\t\t} else if ( next.id === MAT_WIRE_SIZE ) {\n\n\t\t\t\tconst value = next.readByte();\n\t\t\t\tmaterial.wireframeLinewidth = value;\n\t\t\t\tthis.debugMessage( '   Wireframe Thickness: ' + value );\n\n\t\t\t} else if ( next.id === MAT_TWO_SIDE ) {\n\n\t\t\t\tmaterial.side = DoubleSide;\n\t\t\t\tthis.debugMessage( '   DoubleSided' );\n\n\t\t\t} else if ( next.id === MAT_ADDITIVE ) {\n\n\t\t\t\tthis.debugMessage( '   Additive Blending' );\n\t\t\t\tmaterial.blending = AdditiveBlending;\n\n\t\t\t} else if ( next.id === MAT_DIFFUSE ) {\n\n\t\t\t\tthis.debugMessage( '   Diffuse Color' );\n\t\t\t\tmaterial.color = this.readColor( next );\n\n\t\t\t} else if ( next.id === MAT_SPECULAR ) {\n\n\t\t\t\tthis.debugMessage( '   Specular Color' );\n\t\t\t\tmaterial.specular = this.readColor( next );\n\n\t\t\t} else if ( next.id === MAT_AMBIENT ) {\n\n\t\t\t\tthis.debugMessage( '   Ambient color' );\n\t\t\t\tmaterial.color = this.readColor( next );\n\n\t\t\t} else if ( next.id === MAT_SHININESS ) {\n\n\t\t\t\tconst shininess = this.readPercentage( next );\n\t\t\t\tmaterial.shininess = shininess * 100;\n\t\t\t\tthis.debugMessage( '   Shininess : ' + shininess );\n\n\t\t\t} else if ( next.id === MAT_TRANSPARENCY ) {\n\n\t\t\t\tconst transparency = this.readPercentage( next );\n\t\t\t\tmaterial.opacity = 1 - transparency;\n\t\t\t\tthis.debugMessage( '  Transparency : ' + transparency );\n\t\t\t\tmaterial.transparent = material.opacity < 1 ? true : false;\n\n\t\t\t} else if ( next.id === MAT_TEXMAP ) {\n\n\t\t\t\tthis.debugMessage( '   ColorMap' );\n\t\t\t\tmaterial.map = this.readMap( next, path );\n\n\t\t\t} else if ( next.id === MAT_BUMPMAP ) {\n\n\t\t\t\tthis.debugMessage( '   BumpMap' );\n\t\t\t\tmaterial.bumpMap = this.readMap( next, path );\n\n\t\t\t} else if ( next.id === MAT_OPACMAP ) {\n\n\t\t\t\tthis.debugMessage( '   OpacityMap' );\n\t\t\t\tmaterial.alphaMap = this.readMap( next, path );\n\n\t\t\t} else if ( next.id === MAT_SPECMAP ) {\n\n\t\t\t\tthis.debugMessage( '   SpecularMap' );\n\t\t\t\tmaterial.specularMap = this.readMap( next, path );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '   Unknown material chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk();\n\n\t\t}\n\n\t\tthis.materials[ material.name ] = material;\n\n\t}\n\n\t/**\n\t * Read mesh data chunk.\n\t *\n\t * @method readMesh\n\t * @param {Chunk} chunk Chunk in use.\n\t * @return {Mesh} The parsed mesh.\n\t */\n\treadMesh( chunk ) {\n\n\t\tlet next = chunk.readChunk( );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst material = new MeshPhongMaterial();\n\t\tconst mesh = new Mesh( geometry, material );\n\t\tmesh.name = 'mesh';\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === POINT_ARRAY ) {\n\n\t\t\t\tconst points = next.readWord( );\n\n\t\t\t\tthis.debugMessage( '   Vertex: ' + points );\n\n\t\t\t\t//BufferGeometry\n\n\t\t\t\tconst vertices = [];\n\n\t\t\t\tfor ( let i = 0; i < points; i ++ )\t\t{\n\n\t\t\t\t\tvertices.push( next.readFloat( ) );\n\t\t\t\t\tvertices.push( next.readFloat( ) );\n\t\t\t\t\tvertices.push( next.readFloat( ) );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t\t} else if ( next.id === FACE_ARRAY ) {\n\n\t\t\t\tthis.readFaceArray( next, mesh );\n\n\t\t\t} else if ( next.id === TEX_VERTS ) {\n\n\t\t\t\tconst texels = next.readWord( );\n\n\t\t\t\tthis.debugMessage( '   UV: ' + texels );\n\n\t\t\t\t//BufferGeometry\n\n\t\t\t\tconst uvs = [];\n\n\t\t\t\tfor ( let i = 0; i < texels; i ++ ) {\n\n\t\t\t\t\tuvs.push( next.readFloat( ) );\n\t\t\t\t\tuvs.push( next.readFloat( ) );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t\t} else if ( next.id === MESH_MATRIX ) {\n\n\t\t\t\tthis.debugMessage( '   Tranformation Matrix (TODO)' );\n\n\t\t\t\tconst values = [];\n\t\t\t\tfor ( let i = 0; i < 12; i ++ ) {\n\n\t\t\t\t\tvalues[ i ] = next.readFloat( );\n\n\t\t\t\t}\n\n\t\t\t\tconst matrix = new Matrix4();\n\n\t\t\t\t//X Line\n\t\t\t\tmatrix.elements[ 0 ] = values[ 0 ];\n\t\t\t\tmatrix.elements[ 1 ] = values[ 6 ];\n\t\t\t\tmatrix.elements[ 2 ] = values[ 3 ];\n\t\t\t\tmatrix.elements[ 3 ] = values[ 9 ];\n\n\t\t\t\t//Y Line\n\t\t\t\tmatrix.elements[ 4 ] = values[ 2 ];\n\t\t\t\tmatrix.elements[ 5 ] = values[ 8 ];\n\t\t\t\tmatrix.elements[ 6 ] = values[ 5 ];\n\t\t\t\tmatrix.elements[ 7 ] = values[ 11 ];\n\n\t\t\t\t//Z Line\n\t\t\t\tmatrix.elements[ 8 ] = values[ 1 ];\n\t\t\t\tmatrix.elements[ 9 ] = values[ 7 ];\n\t\t\t\tmatrix.elements[ 10 ] = values[ 4 ];\n\t\t\t\tmatrix.elements[ 11 ] = values[ 10 ];\n\n\t\t\t\t//W Line\n\t\t\t\tmatrix.elements[ 12 ] = 0;\n\t\t\t\tmatrix.elements[ 13 ] = 0;\n\t\t\t\tmatrix.elements[ 14 ] = 0;\n\t\t\t\tmatrix.elements[ 15 ] = 1;\n\n\t\t\t\tmatrix.transpose();\n\n\t\t\t\tconst inverse = new Matrix4();\n\t\t\t\tinverse.copy( matrix ).invert();\n\t\t\t\tgeometry.applyMatrix4( inverse );\n\n\t\t\t\tmatrix.decompose( mesh.position, mesh.quaternion, mesh.scale );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '   Unknown mesh chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk( );\n\n\t\t}\n\n\t\tgeometry.computeVertexNormals();\n\n\t\treturn mesh;\n\n\t}\n\n\t/**\n\t * Read face array data chunk.\n\t *\n\t * @method readFaceArray\n\t * @param {Chunk} chunk Chunk in use.\n\t * @param {Mesh} mesh Mesh to be filled with the data read.\n\t */\n\treadFaceArray( chunk, mesh ) {\n\n\t\tconst faces = chunk.readWord( );\n\n\t\tthis.debugMessage( '   Faces: ' + faces );\n\n\t\tconst index = [];\n\n\t\tfor ( let i = 0; i < faces; ++ i ) {\n\n\t\t\tindex.push( chunk.readWord( ), chunk.readWord( ), chunk.readWord( ) );\n\n\t\t\tchunk.readWord( ); // visibility\n\n\t\t}\n\n\t\tmesh.geometry.setIndex( index );\n\n\t\t//The rest of the FACE_ARRAY chunk is subchunks\n\n\t\tlet materialIndex = 0;\n\t\tlet start = 0;\n\n\t\twhile ( ! chunk.endOfChunk ) {\n\n\t\t\tconst subchunk = chunk.readChunk( );\n\n\t\t\tif ( subchunk.id === MSH_MAT_GROUP ) {\n\n\t\t\t\tthis.debugMessage( '      Material Group' );\n\n\t\t\t\tconst group = this.readMaterialGroup( subchunk );\n\t\t\t\tconst count = group.index.length * 3; // assuming successive indices\n\n\t\t\t\tmesh.geometry.addGroup( start, count, materialIndex );\n\n\t\t\t\tstart += count;\n\t\t\t\tmaterialIndex ++;\n\n\t\t\t\tconst material = this.materials[ group.name ];\n\n\t\t\t\tif ( Array.isArray( mesh.material ) === false ) mesh.material = [];\n\n\t\t\t\tif ( material !== undefined )\t{\n\n\t\t\t\t\tmesh.material.push( material );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '      Unknown face array chunk: ' + subchunk.hexId );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( mesh.material.length === 1 ) mesh.material = mesh.material[ 0 ]; // for backwards compatibility\n\n\t}\n\n\t/**\n\t * Read texture map data chunk.\n\t *\n\t * @method readMap\n\t * @param {Chunk} chunk Chunk in use.\n\t * @param {String} path Path for external resources.\n\t * @return {Texture} Texture read from this data chunk.\n\t */\n\treadMap( chunk, path ) {\n\n\t\tlet next = chunk.readChunk( );\n\t\tlet texture = {};\n\n\t\tconst loader = new TextureLoader( this.manager );\n\t\tloader.setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === MAT_MAPNAME ) {\n\n\t\t\t\tconst name = next.readString();\n\t\t\t\ttexture = loader.load( name );\n\n\t\t\t\tthis.debugMessage( '      File: ' + path + name );\n\n\t\t\t} else if ( next.id === MAT_MAP_UOFFSET ) {\n\n\t\t\t\ttexture.offset.x = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      OffsetX: ' + texture.offset.x );\n\n\t\t\t} else if ( next.id === MAT_MAP_VOFFSET ) {\n\n\t\t\t\ttexture.offset.y = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      OffsetY: ' + texture.offset.y );\n\n\t\t\t} else if ( next.id === MAT_MAP_USCALE ) {\n\n\t\t\t\ttexture.repeat.x = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      RepeatX: ' + texture.repeat.x );\n\n\t\t\t} else if ( next.id === MAT_MAP_VSCALE ) {\n\n\t\t\t\ttexture.repeat.y = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      RepeatY: ' + texture.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '      Unknown map chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk( );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * Read material group data chunk.\n\t *\n\t * @method readMaterialGroup\n\t * @param {Chunk} chunk Chunk in use.\n\t * @return {Object} Object with name and index of the object.\n\t */\n\treadMaterialGroup( chunk ) {\n\n\t\tconst name = chunk.readString();\n\t\tconst numFaces = chunk.readWord();\n\n\t\tthis.debugMessage( '         Name: ' + name );\n\t\tthis.debugMessage( '         Faces: ' + numFaces );\n\n\t\tconst index = [];\n\t\tfor ( let i = 0; i < numFaces; ++ i ) {\n\n\t\t\tindex.push( chunk.readWord( ) );\n\n\t\t}\n\n\t\treturn { name: name, index: index };\n\n\t}\n\n\t/**\n\t * Read a color value.\n\t *\n\t * @method readColor\n\t * @param {Chunk} chunk Chunk.\n\t * @return {Color} Color value read..\n\t */\n\treadColor( chunk ) {\n\n\t\tconst subChunk = chunk.readChunk( );\n\t\tconst color = new Color();\n\n\t\tif ( subChunk.id === COLOR_24 || subChunk.id === LIN_COLOR_24 ) {\n\n\t\t\tconst r = subChunk.readByte( );\n\t\t\tconst g = subChunk.readByte( );\n\t\t\tconst b = subChunk.readByte( );\n\n\t\t\tcolor.setRGB( r / 255, g / 255, b / 255 );\n\n\t\t\tthis.debugMessage( '      Color: ' + color.r + ', ' + color.g + ', ' + color.b );\n\n\t\t}\telse if ( subChunk.id === COLOR_F || subChunk.id === LIN_COLOR_F ) {\n\n\t\t\tconst r = subChunk.readFloat( );\n\t\t\tconst g = subChunk.readFloat( );\n\t\t\tconst b = subChunk.readFloat( );\n\n\t\t\tcolor.setRGB( r, g, b );\n\n\t\t\tthis.debugMessage( '      Color: ' + color.r + ', ' + color.g + ', ' + color.b );\n\n\t\t}\telse {\n\n\t\t\tthis.debugMessage( '      Unknown color chunk: ' + subChunk.hexId );\n\n\t\t}\n\n\t\treturn color;\n\n\t}\n\n\t/**\n\t * Read percentage value.\n\t *\n\t * @method readPercentage\n\t * @param {Chunk} chunk Chunk to read data from.\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadPercentage( chunk ) {\n\n\t\tconst subChunk = chunk.readChunk( );\n\n\t\tswitch ( subChunk.id ) {\n\n\t\t\tcase INT_PERCENTAGE:\n\t\t\t\treturn ( subChunk.readShort( ) / 100 );\n\t\t\t\tbreak;\n\n\t\t\tcase FLOAT_PERCENTAGE:\n\t\t\t\treturn subChunk.readFloat( );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis.debugMessage( '      Unknown percentage chunk: ' + subChunk.hexId );\n\t\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Print debug message to the console.\n\t *\n\t * Is controlled by a flag to show or hide debug messages.\n\t *\n\t * @method debugMessage\n\t * @param {Object} message Debug message to print to the console.\n\t */\n\tdebugMessage( message ) {\n\n\t\tif ( this.debug ) {\n\n\t\t\tconsole.log( message );\n\n\t\t}\n\n\t}\n\n}\n\n\n/** Read data/sub-chunks from chunk */\nclass Chunk {\n\n\t/**\n\t * Create a new chunk\n\t *\n\t * @class Chunk\n\t * @param {DataView} data DataView to read from.\n\t * @param {Number} position in data.\n\t * @param {Function} debugMessage logging callback.\n\t */\n\tconstructor( data, position, debugMessage ) {\n\n\t\tthis.data = data;\n\t\t// the offset to the begin of this chunk\n\t\tthis.offset = position;\n\t\t// the current reading position\n\t\tthis.position = position;\n\t\tthis.debugMessage = debugMessage;\n\n\t\tif ( this.debugMessage instanceof Function ) {\n\n\t\t\tthis.debugMessage = function () {};\n\n\t\t}\n\n\t\tthis.id = this.readWord();\n\t\tthis.size = this.readDWord();\n\t\tthis.end = this.offset + this.size;\n\n\t\tif ( this.end > data.byteLength ) {\n\n\t\t\tthis.debugMessage( 'Bad chunk size for chunk at ' + position );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * read a sub cchunk.\n\t *\n\t * @method readChunk\n\t * @return {Chunk | null} next sub chunk\n\t */\n\treadChunk() {\n\n\t\tif ( this.endOfChunk ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\ttry {\n\n\t\t\tconst next = new Chunk( this.data, this.position, this.debugMessage );\n\t\t\tthis.position += next.size;\n\t\t\treturn next;\n\n\t\t}\tcatch ( e ) {\n\n\t\t\tthis.debugMessage( 'Unable to read chunk at ' + this.position );\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * return the ID of this chunk as Hex\n\t *\n\t * @method idToString\n\t * @return {String} hex-string of id\n\t */\n\tget hexId() {\n\n\t\treturn this.id.toString( 16 );\n\n\t}\n\n\tget endOfChunk() {\n\n\t\treturn this.position >= this.end;\n\n\t}\n\n\t/**\n\t * Read byte value.\n\t *\n\t * @method readByte\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadByte() {\n\n\t\tconst v = this.data.getUint8( this.position, true );\n\t\tthis.position += 1;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 32 bit float value.\n\t *\n\t * @method readFloat\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadFloat() {\n\n\t\ttry {\n\n\t\t\tconst v = this.data.getFloat32( this.position, true );\n\t\t\tthis.position += 4;\n\t\t\treturn v;\n\n\t\t}\tcatch ( e ) {\n\n\t\t\tthis.debugMessage( e + ' ' + this.position + ' ' + this.data.byteLength );\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Read 32 bit signed integer value.\n\t *\n\t * @method readInt\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadInt() {\n\n\t\tconst v = this.data.getInt32( this.position, true );\n\t\tthis.position += 4;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 16 bit signed integer value.\n\t *\n\t * @method readShort\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadShort() {\n\n\t\tconst v = this.data.getInt16( this.position, true );\n\t\tthis.position += 2;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 64 bit unsigned integer value.\n\t *\n\t * @method readDWord\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadDWord() {\n\n\t\tconst v = this.data.getUint32( this.position, true );\n\t\tthis.position += 4;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 32 bit unsigned integer value.\n\t *\n\t * @method readWord\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadWord() {\n\n\t\tconst v = this.data.getUint16( this.position, true );\n\t\tthis.position += 2;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read NULL terminated ASCII string value from chunk-pos.\n\t *\n\t * @method readString\n\t * @return {String} Data read from the dataview.\n\t */\n\treadString() {\n\n\t\tlet s = '';\n\t\tlet c = this.readByte();\n\t\twhile ( c ) {\n\n\t\t\ts += String.fromCharCode( c );\n\t\t\tc = this.readByte();\n\n\t\t}\n\n\t\treturn s;\n\n\t}\n\n}\n\n// const NULL_CHUNK = 0x0000;\nconst M3DMAGIC = 0x4D4D;\n// const SMAGIC = 0x2D2D;\n// const LMAGIC = 0x2D3D;\nconst MLIBMAGIC = 0x3DAA;\n// const MATMAGIC = 0x3DFF;\nconst CMAGIC = 0xC23D;\nconst M3D_VERSION = 0x0002;\n// const M3D_KFVERSION = 0x0005;\nconst COLOR_F = 0x0010;\nconst COLOR_24 = 0x0011;\nconst LIN_COLOR_24 = 0x0012;\nconst LIN_COLOR_F = 0x0013;\nconst INT_PERCENTAGE = 0x0030;\nconst FLOAT_PERCENTAGE = 0x0031;\nconst MDATA = 0x3D3D;\nconst MESH_VERSION = 0x3D3E;\nconst MASTER_SCALE = 0x0100;\n// const LO_SHADOW_BIAS = 0x1400;\n// const HI_SHADOW_BIAS = 0x1410;\n// const SHADOW_MAP_SIZE = 0x1420;\n// const SHADOW_SAMPLES = 0x1430;\n// const SHADOW_RANGE = 0x1440;\n// const SHADOW_FILTER = 0x1450;\n// const RAY_BIAS = 0x1460;\n// const O_CONSTS = 0x1500;\n// const AMBIENT_LIGHT = 0x2100;\n// const BIT_MAP = 0x1100;\n// const SOLID_BGND = 0x1200;\n// const V_GRADIENT = 0x1300;\n// const USE_BIT_MAP = 0x1101;\n// const USE_SOLID_BGND = 0x1201;\n// const USE_V_GRADIENT = 0x1301;\n// const FOG = 0x2200;\n// const FOG_BGND = 0x2210;\n// const LAYER_FOG = 0x2302;\n// const DISTANCE_CUE = 0x2300;\n// const DCUE_BGND = 0x2310;\n// const USE_FOG = 0x2201;\n// const USE_LAYER_FOG = 0x2303;\n// const USE_DISTANCE_CUE = 0x2301;\nconst MAT_ENTRY = 0xAFFF;\nconst MAT_NAME = 0xA000;\nconst MAT_AMBIENT = 0xA010;\nconst MAT_DIFFUSE = 0xA020;\nconst MAT_SPECULAR = 0xA030;\nconst MAT_SHININESS = 0xA040;\n// const MAT_SHIN2PCT = 0xA041;\nconst MAT_TRANSPARENCY = 0xA050;\n// const MAT_XPFALL = 0xA052;\n// const MAT_USE_XPFALL = 0xA240;\n// const MAT_REFBLUR = 0xA053;\n// const MAT_SHADING = 0xA100;\n// const MAT_USE_REFBLUR = 0xA250;\n// const MAT_SELF_ILLUM = 0xA084;\nconst MAT_TWO_SIDE = 0xA081;\n// const MAT_DECAL = 0xA082;\nconst MAT_ADDITIVE = 0xA083;\nconst MAT_WIRE = 0xA085;\n// const MAT_FACEMAP = 0xA088;\n// const MAT_TRANSFALLOFF_IN = 0xA08A;\n// const MAT_PHONGSOFT = 0xA08C;\n// const MAT_WIREABS = 0xA08E;\nconst MAT_WIRE_SIZE = 0xA087;\nconst MAT_TEXMAP = 0xA200;\n// const MAT_SXP_TEXT_DATA = 0xA320;\n// const MAT_TEXMASK = 0xA33E;\n// const MAT_SXP_TEXTMASK_DATA = 0xA32A;\n// const MAT_TEX2MAP = 0xA33A;\n// const MAT_SXP_TEXT2_DATA = 0xA321;\n// const MAT_TEX2MASK = 0xA340;\n// const MAT_SXP_TEXT2MASK_DATA = 0xA32C;\nconst MAT_OPACMAP = 0xA210;\n// const MAT_SXP_OPAC_DATA = 0xA322;\n// const MAT_OPACMASK = 0xA342;\n// const MAT_SXP_OPACMASK_DATA = 0xA32E;\nconst MAT_BUMPMAP = 0xA230;\n// const MAT_SXP_BUMP_DATA = 0xA324;\n// const MAT_BUMPMASK = 0xA344;\n// const MAT_SXP_BUMPMASK_DATA = 0xA330;\nconst MAT_SPECMAP = 0xA204;\n// const MAT_SXP_SPEC_DATA = 0xA325;\n// const MAT_SPECMASK = 0xA348;\n// const MAT_SXP_SPECMASK_DATA = 0xA332;\n// const MAT_SHINMAP = 0xA33C;\n// const MAT_SXP_SHIN_DATA = 0xA326;\n// const MAT_SHINMASK = 0xA346;\n// const MAT_SXP_SHINMASK_DATA = 0xA334;\n// const MAT_SELFIMAP = 0xA33D;\n// const MAT_SXP_SELFI_DATA = 0xA328;\n// const MAT_SELFIMASK = 0xA34A;\n// const MAT_SXP_SELFIMASK_DATA = 0xA336;\n// const MAT_REFLMAP = 0xA220;\n// const MAT_REFLMASK = 0xA34C;\n// const MAT_SXP_REFLMASK_DATA = 0xA338;\n// const MAT_ACUBIC = 0xA310;\nconst MAT_MAPNAME = 0xA300;\n// const MAT_MAP_TILING = 0xA351;\n// const MAT_MAP_TEXBLUR = 0xA353;\nconst MAT_MAP_USCALE = 0xA354;\nconst MAT_MAP_VSCALE = 0xA356;\nconst MAT_MAP_UOFFSET = 0xA358;\nconst MAT_MAP_VOFFSET = 0xA35A;\n// const MAT_MAP_ANG = 0xA35C;\n// const MAT_MAP_COL1 = 0xA360;\n// const MAT_MAP_COL2 = 0xA362;\n// const MAT_MAP_RCOL = 0xA364;\n// const MAT_MAP_GCOL = 0xA366;\n// const MAT_MAP_BCOL = 0xA368;\nconst NAMED_OBJECT = 0x4000;\n// const N_DIRECT_LIGHT = 0x4600;\n// const DL_OFF = 0x4620;\n// const DL_OUTER_RANGE = 0x465A;\n// const DL_INNER_RANGE = 0x4659;\n// const DL_MULTIPLIER = 0x465B;\n// const DL_EXCLUDE = 0x4654;\n// const DL_ATTENUATE = 0x4625;\n// const DL_SPOTLIGHT = 0x4610;\n// const DL_SPOT_ROLL = 0x4656;\n// const DL_SHADOWED = 0x4630;\n// const DL_LOCAL_SHADOW2 = 0x4641;\n// const DL_SEE_CONE = 0x4650;\n// const DL_SPOT_RECTANGULAR = 0x4651;\n// const DL_SPOT_ASPECT = 0x4657;\n// const DL_SPOT_PROJECTOR = 0x4653;\n// const DL_SPOT_OVERSHOOT = 0x4652;\n// const DL_RAY_BIAS = 0x4658;\n// const DL_RAYSHAD = 0x4627;\n// const N_CAMERA = 0x4700;\n// const CAM_SEE_CONE = 0x4710;\n// const CAM_RANGES = 0x4720;\n// const OBJ_HIDDEN = 0x4010;\n// const OBJ_VIS_LOFTER = 0x4011;\n// const OBJ_DOESNT_CAST = 0x4012;\n// const OBJ_DONT_RECVSHADOW = 0x4017;\n// const OBJ_MATTE = 0x4013;\n// const OBJ_FAST = 0x4014;\n// const OBJ_PROCEDURAL = 0x4015;\n// const OBJ_FROZEN = 0x4016;\nconst N_TRI_OBJECT = 0x4100;\nconst POINT_ARRAY = 0x4110;\n// const POINT_FLAG_ARRAY = 0x4111;\nconst FACE_ARRAY = 0x4120;\nconst MSH_MAT_GROUP = 0x4130;\n// const SMOOTH_GROUP = 0x4150;\n// const MSH_BOXMAP = 0x4190;\nconst TEX_VERTS = 0x4140;\nconst MESH_MATRIX = 0x4160;\n// const MESH_COLOR = 0x4165;\n// const MESH_TEXTURE_INFO = 0x4170;\n// const KFDATA = 0xB000;\n// const KFHDR = 0xB00A;\n// const KFSEG = 0xB008;\n// const KFCURTIME = 0xB009;\n// const AMBIENT_NODE_TAG = 0xB001;\n// const OBJECT_NODE_TAG = 0xB002;\n// const CAMERA_NODE_TAG = 0xB003;\n// const TARGET_NODE_TAG = 0xB004;\n// const LIGHT_NODE_TAG = 0xB005;\n// const L_TARGET_NODE_TAG = 0xB006;\n// const SPOTLIGHT_NODE_TAG = 0xB007;\n// const NODE_ID = 0xB030;\n// const NODE_HDR = 0xB010;\n// const PIVOT = 0xB013;\n// const INSTANCE_NAME = 0xB011;\n// const MORPH_SMOOTH = 0xB015;\n// const BOUNDBOX = 0xB014;\n// const POS_TRACK_TAG = 0xB020;\n// const COL_TRACK_TAG = 0xB025;\n// const ROT_TRACK_TAG = 0xB021;\n// const SCL_TRACK_TAG = 0xB022;\n// const MORPH_TRACK_TAG = 0xB026;\n// const FOV_TRACK_TAG = 0xB023;\n// const ROLL_TRACK_TAG = 0xB024;\n// const HOT_TRACK_TAG = 0xB027;\n// const FALL_TRACK_TAG = 0xB028;\n// const HIDE_TRACK_TAG = 0xB029;\n// const POLY_2D = 0x5000;\n// const SHAPE_OK = 0x5010;\n// const SHAPE_NOT_OK = 0x5011;\n// const SHAPE_HOOK = 0x5020;\n// const PATH_3D = 0x6000;\n// const PATH_MATRIX = 0x6005;\n// const SHAPE_2D = 0x6010;\n// const M_SCALE = 0x6020;\n// const M_TWIST = 0x6030;\n// const M_TEETER = 0x6040;\n// const M_FIT = 0x6050;\n// const M_BEVEL = 0x6060;\n// const XZ_CURVE = 0x6070;\n// const YZ_CURVE = 0x6080;\n// const INTERPCT = 0x6090;\n// const DEFORM_LIMIT = 0x60A0;\n// const USE_CONTOUR = 0x6100;\n// const USE_TWEEN = 0x6110;\n// const USE_SCALE = 0x6120;\n// const USE_TWIST = 0x6130;\n// const USE_TEETER = 0x6140;\n// const USE_FIT = 0x6150;\n// const USE_BEVEL = 0x6160;\n// const DEFAULT_VIEW = 0x3000;\n// const VIEW_TOP = 0x3010;\n// const VIEW_BOTTOM = 0x3020;\n// const VIEW_LEFT = 0x3030;\n// const VIEW_RIGHT = 0x3040;\n// const VIEW_FRONT = 0x3050;\n// const VIEW_BACK = 0x3060;\n// const VIEW_USER = 0x3070;\n// const VIEW_CAMERA = 0x3080;\n// const VIEW_WINDOW = 0x3090;\n// const VIEWPORT_LAYOUT_OLD = 0x7000;\n// const VIEWPORT_DATA_OLD = 0x7010;\n// const VIEWPORT_LAYOUT = 0x7001;\n// const VIEWPORT_DATA = 0x7011;\n// const VIEWPORT_DATA_3 = 0x7012;\n// const VIEWPORT_SIZE = 0x7020;\n// const NETWORK_VIEW = 0x7030;\n\nexport { TDSLoader };\n","import * as THREE from 'three'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\nimport { SQWater } from './SQWater'\r\n// import { ClearPass } from 'three/examples/jsm/postprocessing/ClearPass'\r\n// import FresnelShader from './FresnelShader'\r\nimport { Stats } from 'three-stats'\r\nimport { TardisCard, TardisCardShape } from './TardisCard'\r\nimport { Carousel } from './Carousel'\r\nimport { TDSLoader } from 'three/examples/jsm/loaders/TDSLoader'\r\nimport { CustomCSS3DObject, CustomCSS3DSprite, CustomCSS3DRenderer } from './CustomCSS3DRenderer'\r\nimport { DampingObjectController, DampingVector3Controller } from './Utils'\r\nimport { RefractionObject, RefractionManager } from '../ThreeRealisticRefraction/ThreeRealisticRefraction'\r\nimport { RoundedBoxGeometry } from 'three/examples/jsm/geometries/RoundedBoxGeometry'\r\n// import { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry'\r\n// import { Font } from 'three/examples/jsm/loaders/FontLoader'\r\n// import { BrickManager } from './Brick'\r\nimport { controller } from '../AnimUtils/TweenUtils'\r\n// import * as GEOM from '../GeomUtils'\r\n\r\nclass FrontPageManager {\r\n    container: HTMLElement\r\n    renderer: THREE.WebGLRenderer\r\n    // controls: OrbitControls\r\n    cardInsideScene: THREE.Scene\r\n    scene: THREE.Scene\r\n    reflectionScene: THREE.Scene\r\n    composer: EffectComposer\r\n    stats: Stats\r\n\r\n    refractionManager: RefractionManager\r\n    glassMesh1Controller: DampingObjectController\r\n\r\n    // cursor position\r\n    mousePosX: number\r\n    mousePosY: number\r\n    pointer: THREE.Vector2\r\n\r\n    // camera\r\n    camera: THREE.PerspectiveCamera\r\n    cameraZPosition: number\r\n    cameraPositionController: DampingVector3Controller\r\n    cameraTargetPosition: THREE.Vector3\r\n    cameraWithMouseMoveFactor: number\r\n    cameraWithMouseRotateFactor: number\r\n\r\n    // cursor light\r\n    cursorLightGroup: THREE.Group\r\n    cursorLight: THREE.PointLight\r\n    cursorLightController: DampingObjectController\r\n\r\n    // intersections\r\n    raycaster: THREE.Raycaster\r\n    intersectTardisCardObjs: Array<THREE.Object3D>\r\n    intersectGlassObjs: Array<THREE.Object3D>\r\n\r\n    // glass intersections\r\n    glassSelected: THREE.Mesh | undefined\r\n    glassIsRotating: Boolean\r\n\r\n    // css\r\n    cssScene: THREE.Scene\r\n    cssRenderer: CustomCSS3DRenderer | undefined\r\n    cssAttachObject: THREE.Mesh\r\n\r\n    // carousel\r\n    carousel1: Carousel\r\n    carousel2: Carousel\r\n\r\n    // loading manager\r\n    loadingManager: THREE.LoadingManager\r\n\r\n    constructor(_container: HTMLElement,\r\n        onLoad?: () => void,\r\n        onProgress?: (url: string, loaded: number, total: number) => void,\r\n        onError?: (url: string) => void\r\n        ) {\r\n\r\n        // *********** basic settings ***********\r\n        this.cameraZPosition = 500\r\n        this.container = _container\r\n        this.camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 5000 )\r\n        this.renderer = new THREE.WebGLRenderer( {alpha: true} )\r\n        this.renderer.setClearColor( 0xffffff )\r\n        this.renderer.setPixelRatio( window.devicePixelRatio )\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight)\r\n        this.renderer.domElement.style.position = 'absolute'\r\n        this.renderer.domElement.style.top = '0px'\r\n        this.renderer.domElement.style.left = '0px'\r\n        this.container.appendChild( this.renderer.domElement )\r\n        // TODO: (debug stats)\r\n        this.stats = new Stats()\r\n        this.stats.domElement.style.zIndex = '100'\r\n        this.container.appendChild( this.stats.domElement )\r\n\r\n        this.scene = new THREE.Scene()\r\n        this.cssScene = new THREE.Scene()\r\n        this.cardInsideScene = new THREE.Scene()\r\n        this.reflectionScene = new THREE.Scene()\r\n\r\n        // \r\n        this.loadingManager = new THREE.LoadingManager(() => {\r\n            if (onLoad) {\r\n                onLoad()\r\n            }\r\n        }, (url: string, loaded: number, total: number) => {\r\n            if (onProgress) {\r\n                onProgress(url, loaded, total)\r\n            }\r\n        }, (url) => {\r\n            if (onError) {\r\n                onError(url)\r\n            }\r\n        })\r\n\r\n        // *********** background & env ***********\r\n        const r = './cube1/'\r\n        const urls = [\r\n            r + 'px.jpg', r + 'nx.jpg',\r\n            r + 'py.jpg', r + 'ny.jpg',\r\n            r + 'pz.jpg', r + 'nz.jpg'\r\n        ]\r\n        const textureCube = new THREE.CubeTextureLoader(this.loadingManager).load( urls )\r\n        textureCube.mapping = THREE.CubeRefractionMapping\r\n        // this.scene.background = textureCube\r\n        this.scene.environment = textureCube\r\n\r\n\r\n        // *********** set light ***********\r\n        var light = new THREE.DirectionalLight()\r\n        light.intensity = 0.8\r\n        light.position.x = 80\r\n        light.position.y = 80\r\n        light.position.z = 100\r\n        this.scene.add(light)\r\n\r\n        // *********** refraction objects ***********\r\n        this.refractionManager = new RefractionManager(this.scene, this.container, this.renderer, this.camera)\r\n        var glassMesh1 = new THREE.Mesh(\r\n            new RoundedBoxGeometry(40, 40, 40, 5, 5),\r\n            // new THREE.BoxGeometry(40, 40, 40),\r\n            new THREE.MeshPhongMaterial({})\r\n        )\r\n        // raycast interaction agent with simple shape, to save calculation cost\r\n        var glassMesh1InteractAgent = new THREE.Mesh(new THREE.BoxGeometry(40,40,40), new THREE.MeshBasicMaterial({}))\r\n        glassMesh1InteractAgent.visible = false\r\n        glassMesh1.add(glassMesh1InteractAgent)\r\n\r\n        glassMesh1.rotation.set(1,1,1)\r\n        this.refractionManager.addRefractionMesh(glassMesh1, true, null, 0x00ff00, 0x4060ff, 1.3, 0.8)\r\n        this.glassMesh1Controller = new DampingObjectController(glassMesh1, 0.2, 0.1)\r\n\r\n\r\n        // *********** composers ***********\r\n        const renderPass1 = new RenderPass(this.scene, this.camera)\r\n        renderPass1.clear = true\r\n        const renderPass2 = new RenderPass(this.cardInsideScene, this.camera)\r\n        renderPass2.clearDepth = true\r\n        renderPass2.clear = false\r\n        this.composer = new EffectComposer(this.renderer, new THREE.WebGLMultisampleRenderTarget(\r\n            this.container.offsetWidth * window.devicePixelRatio,\r\n            this.container.offsetHeight * window.devicePixelRatio\r\n        ))\r\n        // this.composer = new EffectComposer(this.renderer)\r\n        this.composer.addPass(renderPass1)\r\n        this.composer.addPass(renderPass2)\r\n        this.composer.renderTarget1.stencilBuffer = true\r\n        this.composer.renderTarget2.stencilBuffer = true\r\n\r\n\r\n        // *********** tardis cards ***********\r\n\r\n        var tardisCardTop = new TardisCard(100, 400, 110,\r\n            this.scene, this.cardInsideScene, new THREE.Vector3(0, 200, 0), new THREE.Euler(), TardisCardShape.RECT,\r\n            null)\r\n        tardisCardTop.addSkybox(textureCube)\r\n        var contentGroupInTardisCardTop = new THREE.Group()\r\n        var titleTexture = new THREE.TextureLoader(this.loadingManager).load( './title.png' )\r\n        var tardisCardTopTitle = new THREE.Mesh(\r\n            new THREE.PlaneBufferGeometry(390, 90, 1, 1),\r\n            new THREE.MeshBasicMaterial({\r\n                color: 0xffffff,\r\n                alphaMap: titleTexture,\r\n                alphaToCoverage: true,\r\n                transparent: true,\r\n            })\r\n        )\r\n        contentGroupInTardisCardTop.add(tardisCardTopTitle)\r\n        contentGroupInTardisCardTop.position.copy(tardisCardTop.cardMesh.position)\r\n        tardisCardTop.addVisibleObjectGroup(contentGroupInTardisCardTop)\r\n        this.cssAttachObject = tardisCardTop.cardMesh\r\n            \r\n        var tardisCard1 = new TardisCard(200, 200, 111,\r\n            this.scene, this.cardInsideScene, new THREE.Vector3(0, 0, 0), new THREE.Euler(), TardisCardShape.RECT,\r\n            this.reflectionScene, 0xc0d0d0)\r\n        \r\n        var diffuseTexture = new THREE.TextureLoader(this.loadingManager).load( './marble/diffuse.jpg' )\r\n        var normalTexture = new THREE.TextureLoader(this.loadingManager).load( './marble/normal.jpg' )\r\n        var specTexture = new THREE.TextureLoader(this.loadingManager).load( './marble/specular.jpg' )\r\n        var texs = [diffuseTexture, normalTexture, specTexture]\r\n        texs.forEach(t => {\r\n            t.wrapS = t.wrapT = THREE.RepeatWrapping\r\n            t.repeat.set(1, 2)\r\n        })\r\n        var contentGroupInTardisCard1 = new THREE.Group()\r\n        // https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_3ds.html\r\n        const pgnormal = new THREE.TextureLoader(this.loadingManager).load( './jutabag3ds/texture/normal.jpg' )\r\n        const loader = new TDSLoader(this.loadingManager);\r\n        loader.setResourcePath('./jutabag3ds/texture/')\r\n        loader.load( './jutabag3ds/portalgun.3ds', (obj) => {\r\n            if (obj instanceof THREE.Group) {\r\n                obj.traverse( function ( child ) {\r\n                    if ( child instanceof THREE.Mesh ) {\r\n                        console.log(child.material)\r\n                        child.material.color = new THREE.Color(0xffffff)\r\n                        // child.material.map = pgcolor\r\n                        child.material.normalMap = pgnormal\r\n                    }\r\n                } )\r\n                obj.scale.multiplyScalar(80)\r\n                obj.position.x -= 20\r\n                obj.position.y += 10\r\n                obj.position.z -= 80\r\n                obj.rotation.x = -2\r\n                obj.rotation.z = 0.7\r\n                contentGroupInTardisCard1.add(obj)\r\n                \r\n                var tardisCardBackground1 = new THREE.Mesh(\r\n                    new THREE.PlaneBufferGeometry(500, 500, 1, 1),\r\n                    new THREE.MeshPhysicalMaterial({\r\n                        color: 0xccffff,\r\n                        map: diffuseTexture,\r\n                        normalMap: normalTexture,\r\n                        normalScale: new THREE.Vector2(0.1, 0.1),\r\n                        specularColorMap: specTexture,\r\n                        specularIntensity: 4,\r\n                        reflectivity: 1.0,\r\n                        metalness: 0.2,\r\n                        roughness: 0.1,\r\n                        clearcoat: 0.5,\r\n\r\n                    })\r\n                )\r\n                tardisCardBackground1.position.set(0, 0, -150)\r\n                contentGroupInTardisCard1.add(tardisCardBackground1)\r\n                contentGroupInTardisCard1.position.copy(tardisCard1.cardMesh.position)\r\n                tardisCard1.addVisibleObjectGroup(contentGroupInTardisCard1)\r\n            }\r\n            // contentGroupInTardisCard1.add(obj)\r\n        });\r\n\r\n        \r\n        var tardisCard2 = new TardisCard(100, 100, 112, this.scene, this.cardInsideScene, new THREE.Vector3(200, 0, 0), new THREE.Euler(), TardisCardShape.CIRCLE,\r\n        this.reflectionScene, 0xd0c0d0)\r\n        this.carousel1 = new Carousel({\r\n            numOfVisiblePics: 5,\r\n            planeWidth: 80,\r\n            planeHeight: 80,\r\n            carouselArrayRadius: 120\r\n        })\r\n        var diffuseTexture2 = new THREE.TextureLoader(this.loadingManager).load( './painting/crop1_diffuse.png' )\r\n        var normalTexture2 = new THREE.TextureLoader(this.loadingManager).load( './painting/crop1_normal.png' )\r\n        var specTexture2 = new THREE.TextureLoader(this.loadingManager).load( './painting/crop1_specular.png' )\r\n        texs = [diffuseTexture2, normalTexture2, specTexture2]\r\n        var tardisCardBackground = new THREE.Mesh(\r\n            new THREE.PlaneBufferGeometry(500, 500, 1, 1),\r\n            new THREE.MeshPhysicalMaterial({\r\n                map: diffuseTexture2,\r\n                normalMap: normalTexture2,\r\n                specularColorMap: specTexture2,\r\n                normalScale: new THREE.Vector2(0.4, 0.4),\r\n                specularIntensity: 0.2,\r\n                reflectivity: 0.1,\r\n                metalness: 0.1,\r\n                roughness: 0.4\r\n            })\r\n        )\r\n        tardisCardBackground.position.set(0, 0, -150)\r\n        // scene.add(contentInTardisCard)\r\n        var contentGroupInTardisCard2 = new THREE.Group()\r\n        contentGroupInTardisCard2.add(this.carousel1)\r\n        contentGroupInTardisCard2.add(tardisCardBackground)\r\n        contentGroupInTardisCard2.position.copy(tardisCard2.cardMesh.position)\r\n        tardisCard2.addVisibleObjectGroup(contentGroupInTardisCard2)\r\n        \r\n        var tardisCard3 = new TardisCard(100, 100, 113, this.scene, this.cardInsideScene, new THREE.Vector3(-200, 0, 0), new THREE.Euler(), TardisCardShape.CIRCLE,\r\n        this.reflectionScene, 0xa0c090)\r\n        this.carousel2 = new Carousel({\r\n            numOfVisiblePics: 4,\r\n            planeWidth: 70,\r\n            planeHeight: 70,\r\n            carouselArrayRadius: 120\r\n        })\r\n        var diffuseTexture3 = new THREE.TextureLoader(this.loadingManager).load( './painting/crop2_diffuse.png' )\r\n        var normalTexture3 = new THREE.TextureLoader(this.loadingManager).load( './painting/crop2_normal.png' )\r\n        var specTexture3 = new THREE.TextureLoader(this.loadingManager).load( './painting/crop2_specular.png' )\r\n        texs = [diffuseTexture3, normalTexture3]\r\n        // texs.forEach(t => {\r\n        //     t.wrapS = t.wrapT = THREE.RepeatWrapping\r\n        //     t.repeat.set(4, 4)\r\n        // })\r\n        tardisCardBackground = new THREE.Mesh(\r\n            new THREE.PlaneBufferGeometry(500, 500, 1, 1),\r\n            new THREE.MeshPhysicalMaterial({\r\n                color: 0xffff80,\r\n                map: diffuseTexture3,\r\n                normalMap: normalTexture3,\r\n                specularColorMap: specTexture3,\r\n                normalScale: new THREE.Vector2(0.5, 0.5),\r\n                specularIntensity: 0.2,\r\n                reflectivity: 0.8,\r\n                metalness: 0,\r\n                roughness: 0.2,\r\n            })\r\n        )\r\n        tardisCardBackground.position.set(0, 0, -150)\r\n        var contentGroupInTardisCard3 = new THREE.Group()\r\n        contentGroupInTardisCard3.add(this.carousel2)\r\n        contentGroupInTardisCard3.add(tardisCardBackground)\r\n        contentGroupInTardisCard3.position.copy(tardisCard3.cardMesh.position)\r\n        tardisCard3.addVisibleObjectGroup(contentGroupInTardisCard3)\r\n\r\n\r\n        // *********** water ***********\r\n        const waterGeometry = new THREE.PlaneGeometry( 1000, 400 )\r\n        const water = new SQWater( waterGeometry, this.reflectionScene, {\r\n            // color: params.color,\r\n            // scale: params.scale,\r\n            flowDirection: new THREE.Vector2( 1, 1 ),\r\n            textureWidth: 512,\r\n            textureHeight: 512\r\n        } );\r\n\r\n        // water.position.y = 1;\r\n        water.position.z += 200;\r\n        water.position.y -= 110;\r\n        water.rotation.x = Math.PI * - 0.5;\r\n        this.scene.add( water );\r\n\r\n\r\n        // *********** camera movement ***********\r\n        this.cameraTargetPosition = new THREE.Vector3(0, 0, this.cameraZPosition)\r\n        this.camera.position.copy(this.cameraTargetPosition)\r\n        this.camera.lookAt(0, 0, 0)\r\n        this.cameraWithMouseMoveFactor = 0.04\r\n        this.cameraWithMouseRotateFactor = 0.015\r\n        this.cameraPositionController = new DampingVector3Controller(this.camera.position, 0.5, 0.05)\r\n        window.addEventListener('mousemove', e => {\r\n            self.onMouseMove(e)\r\n        })\r\n\r\n\r\n        // *********** cursor light ***********\r\n        this.cursorLightGroup = new THREE.Group()\r\n        this.cursorLight = new THREE.PointLight()\r\n        this.cursorLight.intensity = 1\r\n        this.cursorLight.decay = 1\r\n        this.cursorLight.distance = 200\r\n        this.cursorLight.color = new THREE.Color( 0xaaccff )\r\n        this.cursorLightGroup.add(this.cursorLight)\r\n        this.scene.add(this.cursorLightGroup)\r\n        this.cursorLightController = new DampingObjectController(this.cursorLightGroup, 0.3, 0.1)\r\n        \r\n\r\n        // *********** raycast intersections ***********\r\n        this.raycaster = new THREE.Raycaster()\r\n        this.intersectTardisCardObjs = []\r\n        this.intersectTardisCardObjs.push(tardisCardTop.cardMesh, tardisCard1.cardMesh, tardisCard2.cardMesh, tardisCard3.cardMesh)\r\n        this.intersectGlassObjs = []\r\n        this.glassSelected = undefined\r\n        this.glassIsRotating = false\r\n        this.intersectGlassObjs.push(glassMesh1InteractAgent)\r\n\r\n\r\n        // *********** events ***********\r\n        this.mousePosX = 0\r\n        this.mousePosY = 0\r\n        this.pointer = new THREE.Vector2()\r\n        const self = this\r\n        window.addEventListener( 'resize', () => {\r\n            self.onWindowResize()\r\n        } )\r\n        window.addEventListener( 'click', (e) => {\r\n            self.onClick(e)\r\n        } )\r\n\r\n\r\n        // *********** final animate ***********\r\n        this.animate()\r\n    }\r\n\r\n    animate = () => {\r\n        requestAnimationFrame( this.animate )\r\n        // damping controllers\r\n        this.updatecornerObject()\r\n        this.updateCamera()\r\n        this.updateCursorLight()\r\n        this.render()\r\n        this.stats.update()\r\n    }\r\n\r\n    render()\r\n    {\r\n        this.composer.render()\r\n        this.renderer.clearDepth()\r\n        this.refractionManager.render()\r\n        if (this.cssRenderer) {\r\n            this.cssRenderer.render(this.cssScene, this.camera)\r\n        }\r\n    }\r\n\r\n    onWindowResize() {\r\n        this.camera.aspect = window.innerWidth / window.innerHeight\r\n        this.camera.updateProjectionMatrix()\r\n        this.refractionManager.onWindowResize()\r\n        this.renderer.setSize( window.innerWidth, window.innerHeight )\r\n        this.composer.setSize( window.innerWidth, window.innerHeight )\r\n        if (this.cssRenderer) {\r\n            this.cssRenderer.setSize( window.innerWidth, window.innerHeight )\r\n        }\r\n    }\r\n    \r\n    onMouseMove(e: MouseEvent) {\r\n        this.mousePosX = e.clientX\r\n        this.mousePosY = e.clientY\r\n        this.pointer.x = ( e.clientX / window.innerWidth ) * 2 - 1;\r\n\t\tthis.pointer.y = - ( e.clientY / window.innerHeight ) * 2 + 1;\r\n\r\n        this.raycaster.setFromCamera( this.pointer, this.camera )\r\n        const intersects = this.raycaster.intersectObjects( this.intersectGlassObjs, false )\r\n        if (intersects.length == 1 && !this.glassIsRotating && this.glassSelected !== intersects[0].object.parent) {\r\n            console.log('in')\r\n            this.glassIsRotating = true\r\n            const intersectObj = intersects[0].object.parent\r\n            const refObj = intersectObj ? intersectObj['refractionObject'] : null\r\n            if (intersectObj instanceof THREE.Mesh && refObj instanceof RefractionObject) {\r\n                this.glassSelected = intersectObj\r\n                controller.tweenEuler(this.glassSelected.rotation, new THREE.Euler(1,6,1), (v) => {\r\n                        intersectObj.rotation.copy(v)\r\n                    },\r\n                    () => {this.glassIsRotating = false},\r\n                    500\r\n                )\r\n                controller.tweenNumber(1, 0, (val) => {\r\n                    refObj.refractionMaterialUniforms['absorbColor'].value.b = val\r\n                },\r\n                () => {},\r\n                500)\r\n            }\r\n            // this.glassSelected.rotation.set(1,2,1)\r\n        }\r\n        else if (intersects.length == 0 && !this.glassIsRotating && this.glassSelected !== undefined) {\r\n            console.log('out')\r\n            this.glassIsRotating = true\r\n            let rotateObj = this.glassSelected\r\n            const refObj = this.glassSelected['refractionObject']\r\n            controller.tweenEuler(this.glassSelected.rotation, new THREE.Euler(1,1,1), (v) => {\r\n                rotateObj.rotation.copy(v)\r\n                },\r\n                () => {this.glassIsRotating = false},\r\n                500\r\n            )\r\n            controller.tweenNumber(0, 1, (val) => {\r\n                refObj.refractionMaterialUniforms['absorbColor'].value.b = val\r\n            },\r\n            () => {},\r\n            500)\r\n            this.glassSelected = undefined\r\n        }\r\n    }\r\n\r\n    onClick(e: MouseEvent) {\r\n        if (this.glassSelected) {\r\n            return\r\n        }\r\n        const intersects = this.raycaster.intersectObjects( this.intersectTardisCardObjs, false )\r\n        \r\n        if (intersects.length == 1) {\r\n            const intersectObj = intersects[0]\r\n            controller.tweenThreeVector3(\r\n                this.cameraTargetPosition,\r\n                new THREE.Vector3(\r\n                    intersectObj.object.position.x,\r\n                    intersectObj.object.position.y,\r\n                    this.cameraTargetPosition.z\r\n                ),\r\n                (updatedVec) => {\r\n                    this.cameraTargetPosition.copy(updatedVec)\r\n                },\r\n                () => {},\r\n                750\r\n            )\r\n            this.carousel1.clickToRotate(this.raycaster, (carouselIndex) => {\r\n                console.log('new carousel img index', carouselIndex)\r\n                return `https://picsum.photos/id/${Math.ceil(Math.random() * 50)}/200/200`\r\n            })\r\n            this.carousel2.clickToChangeTex(this.raycaster, (carouselIndex) => {\r\n                console.log('new carousel img index', carouselIndex)\r\n                return `https://picsum.photos/id/${Math.ceil(Math.random() * 50)}/200/200`\r\n            })\r\n            // change carousel\r\n        }\r\n    }\r\n\r\n    getRaycastPos(posX: number, posY: number) {\r\n        let x = (2.0 * posX) / window.innerWidth - 1.0\r\n        let y = 1.0 - (2.0 * posY) / window.innerHeight\r\n        // let z = 1.0\r\n        // let ray_nds = new THREE.Vector3(x, y, z)\r\n        let ray = new THREE.Vector3(x, y, 0.995)\r\n        ray.unproject(this.camera)\r\n        return ray\r\n    }\r\n\r\n    updatecornerObject() {\r\n        let targetPos = this.getRaycastPos(window.innerWidth - 200, window.innerHeight / 2)\r\n        // let lastPos = cornerObject.position\r\n        this.glassMesh1Controller.update(targetPos)\r\n        // let currentPath = targetPos.sub(lastPos)\r\n        // cornerObjectVelocity.multiplyScalar(0.3)\r\n        // cornerObjectVelocity.add(currentPath.multiplyScalar(damp))\r\n        // cornerObject.position.add(cornerObjectVelocity)\r\n    }\r\n\r\n    updateCamera() {\r\n        const relX = window.innerWidth / 2 - this.mousePosX\r\n        const relY = window.innerHeight / 2 - this.mousePosY\r\n        // console.log(this.cameraTargetPosition)\r\n        const dampPos = (new THREE.Vector3(\r\n            -relX * this.cameraWithMouseMoveFactor,\r\n            relY * this.cameraWithMouseMoveFactor,\r\n            0\r\n        )).add(this.cameraTargetPosition)\r\n\r\n        this.cameraPositionController.update(dampPos)\r\n        var vel = this.cameraPositionController.velocity\r\n        this.camera.rotation.x = vel.y * this.cameraWithMouseRotateFactor\r\n        this.camera.rotation.y = -vel.x * this.cameraWithMouseRotateFactor\r\n    }\r\n\r\n    updateCursorLight() {\r\n        if (!isNaN(this.mousePosX) && !isNaN(this.mousePosY)) {\r\n            let targetPos = this.getRaycastPos(this.mousePosX, this.mousePosY)\r\n            let camPosZ = this.camera.position.z\r\n            let targetPosVec = new THREE.Vector3().copy(targetPos)\r\n            targetPosVec = targetPosVec.sub(this.camera.position)\r\n            let newz = -200\r\n            let x = (newz - camPosZ) / targetPosVec.z\r\n            targetPos.copy(this.camera.position)\r\n            targetPosVec.multiplyScalar(x)\r\n            targetPos.add(targetPosVec)\r\n            targetPos.z += 100\r\n            this.cursorLightController.update(targetPos)\r\n            // console.log(targetPos)\r\n        }\r\n    }\r\n\r\n    registerCSSCoordinator(htmlContainer: HTMLElement, htmlElem: HTMLElement, position: THREE.Vector3 = new THREE.Vector3(), scale: number = 1.0): CustomCSS3DObject {\r\n        if (this.cssRenderer == undefined) {\r\n            this.cssRenderer = new CustomCSS3DRenderer(htmlContainer)\r\n            this.cssRenderer.setSize( window.innerWidth, window.innerHeight )\r\n        }\r\n        // controls = new OrbitControls(camera, cssRenderer.domElement)\r\n        const object = new CustomCSS3DObject( htmlElem )\r\n        object.position.copy(position)\r\n        object.scale.multiplyScalar(scale)\r\n        this.cssScene.add(object)\r\n        return object\r\n        // cssCoordinators.push(new ThreeCSSCoordinator(htmlContainer, htmlCamera, htmlElem, camera, position))\r\n    }\r\n\r\n\r\n\r\n    \r\n}\r\n\r\n\r\n\r\nexport {\r\n    FrontPageManager\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport * as THREE from 'three'\r\nimport Vue from 'vue'\r\nimport { FrontPageManager } from '../scripts/Three/FrontPage'\r\n\r\ntype Data = {\r\n    fpm: FrontPageManager | null,\r\n    loadingStat: {\r\n        loaded: number,\r\n        total: number,\r\n        isLoaded: boolean,\r\n        noLoadingStat: boolean\r\n    }\r\n}\r\n\r\nexport default Vue.extend({\r\n    data(): Data {\r\n        return {\r\n            fpm: null,\r\n            loadingStat: {\r\n                loaded: 1,\r\n                total: 2,\r\n                isLoaded: false,\r\n                noLoadingStat: false\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        const self = this\r\n        if (this.$refs['canvas-container'] instanceof HTMLElement) {\r\n            this.fpm = new FrontPageManager(\r\n                this.$refs['canvas-container'],\r\n                () => {\r\n                    console.log('loaded')\r\n                    self.loadingStat.isLoaded = true\r\n                    setTimeout(() => {\r\n                        self.loadingStat.noLoadingStat = true\r\n                    }, 501)\r\n                },\r\n                (_, loaded, total) => {\r\n                    this.loadingStat.loaded = loaded\r\n                    this.loadingStat.total = total\r\n                },\r\n                (url) => {\r\n                    console.error('failed to load asset: ' + url)\r\n                    self.loadingStat.isLoaded = true\r\n                }\r\n            )\r\n            // ThreeGlassRefraction.initScene(this.$refs['canvas-container'])\r\n            if (this.$refs['dom3d-container'] instanceof HTMLElement && this.$refs['dom3d-glass'] instanceof HTMLElement) {\r\n                const glassCSSObj = this.fpm.registerCSSCoordinator(this.$refs['dom3d-container'], this.$refs['dom3d-glass'], new THREE.Vector3(0, 20, 10))\r\n                glassCSSObj.setFollowObject(this.fpm.glassMesh1Controller.object, new THREE.Vector3())\r\n            }\r\n            if (this.$refs['dom3d-container'] instanceof HTMLElement && this.$refs['dom3d-test'] instanceof HTMLElement) {\r\n                this.fpm.registerCSSCoordinator(this.$refs['dom3d-container'], this.$refs['dom3d-test'], new THREE.Vector3(-200, 110, 0))\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        onGlassClick() {\r\n            alert('glass clicked!')\r\n        }\r\n    }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeFrontpageTest.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeFrontpageTest.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ThreeFrontpageTest.vue?vue&type=template&id=530f970e&scoped=true&\"\nimport script from \"./ThreeFrontpageTest.vue?vue&type=script&lang=ts&\"\nexport * from \"./ThreeFrontpageTest.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ThreeFrontpageTest.vue?vue&type=style&index=0&id=530f970e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"530f970e\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","var map = {\n\t\"./GlassFrontShader/V.glsl\": \"c444\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"5303\";","import {\n\tBoxGeometry,\n\tVector3\n} from 'three';\n\nconst _tempNormal = new Vector3();\n\nfunction getUv( faceDirVector, normal, uvAxis, projectionAxis, radius, sideLength ) {\n\n\tconst totArcLength = 2 * Math.PI * radius / 4;\n\n\t// length of the planes between the arcs on each axis\n\tconst centerLength = Math.max( sideLength - 2 * radius, 0 );\n\tconst halfArc = Math.PI / 4;\n\n\t// Get the vector projected onto the Y plane\n\t_tempNormal.copy( normal );\n\t_tempNormal[ projectionAxis ] = 0;\n\t_tempNormal.normalize();\n\n\t// total amount of UV space alloted to a single arc\n\tconst arcUvRatio = 0.5 * totArcLength / ( totArcLength + centerLength );\n\n\t// the distance along one arc the point is at\n\tconst arcAngleRatio = 1.0 - ( _tempNormal.angleTo( faceDirVector ) / halfArc );\n\n\tif ( Math.sign( _tempNormal[ uvAxis ] ) === 1 ) {\n\n\t\treturn arcAngleRatio * arcUvRatio;\n\n\t} else {\n\n\t\t// total amount of UV space alloted to the plane between the arcs\n\t\tconst lenUv = centerLength / ( totArcLength + centerLength );\n\t\treturn lenUv + arcUvRatio + arcUvRatio * ( 1.0 - arcAngleRatio );\n\n\t}\n\n}\n\nclass RoundedBoxGeometry extends BoxGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, segments = 2, radius = 0.1 ) {\n\n\t\t// ensure segments is odd so we have a plane connecting the rounded corners\n\t\tsegments = segments * 2 + 1;\n\n\t\t// ensure radius isn't bigger than shortest side\n\t\tradius = Math.min( width / 2, height / 2, depth / 2, radius );\n\n\t\tsuper( 1, 1, 1, segments, segments, segments );\n\n\t\t// if we just have one segment we're the same as a regular box\n\t\tif ( segments === 1 ) return;\n\n\t\tconst geometry2 = this.toNonIndexed();\n\n\t\tthis.index = null;\n\t\tthis.attributes.position = geometry2.attributes.position;\n\t\tthis.attributes.normal = geometry2.attributes.normal;\n\t\tthis.attributes.uv = geometry2.attributes.uv;\n\n\t\t//\n\n\t\tconst position = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst box = new Vector3( width, height, depth ).divideScalar( 2 ).subScalar( radius );\n\n\t\tconst positions = this.attributes.position.array;\n\t\tconst normals = this.attributes.normal.array;\n\t\tconst uvs = this.attributes.uv.array;\n\n\t\tconst faceTris = positions.length / 6;\n\t\tconst faceDirVector = new Vector3();\n\t\tconst halfSegmentSize = 0.5 / segments;\n\n\t\tfor ( let i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tposition.fromArray( positions, i );\n\t\t\tnormal.copy( position );\n\t\t\tnormal.x -= Math.sign( normal.x ) * halfSegmentSize;\n\t\t\tnormal.y -= Math.sign( normal.y ) * halfSegmentSize;\n\t\t\tnormal.z -= Math.sign( normal.z ) * halfSegmentSize;\n\t\t\tnormal.normalize();\n\n\t\t\tpositions[ i + 0 ] = box.x * Math.sign( position.x ) + normal.x * radius;\n\t\t\tpositions[ i + 1 ] = box.y * Math.sign( position.y ) + normal.y * radius;\n\t\t\tpositions[ i + 2 ] = box.z * Math.sign( position.z ) + normal.z * radius;\n\n\t\t\tnormals[ i + 0 ] = normal.x;\n\t\t\tnormals[ i + 1 ] = normal.y;\n\t\t\tnormals[ i + 2 ] = normal.z;\n\n\t\t\tconst side = Math.floor( i / faceTris );\n\n\t\t\tswitch ( side ) {\n\n\t\t\t\tcase 0: // right\n\n\t\t\t\t\t// generate UVs along Z then Y\n\t\t\t\t\tfaceDirVector.set( 1, 0, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = getUv( faceDirVector, normal, 'z', 'y', radius, depth );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'z', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // left\n\n\t\t\t\t\t// generate UVs along Z then Y\n\t\t\t\t\tfaceDirVector.set( - 1, 0, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'z', 'y', radius, depth );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'z', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // top\n\n\t\t\t\t\t// generate UVs along X then Z\n\t\t\t\t\tfaceDirVector.set( 0, 1, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'x', 'z', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = getUv( faceDirVector, normal, 'z', 'x', radius, depth );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // bottom\n\n\t\t\t\t\t// generate UVs along X then Z\n\t\t\t\t\tfaceDirVector.set( 0, - 1, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'x', 'z', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'z', 'x', radius, depth );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 4: // front\n\n\t\t\t\t\t// generate UVs along X then Y\n\t\t\t\t\tfaceDirVector.set( 0, 0, 1 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'x', 'y', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'x', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 5: // back\n\n\t\t\t\t\t// generate UVs along X then Y\n\t\t\t\t\tfaceDirVector.set( 0, 0, - 1 );\n\t\t\t\t\tuvs[ j + 0 ] = getUv( faceDirVector, normal, 'x', 'y', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'x', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { RoundedBoxGeometry };\n","export function loadShader(shaderName: string): Array<string> {\r\n    try {\r\n        var vertexShader = require('./' + shaderName + '/V.glsl')\r\n        var fragShader = require('./' + shaderName + '/F.glsl')\r\n        return [vertexShader, fragShader]\r\n    }\r\n    catch(err) {\r\n        console.error('failed to fetch shader', err)\r\n        return ['', '']\r\n    }\r\n}","import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { RoundedBoxGeometry } from 'three/examples/jsm/geometries/RoundedBoxGeometry'\r\nimport { loadShader } from './ShaderLoader'\r\nimport { Stats } from 'three-stats'\r\nimport { ShaderMaterial } from 'three'\r\n\r\nexport class RefractionObject {\r\n    mesh: THREE.Mesh\r\n    originalMaterial: THREE.Material | THREE.Material[]\r\n    refractionMaterial: THREE.ShaderMaterial\r\n    backColor: THREE.Color\r\n    refractionMaterialUniforms: { [uniform: string]: THREE.IUniform }\r\n    // suResolution: THREE.Vector2\r\n    // suBackground: THREE.Texture\r\n    // suDepth: THREE.DepthTexture\r\n    constructor(scene: THREE.Scene, mesh: THREE.Mesh, suResolution: THREE.Vector2, suBackground: THREE.Texture, suImage: THREE.Texture | null, suDepth: THREE.DepthTexture,\r\n        backColor: THREE.Color, absorbColor: number, suRefractionFactor: number, suOpacity: number) {\r\n        this.mesh = mesh\r\n        this.mesh['refractionObject'] = this\r\n        // copy material\r\n        if (this.mesh.material instanceof Array) {\r\n            this.originalMaterial = new Array<THREE.Material>()\r\n            for (let i = 0; i < this.mesh.material.length; i++) {\r\n                this.originalMaterial.push(this.mesh.material[i].clone())\r\n            }\r\n        }\r\n        else {\r\n            this.originalMaterial = this.mesh.material.clone()\r\n        }\r\n        this.backColor = backColor\r\n        this.refractionMaterialUniforms = {\r\n            \"resolution\": { value: suResolution },\r\n            \"tBackground\":    { value: suBackground },\r\n            \"tBackDepth\": { value: suDepth },\r\n            \"tDisplayImage\": { value: suImage },\r\n            \"tSkybox\": { value: scene.environment },\r\n            \"refractionFactor\": { value: suRefractionFactor },\r\n            \"opacity\": { value: suOpacity },\r\n            \"absorbColor\": { value: new THREE.Color(absorbColor) },\r\n            \"objectCenter\": { value: mesh.position },\r\n        }\r\n        var [glassFrontVS, glassFrontFS] = loadShader('GlassFrontShader')\r\n        this.refractionMaterial = new ShaderMaterial({\r\n            vertexShader:   glassFrontVS,\r\n            fragmentShader: glassFrontFS,\r\n            uniforms: this.refractionMaterialUniforms,\r\n            // depthTest: false,\r\n            // stencilWrite: true,\r\n            // stencilRef: 999,\r\n            // stencilZPass: THREE.ReplaceStencilOp,  // write if the depth buffer test passes\r\n            side: THREE.FrontSide\r\n        })\r\n    }\r\n}\r\n\r\nexport class RefractionManager {\r\n    container: HTMLElement\r\n    backgroundScene: THREE.Scene\r\n    renderer: THREE.WebGLRenderer\r\n    camera: THREE.PerspectiveCamera\r\n\r\n    frontScene: THREE.Scene\r\n\r\n    backdepthTexture: THREE.DepthTexture\r\n    backRenderTarget: THREE.WebGLRenderTarget\r\n\r\n    refractionObjectList: Array<RefractionObject>\r\n\r\n    suResolution: THREE.Vector2\r\n\r\n    constructor(\r\n        backgroundScene: THREE.Scene, container: HTMLElement, renderer: THREE.WebGLRenderer, camera: THREE.PerspectiveCamera,\r\n        backDepthTextureSize: number = 512\r\n    ) {\r\n        this.container = container\r\n        this.backgroundScene = backgroundScene\r\n        this.renderer = renderer\r\n        this.camera = camera\r\n\r\n        this.frontScene = new THREE.Scene()\r\n        this.backdepthTexture = new THREE.DepthTexture(\r\n            backDepthTextureSize, backDepthTextureSize,\r\n            THREE.FloatType\r\n        )\r\n        this.backRenderTarget = new THREE.WebGLRenderTarget(\r\n            this.container.offsetWidth * window.devicePixelRatio,\r\n            this.container.offsetHeight * window.devicePixelRatio\r\n        )\r\n        this.backRenderTarget.depthBuffer = true;\r\n        this.backRenderTarget.depthTexture = this.backdepthTexture;\r\n        this.backRenderTarget.depthTexture.type = THREE.UnsignedIntType;\r\n        this.frontScene.background = this.backRenderTarget.texture\r\n        this.frontScene.environment = this.backgroundScene.environment\r\n        this.refractionObjectList = []\r\n        this.suResolution = new THREE.Vector2(\r\n            this.container.offsetWidth * window.devicePixelRatio,\r\n            this.container.offsetHeight * window.devicePixelRatio\r\n        )\r\n\r\n    }\r\n\r\n    genFresnelMaterial(textureCube: THREE.Texture | null) {\r\n        var shader = THREE.ShaderLib.lib[ \"fresnel\" ];\r\n        var uniforms = THREE.UniformsUtils.clone( shader.uniforms );\r\n\r\n        uniforms[ \"tCube\" ].value = textureCube;\r\n\r\n        var parameters = { fragmentShader: shader.fragmentShader, vertexShader: shader.vertexShader, uniforms: uniforms };\r\n        var material = new THREE.ShaderMaterial( parameters );\r\n        return material\r\n    }\r\n\r\n    addRefractionMesh(mesh: THREE.Mesh, setDefaultBacksideMaterial: boolean = true,\r\n        image: THREE.Texture | null,\r\n        backColor: number = 0xffffff,\r\n        absorbColor: number = 0x000000, refractionFactor: number = 1.49, opacityFactor: number = 0.2) {\r\n        const _backColor = new THREE.Color(backColor)\r\n        if (setDefaultBacksideMaterial) {\r\n            mesh.material = new THREE.MeshPhysicalMaterial({\r\n                color: _backColor,\r\n                transparent: true,\r\n                opacity: 0.5,\r\n                metalness: 1,\r\n                reflectivity: 0,\r\n                roughness: 0,\r\n                side: THREE.BackSide\r\n                // colorWrite: false\r\n            })\r\n            // mesh.material = this.genFresnelMaterial(this.backgroundScene.environment)\r\n        }\r\n        this.refractionObjectList.push(new RefractionObject(\r\n            this.backgroundScene,\r\n            mesh,\r\n            this.suResolution,\r\n            this.backRenderTarget.texture,\r\n            image,\r\n            this.backRenderTarget.depthTexture,\r\n            _backColor,\r\n            absorbColor,\r\n            refractionFactor,\r\n            opacityFactor\r\n        ))\r\n        this.backgroundScene.add(mesh)\r\n    }\r\n\r\n    onWindowResize() {\r\n        this.suResolution.x = this.container.offsetWidth * window.devicePixelRatio\r\n        this.suResolution.y = this.container.offsetHeight * window.devicePixelRatio\r\n    }\r\n\r\n    render() {\r\n        this.refractionObjectList.forEach(refObj => {\r\n            refObj.mesh.material = refObj.refractionMaterial\r\n            this.frontScene.add(refObj.mesh)\r\n        })\r\n\r\n        this.renderer.setRenderTarget(null)\r\n        this.renderer.render(this.frontScene, this.camera)\r\n\r\n        this.refractionObjectList.forEach(refObj => {\r\n            refObj.mesh.material = refObj.originalMaterial\r\n            this.backgroundScene.add(refObj.mesh)\r\n        })\r\n    }\r\n}\r\n\r\nvar container: HTMLElement\r\nvar renderer: THREE.WebGLRenderer, camera: THREE.PerspectiveCamera, controls: OrbitControls\r\nvar stats: Stats\r\nvar scene: THREE.Scene\r\nvar rm: RefractionManager\r\n\r\nexport function initScene(_container: HTMLElement) {\r\n    container = _container\r\n    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 5000 )\r\n    camera.position.set(30, 20, 200)\r\n    camera.lookAt(0, 0, 0)\r\n\r\n    scene = new THREE.Scene()\r\n\r\n    renderer = new THREE.WebGLRenderer( {antialias: true, alpha: true} )\r\n    \r\n    renderer.setClearColor( 0xffffff )\r\n    renderer.setPixelRatio( window.devicePixelRatio )\r\n    renderer.setSize(window.innerWidth, window.innerHeight)\r\n    container.appendChild( renderer.domElement )\r\n    controls = new OrbitControls(camera, container)\r\n    container.style.position = 'absolute'\r\n    container.style.top = '0px'\r\n    container.style.left = '0px'\r\n    stats = new Stats()\r\n    stats.domElement.style.zIndex = '100'\r\n    container.appendChild( stats.domElement )\r\n\r\n    // set background\r\n    const r = './cube/'\r\n\r\n    const urls = [\r\n        r + 'px.jpg', r + 'nx.jpg',\r\n        r + 'py.jpg', r + 'ny.jpg',\r\n        r + 'pz.jpg', r + 'nz.jpg'\r\n    ]\r\n\r\n    const textureCube = new THREE.CubeTextureLoader().load( urls )\r\n    textureCube.mapping = THREE.CubeRefractionMapping\r\n\r\n    scene.background = textureCube\r\n    scene.environment = textureCube\r\n    \r\n    // set light\r\n    var light = new THREE.DirectionalLight()\r\n    light.position.x = 300\r\n    light.position.y = 200\r\n    light.position.z = 100\r\n    scene.add(light)\r\n\r\n    // set floor\r\n    var floorTexture = new THREE.TextureLoader().load( './checkerboard.jpg' )\r\n\tfloorTexture.wrapS = floorTexture.wrapT = THREE.RepeatWrapping\r\n\tfloorTexture.repeat.set( 10, 10 )\r\n    var floorMaterial = new THREE.MeshBasicMaterial( { map: floorTexture, side: THREE.DoubleSide } )\r\n\tvar floorGeometry = new THREE.PlaneGeometry(1000, 1000, 1, 1)\r\n\tvar floor = new THREE.Mesh(floorGeometry, floorMaterial)\r\n\tfloor.position.y -= 20.1\r\n\tfloor.rotation.x = Math.PI / 2\r\n    // scene.add(floor)\r\n\r\n    rm = new RefractionManager(scene, container, renderer, camera)\r\n\r\n    var glassMesh1 = new THREE.Mesh(\r\n        new RoundedBoxGeometry(40, 40, 40, 5, 5),\r\n        new THREE.MeshPhongMaterial({})\r\n    )\r\n    glassMesh1.position.x -= 40\r\n    var glassMesh2 = new THREE.Mesh(\r\n        new THREE.SphereGeometry( 20 ),\r\n        new THREE.MeshPhongMaterial({})\r\n    )\r\n    var glassMesh3 = new THREE.Mesh(\r\n        new THREE.CylinderGeometry( 20, 20, 80, 36 ),\r\n        new THREE.MeshPhongMaterial({})\r\n    )\r\n    glassMesh3.position.x += 40\r\n    glassMesh3.position.y += 20\r\n\r\n    rm.addRefractionMesh(glassMesh1, true, null, 0x000000, 0x000000)\r\n    rm.addRefractionMesh(glassMesh2, true, null, 0x006000, 0x006000)\r\n    rm.addRefractionMesh(glassMesh3, true, null, 0x000633, 0x000633)\r\n\r\n    // add a few spheres\r\n    var ballMesh = new THREE.Mesh(\r\n        new THREE.SphereGeometry( 20 ),\r\n        new THREE.MeshPhongMaterial({\r\n            color: 0xff0000\r\n        })\r\n    )\r\n    ballMesh.position.copy(glassMesh1.position)\r\n    ballMesh.position.z -= 50\r\n    scene.add(ballMesh)\r\n\r\n    window.addEventListener( 'resize', onWindowResize )\r\n    animate()\r\n\r\n}\r\n\r\nfunction onWindowResize() {\r\n\r\n    camera.aspect = window.innerWidth / window.innerHeight\r\n    camera.updateProjectionMatrix()\r\n    rm.onWindowResize()\r\n    renderer.setSize( window.innerWidth, window.innerHeight )\r\n\r\n}\r\n\r\nfunction animate() {\r\n    requestAnimationFrame( animate )\r\n    render()\r\n    controls.update()\r\n    stats.update()\r\n}\r\n\r\nfunction render()\r\n{\r\n    rm.render()\r\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var arraySlice = require('../internals/array-slice-simple');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","module.exports = \"varying vec2 vUv;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 vCameraPosition;\\r\\nvarying vec4 vWorldPosition;\\r\\nvarying mat4 vProjectionMatrix;\\r\\n// varying vec3 vRefract;\\r\\n// varying vec2 vRefractOffset;\\r\\nvarying vec4 vImageUVCenter;\\r\\n\\r\\nuniform vec3 objectCenter;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\\r\\n    vec4 mvPosition = viewMatrix * vWorldPosition;\\r\\n    gl_Position = projectionMatrix * mvPosition;\\r\\n    vUv = uv;\\r\\n\\r\\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\\r\\n    vCameraPosition = cameraPosition;\\r\\n\\r\\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\\r\\n    vImageUVCenter = vProjectionMatrix * vec4( objectCenter, 1.0 );\\r\\n}\\r\\n\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","module.exports = \"uniform vec2 resolution;\\r\\nuniform sampler2D tBackground;\\r\\nuniform sampler2D tBackDepth;\\r\\nuniform sampler2D tDisplayImage;\\r\\n\\r\\nuniform samplerCube tSkybox;\\r\\nuniform vec3 absorbColor;\\r\\nuniform float refractionFactor;\\r\\nuniform float opacity;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 vCameraPosition;\\r\\nvarying vec4 vWorldPosition;\\r\\nvarying mat4 vProjectionMatrix;\\r\\nvarying vec4 vImageUVCenter;\\r\\n\\r\\nfloat near = 0.1;\\r\\nfloat far  = 5000.0;\\r\\n\\r\\nfloat LinearizeDepth(float depth) \\r\\n{\\r\\n    float z = depth * 2.0 - 1.0; // back to NDC \\r\\n    return (2.0 * near * far) / (far + near - z * (far - near));\\t\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\\r\\n    // return;\\r\\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\\r\\n    float frontDepth = gl_FragCoord.z;\\r\\n\\r\\n    if (frontDepth > backDepth) {\\r\\n        discard;\\r\\n    }\\r\\n\\r\\n    float backDepthlinear = LinearizeDepth(backDepth);\\r\\n    float frontDepthlinear = LinearizeDepth(frontDepth);\\r\\n    \\r\\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\\r\\n    backToFrontDepth *= 0.5;\\r\\n    \\r\\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\\r\\n    vCameraRay = normalize(vCameraRay);\\r\\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\\r\\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\\r\\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\\r\\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\\r\\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\\r\\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\\r\\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\\r\\n    offset = normalize(offset);\\r\\n\\r\\n    // reflect\\r\\n    vec3 vReflect = reflect( vCameraRay, vNormal );\\r\\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\\r\\n\\r\\n    // snell's law\\r\\n    float cosTheta1 = dot(vCameraRay, vNormal);\\r\\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\\r\\n    float sinTheta2 = sinTheta1 / refractionFactor;\\r\\n    float theta2 = asin(sinTheta2);\\r\\n    offset *= sinTheta2;\\r\\n    offset *= 100.0;\\r\\n\\r\\n    offset /= backDepth;\\r\\n\\r\\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\\r\\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\\r\\n\\r\\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\\r\\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\\r\\n\\r\\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\\r\\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\\r\\n    \\r\\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\\r\\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\\r\\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\\r\\n\\r\\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\\r\\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\\r\\n    float sqrtDepth = sqrt(backToFrontDepth) * opacity;\\r\\n    float absorbFactor = sqrtDepth / (1.0 + sqrtDepth);\\r\\n    vec3 refractCol = mix(backColor, absorbColor, absorbFactor);\\r\\n\\r\\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\\r\\n\\r\\n    // gl_FragColor = vec4(refCol, 1.0);\\r\\n    float reflectionCoeff = pow(sinTheta1, 4.0);\\r\\n    // reflectionCoeff = 1.0;\\r\\n\\r\\n    // vec4 image = vec4(vec3(texture2D( tDisplayImage, vec2( (gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y ) )), 1.0);\\r\\n    // vec4 image = vec4((gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y, 1.0, 1.0);\\r\\n    // vec4 image = vec4(1.0, 0.0, 0.0, 1.0);\\r\\n\\r\\n    // gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\\r\\n    gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\\r\\n    // gl_FragColor = image;\\r\\n    // if (gl_FragCoord.x < 600.0) {\\r\\n    //     gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\\r\\n    // }\\r\\n    // gl_FragColor = vec4(backColor, 1.0);\\r\\n    // gl_FragColor = vec4(vec3(backDepthlinear * 0.01), 1.0);\\r\\n}\"","import * as TWEEN from '@tweenjs/tween.js'\r\nimport * as THREE from 'three'\r\n// import store from '@/store'\r\nimport * as GEOM from '../GeomUtils'\r\n\r\nclass TweenAnimController {\r\n    animationObjectCount: number\r\n    requestId: number\r\n    constructor() {\r\n        this.animationObjectCount = 0\r\n        this.requestId = -1\r\n    }\r\n    addTweenAnimObject() {\r\n        if(this.animationObjectCount <= 0) {\r\n            this.startAnim()\r\n        }\r\n        this.animationObjectCount ++\r\n    }\r\n    removeTweenAnimObject() {\r\n        if (this.animationObjectCount <= 0) {\r\n            return\r\n        }\r\n        if(this.animationObjectCount == 1) {\r\n            this.stopAnim()\r\n        }\r\n        this.animationObjectCount --\r\n    }\r\n    loopAnim = () => {\r\n        TWEEN.update()\r\n        if (this.requestId >= 0) {\r\n            this.requestId = window.requestAnimationFrame(this.loopAnim)\r\n        }\r\n    }\r\n    startAnim = () => {\r\n        if (this.requestId < 0) {\r\n            this.requestId = window.requestAnimationFrame(this.loopAnim)\r\n        }\r\n    }\r\n    stopAnim = () => {\r\n        if (this.requestId >= 0) {\r\n            window.cancelAnimationFrame(this.requestId)\r\n            this.requestId = -1\r\n        }\r\n    }\r\n    tweenNumber(\r\n            fromValue: number,\r\n            toValue: number,\r\n            onUpdateFunc: (value: number) => any,\r\n            onCompleteFunc: (value: number) => any,\r\n            duration: number = 1000,\r\n            easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n        ): void {\r\n        const v = { a: fromValue }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v)\r\n            .to({ a: toValue }, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(v.a))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(v.a)\r\n            }).start()\r\n    }\r\n    tweenVector2(\r\n        fromValue: GEOM.Vector2,\r\n        toValue: GEOM.Vector2,\r\n        onUpdateFunc: (x: number, y: number) => any,\r\n        onCompleteFunc: (x: number, y: number) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y }\r\n        const v2 = { x: toValue.x, y: toValue.y }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(v1.x, v1.y))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(v1.x, v1.y)\r\n            }).start()\r\n    }\r\n    tweenVector3(\r\n        fromValue: GEOM.Vector3,\r\n        toValue: GEOM.Vector3,\r\n        onUpdateFunc: (x: number, y: number, z: number) => any,\r\n        onCompleteFunc: (x: number, y: number, z: number) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y, z: fromValue.z }\r\n        const v2 = { x: toValue.x, y: toValue.y, z: toValue.z }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(v1.x, v1.y, v1.z))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(v1.x, v1.y, v1.z)\r\n            }).start()\r\n    }\r\n    tweenEuler(\r\n        fromValue: THREE.Euler,\r\n        toValue: THREE.Euler,\r\n        onUpdateFunc: (eu: THREE.Euler) => any,\r\n        onCompleteFunc: (eu: THREE.Euler) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y, z: fromValue.z }\r\n        const v2 = { x: toValue.x, y: toValue.y, z: toValue.z }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(new THREE.Euler(v1.x, v1.y, v1.z)))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(new THREE.Euler(v1.x, v1.y, v1.z))\r\n            }).start()\r\n    }\r\n    tweenThreeVector3(\r\n        fromValue: THREE.Vector3,\r\n        toValue: THREE.Vector3,\r\n        onUpdateFunc: (eu: THREE.Vector3) => any,\r\n        onCompleteFunc: (eu: THREE.Vector3) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y, z: fromValue.z }\r\n        const v2 = { x: toValue.x, y: toValue.y, z: toValue.z }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(new THREE.Vector3(v1.x, v1.y, v1.z)))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(new THREE.Vector3(v1.x, v1.y, v1.z))\r\n            }).start()\r\n    }\r\n}\r\n\r\nconst controller = new TweenAnimController()\r\n\r\nexport { controller }"],"sourceRoot":""}
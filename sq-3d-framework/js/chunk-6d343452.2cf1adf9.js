(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d343452"],{"0da5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[i("div",{staticClass:"loading-container",class:{"loading-container--hidden":t.loadingStat.isLoaded,"loading-container--none":t.loadingStat.noLoadingStat}},[i("div",{staticClass:"load-stat"},[i("div",{staticClass:"load-pgbar",style:{width:100*t.loadingStat.loaded/t.loadingStat.total+"%"}}),i("div",{staticClass:"load-text"},[t._v(t._s(Math.round(100*t.loadingStat.loaded/t.loadingStat.total))+" %")])])])]),i("div",{ref:"dom3d-container",attrs:{id:"dom3d-container"}},[i("div",{ref:"dom3d-test",attrs:{id:"dom3d-test"}},[i("p",[t._v("HTML element: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua")])])])])},a=[],o=i("5a89"),s=i("2b0e"),r=i("d4ec"),c=i("bee2"),l=i("ade3"),d=(i("d3b7"),i("159b"),i("22b5")),h=i("32d9"),u=i("93e9"),m=i("61d9"),v=i("25ae"),b=i("fb12"),p=i("26e3"),f=i("7d52"),g=i("7612"),w=i("f998"),j=i("cfc4"),O=i("f93b"),M=function(){function t(e,i,n,a){var s=this;Object(r["a"])(this,t),Object(l["a"])(this,"container",void 0),Object(l["a"])(this,"renderer",void 0),Object(l["a"])(this,"cardInsideScene",void 0),Object(l["a"])(this,"scene",void 0),Object(l["a"])(this,"composer",void 0),Object(l["a"])(this,"stats",void 0),Object(l["a"])(this,"refractionManager",void 0),Object(l["a"])(this,"mousePosX",void 0),Object(l["a"])(this,"mousePosY",void 0),Object(l["a"])(this,"pointer",void 0),Object(l["a"])(this,"camera",void 0),Object(l["a"])(this,"cameraZPosition",void 0),Object(l["a"])(this,"cameraLootAtController",void 0),Object(l["a"])(this,"cameraTargetPosition",void 0),Object(l["a"])(this,"cameraWithMouseRotateFactor",void 0),Object(l["a"])(this,"cameraWithMouseMoveFactor",void 0),Object(l["a"])(this,"raycaster",void 0),Object(l["a"])(this,"intersectGlassObjs",void 0),Object(l["a"])(this,"glassPosRadius",void 0),Object(l["a"])(this,"cssScene",void 0),Object(l["a"])(this,"cssRenderer",void 0),Object(l["a"])(this,"loadingManager",void 0),Object(l["a"])(this,"leavesParticleCount",void 0),Object(l["a"])(this,"leavesMatrixDummy",void 0),Object(l["a"])(this,"leavesParticlesMeshes",void 0),Object(l["a"])(this,"glassParticleControllerDict",void 0),Object(l["a"])(this,"selectedGlassParticleController",void 0),Object(l["a"])(this,"animate",(function(){requestAnimationFrame(s.animate),s.updateCamera(),s.render(),s.stats.update()}));var c=this;this.cameraZPosition=500,this.container=e,this.camera=new o["db"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new o["Lb"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.stats=new m["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.camera.position.set(0,200,150),this.scene=new o["pb"],this.cssScene=new o["pb"],this.cardInsideScene=new o["pb"],this.loadingManager=new o["O"]((function(){i&&i()}),(function(t,e,i){n&&n(t,e,i)}),(function(t){a&&a(t)}));var d="./cube1/",b=[d+"px.jpg",d+"nx.jpg",d+"py.jpg",d+"ny.jpg",d+"pz.jpg",d+"nz.jpg"],w=new o["o"](this.loadingManager).load(b);w.mapping=o["n"],this.scene.environment=w,this.refractionManager=new f["a"](this.scene,this.container,this.renderer,this.camera);var M=new u["a"](this.scene,this.camera);M.clear=!0,M.clearDepth=!1,this.composer=new h["a"](this.renderer,this.refractionManager.backRenderTarget),this.composer.renderToScreen=!1,this.composer.addPass(M),this.refractionManager.backRenderTarget.texture=this.composer.readBuffer.texture,this.refractionManager.frontScene.background=this.composer.readBuffer.texture;var y=new o["hb"];y.position.x=0,y.position.y=100,y.position.z=0,this.scene.add(y),this.glassParticleControllerDict=[],this.intersectGlassObjs=[];var C=new o["U"](new g["a"](40,40,40,5,5),new o["Y"]({color:new o["m"](16711935)})),P=.6-Math.PI/2;this.glassPosRadius=120,C.position.set(Math.cos(P)*this.glassPosRadius,30,Math.sin(P)*this.glassPosRadius);var x=new o["Ab"](this.loadingManager).load("./jutabag3ds/texture/normal.jpg");this.refractionManager.addRefractionMesh(C,!0,x,16711680,16711680,2,.5),this.intersectGlassObjs.push(C);var S=(new o["G"]).copy(new o["vb"](.5,4)),R=new o["V"]({}),G=new j["a"](300,S,R,(function(t){var e=2*Math.PI*Math.random(),i=60+Object(p["c"])(),n=new o["Gb"](10*Object(p["c"])(),1*Object(p["c"])(),10*Object(p["c"])());return new o["Gb"](Math.cos(e),0,Math.sin(e)).multiplyScalar(i).add(n)}),(function(t){return new o["x"](0,0,0)}),(function(t){return 0}),(function(t){return Math.random()<.5?new o["m"](16711680):new o["m"](8388608)}),(function(t){return new o["m"](16776960)}),(function(t){Math.atan(t.originalPosition.z/t.originalPosition.x);t.originalPosition.x<0&&Math.PI,t.interp,t.interp;var e=(new o["Gb"]).copy(t.originalPosition).multiplyScalar(t.interp),i=5*Math.sqrt(t.interp)-10;e.y+=i;var n={curPosition:e,curRotation:new o["x"](1,0,1),curScale:t.interp*(1-t.interp)*4,curColor:(new o["m"]).copy(t.originalColor).lerp(t.mixColor,t.interp*t.interp)};return n}));G.mesh.position.copy(C.position),G.mesh.position.y-=15,this.scene.add(G.mesh),this.glassParticleControllerDict.push({mesh:C,pe:G,isTransisting:!1}),this.selectedGlassParticleController=this.glassParticleControllerDict[0];var T=new v["a"](this.loadingManager);T.load("./dodeca/dodeca.3ds",(function(t){if(t instanceof o["D"]&&t.children[0]instanceof o["U"]){var e=t.children[0];e.scale.multiplyScalar(.3),P=-.6-Math.PI/2,e.position.set(Math.cos(P)*s.glassPosRadius,30,Math.sin(P)*s.glassPosRadius),s.refractionManager.addRefractionMesh(e,!0,x,16752640,49407,2,.8),s.intersectGlassObjs.push(e);var i=new j["a"](300,S,R,(function(t){var e=2*Math.PI*Math.random(),i=2+Object(p["c"])(),n=new o["Gb"](1*Object(p["c"])(),1*Object(p["c"])(),1*Object(p["c"])());return new o["Gb"](Math.cos(e),0,Math.sin(e)).multiplyScalar(i).add(n)}),(function(t){return new o["x"](0,0,0)}),(function(t){return 0}),(function(t){return Math.random()<.5?new o["m"](8320):new o["m"](2293616)}),(function(t){return new o["m"](16776960)}),(function(t){var e=Math.atan(t.originalPosition.z/t.originalPosition.x);t.originalPosition.x<0&&(e+=Math.PI),e-=t.interp*t.interp;var i=new o["Gb"](10*Math.cos(e)+t.originalPosition.x,0,10*Math.sin(e)+t.originalPosition.z).multiplyScalar(3*t.interp+1+t.randomFactor),n={curPosition:i,curRotation:new o["x"](1,0,1),curScale:t.interp*(1-t.interp)*4,curColor:(new o["m"]).copy(t.originalColor).lerp(t.mixColor,t.interp*t.interp)};return n}));i.mesh.position.copy(e.position),i.mesh.position.y-=15,s.scene.add(i.mesh),s.glassParticleControllerDict.push({mesh:e,pe:i,isTransisting:!1})}})),this.leavesParticleCount=50,this.leavesMatrixDummy=new o["bb"],this.leavesParticlesMeshes=[];var k=new o["X"]({side:o["t"]});T.load("./particles/leaves.3ds",(function(t){t instanceof o["D"]&&(console.log(t),t.children.forEach((function(t){if(t instanceof o["U"]){var e=new j["b"](c.leavesParticleCount,t.geometry,k,c.getRandomLeavePosition,c.getRandomLeaveRotation,c.getRandomLeaveScale,(function(t){return new o["m"](267386880)}));c.scene.add(e.mesh)}})))}));var L=new o["gb"](2e3,2e3);console.log(this.composer.readBuffer);var I=new O["a"](L,this.scene,{color:new o["m"](16776960),flowDirection:new o["Fb"](1,1),textureWidth:1024,textureHeight:1024});I.position.y=-10,I.position.z-=500,I.rotation.x=-.5*Math.PI,this.scene.add(I),this.cameraWithMouseRotateFactor=.07,this.cameraWithMouseMoveFactor=4,this.cameraTargetPosition=(new o["Gb"]).copy(C.position),this.cameraLootAtController=new p["b"]((new o["Gb"]).copy(this.cameraTargetPosition),.9,.002),window.addEventListener("mousemove",(function(t){c.onMouseMove(t)})),this.raycaster=new o["mb"],this.selectedGlassParticleController=void 0,this.mousePosX=0,this.mousePosY=0,this.pointer=new o["Fb"],window.addEventListener("resize",(function(){c.onWindowResize()})),window.addEventListener("click",(function(t){c.onClick(t)})),this.animate()}return Object(c["a"])(t,[{key:"render",value:function(){this.renderer.setRenderTarget(this.refractionManager.backRenderTarget),this.composer.render(),this.refractionManager.render(),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.refractionManager.onWindowResize(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.cssRenderer&&this.cssRenderer.setSize(window.innerWidth,window.innerHeight)}},{key:"activateGlassParticleController",value:function(t){var e=t.pe,i=t.mesh,n=i?i["refractionObject"]:null;this.cameraTargetPosition.copy(i.position),e instanceof j["a"]&&e.transit(3e3),n instanceof f["b"]&&(t.isTransisting=!0,w["a"].tweenEuler(i.rotation,new o["x"](.5,.8,1),(function(t){i.rotation.copy(t)}),(function(){t.isTransisting=!1}),1500,d["a"].Exponential.InOut),w["a"].tweenNumber(1,0,(function(t){n.refractionMaterialUniforms["absorbColor"].value.b=t}),(function(){}),1500,d["a"].Exponential.InOut))}},{key:"inactivateGlassParticleController",value:function(t){var e=t.mesh,i=e?e["refractionObject"]:null;i instanceof f["b"]&&(t.isTransisting=!0,w["a"].tweenEuler(e.rotation,new o["x"](0,0,0),(function(t){e.rotation.copy(t)}),(function(){t.isTransisting=!1}),1500,d["a"].Exponential.InOut),w["a"].tweenNumber(0,1,(function(t){i.refractionMaterialUniforms["absorbColor"].value.b=t}),(function(){}),1500,d["a"].Exponential.InOut))}},{key:"onMouseMove",value:function(t){var e,i=this;this.mousePosX=t.clientX,this.mousePosY=t.clientY,this.pointer.x=t.clientX/window.innerWidth*2-1,this.pointer.y=-t.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var n=this.raycaster.intersectObjects(this.intersectGlassObjs,!1);1==n.length&&(null===(e=this.selectedGlassParticleController)||void 0===e?void 0:e.mesh)!=n[0].object&&this.glassParticleControllerDict.forEach((function(t){t.mesh!==n[0].object?i.inactivateGlassParticleController(t):(i.selectedGlassParticleController=t,i.activateGlassParticleController(t))}))}},{key:"onClick",value:function(t){var e,i,n=this,a=this.raycaster.intersectObjects(this.intersectGlassObjs,!1);1==a.length&&(null===(e=this.selectedGlassParticleController)||void 0===e?void 0:e.mesh)!=a[0].object?this.glassParticleControllerDict.forEach((function(t){t.mesh!==a[0].object?n.inactivateGlassParticleController(t):(n.selectedGlassParticleController=t,n.activateGlassParticleController(t))})):1==a.length&&(null===(i=this.selectedGlassParticleController)||void 0===i?void 0:i.mesh)==a[0].object&&this.selectedGlassParticleController.pe instanceof j["a"]&&this.selectedGlassParticleController.pe.transit(3e3)}},{key:"getRaycastPos",value:function(t,e){var i=2*t/window.innerWidth-1,n=1-2*e/window.innerHeight,a=new o["Gb"](i,n,.995);return a.unproject(this.camera),a}},{key:"updateCamera",value:function(){var t=window.innerWidth/2-this.mousePosX,e=window.innerHeight/2-this.mousePosY,i=new o["Gb"](-t*this.cameraWithMouseRotateFactor,e*this.cameraWithMouseRotateFactor,0).add(this.cameraTargetPosition);this.cameraLootAtController.update(i),this.camera.lookAt(this.cameraLootAtController.currentVec3);var n=this.cameraLootAtController.velocity;this.camera.position.x=n.x*this.cameraWithMouseMoveFactor,this.camera.position.y=200-n.y*this.cameraWithMouseMoveFactor}},{key:"registerCSSCoordinator",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o["Gb"],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;void 0==this.cssRenderer&&(this.cssRenderer=new b["b"](t),this.cssRenderer.setSize(window.innerWidth,window.innerHeight));var a=new b["a"](e);return a.position.copy(i),a.scale.multiplyScalar(n),this.cssScene.add(a),a}},{key:"getRandomLeavePosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=.8*Object(p["c"])()-Math.PI/2,n=e+Object(p["c"])(),a=new o["Gb"](60*Object(p["c"])(),5*Object(p["c"])(),60*Object(p["c"])());return new o["Gb"](Math.cos(i),0,Math.sin(i)).multiplyScalar(n).add(a)}},{key:"getRandomLeaveRotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new o["x"](Math.random()*e,Math.random()*e,0)}},{key:"getRandomLeaveScale",value:function(){return.2*Math.random()+.2}}]),t}(),y=s["a"].extend({data:function(){return{fpm:null,loadingStat:{loaded:0,total:1,isLoaded:!1,noLoadingStat:!1}}},mounted:function(){var t=this,e=this;this.$refs["canvas-container"]instanceof HTMLElement&&(this.fpm=new M(this.$refs["canvas-container"],(function(){console.log("loaded"),e.loadingStat.isLoaded=!0,setTimeout((function(){e.loadingStat.noLoadingStat=!0}),501)}),(function(e,i,n){t.loadingStat.loaded=i,t.loadingStat.total=n}),(function(t){console.error("failed to load asset: "+t),e.loadingStat.isLoaded=!0})),this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-test"]instanceof HTMLElement&&this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-test"],new o["Gb"](-200,200,0)))},methods:{onGlassClick:function(){alert("glass clicked!")}}}),C=y,P=(i("bccc"),i("2877")),x=Object(P["a"])(C,n,a,!1,null,"504acd3e",null);e["default"]=x.exports},"2f41":function(t,e,i){},bccc:function(t,e,i){"use strict";i("2f41")},cfc4:function(t,e,i){"use strict";i.d(e,"b",(function(){return v})),i.d(e,"a",(function(){return b}));var n=i("257e"),a=i("262e"),o=i("2caf"),s=i("d4ec"),r=i("bee2"),c=i("ade3"),l=(i("d3b7"),i("159b"),i("5a89")),d=i("f998"),h=function(){function t(e,i,n,a,o){Object(s["a"])(this,t),Object(c["a"])(this,"birthTime",void 0),Object(c["a"])(this,"deathTime",void 0),Object(c["a"])(this,"position",void 0),Object(c["a"])(this,"scale",void 0),Object(c["a"])(this,"rotation",void 0),Object(c["a"])(this,"color",void 0),Object(c["a"])(this,"instanceIndex",void 0),Object(c["a"])(this,"dummy",void 0),this.birthTime=0,this.deathTime=1,this.position=e,this.rotation=i,this.scale=n,this.dummy=new l["bb"],this.color=a,this.instanceIndex=o}return Object(r["a"])(t,[{key:"resetGeom",value:function(t){this.dummy.position.copy(this.position),this.dummy.rotation.copy(this.rotation),this.dummy.scale.set(this.scale,this.scale,this.scale),this.dummy.updateMatrix(),t.setMatrixAt(this.instanceIndex,this.dummy.matrix),t.setColorAt(this.instanceIndex,this.color)}}]),t}(),u=function(t){Object(a["a"])(i,t);var e=Object(o["a"])(i);function i(t,a,o,r,d,h){var u;return Object(s["a"])(this,i),u=e.call(this,t,a,o,r,h),Object(c["a"])(Object(n["a"])(u),"direction",void 0),Object(c["a"])(Object(n["a"])(u),"mixColor",void 0),Object(c["a"])(Object(n["a"])(u),"randomFactor",void 0),u.direction=(new l["Gb"]).copy(t),u.birthTime=.2*Math.random(),u.deathTime=.2*Math.random()+.8,u.mixColor=d,u.randomFactor=Math.random(),u}return Object(r["a"])(i,[{key:"updateGeomByRule",value:function(t,e,i){if(!(e<this.birthTime))if(e>=this.deathTime)this.resetGeom(t);else{var n=i({index:this.instanceIndex,interp:(e-this.birthTime)/(this.deathTime-this.birthTime),originalPosition:this.position,originalRotation:this.rotation,originalColor:this.color,originalScale:this.scale,mixColor:this.mixColor,randomFactor:this.randomFactor});this.dummy.position.copy(n.curPosition),this.dummy.rotation.copy(n.curRotation),this.dummy.scale.set(n.curScale,n.curScale,n.curScale),this.dummy.updateMatrix(),t.setMatrixAt(this.instanceIndex,this.dummy.matrix),t.setColorAt(this.instanceIndex,n.curColor)}}}]),i}(h),m=Object(r["a"])((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;Object(s["a"])(this,t),Object(c["a"])(this,"particleCount",void 0),Object(c["a"])(this,"mesh",void 0),this.particleCount=e,this.mesh=new l["H"](i,n,e),this.mesh.instanceMatrix.setUsage(l["u"])})),v=function(t){Object(a["a"])(i,t);var e=Object(o["a"])(i);function i(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,m=arguments.length>6?arguments[6]:void 0;Object(s["a"])(this,i),t=e.call(this,a,o,r),Object(c["a"])(Object(n["a"])(t),"particleControllers",void 0),t.particleControllers=[];for(var v=0;v<a;v++){var b=l(v),p=d(v),f=u(v),g=m(v),w=new h(b,p,f,g,v);t.particleControllers.push(w),w.resetGeom(t.mesh)}return t}return Object(r["a"])(i)}(m),b=function(t){Object(a["a"])(i,t);var e=Object(o["a"])(i);function i(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0,m=arguments.length>6?arguments[6]:void 0,v=arguments.length>7?arguments[7]:void 0,b=arguments.length>8?arguments[8]:void 0;Object(s["a"])(this,i),t=e.call(this,a,o,r),Object(c["a"])(Object(n["a"])(t),"isInTransition",void 0),Object(c["a"])(Object(n["a"])(t),"particleControllers",void 0),Object(c["a"])(Object(n["a"])(t),"animRuleFunc",void 0),t.isInTransition=!1,t.particleControllers=[],t.animRuleFunc=b;for(var p=0;p<a;p++){var f=l(p),g=d(p),w=h(p),j=m(p),O=v(p),M=new u(f,g,w,j,O,p);t.particleControllers.push(M),M.resetGeom(t.mesh)}return t}return Object(r["a"])(i,[{key:"transit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;if(!this.isInTransition){var e=this;d["a"].tweenNumber(0,1,(function(t){e.particleControllers.forEach((function(i){i.updateGeomByRule(e.mesh,t,e.animRuleFunc)})),e.mesh.instanceMatrix.needsUpdate=!0,e.mesh.instanceColor&&(e.mesh.instanceColor.needsUpdate=!0)}),(function(){e.isInTransition=!1,e.mesh.instanceMatrix.needsUpdate=!0,e.mesh.instanceColor&&(e.mesh.instanceColor.needsUpdate=!0)}),t)}}}]),i}(m)}}]);
//# sourceMappingURL=chunk-6d343452.2cf1adf9.js.map
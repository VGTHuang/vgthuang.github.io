(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00335bcc"],{"04d1":function(t,e,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"08fd":function(t,e,n){var r={"./GlassFrontShader/F.glsl":"f430"};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id="08fd"},1148:function(t,e,n){"use strict";var r=n("da84"),i=n("5926"),a=n("577e"),o=n("1d80"),s=r.RangeError;t.exports=function(t){var e=a(o(this)),n="",r=i(t);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},"22b5":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return d}));var r,i={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Bounce.In(2*t):.5*i.Bounce.Out(2*t-1)+.5}}};r="undefined"===typeof self&&"undefined"!==typeof t&&t.hrtime?function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var a=r,o=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=a()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!e;i&&!1===i.update(t,o)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),s={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=s.Utils.Linear;return e<0?a(t[0],t[1],r):e>1?a(t[n],t[n-1],n-r):a(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,a=s.Utils.Bernstein,o=0;o<=r;o++)n+=i(1-e,r-o)*i(e,o)*t[o]*a(r,o);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=s.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),a(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):a(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=s.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var a=.5*(n-t),o=.5*(r-e),s=i*i,c=i*s;return(2*e-2*n+a+o)*c+(-3*e+3*n-2*a-o)*s+a*i+e}}},c=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),l=new o,u=function(){function t(t,e){void 0===e&&(e=l),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=c.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"===typeof t?a()+parseFloat(t):t:a(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,n,r){for(var i in n){var a=t[i],o=Array.isArray(a),s=o?"array":typeof a,c=!o&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(c){var l=n[i];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,a)),n[i]=[a].concat(l)}if("object"!==s&&!o||!a||c)"undefined"===typeof e[i]&&(e[i]=a),o||(e[i]*=1),r[i]=c?n[i].slice().reverse():e[i]||0;else{for(var u in e[i]=o?[]:{},a)e[i][u]=a[u];r[i]=o?[]:{},this._setupProperties(a,e[i],n[i],r[i])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=a()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=a()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=a()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,r){for(var i in n)if(void 0!==e[i]){var a=e[i]||0,o=n[i],s=Array.isArray(t[i]),c=Array.isArray(o),l=!s&&c;l?t[i]=this._interpolationFunction(o,r):"object"===typeof o&&o?this._updateProperties(t[i],a,o,r):(o=this._handleRelativeValue(a,o),"number"===typeof o&&(t[i]=a+(o-a)*r))}},t.prototype._handleRelativeValue=function(t,e){return"string"!==typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"===typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),h=(c.nextId,l),d=(h.getAll.bind(h),h.removeAll.bind(h),h.add.bind(h),h.remove.bind(h),h.update.bind(h))}).call(this,n("4362"))},"32a7":function(t,e,n){"use strict";n("4acd")},"38cf":function(t,e,n){var r=n("23e7"),i=n("1148");r({target:"String",proto:!0},{repeat:i})},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"44ec":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[n("div",{staticClass:"loading-container",class:{"loading-container--hidden":t.loadingStat.isLoaded,"loading-container--none":t.loadingStat.noLoadingStat}},[n("div",{staticClass:"load-stat"},[n("div",{staticClass:"load-pgbar",style:{width:100*t.loadingStat.loaded/t.loadingStat.total+"%"}}),n("div",{staticClass:"load-text"},[t._v(t._s(Math.round(100*t.loadingStat.loaded/t.loadingStat.total))+" %")])])])]),n("div",{ref:"dom3d-container",attrs:{id:"dom3d-container"}},[n("div",{ref:"dom3d-test",attrs:{id:"dom3d-test"}},[n("p",[t._v("HTML element: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua")])]),n("div",{ref:"dom3d-glass",attrs:{id:"dom3d-glass"},on:{click:t.onGlassClick}},[t._m(0)])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dom3d-glass-ball"},[n("div",{staticClass:"dom3d-glass-ball__text"},[t._v("html element following object")])])}],a=n("5a89"),o=n("2b0e"),s=n("d4ec"),c=n("bee2"),l=n("ade3"),u=(n("d3b7"),n("159b"),n("38cf"),n("4c53"),n("32d9")),h=n("93e9"),d=n("257e"),f=n("262e"),p=n("2caf");class v extends a["E"]{constructor(t,e={}){super(t),this.type="Reflector";const n=this,r=void 0!==e.color?new a["g"](e.color):new a["g"](8355711),i=e.textureWidth||512,o=e.textureHeight||512,s=e.clipBias||0,c=e.shader||v.ReflectorShader,l=new a["L"],u=new a["fb"],h=new a["fb"],d=new a["fb"],f=new a["D"],p=new a["fb"](0,0,-1),g=new a["gb"],m=new a["fb"],b=new a["fb"],w=new a["gb"],y=new a["D"],x=new a["K"],M=new a["ib"](i,o),_=new a["V"]({uniforms:a["cb"].clone(c.uniforms),fragmentShader:c.fragmentShader,vertexShader:c.vertexShader});_.uniforms["tDiffuse"].value=M.texture,_.uniforms["color"].value=r,_.uniforms["textureMatrix"].value=y,this.material=_,this.onBeforeRender=function(t,e,r){if(h.setFromMatrixPosition(n.matrixWorld),d.setFromMatrixPosition(r.matrixWorld),f.extractRotation(n.matrixWorld),u.set(0,0,1),u.applyMatrix4(f),m.subVectors(h,d),m.dot(u)>0)return;m.reflect(u).negate(),m.add(h),f.extractRotation(r.matrixWorld),p.set(0,0,-1),p.applyMatrix4(f),p.add(d),b.subVectors(h,p),b.reflect(u).negate(),b.add(h),x.position.copy(m),x.up.set(0,1,0),x.up.applyMatrix4(f),x.up.reflect(u),x.lookAt(b),x.far=r.far,x.updateMatrixWorld(),x.projectionMatrix.copy(r.projectionMatrix),y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(x.projectionMatrix),y.multiply(x.matrixWorldInverse),y.multiply(n.matrixWorld),l.setFromNormalAndCoplanarPoint(u,h),l.applyMatrix4(x.matrixWorldInverse),g.set(l.normal.x,l.normal.y,l.normal.z,l.constant);const i=x.projectionMatrix;w.x=(Math.sign(g.x)+i.elements[8])/i.elements[0],w.y=(Math.sign(g.y)+i.elements[9])/i.elements[5],w.z=-1,w.w=(1+i.elements[10])/i.elements[14],g.multiplyScalar(2/g.dot(w)),i.elements[2]=g.x,i.elements[6]=g.y,i.elements[10]=g.z+1-s,i.elements[14]=g.w,M.texture.encoding=t.outputEncoding,n.visible=!1;const a=t.getRenderTarget(),o=t.xr.enabled,c=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(M),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(e,x),t.xr.enabled=o,t.shadowMap.autoUpdate=c,t.setRenderTarget(a);const v=r.viewport;void 0!==v&&t.state.viewport(v),n.visible=!0},this.getRenderTarget=function(){return M},this.dispose=function(){M.dispose(),n.material.dispose()}}}v.prototype.isReflector=!0,v.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"};var g=function(t){Object(f["a"])(n,t);var e=Object(p["a"])(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s["a"])(this,n),i=e.call(this,t),Object(l["a"])(Object(d["a"])(i),"material",void 0);var c=Object(d["a"])(i),u=(void 0!==o.color?new a["g"](o.color):new a["g"](16777215),o.textureWidth||512),h=o.textureHeight||512,f=o.clipBias||0,p=o.flowDirection||new a["eb"](1,0),g=o.flowSpeed||.01,b=o.reflectivity||.5,w=o.scale||1,y=m,x=new a["ab"],M=o.normalMap0||x.load("./water/Water_1_M_Normal.jpg"),_=o.normalMap1||x.load("./water/Water_2_M_Normal.jpg"),O=.15,j=.5*O,C=new a["D"],k=new a["f"];i.material=new a["V"];var P=new v(t,{textureWidth:u,textureHeight:h,clipBias:f});function T(t){C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(t.projectionMatrix),C.multiply(t.matrixWorldInverse),C.multiply(c.matrixWorld)}function S(){var t=k.getDelta(),e=c.material.uniforms["config"];e.value.x+=g*t,e.value.y=e.value.x+j,e.value.x>=O?(e.value.x=0,e.value.y=j):e.value.y>=O&&(e.value.y=e.value.y-O)}return P.matrixAutoUpdate=!1,i.material=new a["V"]({uniforms:a["cb"].merge([a["bb"]["fog"],y.uniforms]),vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,transparent:!0,fog:!0}),i.material.uniforms["flowDirection"].value=p,M.wrapS=M.wrapT=a["S"],_.wrapS=_.wrapT=a["S"],i.material.uniforms["tReflectionMap"].value=P.getRenderTarget().texture,i.material.uniforms["tNormalMap0"].value=M,i.material.uniforms["tNormalMap1"].value=_,i.material.uniforms["reflectivity"].value=b,i.material.uniforms["textureMatrix"].value=C,i.material.uniforms["config"].value.x=0,i.material.uniforms["config"].value.y=j,i.material.uniforms["config"].value.z=j,i.material.uniforms["config"].value.w=w,i.onBeforeRender=function(t,e,n,i,a,o){T(n),S(),c.visible=!1,P.matrixWorld.copy(c.matrixWorld),P.onBeforeRender(t,r,n,i,a,o),c.visible=!0},i}return Object(c["a"])(n)}(a["E"]),m={uniforms:{reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new a["gb"]},flowDirection:{type:"v2",value:new a["eb"]}},vertexShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\tuniform vec2 flowDirection;\n\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\tflow = flowDirection;\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n            reflectance = pow(reflectance + 0.3, 4.0);\n            reflectance = floor(reflectance *  2.0) / 2.0;\n            vec4 refractColor = vec4(1.0);\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\n\t\t\tgl_FragColor = mix(refractColor, reflectColor, reflectance);\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}"},b=n("61d9"),w=n("232b");function y(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(r,i)}function x(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){y(a,r,i,o,s,"next",t)}function s(t){y(a,r,i,o,s,"throw",t)}o(void 0)}))}}var M=n("3835"),_=(n("96cf"),n("a434"),n("d81d"),n("4e82"),n("b64b"),n("22b5")),O=function(){function t(){var e=this;Object(s["a"])(this,t),Object(l["a"])(this,"animationObjectCount",void 0),Object(l["a"])(this,"requestId",void 0),Object(l["a"])(this,"loopAnim",(function(){_["c"](),e.requestId>=0&&(e.requestId=window.requestAnimationFrame(e.loopAnim))})),Object(l["a"])(this,"startAnim",(function(){e.requestId<0&&(e.requestId=window.requestAnimationFrame(e.loopAnim))})),Object(l["a"])(this,"stopAnim",(function(){e.requestId>=0&&(window.cancelAnimationFrame(e.requestId),e.requestId=-1)})),this.animationObjectCount=0,this.requestId=-1}return Object(c["a"])(t,[{key:"addTweenAnimObject",value:function(){this.animationObjectCount<=0&&this.startAnim(),this.animationObjectCount++}},{key:"removeTweenAnimObject",value:function(){this.animationObjectCount<=0||(1==this.animationObjectCount&&this.stopAnim(),this.animationObjectCount--)}},{key:"tweenNumber",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_["a"].Quadratic.InOut,s={a:t};this.addTweenAnimObject(),new _["b"](s).to({a:e},a).easing(o).onUpdate((function(){return n(s.a)})).onComplete((function(){i.removeTweenAnimObject(),r(s.a)})).start()}},{key:"tweenVector2",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_["a"].Quadratic.InOut,s={x:t.x,y:t.y},c={x:e.x,y:e.y};this.addTweenAnimObject(),new _["b"](s).to(c,a).easing(o).onUpdate((function(){return n(s.x,s.y)})).onComplete((function(){i.removeTweenAnimObject(),r(s.x,s.y)})).start()}},{key:"tweenVector3",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_["a"].Quadratic.InOut,s={x:t.x,y:t.y,z:t.z},c={x:e.x,y:e.y,z:e.z};this.addTweenAnimObject(),new _["b"](s).to(c,a).easing(o).onUpdate((function(){return n(s.x,s.y,s.z)})).onComplete((function(){i.removeTweenAnimObject(),r(s.x,s.y,s.z)})).start()}},{key:"tweenEuler",value:function(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_["a"].Quadratic.InOut,c={x:t.x,y:t.y,z:t.z},l={x:e.x,y:e.y,z:e.z};this.addTweenAnimObject(),new _["b"](c).to(l,o).easing(s).onUpdate((function(){return n(new a["o"](c.x,c.y,c.z))})).onComplete((function(){i.removeTweenAnimObject(),r(new a["o"](c.x,c.y,c.z))})).start()}},{key:"tweenThreeVector3",value:function(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_["a"].Quadratic.InOut,c={x:t.x,y:t.y,z:t.z},l={x:e.x,y:e.y,z:e.z};this.addTweenAnimObject(),new _["b"](c).to(l,o).easing(s).onUpdate((function(){return n(new a["fb"](c.x,c.y,c.z))})).onComplete((function(){i.removeTweenAnimObject(),r(new a["fb"](c.x,c.y,c.z))})).start()}}]),t}(),j=new O,C=n("4e0a"),k=function(){function t(e,n,r){Object(s["a"])(this,t),Object(l["a"])(this,"index",void 0),Object(l["a"])(this,"mesh",void 0),Object(l["a"])(this,"uniforms",void 0),Object(l["a"])(this,"textureList",void 0),Object(l["a"])(this,"isPushingTexture",void 0),this.index=e,this.mesh=n,this.uniforms=r,this.mesh=n,this.textureList=[],this.isPushingTexture=!1}return Object(c["a"])(t,[{key:"pushNewTexture",value:function(t){0==this.textureList.length?this.textureList.push(void 0,t):(1==this.textureList.length||this.textureList.splice(1,this.textureList.length-2),this.textureList.push(t)),0==this.isPushingTexture&&this.recPushTexture()}},{key:"recPushTexture",value:function(){var t=this;this.textureList.length<=1?this.isPushingTexture=!1:(this.isPushingTexture=!0,2==this.textureList.length&&(this.uniforms.vTextureMix.value=0,this.uniforms.vTextures.value[0]=this.textureList[0],this.uniforms.vTextures.value[1]=this.textureList[1],this.isPushingTexture=!1,j.tweenNumber(0,1,(function(e){t.uniforms.vTextureMix.value=e}),(function(){t.uniforms.vTextures.value[0]=t.textureList[1],t.uniforms.vTextures.value[1]=t.textureList[1],t.uniforms.vTextureMix.value=1,t.textureList.splice(0,1),t.recPushTexture()}),500)))}}]),t}(),P=function(t){Object(f["a"])(n,t);var e=Object(p["a"])(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{numOfVisiblePics:3};Object(s["a"])(this,n),t=e.call(this),Object(l["a"])(Object(d["a"])(t),"numOfVisiblePics",void 0),Object(l["a"])(Object(d["a"])(t),"rotateNode",void 0),Object(l["a"])(Object(d["a"])(t),"isRotating",void 0),Object(l["a"])(Object(d["a"])(t),"planes",void 0),Object(l["a"])(Object(d["a"])(t),"planeWidth",void 0),Object(l["a"])(Object(d["a"])(t),"planeHeight",void 0),Object(l["a"])(Object(d["a"])(t),"planeGap",void 0),Object(l["a"])(Object(d["a"])(t),"preloadImgs",void 0),Object(l["a"])(Object(d["a"])(t),"maxPreloadImgCount",void 0),Object(l["a"])(Object(d["a"])(t),"carouselArrayRadius",void 0),Object(l["a"])(Object(d["a"])(t),"carouselArrayAngle",void 0),Object(l["a"])(Object(d["a"])(t),"currentCenter",void 0),t.isRotating=!1,t.rotateNode=new a["u"],t.add(t.rotateNode),t.currentCenter=0,t.numOfVisiblePics=r.numOfVisiblePics,t.planes=[],t.planeWidth=r.planeWidth||50,t.planeHeight=r.planeHeight||50,t.planeGap=r.planeGap||10,t.preloadImgs={},t.maxPreloadImgCount=2*t.numOfVisiblePics,t.carouselArrayRadius=r.carouselArrayRadius||100,t.carouselArrayAngle=2*Math.atan((t.planeWidth+t.planeGap)/(2*t.carouselArrayRadius));for(var i=Object(C["a"])("CarouselBasicShader"),o=Object(M["a"])(i,2),c=o[0],u=o[1],h=0;h<t.numOfVisiblePics;h++){var f={vColor:{type:"c",value:new a["g"](16711680)},vTextures:{type:"tv",value:[void 0,void 0]},vTextureMix:{type:"f",value:1}},p=new a["E"](new a["M"](t.planeWidth,t.planeHeight,1,1),new a["V"]({uniforms:f,vertexShader:c,fragmentShader:u})),v=h-(t.numOfVisiblePics-1)/2;p.rotation.y=-v*t.carouselArrayAngle,p.position.x=t.carouselArrayRadius*Math.sin(v*t.carouselArrayAngle),p.position.z=-t.carouselArrayRadius*Math.cos(v*t.carouselArrayAngle),t.planes.push(new k(h,p,f)),t.rotateNode.add(p)}return t.planes.forEach((function(e){t.__imgSrcToTex("https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")).then((function(t){e.pushNewTexture(t)}))})),t}return Object(c["a"])(n,[{key:"clickToChangeTex",value:function(t,e){var n=this,r=this.planes.map((function(t){return t.mesh})),i=t.intersectObjects(r);if(1==i.length){var o=i[0].object;if(o instanceof a["E"]){var s=r.indexOf(o),c=e(s);this.__imgSrcToTex(c).then((function(t){n.planes[s].pushNewTexture(t)}))}}}},{key:"clickToRotate",value:function(t,e){var n=this.planes.map((function(t){return t.mesh})),r=t.intersectObjects(n);if(1==r.length){var i=r[0].object;if(i instanceof a["E"]){var o=n.indexOf(i),s=this.planes[o].index-this.currentCenter-Math.floor(this.planes.length/2);s<0?this.moveLeft(-s,e):s>0&&this.moveRight(s,e)}}}},{key:"moveLeft",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;if(!this.isRotating){this.isRotating=!0;for(var r=function(e){t.planes.sort((function(t,e){return e.index-t.index}));var r=t.planes[0];r.index=t.planes[t.planes.length-1].index-1;var i=r.index-(t.numOfVisiblePics-1)/2;r.mesh.rotation.y=-i*t.carouselArrayAngle,r.mesh.position.x=t.carouselArrayRadius*Math.sin(i*t.carouselArrayAngle),r.mesh.position.z=-t.carouselArrayRadius*Math.cos(i*t.carouselArrayAngle);var a=n(r.index);t.__imgSrcToTex(a).then((function(t){r.pushNewTexture(t)}))},i=0;i<e;i++)r(i);j.tweenNumber(0,e,(function(e){var n=t.carouselArrayAngle*(t.currentCenter-e);t.rotateNode.rotation.y=n}),(function(){t.currentCenter-=e,t.isRotating=!1}),500)}}},{key:"moveRight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;if(!this.isRotating){this.isRotating=!0;for(var r=function(e){t.planes.sort((function(t,e){return t.index-e.index}));var r=t.planes[0];r.index=t.planes[t.planes.length-1].index+1;var i=r.index-(t.numOfVisiblePics-1)/2;r.mesh.rotation.y=-i*t.carouselArrayAngle,r.mesh.position.x=t.carouselArrayRadius*Math.sin(i*t.carouselArrayAngle),r.mesh.position.z=-t.carouselArrayRadius*Math.cos(i*t.carouselArrayAngle);var a=n(r.index);t.__imgSrcToTex(a).then((function(t){r.pushNewTexture(t)}))},i=0;i<e;i++)r(i);j.tweenNumber(0,e,(function(e){var n=t.carouselArrayAngle*(t.currentCenter+e);t.rotateNode.rotation.y=n}),(function(){t.currentCenter+=e,t.isRotating=!1}),500)}}},{key:"__imgSrcToTex",value:function(){var t=x(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this,t.abrupt("return",new Promise((function(t,r){n.preloadImgs[e]&&t(n.preloadImgs[e]);var i=new a["w"];i.setCrossOrigin("anonymous"),i.load(e,(function(r){var i=new a["Z"](r);if(i.needsUpdate=!0,n.preloadImgs[e]=i,Object.keys(n.preloadImgs).length>=n.maxPreloadImgCount)for(var o in n.preloadImgs){for(var s=n.preloadImgs[o],c=!0,l=0;l<n.planes.length;l++)if(n.planes[l].uniforms.vTextures.value.indexOf(s)>-1){c=!1;break}if(c){s.dispose(),delete n.preloadImgs[o];break}}t(i)}))})));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(a["u"]);class T extends a["y"]{constructor(t){super(t),this.debug=!1,this.group=null,this.materials=[],this.meshes=[]}load(t,e,n,r){const i=this,o=""===this.path?a["z"].extractUrlBase(t):this.path,s=new a["q"](this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{e(i.parse(n,o))}catch(a){r?r(a):console.error(a),i.manager.itemError(t)}}),n,r)}parse(t,e){this.group=new a["u"],this.materials=[],this.meshes=[],this.readFile(t,e);for(let n=0;n<this.meshes.length;n++)this.group.add(this.meshes[n]);return this.group}readFile(t,e){const n=new DataView(t),r=new S(n,0,this.debugMessage);if(r.id===A||r.id===I||r.id===R){let t=r.readChunk();while(t){if(t.id===E){const e=t.readDWord();this.debugMessage("3DS file version: "+e)}else t.id===N?this.readMeshData(t,e):this.debugMessage("Unknown main chunk: "+t.hexId);t=r.readChunk()}}this.debugMessage("Parsed "+this.meshes.length+" meshes")}readMeshData(t,e){let n=t.readChunk();while(n){if(n.id===G){const t=+n.readDWord();this.debugMessage("Mesh Version: "+t)}else if(n.id===H){const t=n.readFloat();this.debugMessage("Master scale: "+t),this.group.scale.set(t,t,t)}else n.id===ut?(this.debugMessage("Named Object"),this.readNamedObject(n)):n.id===B?(this.debugMessage("Material"),this.readMaterialEntry(n,e)):this.debugMessage("Unknown MDATA chunk: "+n.hexId);n=t.readChunk()}}readNamedObject(t){const e=t.readString();let n=t.readChunk();while(n){if(n.id===ht){const t=this.readMesh(n);t.name=e,this.meshes.push(t)}else this.debugMessage("Unknown named object chunk: "+n.hexId);n=t.readChunk()}}readMaterialEntry(t,e){let n=t.readChunk();const r=new a["G"];while(n){if(n.id===V)r.name=n.readString(),this.debugMessage("   Name: "+r.name);else if(n.id===J)this.debugMessage("   Wireframe"),r.wireframe=!0;else if(n.id===tt){const t=n.readByte();r.wireframeLinewidth=t,this.debugMessage("   Wireframe Thickness: "+t)}else if(n.id===K)r.side=a["m"],this.debugMessage("   DoubleSided");else if(n.id===Z)this.debugMessage("   Additive Blending"),r.blending=a["a"];else if(n.id===Y)this.debugMessage("   Diffuse Color"),r.color=this.readColor(n);else if(n.id===X)this.debugMessage("   Specular Color"),r.specular=this.readColor(n);else if(n.id===q)this.debugMessage("   Ambient color"),r.color=this.readColor(n);else if(n.id===$){const t=this.readPercentage(n);r.shininess=100*t,this.debugMessage("   Shininess : "+t)}else if(n.id===Q){const t=this.readPercentage(n);r.opacity=1-t,this.debugMessage("  Transparency : "+t),r.transparent=r.opacity<1}else n.id===et?(this.debugMessage("   ColorMap"),r.map=this.readMap(n,e)):n.id===rt?(this.debugMessage("   BumpMap"),r.bumpMap=this.readMap(n,e)):n.id===nt?(this.debugMessage("   OpacityMap"),r.alphaMap=this.readMap(n,e)):n.id===it?(this.debugMessage("   SpecularMap"),r.specularMap=this.readMap(n,e)):this.debugMessage("   Unknown material chunk: "+n.hexId);n=t.readChunk()}this.materials[r.name]=r}readMesh(t){let e=t.readChunk();const n=new a["d"],r=new a["G"],i=new a["E"](n,r);i.name="mesh";while(e){if(e.id===dt){const t=e.readWord();this.debugMessage("   Vertex: "+t);const r=[];for(let n=0;n<t;n++)r.push(e.readFloat()),r.push(e.readFloat()),r.push(e.readFloat());n.setAttribute("position",new a["r"](r,3))}else if(e.id===ft)this.readFaceArray(e,i);else if(e.id===vt){const t=e.readWord();this.debugMessage("   UV: "+t);const r=[];for(let n=0;n<t;n++)r.push(e.readFloat()),r.push(e.readFloat());n.setAttribute("uv",new a["r"](r,2))}else if(e.id===gt){this.debugMessage("   Tranformation Matrix (TODO)");const t=[];for(let n=0;n<12;n++)t[n]=e.readFloat();const r=new a["D"];r.elements[0]=t[0],r.elements[1]=t[6],r.elements[2]=t[3],r.elements[3]=t[9],r.elements[4]=t[2],r.elements[5]=t[8],r.elements[6]=t[5],r.elements[7]=t[11],r.elements[8]=t[1],r.elements[9]=t[7],r.elements[10]=t[4],r.elements[11]=t[10],r.elements[12]=0,r.elements[13]=0,r.elements[14]=0,r.elements[15]=1,r.transpose();const o=new a["D"];o.copy(r).invert(),n.applyMatrix4(o),r.decompose(i.position,i.quaternion,i.scale)}else this.debugMessage("   Unknown mesh chunk: "+e.hexId);e=t.readChunk()}return n.computeVertexNormals(),i}readFaceArray(t,e){const n=t.readWord();this.debugMessage("   Faces: "+n);const r=[];for(let o=0;o<n;++o)r.push(t.readWord(),t.readWord(),t.readWord()),t.readWord();e.geometry.setIndex(r);let i=0,a=0;while(!t.endOfChunk){const n=t.readChunk();if(n.id===pt){this.debugMessage("      Material Group");const t=this.readMaterialGroup(n),r=3*t.index.length;e.geometry.addGroup(a,r,i),a+=r,i++;const o=this.materials[t.name];!1===Array.isArray(e.material)&&(e.material=[]),void 0!==o&&e.material.push(o)}else this.debugMessage("      Unknown face array chunk: "+n.hexId)}1===e.material.length&&(e.material=e.material[0])}readMap(t,e){let n=t.readChunk(),r={};const i=new a["ab"](this.manager);i.setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);while(n){if(n.id===at){const t=n.readString();r=i.load(t),this.debugMessage("      File: "+e+t)}else n.id===ct?(r.offset.x=n.readFloat(),this.debugMessage("      OffsetX: "+r.offset.x)):n.id===lt?(r.offset.y=n.readFloat(),this.debugMessage("      OffsetY: "+r.offset.y)):n.id===ot?(r.repeat.x=n.readFloat(),this.debugMessage("      RepeatX: "+r.repeat.x)):n.id===st?(r.repeat.y=n.readFloat(),this.debugMessage("      RepeatY: "+r.repeat.y)):this.debugMessage("      Unknown map chunk: "+n.hexId);n=t.readChunk()}return r}readMaterialGroup(t){const e=t.readString(),n=t.readWord();this.debugMessage("         Name: "+e),this.debugMessage("         Faces: "+n);const r=[];for(let i=0;i<n;++i)r.push(t.readWord());return{name:e,index:r}}readColor(t){const e=t.readChunk(),n=new a["g"];if(e.id===L||e.id===z){const t=e.readByte(),r=e.readByte(),i=e.readByte();n.setRGB(t/255,r/255,i/255),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else if(e.id===F||e.id===D){const t=e.readFloat(),r=e.readFloat(),i=e.readFloat();n.setRGB(t,r,i),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else this.debugMessage("      Unknown color chunk: "+e.hexId);return n}readPercentage(t){const e=t.readChunk();switch(e.id){case W:return e.readShort()/100;case U:return e.readFloat();default:return this.debugMessage("      Unknown percentage chunk: "+e.hexId),0}}debugMessage(t){this.debug&&console.log(t)}}class S{constructor(t,e,n){this.data=t,this.offset=e,this.position=e,this.debugMessage=n,this.debugMessage instanceof Function&&(this.debugMessage=function(){}),this.id=this.readWord(),this.size=this.readDWord(),this.end=this.offset+this.size,this.end>t.byteLength&&this.debugMessage("Bad chunk size for chunk at "+e)}readChunk(){if(this.endOfChunk)return null;try{const t=new S(this.data,this.position,this.debugMessage);return this.position+=t.size,t}catch(t){return this.debugMessage("Unable to read chunk at "+this.position),null}}get hexId(){return this.id.toString(16)}get endOfChunk(){return this.position>=this.end}readByte(){const t=this.data.getUint8(this.position,!0);return this.position+=1,t}readFloat(){try{const t=this.data.getFloat32(this.position,!0);return this.position+=4,t}catch(t){return this.debugMessage(t+" "+this.position+" "+this.data.byteLength),0}}readInt(){const t=this.data.getInt32(this.position,!0);return this.position+=4,t}readShort(){const t=this.data.getInt16(this.position,!0);return this.position+=2,t}readDWord(){const t=this.data.getUint32(this.position,!0);return this.position+=4,t}readWord(){const t=this.data.getUint16(this.position,!0);return this.position+=2,t}readString(){let t="",e=this.readByte();while(e)t+=String.fromCharCode(e),e=this.readByte();return t}}const R=19789,A=15786,I=49725,E=2,F=16,L=17,z=18,D=19,W=48,U=49,N=15677,G=15678,H=256,B=45055,V=40960,q=40976,Y=40992,X=41008,$=41024,Q=41040,K=41089,Z=41091,J=41093,tt=41095,et=41472,nt=41488,rt=41520,it=41476,at=41728,ot=41812,st=41814,ct=41816,lt=41818,ut=16384,ht=16640,dt=16656,ft=16672,pt=16688,vt=16704,gt=16736;var mt=n("fb12"),bt=n("26e3"),wt=n("7d52"),yt=n("7612"),xt=function(){function t(e,n,r,i){var o=this;Object(s["a"])(this,t),Object(l["a"])(this,"container",void 0),Object(l["a"])(this,"renderer",void 0),Object(l["a"])(this,"cardInsideScene",void 0),Object(l["a"])(this,"scene",void 0),Object(l["a"])(this,"reflectionScene",void 0),Object(l["a"])(this,"composer",void 0),Object(l["a"])(this,"stats",void 0),Object(l["a"])(this,"refractionManager",void 0),Object(l["a"])(this,"glassMesh1Controller",void 0),Object(l["a"])(this,"mousePosX",void 0),Object(l["a"])(this,"mousePosY",void 0),Object(l["a"])(this,"pointer",void 0),Object(l["a"])(this,"camera",void 0),Object(l["a"])(this,"cameraZPosition",void 0),Object(l["a"])(this,"cameraPositionController",void 0),Object(l["a"])(this,"cameraTargetPosition",void 0),Object(l["a"])(this,"cameraWithMouseMoveFactor",void 0),Object(l["a"])(this,"cameraWithMouseRotateFactor",void 0),Object(l["a"])(this,"cursorLightGroup",void 0),Object(l["a"])(this,"cursorLight",void 0),Object(l["a"])(this,"cursorLightController",void 0),Object(l["a"])(this,"raycaster",void 0),Object(l["a"])(this,"intersectTardisCardObjs",void 0),Object(l["a"])(this,"intersectGlassObjs",void 0),Object(l["a"])(this,"glassSelected",void 0),Object(l["a"])(this,"glassIsRotating",void 0),Object(l["a"])(this,"cssScene",void 0),Object(l["a"])(this,"cssRenderer",void 0),Object(l["a"])(this,"cssAttachObject",void 0),Object(l["a"])(this,"carousel1",void 0),Object(l["a"])(this,"carousel2",void 0),Object(l["a"])(this,"loadingManager",void 0),Object(l["a"])(this,"animate",(function(){requestAnimationFrame(o.animate),o.updatecornerObject(),o.updateCamera(),o.updateCursorLight(),o.render(),o.stats.update()})),this.cameraZPosition=500,this.container=e,this.camera=new a["K"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new a["jb"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.stats=new b["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.scene=new a["U"],this.cssScene=new a["U"],this.cardInsideScene=new a["U"],this.reflectionScene=new a["U"],this.loadingManager=new a["A"]((function(){n&&n()}),(function(t,e,n){r&&r(t,e,n)}),(function(t){i&&i(t)}));var c="./cube1/",d=[c+"px.jpg",c+"nx.jpg",c+"py.jpg",c+"ny.jpg",c+"pz.jpg",c+"nz.jpg"],f=new a["i"](this.loadingManager).load(d);f.mapping=a["h"],this.scene.environment=f;var p=new a["l"];p.intensity=.8,p.position.x=80,p.position.y=80,p.position.z=100,this.scene.add(p),this.refractionManager=new wt["a"](this.scene,this.container,this.renderer,this.camera);var v=new a["E"](new yt["a"](40,40,40,5,5),new a["G"]({})),m=new a["E"](new a["c"](40,40,40),new a["F"]({}));m.visible=!1,v.add(m),v.rotation.set(1,1,1),this.refractionManager.addRefractionMesh(v,!0,65280,4219135,1.3,.8),this.glassMesh1Controller=new bt["a"](v,.2,.1);var y=new h["a"](this.scene,this.camera);y.clear=!0;var x=new h["a"](this.cardInsideScene,this.camera);x.clearDepth=!0,x.clear=!1,this.composer=new u["a"](this.renderer,new a["hb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)),this.composer.addPass(y),this.composer.addPass(x),this.composer.renderTarget1.stencilBuffer=!0,this.composer.renderTarget2.stencilBuffer=!0,this.refractionManager.scene.background=this.composer.renderTarget2.texture;var M=new w["a"](100,400,110,this.scene,this.cardInsideScene,new a["fb"](0,200,0),new a["o"],w["b"].RECT,null);M.addSkybox(f);var _=new a["u"],O=new a["ab"](this.loadingManager).load("./title.png"),j=new a["E"](new a["M"](390,90,1,1),new a["F"]({color:16777215,alphaMap:O,alphaToCoverage:!0,transparent:!0}));_.add(j),_.position.copy(M.cardMesh.position),M.addVisibleObjectGroup(_),this.cssAttachObject=M.cardMesh;var C=new w["a"](200,200,111,this.scene,this.cardInsideScene,new a["fb"](0,0,0),new a["o"],w["b"].RECT,this.reflectionScene,12636368),k=new a["ab"](this.loadingManager).load("./marble/diffuse.jpg"),S=new a["ab"](this.loadingManager).load("./marble/normal.jpg"),R=new a["ab"](this.loadingManager).load("./marble/specular.jpg"),A=[k,S,R];A.forEach((function(t){t.wrapS=t.wrapT=a["S"],t.repeat.set(1,2)}));var I=new a["u"],E=new a["ab"](this.loadingManager).load("./jutabag3ds/texture/normal.jpg"),F=new T(this.loadingManager);F.setResourcePath("./jutabag3ds/texture/"),F.load("./jutabag3ds/portalgun.3ds",(function(t){if(t instanceof a["u"]){t.traverse((function(t){t instanceof a["E"]&&(console.log(t.material),t.material.color=new a["g"](16777215),t.material.normalMap=E)})),t.scale.multiplyScalar(80),t.position.x-=20,t.position.y+=10,t.position.z-=80,t.rotation.x=-2,t.rotation.z=.7,I.add(t);var e=new a["E"](new a["M"](500,500,1,1),new a["H"]({color:13434879,map:k,normalMap:S,normalScale:new a["eb"](.1,.1),specularColorMap:R,specularIntensity:4,reflectivity:1,metalness:.2,roughness:.1,clearcoat:.5}));e.position.set(0,0,-150),I.add(e),I.position.copy(C.cardMesh.position),C.addVisibleObjectGroup(I)}}));var L=new w["a"](100,100,112,this.scene,this.cardInsideScene,new a["fb"](200,0,0),new a["o"],w["b"].CIRCLE,this.reflectionScene,13680848);this.carousel1=new P({numOfVisiblePics:5,planeWidth:80,planeHeight:80,carouselArrayRadius:120});var z=new a["ab"](this.loadingManager).load("./painting/crop1_diffuse.png"),D=new a["ab"](this.loadingManager).load("./painting/crop1_normal.png"),W=new a["ab"](this.loadingManager).load("./painting/crop1_specular.png");A=[z,D,W];var U=new a["E"](new a["M"](500,500,1,1),new a["H"]({map:z,normalMap:D,specularColorMap:W,normalScale:new a["eb"](.4,.4),specularIntensity:.2,reflectivity:.1,metalness:.1,roughness:.4}));U.position.set(0,0,-150);var N=new a["u"];N.add(this.carousel1),N.add(U),N.position.copy(L.cardMesh.position),L.addVisibleObjectGroup(N);var G=new w["a"](100,100,113,this.scene,this.cardInsideScene,new a["fb"](-200,0,0),new a["o"],w["b"].CIRCLE,this.reflectionScene,10535056);this.carousel2=new P({numOfVisiblePics:4,planeWidth:70,planeHeight:70,carouselArrayRadius:120});var H=new a["ab"](this.loadingManager).load("./painting/crop2_diffuse.png"),B=new a["ab"](this.loadingManager).load("./painting/crop2_normal.png"),V=new a["ab"](this.loadingManager).load("./painting/crop2_specular.png");A=[H,B],U=new a["E"](new a["M"](500,500,1,1),new a["H"]({color:16777088,map:H,normalMap:B,specularColorMap:V,normalScale:new a["eb"](.5,.5),specularIntensity:.2,reflectivity:.8,metalness:0,roughness:.2})),U.position.set(0,0,-150);var q=new a["u"];q.add(this.carousel2),q.add(U),q.position.copy(G.cardMesh.position),G.addVisibleObjectGroup(q);var Y=new a["N"](1e3,400),X=new g(Y,this.reflectionScene,{flowDirection:new a["eb"](1,1),textureWidth:512,textureHeight:512});X.position.z+=200,X.position.y-=110,X.rotation.x=-.5*Math.PI,this.scene.add(X),this.cameraTargetPosition=new a["fb"](0,0,this.cameraZPosition),this.camera.position.copy(this.cameraTargetPosition),this.camera.lookAt(0,0,0),this.cameraWithMouseMoveFactor=.04,this.cameraWithMouseRotateFactor=.015,this.cameraPositionController=new bt["b"](this.camera.position,.5,.05),window.addEventListener("mousemove",(function(t){$.onMouseMove(t)})),this.cursorLightGroup=new a["u"],this.cursorLight=new a["O"],this.cursorLight.intensity=1,this.cursorLight.decay=1,this.cursorLight.distance=200,this.cursorLight.color=new a["g"](11193599),this.cursorLightGroup.add(this.cursorLight),this.scene.add(this.cursorLightGroup),this.cursorLightController=new bt["a"](this.cursorLightGroup,.3,.1),this.raycaster=new a["R"],this.intersectTardisCardObjs=[],this.intersectTardisCardObjs.push(M.cardMesh,C.cardMesh,L.cardMesh,G.cardMesh),this.intersectGlassObjs=[],this.glassSelected=void 0,this.glassIsRotating=!1,this.intersectGlassObjs.push(m),this.mousePosX=0,this.mousePosY=0,this.pointer=new a["eb"];var $=this;window.addEventListener("resize",(function(){$.onWindowResize()})),window.addEventListener("click",(function(t){$.onClick(t)})),this.animate()}return Object(c["a"])(t,[{key:"render",value:function(){this.composer.render(),this.renderer.clearDepth(),this.refractionManager.render(),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.refractionManager.onWindowResize(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.cssRenderer&&this.cssRenderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseMove",value:function(t){var e=this;this.mousePosX=t.clientX,this.mousePosY=t.clientY,this.pointer.x=t.clientX/window.innerWidth*2-1,this.pointer.y=-t.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var n=this.raycaster.intersectObjects(this.intersectGlassObjs,!1);if(1!=n.length||this.glassIsRotating||this.glassSelected===n[0].object.parent){if(0==n.length&&!this.glassIsRotating&&void 0!==this.glassSelected){console.log("out"),this.glassIsRotating=!0;var r=this.glassSelected,i=this.glassSelected["refractionObject"];j.tweenEuler(this.glassSelected.rotation,new a["o"](1,1,1),(function(t){r.rotation.copy(t)}),(function(){e.glassIsRotating=!1}),500),j.tweenNumber(0,1,(function(t){i.refractionMaterialUniforms["absorbColor"].value.b=t}),(function(){}),500),this.glassSelected=void 0}}else{console.log("in"),this.glassIsRotating=!0;var o=n[0].object.parent,s=o?o["refractionObject"]:null;o instanceof a["E"]&&s instanceof wt["b"]&&(this.glassSelected=o,j.tweenEuler(this.glassSelected.rotation,new a["o"](1,6,1),(function(t){o.rotation.copy(t)}),(function(){e.glassIsRotating=!1}),500),j.tweenNumber(1,0,(function(t){s.refractionMaterialUniforms["absorbColor"].value.b=t}),(function(){}),500))}}},{key:"onClick",value:function(t){var e=this;if(!this.glassSelected){var n=this.raycaster.intersectObjects(this.intersectTardisCardObjs,!1);if(1==n.length){var r=n[0];j.tweenThreeVector3(this.cameraTargetPosition,new a["fb"](r.object.position.x,r.object.position.y,this.cameraTargetPosition.z),(function(t){e.cameraTargetPosition.copy(t)}),(function(){}),750),this.carousel1.clickToRotate(this.raycaster,(function(t){return console.log("new carousel img index",t),"https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")})),this.carousel2.clickToChangeTex(this.raycaster,(function(t){return console.log("new carousel img index",t),"https://picsum.photos/id/".concat(Math.ceil(50*Math.random()),"/200/200")}))}}}},{key:"getRaycastPos",value:function(t,e){var n=2*t/window.innerWidth-1,r=1-2*e/window.innerHeight,i=new a["fb"](n,r,.995);return i.unproject(this.camera),i}},{key:"updatecornerObject",value:function(){var t=this.getRaycastPos(window.innerWidth-200,window.innerHeight/2);this.glassMesh1Controller.update(t)}},{key:"updateCamera",value:function(){var t=window.innerWidth/2-this.mousePosX,e=window.innerHeight/2-this.mousePosY,n=new a["fb"](-t*this.cameraWithMouseMoveFactor,e*this.cameraWithMouseMoveFactor,0).add(this.cameraTargetPosition);this.cameraPositionController.update(n);var r=this.cameraPositionController.velocity;this.camera.rotation.x=r.y*this.cameraWithMouseRotateFactor,this.camera.rotation.y=-r.x*this.cameraWithMouseRotateFactor}},{key:"updateCursorLight",value:function(){if(!isNaN(this.mousePosX)&&!isNaN(this.mousePosY)){var t=this.getRaycastPos(this.mousePosX,this.mousePosY),e=this.camera.position.z,n=(new a["fb"]).copy(t);n=n.sub(this.camera.position);var r=-200,i=(r-e)/n.z;t.copy(this.camera.position),n.multiplyScalar(i),t.add(n),t.z+=100,this.cursorLightController.update(t)}}},{key:"registerCSSCoordinator",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a["fb"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;void 0==this.cssRenderer&&(this.cssRenderer=new mt["b"](t),this.cssRenderer.setSize(window.innerWidth,window.innerHeight));var i=new mt["a"](e);return i.position.copy(n),i.scale.multiplyScalar(r),this.cssScene.add(i),i}}]),t}(),Mt=o["a"].extend({data:function(){return{fpm:null,loadingStat:{loaded:1,total:2,isLoaded:!1,noLoadingStat:!1}}},mounted:function(){var t=this,e=this;if(this.$refs["canvas-container"]instanceof HTMLElement){if(this.fpm=new xt(this.$refs["canvas-container"],(function(){console.log("loaded"),e.loadingStat.isLoaded=!0,setTimeout((function(){e.loadingStat.noLoadingStat=!0}),501)}),(function(e,n,r){t.loadingStat.loaded=n,t.loadingStat.total=r}),(function(t){console.error("failed to load asset: "+t),e.loadingStat.isLoaded=!0})),this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-glass"]instanceof HTMLElement){var n=this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-glass"],new a["fb"](0,20,10));n.setFollowObject(this.fpm.glassMesh1Controller.object,new a["fb"])}this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-test"]instanceof HTMLElement&&this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-test"],new a["fb"](-200,110,0))}},methods:{onGlassClick:function(){alert("glass clicked!")}}}),_t=Mt,Ot=(n("32a7"),n("2877")),jt=Object(Ot["a"])(_t,r,i,!1,null,"530f970e",null);e["default"]=jt.exports},"4acd":function(t,e,n){},"4e82":function(t,e,n){"use strict";var r=n("23e7"),i=n("e330"),a=n("59ed"),o=n("7b0b"),s=n("07fa"),c=n("577e"),l=n("d039"),u=n("addb"),h=n("a640"),d=n("04d1"),f=n("d998"),p=n("2d00"),v=n("512c"),g=[],m=i(g.sort),b=i(g.push),w=l((function(){g.sort(void 0)})),y=l((function(){g.sort(null)})),x=h("sort"),M=!l((function(){if(p)return p<70;if(!(d&&d>3)){if(f)return!0;if(v)return v<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:e+r,v:n})}for(g.sort((function(t,e){return e.v-t.v})),r=0;r<g.length;r++)e=g[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),_=w||!y||!x||!M,O=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}};r({target:"Array",proto:!0,forced:_},{sort:function(t){void 0!==t&&a(t);var e=o(this);if(M)return void 0===t?m(e):m(e,t);var n,r,i=[],c=s(e);for(r=0;r<c;r++)r in e&&b(i,e[r]);u(i,O(t)),n=i.length,r=0;while(r<n)e[r]=i[r++];while(r<c)delete e[r++];return e}})},"512c":function(t,e,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},5303:function(t,e,n){var r={"./GlassFrontShader/V.glsl":"c444"};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id="5303"},7612:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5a89");const i=new r["fb"];function a(t,e,n,r,a,o){const s=2*Math.PI*a/4,c=Math.max(o-2*a,0),l=Math.PI/4;i.copy(e),i[r]=0,i.normalize();const u=.5*s/(s+c),h=1-i.angleTo(t)/l;if(1===Math.sign(i[n]))return h*u;{const t=c/(s+c);return t+u+u*(1-h)}}class o extends r["c"]{constructor(t=1,e=1,n=1,i=2,o=.1){if(i=2*i+1,o=Math.min(t/2,e/2,n/2,o),super(1,1,1,i,i,i),1===i)return;const s=this.toNonIndexed();this.index=null,this.attributes.position=s.attributes.position,this.attributes.normal=s.attributes.normal,this.attributes.uv=s.attributes.uv;const c=new r["fb"],l=new r["fb"],u=new r["fb"](t,e,n).divideScalar(2).subScalar(o),h=this.attributes.position.array,d=this.attributes.normal.array,f=this.attributes.uv.array,p=h.length/6,v=new r["fb"],g=.5/i;for(let r=0,m=0;r<h.length;r+=3,m+=2){c.fromArray(h,r),l.copy(c),l.x-=Math.sign(l.x)*g,l.y-=Math.sign(l.y)*g,l.z-=Math.sign(l.z)*g,l.normalize(),h[r+0]=u.x*Math.sign(c.x)+l.x*o,h[r+1]=u.y*Math.sign(c.y)+l.y*o,h[r+2]=u.z*Math.sign(c.z)+l.z*o,d[r+0]=l.x,d[r+1]=l.y,d[r+2]=l.z;const i=Math.floor(r/p);switch(i){case 0:v.set(1,0,0),f[m+0]=a(v,l,"z","y",o,n),f[m+1]=1-a(v,l,"y","z",o,e);break;case 1:v.set(-1,0,0),f[m+0]=1-a(v,l,"z","y",o,n),f[m+1]=1-a(v,l,"y","z",o,e);break;case 2:v.set(0,1,0),f[m+0]=1-a(v,l,"x","z",o,t),f[m+1]=a(v,l,"z","x",o,n);break;case 3:v.set(0,-1,0),f[m+0]=1-a(v,l,"x","z",o,t),f[m+1]=1-a(v,l,"z","x",o,n);break;case 4:v.set(0,0,1),f[m+0]=1-a(v,l,"x","y",o,t),f[m+1]=1-a(v,l,"y","x",o,e);break;case 5:v.set(0,0,-1),f[m+0]=a(v,l,"x","y",o,t),f[m+1]=1-a(v,l,"y","x",o,e);break}}}}},"7d52":function(t,e,n){"use strict";n.d(e,"b",(function(){return w})),n.d(e,"a",(function(){return y})),n.d(e,"c",(function(){return x}));var r=n("3835"),i=n("bee2"),a=n("d4ec"),o=n("ade3"),s=(n("d3b7"),n("159b"),n("38cf"),n("5a89")),c=n("4721"),l=n("7612");function u(t){try{var e=n("5303")("./"+t+"/V.glsl"),r=n("08fd")("./"+t+"/F.glsl");return[e,r]}catch(i){return console.error("failed to fetch shader",i),["",""]}}var h,d,f,p,v,g,m,b=n("61d9"),w=Object(i["a"])((function t(e,n,i,c,l,h,d,f,p){if(Object(a["a"])(this,t),Object(o["a"])(this,"mesh",void 0),Object(o["a"])(this,"originalMaterial",void 0),Object(o["a"])(this,"refractionMaterial",void 0),Object(o["a"])(this,"backColor",void 0),Object(o["a"])(this,"refractionMaterialUniforms",void 0),this.mesh=n,this.mesh["refractionObject"]=this,this.mesh.material instanceof Array){this.originalMaterial=new Array;for(var v=0;v<this.mesh.material.length;v++)this.originalMaterial.push(this.mesh.material[v].clone())}else this.originalMaterial=this.mesh.material.clone();this.backColor=h,this.refractionMaterialUniforms={resolution:{value:i},tBackground:{value:c},tBackDepth:{value:l},tSkybox:{value:e.environment},refractionFactor:{value:f},opacity:{value:p},absorbColor:{value:new s["g"](d)}};var g=u("GlassFrontShader"),m=Object(r["a"])(g,2),b=m[0],w=m[1];this.refractionMaterial=new s["V"]({vertexShader:b,fragmentShader:w,uniforms:this.refractionMaterialUniforms,side:s["t"]})})),y=function(){function t(e,n,r,i){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512;Object(a["a"])(this,t),Object(o["a"])(this,"container",void 0),Object(o["a"])(this,"backgroundScene",void 0),Object(o["a"])(this,"scene",void 0),Object(o["a"])(this,"renderer",void 0),Object(o["a"])(this,"camera",void 0),Object(o["a"])(this,"frontScene",void 0),Object(o["a"])(this,"backdepthTexture",void 0),Object(o["a"])(this,"backRenderTarget",void 0),Object(o["a"])(this,"refractionObjectList",void 0),Object(o["a"])(this,"suResolution",void 0),this.container=n,this.backgroundScene=e,this.scene=new s["U"],this.renderer=r,this.camera=i,this.scene.environment=this.backgroundScene.environment,this.frontScene=new s["U"],this.backdepthTexture=new s["k"](c,c,s["s"]),this.backRenderTarget=new s["ib"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio),this.backRenderTarget.depthBuffer=!0,this.backRenderTarget.depthTexture=this.backdepthTexture,this.backRenderTarget.depthTexture.type=s["db"],this.frontScene.background=this.backRenderTarget.texture,this.refractionObjectList=[],this.suResolution=new s["eb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)}return Object(i["a"])(t,[{key:"addRefractionMesh",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16777215,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.49,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,o=new s["g"](n);e&&(t.material=new s["H"]({color:o,transparent:!0,opacity:.5,metalness:1,reflectivity:.1,roughness:0,clearcoat:1,side:s["b"]})),this.refractionObjectList.push(new w(this.backgroundScene,t,this.suResolution,this.backRenderTarget.texture,this.backRenderTarget.depthTexture,o,r,i,a)),this.scene.add(t)}},{key:"onWindowResize",value:function(){this.suResolution.x=this.container.offsetWidth*window.devicePixelRatio,this.suResolution.y=this.container.offsetHeight*window.devicePixelRatio}},{key:"render",value:function(){var t=this;this.refractionObjectList.forEach((function(e){e.mesh.material=e.originalMaterial,t.scene.add(e.mesh)})),this.renderer.setRenderTarget(this.backRenderTarget),this.renderer.render(this.scene,this.camera),this.refractionObjectList.forEach((function(e){e.mesh.material=e.refractionMaterial,t.frontScene.add(e.mesh)})),this.renderer.setRenderTarget(null),this.renderer.render(this.frontScene,this.camera)}}]),t}();function x(t){h=t,f=new s["K"](45,window.innerWidth/window.innerHeight,1,5e3),f.position.set(30,20,200),f.lookAt(0,0,0),g=new s["U"],d=new s["jb"]({antialias:!0,alpha:!0}),d.setClearColor(16777215),d.setPixelRatio(window.devicePixelRatio),d.setSize(window.innerWidth,window.innerHeight),h.appendChild(d.domElement),p=new c["a"](f,h),h.style.position="absolute",h.style.top="0px",h.style.left="0px",v=new b["Stats"],v.domElement.style.zIndex="100",h.appendChild(v.domElement);var e="./cube/",n=[e+"px.jpg",e+"nx.jpg",e+"py.jpg",e+"ny.jpg",e+"pz.jpg",e+"nz.jpg"],r=(new s["i"]).load(n);r.mapping=s["h"],g.background=r,g.environment=r;var i=new s["l"];i.position.x=300,i.position.y=200,i.position.z=100,g.add(i);var a=(new s["ab"]).load("./checkerboard.jpg");a.wrapS=a.wrapT=s["S"],a.repeat.set(10,10);var o=new s["F"]({map:a,side:s["m"]}),u=new s["N"](1e3,1e3,1,1),w=new s["E"](u,o);w.position.y-=20.1,w.rotation.x=Math.PI/2,m=new y(g,h,d,f);var x=new s["E"](new l["a"](40,40,40,5,5),new s["G"]({}));x.position.x-=40;var O=new s["E"](new s["W"](20),new s["G"]({})),j=new s["E"](new s["j"](20,20,80,36),new s["G"]({}));j.position.x+=40,j.position.y+=20,m.addRefractionMesh(x,!0,0,0),m.addRefractionMesh(O,!0,24576,24576),m.addRefractionMesh(j,!0,1587,1587);var C=new s["E"](new s["W"](20),new s["G"]({color:16711680}));C.position.copy(x.position),C.position.z-=50,g.add(C),window.addEventListener("resize",M),_()}function M(){f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),m.onWindowResize(),d.setSize(window.innerWidth,window.innerHeight)}function _(){requestAnimationFrame(_),O(),p.update(),v.update()}function O(){m.render()}},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(A){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=j(t,n,o),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",v={};function g(){}function m(){}function b(){}var w={};c(w,a,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(S([])));x&&x!==n&&r.call(x,a)&&(w=x);var M=b.prototype=g.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(i,a,o,s){var c=u(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,s)}))}s(c.arg)}var i;function a(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}this._invoke=a}function j(t,e,n){var r=h;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return R()}n.method=i,n.arg=a;while(1){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:e,done:!0}}return m.prototype=b,c(M,"constructor",b),c(b,"constructor",m),m.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,s,"GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},_(O.prototype),c(O.prototype,o,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new O(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(M),c(M,s,"Generator"),c(M,a,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:S(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},a434:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("23cb"),o=n("5926"),s=n("07fa"),c=n("7b0b"),l=n("65f0"),u=n("8418"),h=n("1dde"),d=h("splice"),f=i.TypeError,p=Math.max,v=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var n,r,i,h,d,b,w=c(this),y=s(w),x=a(t,y),M=arguments.length;if(0===M?n=r=0:1===M?(n=0,r=y-x):(n=M-2,r=v(p(o(e),0),y-x)),y+n-r>g)throw f(m);for(i=l(w,r),h=0;h<r;h++)d=x+h,d in w&&u(i,h,w[d]);if(i.length=r,n<r){for(h=x;h<y-r;h++)d=h+r,b=h+n,d in w?w[b]=w[d]:delete w[b];for(h=y;h>y-r+n;h--)delete w[h-1]}else if(n>r)for(h=y-r;h>x;h--)d=h+r-1,b=h+n-1,d in w?w[b]=w[d]:delete w[b];for(h=0;h<n;h++)w[h+x]=arguments[h+2];return w.length=y-r+n,i}})},addb:function(t,e,n){var r=n("4dae"),i=Math.floor,a=function(t,e){var n=t.length,c=i(n/2);return n<8?o(t,e):s(t,a(r(t,0,c),e),a(r(t,c),e),e)},o=function(t,e){var n,r,i=t.length,a=1;while(a<i){r=a,n=t[a];while(r&&e(t[r-1],n)>0)t[r]=t[--r];r!==a++&&(t[r]=n)}return t},s=function(t,e,n,r){var i=e.length,a=n.length,o=0,s=0;while(o<i||s<a)t[o+s]=o<i&&s<a?r(e[o],n[s])<=0?e[o++]:n[s++]:o<i?e[o++]:n[s++];return t};t.exports=a},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),a=n("df75"),o=n("d039"),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return a(i(t))}})},c444:function(t,e){t.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraPosition = cameraPosition;\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n}\r\n"},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,a=n("1dde"),o=a("map");r({target:"Array",proto:!0,forced:!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d998:function(t,e,n){var r=n("342f");t.exports=/MSIE|Trident/.test(r)},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===a(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,c=0;c<o;c++)if(i[c]!==a[c]){s=c;break}var l=[];for(c=s;c<i.length;c++)l.push("..");return l=l.concat(a.slice(s)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,a=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===e?e=o:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){n=o+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===n+1?"":t.slice(e,r)};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},f430:function(t,e){t.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\nuniform samplerCube tSkybox;\r\nuniform vec3 absorbColor;\r\nuniform float refractionFactor;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 5000.0;\r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nvoid main() {\r\n\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.25;\r\n    \r\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\r\n    vCameraRay = normalize(vCameraRay);\r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\r\n    offset = normalize(offset);\r\n\r\n    // reflect\r\n    vec3 vReflect = reflect( vCameraRay, vNormal );\r\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= sinTheta2;\r\n    offset *= 50.0;\r\n\r\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\r\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\r\n\r\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\r\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\r\n\r\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\r\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\r\n    \r\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\r\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\r\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\r\n\r\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\r\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\r\n\r\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\r\n\r\n    // gl_FragColor = vec4(refCol, 1.0);\r\n    float reflectionCoeff = 0.5 * pow(sinTheta1, 4.0);\r\n    // reflectionCoeff = 1.0;\r\n    gl_FragColor = vec4(mix(backColor + absorbColor, refCol, reflectionCoeff), 1.0);\r\n    // gl_FragColor = vec4(vec3(backDepthlinear*0.01), 1.0);\r\n}"}}]);
//# sourceMappingURL=chunk-00335bcc.daa15720.js.map
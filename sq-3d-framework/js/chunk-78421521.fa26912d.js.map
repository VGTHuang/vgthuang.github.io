{"version":3,"sources":["webpack:///./src/scripts/ThreeRealisticRefraction sync ^\\.\\/.*\\/F\\.glsl$","webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./node_modules/@tweenjs/tween.js/dist/tween.esm.js","webpack:///./node_modules/three/examples/jsm/loaders/TDSLoader.js","webpack:///./node_modules/core-js/modules/es.string.repeat.js","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./src/scripts/ThreeRealisticRefraction sync ^\\.\\/.*\\/V\\.glsl$","webpack:///./node_modules/three/examples/jsm/geometries/RoundedBoxGeometry.js","webpack:///./src/scripts/ThreeRealisticRefraction/ShaderLoader.ts","webpack:///./src/scripts/ThreeRealisticRefraction/ThreeRealisticRefraction.ts","webpack:///./src/scripts/ThreeRealisticRefraction/GlassFrontShader/V.glsl","webpack:///./node_modules/path-browserify/index.js","webpack:///./src/scripts/ThreeRealisticRefraction/GlassFrontShader/F.glsl","webpack:///./node_modules/three/examples/jsm/objects/Reflector.js","webpack:///./src/scripts/Three/SQWater.ts","webpack:///./src/scripts/AnimUtils/TweenUtils.ts"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","global","toIntegerOrInfinity","toString","requireObjectCoercible","RangeError","count","str","this","result","n","Infinity","now","Easing","Linear","None","amount","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","s","Bounce","self","process","hrtime","time","undefined","performance","bind","Date","getTime","now$1","Group","_tweens","_tweensAddedDuringUpdate","prototype","getAll","_this","tweenId","removeAll","add","tween","getId","remove","update","preserve","tweenIds","length","i","autoStart","Interpolation","v","k","m","f","floor","fn","Utils","Bezier","b","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","t3","Sequence","nextId","_nextId","mainGroup","Tween","_object","_group","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","_goToEnd","isPlaying","isPaused","to","properties","duration","create","d","start","property","_swapEndStartRepeatValues","parseFloat","_setupProperties","startValue","startValueIsArray","Array","isArray","propType","isInterpolationList","endValues","_handleRelativeValue","concat","slice","reverse","prop","stop","stopChainedTweens","_onStopCallback","end","pause","resume","numChainedTweens","group","delay","repeat","times","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","tweens","_i","arguments","onStart","callback","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","endTime","value","_updateProperties","isFinite","startIsArray","endIsArray","charAt","tmp","endValue","TWEEN","TDSLoader","manager","super","debug","materials","meshes","url","onLoad","onProgress","onError","scope","path","extractUrlBase","loader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","data","parse","console","error","itemError","arraybuffer","readFile","DataView","chunk","Chunk","debugMessage","MLIBMAGIC","CMAGIC","M3DMAGIC","next","readChunk","M3D_VERSION","version","readDWord","MDATA","readMeshData","hexId","MESH_VERSION","MASTER_SCALE","scale","readFloat","set","NAMED_OBJECT","readNamedObject","MAT_ENTRY","readMaterialEntry","name","readString","N_TRI_OBJECT","mesh","readMesh","push","material","MAT_NAME","MAT_WIRE","wireframe","MAT_WIRE_SIZE","readByte","wireframeLinewidth","MAT_TWO_SIDE","side","MAT_ADDITIVE","blending","MAT_DIFFUSE","color","readColor","MAT_SPECULAR","specular","MAT_AMBIENT","MAT_SHININESS","shininess","readPercentage","MAT_TRANSPARENCY","transparency","opacity","transparent","MAT_TEXMAP","readMap","MAT_BUMPMAP","bumpMap","MAT_OPACMAP","alphaMap","MAT_SPECMAP","specularMap","geometry","POINT_ARRAY","points","readWord","vertices","setAttribute","FACE_ARRAY","readFaceArray","TEX_VERTS","texels","uvs","MESH_MATRIX","values","matrix","elements","transpose","inverse","copy","invert","applyMatrix4","decompose","position","quaternion","computeVertexNormals","faces","index","setIndex","materialIndex","endOfChunk","subchunk","MSH_MAT_GROUP","readMaterialGroup","addGroup","texture","resourcePath","setCrossOrigin","crossOrigin","MAT_MAPNAME","MAT_MAP_UOFFSET","offset","x","MAT_MAP_VOFFSET","y","MAT_MAP_USCALE","MAT_MAP_VSCALE","numFaces","subChunk","COLOR_24","LIN_COLOR_24","r","g","setRGB","COLOR_F","LIN_COLOR_F","INT_PERCENTAGE","readShort","FLOAT_PERCENTAGE","message","log","Function","size","byteLength","getUint8","getFloat32","getInt32","getInt16","getUint32","getUint16","c","String","fromCharCode","$","target","proto","nextTick","args","call","shift","setTimeout","apply","platform","arch","execPath","title","pid","browser","env","argv","binding","cwd","chdir","dir","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","_tempNormal","getUv","faceDirVector","normal","uvAxis","projectionAxis","radius","sideLength","totArcLength","centerLength","max","halfArc","normalize","arcUvRatio","arcAngleRatio","angleTo","sign","lenUv","RoundedBoxGeometry","width","height","depth","segments","min","geometry2","toNonIndexed","attributes","uv","box","divideScalar","subScalar","positions","array","normals","faceTris","halfSegmentSize","j","fromArray","z","loadShader","shaderName","vertexShader","fragShader","err","controls","stats","rm","scene","suResolution","suBackground","suImage","suDepth","backColor","absorbColor","suRefractionFactor","suOpacity","originalMaterial","clone","refractionMaterialUniforms","environment","glassFrontVS","glassFrontFS","refractionMaterial","fragmentShader","uniforms","backgroundScene","container","renderer","camera","backDepthTextureSize","frontScene","backdepthTexture","backRenderTarget","offsetWidth","window","devicePixelRatio","offsetHeight","depthBuffer","depthTexture","type","background","refractionObjectList","textureCube","shader","lib","parameters","setDefaultBacksideMaterial","image","refractionFactor","opacityFactor","_backColor","metalness","reflectivity","roughness","forEach","refObj","setRenderTarget","render","initScene","_container","innerWidth","innerHeight","lookAt","antialias","alpha","setClearColor","setPixelRatio","setSize","appendChild","domElement","OrbitControls","style","top","left","zIndex","urls","mapping","light","floorTexture","wrapS","wrapT","floorMaterial","floorGeometry","rotation","glassMesh1","glassMesh2","glassMesh3","addRefractionMesh","ballMesh","addEventListener","onWindowResize","animate","aspect","updateProjectionMatrix","requestAnimationFrame","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","basename","matchedSlash","charCodeAt","filter","xs","res","resolvedPath","resolvedAbsolute","TypeError","split","p","join","isAbsolute","trailingSlash","substr","paths","relative","from","trim","arr","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","ext","extname","startDot","startPart","preDotState","len","options","textureWidth","textureHeight","clipBias","ReflectorShader","reflectorPlane","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","view","q","textureMatrix","virtualCamera","renderTarget","onBeforeRender","setFromMatrixPosition","matrixWorld","extractRotation","subVectors","dot","reflect","negate","far","updateMatrixWorld","projectionMatrix","multiply","matrixWorldInverse","setFromNormalAndCoplanarPoint","constant","w","multiplyScalar","encoding","outputEncoding","visible","currentRenderTarget","getRenderTarget","currentXrEnabled","xr","enabled","currentShadowAutoUpdate","shadowMap","autoUpdate","state","buffers","setMask","autoClear","clear","viewport","dispose","isReflector","reflectionScene","flowDirection","flowSpeed","WaterShader","textureLoader","normalMap0","normalMap1","cycle","halfCycle","clock","reflector","updateTextureMatrix","updateFlow","delta","getDelta","config","matrixAutoUpdate","merge","fog","TweenAnimController","requestId","loopAnim","cancelAnimationFrame","animationObjectCount","startAnim","stopAnim","fromValue","toValue","onUpdateFunc","onCompleteFunc","addTweenAnimObject","removeTweenAnimObject","v2","controller"],"mappings":"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","file":"js/chunk-78421521.fa26912d.js","sourcesContent":["var map = {\n\t\"./GlassFrontShader/F.glsl\": \"f430\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"08fd\";","'use strict';\nvar global = require('../internals/global');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar RangeError = global.RangeError;\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = {\n    Linear: {\n        None: function (amount) {\n            return amount;\n        },\n    },\n    Quadratic: {\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    },\n    Cubic: {\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    },\n    Quartic: {\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    },\n    Quintic: {\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    },\n    Sinusoidal: {\n        In: function (amount) {\n            return 1 - Math.cos((amount * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.cos(Math.PI * amount));\n        },\n    },\n    Exponential: {\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    },\n    Circular: {\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    },\n    Elastic: {\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    },\n    Back: {\n        In: function (amount) {\n            var s = 1.70158;\n            return amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    },\n    Bounce: {\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    },\n};\n\nvar now;\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\n// eslint-disable-next-line\n// @ts-ignore\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n    now = function () {\n        // eslint-disable-next-line\n        // @ts-ignore\n        var time = process.hrtime();\n        // Convert [seconds, nanoseconds] to milliseconds.\n        return time[0] * 1000 + time[1] / 1000000;\n    };\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    now = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n    now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n    now = function () {\n        return new Date().getTime();\n    };\n}\nvar now$1 = now;\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now$1(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.to = function (properties, duration) {\n        // TODO? restore this, then update the 07_dynamic_to example to set fox\n        // tween's to on each update. That way the behavior is opt-in (there's\n        // currently no opt-out).\n        // for (const prop in properties) this._valuesEnd[prop] = properties[prop]\n        this._valuesEnd = Object.create(properties);\n        if (duration !== undefined) {\n            this._duration = duration;\n        }\n        return this;\n    };\n    Tween.prototype.duration = function (d) {\n        this._duration = d;\n        return this;\n    };\n    Tween.prototype.start = function (time) {\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time !== undefined ? (typeof time === 'string' ? now$1() + parseFloat(time) : time) : now$1();\n        this._startTime += this._delayTime;\n        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\n        return this;\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // handle an array of relative values\n                endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\n                // Create a local copy of the Array with the start value at the front\n                _valuesEnd[property] = [startValue].concat(endValues);\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                // eslint-disable-next-line\n                for (var prop in startValue) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property][prop] = startValue[prop];\n                }\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\n            }\n            else {\n                // Save the starting value, but only once.\n                if (typeof _valuesStart[property] === 'undefined') {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        if (time === void 0) { time = now$1(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var elapsed;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        elapsed = (time - this._startTime) / this._duration;\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (elapsed === 1) {\n            if (this._repeat > 0) {\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                if (this._repeatDelayTime !== undefined) {\n                    this._startTime = time + this._repeatDelayTime;\n                }\n                else {\n                    this._startTime = time + this._delayTime;\n                }\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        else {\n            return parseFloat(end);\n        }\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '18.6.4';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now$1,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport default exports;\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, getAll, nextId, now$1 as now, remove, removeAll, update };\n","import {\n\tAdditiveBlending,\n\tBufferGeometry,\n\tColor,\n\tDoubleSide,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLoader,\n\tLoaderUtils,\n\tMatrix4,\n\tMesh,\n\tMeshPhongMaterial,\n\tTextureLoader\n} from 'three';\n\n/**\n * Autodesk 3DS three.js file loader, based on lib3ds.\n *\n * Loads geometry with uv and materials basic properties with texture support.\n *\n * @class TDSLoader\n * @constructor\n */\n\nclass TDSLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.debug = false;\n\n\t\tthis.group = null;\n\n\t\tthis.materials = [];\n\t\tthis.meshes = [];\n\n\t}\n\n\t/**\n\t * Load 3ds file from url.\n\t *\n\t * @method load\n\t * @param {[type]} url URL for the file.\n\t * @param {Function} onLoad onLoad callback, receives group Object3D as argument.\n\t * @param {Function} onProgress onProgress callback.\n\t * @param {Function} onError onError callback.\n\t */\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( data, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\t/**\n\t * Parse arraybuffer data and load 3ds file.\n\t *\n\t * @method parse\n\t * @param {ArrayBuffer} arraybuffer Arraybuffer data to be loaded.\n\t * @param {String} path Path for external resources.\n\t * @return {Group} Group loaded from 3ds file.\n\t */\n\tparse( arraybuffer, path ) {\n\n\t\tthis.group = new Group();\n\t\tthis.materials = [];\n\t\tthis.meshes = [];\n\n\t\tthis.readFile( arraybuffer, path );\n\n\t\tfor ( let i = 0; i < this.meshes.length; i ++ ) {\n\n\t\t\tthis.group.add( this.meshes[ i ] );\n\n\t\t}\n\n\t\treturn this.group;\n\n\t}\n\n\t/**\n\t * Decode file content to read 3ds data.\n\t *\n\t * @method readFile\n\t * @param {ArrayBuffer} arraybuffer Arraybuffer data to be loaded.\n\t * @param {String} path Path for external resources.\n\t */\n\treadFile( arraybuffer, path ) {\n\n\t\tconst data = new DataView( arraybuffer );\n\t\tconst chunk = new Chunk( data, 0, this.debugMessage );\n\n\t\tif ( chunk.id === MLIBMAGIC || chunk.id === CMAGIC || chunk.id === M3DMAGIC ) {\n\n\t\t\tlet next = chunk.readChunk();\n\n\t\t\twhile ( next ) {\n\n\t\t\t\tif ( next.id === M3D_VERSION ) {\n\n\t\t\t\t\tconst version = next.readDWord();\n\t\t\t\t\tthis.debugMessage( '3DS file version: ' + version );\n\n\t\t\t\t} else if ( next.id === MDATA ) {\n\n\t\t\t\t\tthis.readMeshData( next, path );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.debugMessage( 'Unknown main chunk: ' + next.hexId );\n\n\t\t\t\t}\n\n\t\t\t\tnext = chunk.readChunk();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.debugMessage( 'Parsed ' + this.meshes.length + ' meshes' );\n\n\t}\n\n\t/**\n\t * Read mesh data chunk.\n\t *\n\t * @method readMeshData\n\t * @param {Chunk} chunk to read mesh from\n\t * @param {String} path Path for external resources.\n\t */\n\treadMeshData( chunk, path ) {\n\n\t\tlet next = chunk.readChunk();\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === MESH_VERSION ) {\n\n\t\t\t\tconst version = + next.readDWord();\n\t\t\t\tthis.debugMessage( 'Mesh Version: ' + version );\n\n\t\t\t} else if ( next.id === MASTER_SCALE ) {\n\n\t\t\t\tconst scale = next.readFloat();\n\t\t\t\tthis.debugMessage( 'Master scale: ' + scale );\n\t\t\t\tthis.group.scale.set( scale, scale, scale );\n\n\t\t\t} else if ( next.id === NAMED_OBJECT ) {\n\n\t\t\t\tthis.debugMessage( 'Named Object' );\n\t\t\t\tthis.readNamedObject( next );\n\n\t\t\t} else if ( next.id === MAT_ENTRY ) {\n\n\t\t\t\tthis.debugMessage( 'Material' );\n\t\t\t\tthis.readMaterialEntry( next, path );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( 'Unknown MDATA chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Read named object chunk.\n\t *\n\t * @method readNamedObject\n\t * @param {Chunk} chunk Chunk in use.\n\t */\n\treadNamedObject( chunk ) {\n\n\t\tconst name = chunk.readString();\n\n\t\tlet next = chunk.readChunk();\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === N_TRI_OBJECT ) {\n\n\t\t\t\tconst mesh = this.readMesh( next );\n\t\t\t\tmesh.name = name;\n\t\t\t\tthis.meshes.push( mesh );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( 'Unknown named object chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk( );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Read material data chunk and add it to the material list.\n\t *\n\t * @method readMaterialEntry\n\t * @param {Chunk} chunk Chunk in use.\n\t * @param {String} path Path for external resources.\n\t */\n\treadMaterialEntry( chunk, path ) {\n\n\t\tlet next = chunk.readChunk();\n\t\tconst material = new MeshPhongMaterial();\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === MAT_NAME ) {\n\n\t\t\t\tmaterial.name = next.readString();\n\t\t\t\tthis.debugMessage( '   Name: ' + material.name );\n\n\t\t\t} else if ( next.id === MAT_WIRE ) {\n\n\t\t\t\tthis.debugMessage( '   Wireframe' );\n\t\t\t\tmaterial.wireframe = true;\n\n\t\t\t} else if ( next.id === MAT_WIRE_SIZE ) {\n\n\t\t\t\tconst value = next.readByte();\n\t\t\t\tmaterial.wireframeLinewidth = value;\n\t\t\t\tthis.debugMessage( '   Wireframe Thickness: ' + value );\n\n\t\t\t} else if ( next.id === MAT_TWO_SIDE ) {\n\n\t\t\t\tmaterial.side = DoubleSide;\n\t\t\t\tthis.debugMessage( '   DoubleSided' );\n\n\t\t\t} else if ( next.id === MAT_ADDITIVE ) {\n\n\t\t\t\tthis.debugMessage( '   Additive Blending' );\n\t\t\t\tmaterial.blending = AdditiveBlending;\n\n\t\t\t} else if ( next.id === MAT_DIFFUSE ) {\n\n\t\t\t\tthis.debugMessage( '   Diffuse Color' );\n\t\t\t\tmaterial.color = this.readColor( next );\n\n\t\t\t} else if ( next.id === MAT_SPECULAR ) {\n\n\t\t\t\tthis.debugMessage( '   Specular Color' );\n\t\t\t\tmaterial.specular = this.readColor( next );\n\n\t\t\t} else if ( next.id === MAT_AMBIENT ) {\n\n\t\t\t\tthis.debugMessage( '   Ambient color' );\n\t\t\t\tmaterial.color = this.readColor( next );\n\n\t\t\t} else if ( next.id === MAT_SHININESS ) {\n\n\t\t\t\tconst shininess = this.readPercentage( next );\n\t\t\t\tmaterial.shininess = shininess * 100;\n\t\t\t\tthis.debugMessage( '   Shininess : ' + shininess );\n\n\t\t\t} else if ( next.id === MAT_TRANSPARENCY ) {\n\n\t\t\t\tconst transparency = this.readPercentage( next );\n\t\t\t\tmaterial.opacity = 1 - transparency;\n\t\t\t\tthis.debugMessage( '  Transparency : ' + transparency );\n\t\t\t\tmaterial.transparent = material.opacity < 1 ? true : false;\n\n\t\t\t} else if ( next.id === MAT_TEXMAP ) {\n\n\t\t\t\tthis.debugMessage( '   ColorMap' );\n\t\t\t\tmaterial.map = this.readMap( next, path );\n\n\t\t\t} else if ( next.id === MAT_BUMPMAP ) {\n\n\t\t\t\tthis.debugMessage( '   BumpMap' );\n\t\t\t\tmaterial.bumpMap = this.readMap( next, path );\n\n\t\t\t} else if ( next.id === MAT_OPACMAP ) {\n\n\t\t\t\tthis.debugMessage( '   OpacityMap' );\n\t\t\t\tmaterial.alphaMap = this.readMap( next, path );\n\n\t\t\t} else if ( next.id === MAT_SPECMAP ) {\n\n\t\t\t\tthis.debugMessage( '   SpecularMap' );\n\t\t\t\tmaterial.specularMap = this.readMap( next, path );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '   Unknown material chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk();\n\n\t\t}\n\n\t\tthis.materials[ material.name ] = material;\n\n\t}\n\n\t/**\n\t * Read mesh data chunk.\n\t *\n\t * @method readMesh\n\t * @param {Chunk} chunk Chunk in use.\n\t * @return {Mesh} The parsed mesh.\n\t */\n\treadMesh( chunk ) {\n\n\t\tlet next = chunk.readChunk( );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst material = new MeshPhongMaterial();\n\t\tconst mesh = new Mesh( geometry, material );\n\t\tmesh.name = 'mesh';\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === POINT_ARRAY ) {\n\n\t\t\t\tconst points = next.readWord( );\n\n\t\t\t\tthis.debugMessage( '   Vertex: ' + points );\n\n\t\t\t\t//BufferGeometry\n\n\t\t\t\tconst vertices = [];\n\n\t\t\t\tfor ( let i = 0; i < points; i ++ )\t\t{\n\n\t\t\t\t\tvertices.push( next.readFloat( ) );\n\t\t\t\t\tvertices.push( next.readFloat( ) );\n\t\t\t\t\tvertices.push( next.readFloat( ) );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t\t} else if ( next.id === FACE_ARRAY ) {\n\n\t\t\t\tthis.readFaceArray( next, mesh );\n\n\t\t\t} else if ( next.id === TEX_VERTS ) {\n\n\t\t\t\tconst texels = next.readWord( );\n\n\t\t\t\tthis.debugMessage( '   UV: ' + texels );\n\n\t\t\t\t//BufferGeometry\n\n\t\t\t\tconst uvs = [];\n\n\t\t\t\tfor ( let i = 0; i < texels; i ++ ) {\n\n\t\t\t\t\tuvs.push( next.readFloat( ) );\n\t\t\t\t\tuvs.push( next.readFloat( ) );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t\t} else if ( next.id === MESH_MATRIX ) {\n\n\t\t\t\tthis.debugMessage( '   Tranformation Matrix (TODO)' );\n\n\t\t\t\tconst values = [];\n\t\t\t\tfor ( let i = 0; i < 12; i ++ ) {\n\n\t\t\t\t\tvalues[ i ] = next.readFloat( );\n\n\t\t\t\t}\n\n\t\t\t\tconst matrix = new Matrix4();\n\n\t\t\t\t//X Line\n\t\t\t\tmatrix.elements[ 0 ] = values[ 0 ];\n\t\t\t\tmatrix.elements[ 1 ] = values[ 6 ];\n\t\t\t\tmatrix.elements[ 2 ] = values[ 3 ];\n\t\t\t\tmatrix.elements[ 3 ] = values[ 9 ];\n\n\t\t\t\t//Y Line\n\t\t\t\tmatrix.elements[ 4 ] = values[ 2 ];\n\t\t\t\tmatrix.elements[ 5 ] = values[ 8 ];\n\t\t\t\tmatrix.elements[ 6 ] = values[ 5 ];\n\t\t\t\tmatrix.elements[ 7 ] = values[ 11 ];\n\n\t\t\t\t//Z Line\n\t\t\t\tmatrix.elements[ 8 ] = values[ 1 ];\n\t\t\t\tmatrix.elements[ 9 ] = values[ 7 ];\n\t\t\t\tmatrix.elements[ 10 ] = values[ 4 ];\n\t\t\t\tmatrix.elements[ 11 ] = values[ 10 ];\n\n\t\t\t\t//W Line\n\t\t\t\tmatrix.elements[ 12 ] = 0;\n\t\t\t\tmatrix.elements[ 13 ] = 0;\n\t\t\t\tmatrix.elements[ 14 ] = 0;\n\t\t\t\tmatrix.elements[ 15 ] = 1;\n\n\t\t\t\tmatrix.transpose();\n\n\t\t\t\tconst inverse = new Matrix4();\n\t\t\t\tinverse.copy( matrix ).invert();\n\t\t\t\tgeometry.applyMatrix4( inverse );\n\n\t\t\t\tmatrix.decompose( mesh.position, mesh.quaternion, mesh.scale );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '   Unknown mesh chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk( );\n\n\t\t}\n\n\t\tgeometry.computeVertexNormals();\n\n\t\treturn mesh;\n\n\t}\n\n\t/**\n\t * Read face array data chunk.\n\t *\n\t * @method readFaceArray\n\t * @param {Chunk} chunk Chunk in use.\n\t * @param {Mesh} mesh Mesh to be filled with the data read.\n\t */\n\treadFaceArray( chunk, mesh ) {\n\n\t\tconst faces = chunk.readWord( );\n\n\t\tthis.debugMessage( '   Faces: ' + faces );\n\n\t\tconst index = [];\n\n\t\tfor ( let i = 0; i < faces; ++ i ) {\n\n\t\t\tindex.push( chunk.readWord( ), chunk.readWord( ), chunk.readWord( ) );\n\n\t\t\tchunk.readWord( ); // visibility\n\n\t\t}\n\n\t\tmesh.geometry.setIndex( index );\n\n\t\t//The rest of the FACE_ARRAY chunk is subchunks\n\n\t\tlet materialIndex = 0;\n\t\tlet start = 0;\n\n\t\twhile ( ! chunk.endOfChunk ) {\n\n\t\t\tconst subchunk = chunk.readChunk( );\n\n\t\t\tif ( subchunk.id === MSH_MAT_GROUP ) {\n\n\t\t\t\tthis.debugMessage( '      Material Group' );\n\n\t\t\t\tconst group = this.readMaterialGroup( subchunk );\n\t\t\t\tconst count = group.index.length * 3; // assuming successive indices\n\n\t\t\t\tmesh.geometry.addGroup( start, count, materialIndex );\n\n\t\t\t\tstart += count;\n\t\t\t\tmaterialIndex ++;\n\n\t\t\t\tconst material = this.materials[ group.name ];\n\n\t\t\t\tif ( Array.isArray( mesh.material ) === false ) mesh.material = [];\n\n\t\t\t\tif ( material !== undefined )\t{\n\n\t\t\t\t\tmesh.material.push( material );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '      Unknown face array chunk: ' + subchunk.hexId );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( mesh.material.length === 1 ) mesh.material = mesh.material[ 0 ]; // for backwards compatibility\n\n\t}\n\n\t/**\n\t * Read texture map data chunk.\n\t *\n\t * @method readMap\n\t * @param {Chunk} chunk Chunk in use.\n\t * @param {String} path Path for external resources.\n\t * @return {Texture} Texture read from this data chunk.\n\t */\n\treadMap( chunk, path ) {\n\n\t\tlet next = chunk.readChunk( );\n\t\tlet texture = {};\n\n\t\tconst loader = new TextureLoader( this.manager );\n\t\tloader.setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\twhile ( next ) {\n\n\t\t\tif ( next.id === MAT_MAPNAME ) {\n\n\t\t\t\tconst name = next.readString();\n\t\t\t\ttexture = loader.load( name );\n\n\t\t\t\tthis.debugMessage( '      File: ' + path + name );\n\n\t\t\t} else if ( next.id === MAT_MAP_UOFFSET ) {\n\n\t\t\t\ttexture.offset.x = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      OffsetX: ' + texture.offset.x );\n\n\t\t\t} else if ( next.id === MAT_MAP_VOFFSET ) {\n\n\t\t\t\ttexture.offset.y = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      OffsetY: ' + texture.offset.y );\n\n\t\t\t} else if ( next.id === MAT_MAP_USCALE ) {\n\n\t\t\t\ttexture.repeat.x = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      RepeatX: ' + texture.repeat.x );\n\n\t\t\t} else if ( next.id === MAT_MAP_VSCALE ) {\n\n\t\t\t\ttexture.repeat.y = next.readFloat( );\n\t\t\t\tthis.debugMessage( '      RepeatY: ' + texture.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tthis.debugMessage( '      Unknown map chunk: ' + next.hexId );\n\n\t\t\t}\n\n\t\t\tnext = chunk.readChunk( );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t/**\n\t * Read material group data chunk.\n\t *\n\t * @method readMaterialGroup\n\t * @param {Chunk} chunk Chunk in use.\n\t * @return {Object} Object with name and index of the object.\n\t */\n\treadMaterialGroup( chunk ) {\n\n\t\tconst name = chunk.readString();\n\t\tconst numFaces = chunk.readWord();\n\n\t\tthis.debugMessage( '         Name: ' + name );\n\t\tthis.debugMessage( '         Faces: ' + numFaces );\n\n\t\tconst index = [];\n\t\tfor ( let i = 0; i < numFaces; ++ i ) {\n\n\t\t\tindex.push( chunk.readWord( ) );\n\n\t\t}\n\n\t\treturn { name: name, index: index };\n\n\t}\n\n\t/**\n\t * Read a color value.\n\t *\n\t * @method readColor\n\t * @param {Chunk} chunk Chunk.\n\t * @return {Color} Color value read..\n\t */\n\treadColor( chunk ) {\n\n\t\tconst subChunk = chunk.readChunk( );\n\t\tconst color = new Color();\n\n\t\tif ( subChunk.id === COLOR_24 || subChunk.id === LIN_COLOR_24 ) {\n\n\t\t\tconst r = subChunk.readByte( );\n\t\t\tconst g = subChunk.readByte( );\n\t\t\tconst b = subChunk.readByte( );\n\n\t\t\tcolor.setRGB( r / 255, g / 255, b / 255 );\n\n\t\t\tthis.debugMessage( '      Color: ' + color.r + ', ' + color.g + ', ' + color.b );\n\n\t\t}\telse if ( subChunk.id === COLOR_F || subChunk.id === LIN_COLOR_F ) {\n\n\t\t\tconst r = subChunk.readFloat( );\n\t\t\tconst g = subChunk.readFloat( );\n\t\t\tconst b = subChunk.readFloat( );\n\n\t\t\tcolor.setRGB( r, g, b );\n\n\t\t\tthis.debugMessage( '      Color: ' + color.r + ', ' + color.g + ', ' + color.b );\n\n\t\t}\telse {\n\n\t\t\tthis.debugMessage( '      Unknown color chunk: ' + subChunk.hexId );\n\n\t\t}\n\n\t\treturn color;\n\n\t}\n\n\t/**\n\t * Read percentage value.\n\t *\n\t * @method readPercentage\n\t * @param {Chunk} chunk Chunk to read data from.\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadPercentage( chunk ) {\n\n\t\tconst subChunk = chunk.readChunk( );\n\n\t\tswitch ( subChunk.id ) {\n\n\t\t\tcase INT_PERCENTAGE:\n\t\t\t\treturn ( subChunk.readShort( ) / 100 );\n\t\t\t\tbreak;\n\n\t\t\tcase FLOAT_PERCENTAGE:\n\t\t\t\treturn subChunk.readFloat( );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis.debugMessage( '      Unknown percentage chunk: ' + subChunk.hexId );\n\t\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Print debug message to the console.\n\t *\n\t * Is controlled by a flag to show or hide debug messages.\n\t *\n\t * @method debugMessage\n\t * @param {Object} message Debug message to print to the console.\n\t */\n\tdebugMessage( message ) {\n\n\t\tif ( this.debug ) {\n\n\t\t\tconsole.log( message );\n\n\t\t}\n\n\t}\n\n}\n\n\n/** Read data/sub-chunks from chunk */\nclass Chunk {\n\n\t/**\n\t * Create a new chunk\n\t *\n\t * @class Chunk\n\t * @param {DataView} data DataView to read from.\n\t * @param {Number} position in data.\n\t * @param {Function} debugMessage logging callback.\n\t */\n\tconstructor( data, position, debugMessage ) {\n\n\t\tthis.data = data;\n\t\t// the offset to the begin of this chunk\n\t\tthis.offset = position;\n\t\t// the current reading position\n\t\tthis.position = position;\n\t\tthis.debugMessage = debugMessage;\n\n\t\tif ( this.debugMessage instanceof Function ) {\n\n\t\t\tthis.debugMessage = function () {};\n\n\t\t}\n\n\t\tthis.id = this.readWord();\n\t\tthis.size = this.readDWord();\n\t\tthis.end = this.offset + this.size;\n\n\t\tif ( this.end > data.byteLength ) {\n\n\t\t\tthis.debugMessage( 'Bad chunk size for chunk at ' + position );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * read a sub cchunk.\n\t *\n\t * @method readChunk\n\t * @return {Chunk | null} next sub chunk\n\t */\n\treadChunk() {\n\n\t\tif ( this.endOfChunk ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\ttry {\n\n\t\t\tconst next = new Chunk( this.data, this.position, this.debugMessage );\n\t\t\tthis.position += next.size;\n\t\t\treturn next;\n\n\t\t}\tcatch ( e ) {\n\n\t\t\tthis.debugMessage( 'Unable to read chunk at ' + this.position );\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * return the ID of this chunk as Hex\n\t *\n\t * @method idToString\n\t * @return {String} hex-string of id\n\t */\n\tget hexId() {\n\n\t\treturn this.id.toString( 16 );\n\n\t}\n\n\tget endOfChunk() {\n\n\t\treturn this.position >= this.end;\n\n\t}\n\n\t/**\n\t * Read byte value.\n\t *\n\t * @method readByte\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadByte() {\n\n\t\tconst v = this.data.getUint8( this.position, true );\n\t\tthis.position += 1;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 32 bit float value.\n\t *\n\t * @method readFloat\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadFloat() {\n\n\t\ttry {\n\n\t\t\tconst v = this.data.getFloat32( this.position, true );\n\t\t\tthis.position += 4;\n\t\t\treturn v;\n\n\t\t}\tcatch ( e ) {\n\n\t\t\tthis.debugMessage( e + ' ' + this.position + ' ' + this.data.byteLength );\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Read 32 bit signed integer value.\n\t *\n\t * @method readInt\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadInt() {\n\n\t\tconst v = this.data.getInt32( this.position, true );\n\t\tthis.position += 4;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 16 bit signed integer value.\n\t *\n\t * @method readShort\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadShort() {\n\n\t\tconst v = this.data.getInt16( this.position, true );\n\t\tthis.position += 2;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 64 bit unsigned integer value.\n\t *\n\t * @method readDWord\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadDWord() {\n\n\t\tconst v = this.data.getUint32( this.position, true );\n\t\tthis.position += 4;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read 32 bit unsigned integer value.\n\t *\n\t * @method readWord\n\t * @return {Number} Data read from the dataview.\n\t */\n\treadWord() {\n\n\t\tconst v = this.data.getUint16( this.position, true );\n\t\tthis.position += 2;\n\t\treturn v;\n\n\t}\n\n\t/**\n\t * Read NULL terminated ASCII string value from chunk-pos.\n\t *\n\t * @method readString\n\t * @return {String} Data read from the dataview.\n\t */\n\treadString() {\n\n\t\tlet s = '';\n\t\tlet c = this.readByte();\n\t\twhile ( c ) {\n\n\t\t\ts += String.fromCharCode( c );\n\t\t\tc = this.readByte();\n\n\t\t}\n\n\t\treturn s;\n\n\t}\n\n}\n\n// const NULL_CHUNK = 0x0000;\nconst M3DMAGIC = 0x4D4D;\n// const SMAGIC = 0x2D2D;\n// const LMAGIC = 0x2D3D;\nconst MLIBMAGIC = 0x3DAA;\n// const MATMAGIC = 0x3DFF;\nconst CMAGIC = 0xC23D;\nconst M3D_VERSION = 0x0002;\n// const M3D_KFVERSION = 0x0005;\nconst COLOR_F = 0x0010;\nconst COLOR_24 = 0x0011;\nconst LIN_COLOR_24 = 0x0012;\nconst LIN_COLOR_F = 0x0013;\nconst INT_PERCENTAGE = 0x0030;\nconst FLOAT_PERCENTAGE = 0x0031;\nconst MDATA = 0x3D3D;\nconst MESH_VERSION = 0x3D3E;\nconst MASTER_SCALE = 0x0100;\n// const LO_SHADOW_BIAS = 0x1400;\n// const HI_SHADOW_BIAS = 0x1410;\n// const SHADOW_MAP_SIZE = 0x1420;\n// const SHADOW_SAMPLES = 0x1430;\n// const SHADOW_RANGE = 0x1440;\n// const SHADOW_FILTER = 0x1450;\n// const RAY_BIAS = 0x1460;\n// const O_CONSTS = 0x1500;\n// const AMBIENT_LIGHT = 0x2100;\n// const BIT_MAP = 0x1100;\n// const SOLID_BGND = 0x1200;\n// const V_GRADIENT = 0x1300;\n// const USE_BIT_MAP = 0x1101;\n// const USE_SOLID_BGND = 0x1201;\n// const USE_V_GRADIENT = 0x1301;\n// const FOG = 0x2200;\n// const FOG_BGND = 0x2210;\n// const LAYER_FOG = 0x2302;\n// const DISTANCE_CUE = 0x2300;\n// const DCUE_BGND = 0x2310;\n// const USE_FOG = 0x2201;\n// const USE_LAYER_FOG = 0x2303;\n// const USE_DISTANCE_CUE = 0x2301;\nconst MAT_ENTRY = 0xAFFF;\nconst MAT_NAME = 0xA000;\nconst MAT_AMBIENT = 0xA010;\nconst MAT_DIFFUSE = 0xA020;\nconst MAT_SPECULAR = 0xA030;\nconst MAT_SHININESS = 0xA040;\n// const MAT_SHIN2PCT = 0xA041;\nconst MAT_TRANSPARENCY = 0xA050;\n// const MAT_XPFALL = 0xA052;\n// const MAT_USE_XPFALL = 0xA240;\n// const MAT_REFBLUR = 0xA053;\n// const MAT_SHADING = 0xA100;\n// const MAT_USE_REFBLUR = 0xA250;\n// const MAT_SELF_ILLUM = 0xA084;\nconst MAT_TWO_SIDE = 0xA081;\n// const MAT_DECAL = 0xA082;\nconst MAT_ADDITIVE = 0xA083;\nconst MAT_WIRE = 0xA085;\n// const MAT_FACEMAP = 0xA088;\n// const MAT_TRANSFALLOFF_IN = 0xA08A;\n// const MAT_PHONGSOFT = 0xA08C;\n// const MAT_WIREABS = 0xA08E;\nconst MAT_WIRE_SIZE = 0xA087;\nconst MAT_TEXMAP = 0xA200;\n// const MAT_SXP_TEXT_DATA = 0xA320;\n// const MAT_TEXMASK = 0xA33E;\n// const MAT_SXP_TEXTMASK_DATA = 0xA32A;\n// const MAT_TEX2MAP = 0xA33A;\n// const MAT_SXP_TEXT2_DATA = 0xA321;\n// const MAT_TEX2MASK = 0xA340;\n// const MAT_SXP_TEXT2MASK_DATA = 0xA32C;\nconst MAT_OPACMAP = 0xA210;\n// const MAT_SXP_OPAC_DATA = 0xA322;\n// const MAT_OPACMASK = 0xA342;\n// const MAT_SXP_OPACMASK_DATA = 0xA32E;\nconst MAT_BUMPMAP = 0xA230;\n// const MAT_SXP_BUMP_DATA = 0xA324;\n// const MAT_BUMPMASK = 0xA344;\n// const MAT_SXP_BUMPMASK_DATA = 0xA330;\nconst MAT_SPECMAP = 0xA204;\n// const MAT_SXP_SPEC_DATA = 0xA325;\n// const MAT_SPECMASK = 0xA348;\n// const MAT_SXP_SPECMASK_DATA = 0xA332;\n// const MAT_SHINMAP = 0xA33C;\n// const MAT_SXP_SHIN_DATA = 0xA326;\n// const MAT_SHINMASK = 0xA346;\n// const MAT_SXP_SHINMASK_DATA = 0xA334;\n// const MAT_SELFIMAP = 0xA33D;\n// const MAT_SXP_SELFI_DATA = 0xA328;\n// const MAT_SELFIMASK = 0xA34A;\n// const MAT_SXP_SELFIMASK_DATA = 0xA336;\n// const MAT_REFLMAP = 0xA220;\n// const MAT_REFLMASK = 0xA34C;\n// const MAT_SXP_REFLMASK_DATA = 0xA338;\n// const MAT_ACUBIC = 0xA310;\nconst MAT_MAPNAME = 0xA300;\n// const MAT_MAP_TILING = 0xA351;\n// const MAT_MAP_TEXBLUR = 0xA353;\nconst MAT_MAP_USCALE = 0xA354;\nconst MAT_MAP_VSCALE = 0xA356;\nconst MAT_MAP_UOFFSET = 0xA358;\nconst MAT_MAP_VOFFSET = 0xA35A;\n// const MAT_MAP_ANG = 0xA35C;\n// const MAT_MAP_COL1 = 0xA360;\n// const MAT_MAP_COL2 = 0xA362;\n// const MAT_MAP_RCOL = 0xA364;\n// const MAT_MAP_GCOL = 0xA366;\n// const MAT_MAP_BCOL = 0xA368;\nconst NAMED_OBJECT = 0x4000;\n// const N_DIRECT_LIGHT = 0x4600;\n// const DL_OFF = 0x4620;\n// const DL_OUTER_RANGE = 0x465A;\n// const DL_INNER_RANGE = 0x4659;\n// const DL_MULTIPLIER = 0x465B;\n// const DL_EXCLUDE = 0x4654;\n// const DL_ATTENUATE = 0x4625;\n// const DL_SPOTLIGHT = 0x4610;\n// const DL_SPOT_ROLL = 0x4656;\n// const DL_SHADOWED = 0x4630;\n// const DL_LOCAL_SHADOW2 = 0x4641;\n// const DL_SEE_CONE = 0x4650;\n// const DL_SPOT_RECTANGULAR = 0x4651;\n// const DL_SPOT_ASPECT = 0x4657;\n// const DL_SPOT_PROJECTOR = 0x4653;\n// const DL_SPOT_OVERSHOOT = 0x4652;\n// const DL_RAY_BIAS = 0x4658;\n// const DL_RAYSHAD = 0x4627;\n// const N_CAMERA = 0x4700;\n// const CAM_SEE_CONE = 0x4710;\n// const CAM_RANGES = 0x4720;\n// const OBJ_HIDDEN = 0x4010;\n// const OBJ_VIS_LOFTER = 0x4011;\n// const OBJ_DOESNT_CAST = 0x4012;\n// const OBJ_DONT_RECVSHADOW = 0x4017;\n// const OBJ_MATTE = 0x4013;\n// const OBJ_FAST = 0x4014;\n// const OBJ_PROCEDURAL = 0x4015;\n// const OBJ_FROZEN = 0x4016;\nconst N_TRI_OBJECT = 0x4100;\nconst POINT_ARRAY = 0x4110;\n// const POINT_FLAG_ARRAY = 0x4111;\nconst FACE_ARRAY = 0x4120;\nconst MSH_MAT_GROUP = 0x4130;\n// const SMOOTH_GROUP = 0x4150;\n// const MSH_BOXMAP = 0x4190;\nconst TEX_VERTS = 0x4140;\nconst MESH_MATRIX = 0x4160;\n// const MESH_COLOR = 0x4165;\n// const MESH_TEXTURE_INFO = 0x4170;\n// const KFDATA = 0xB000;\n// const KFHDR = 0xB00A;\n// const KFSEG = 0xB008;\n// const KFCURTIME = 0xB009;\n// const AMBIENT_NODE_TAG = 0xB001;\n// const OBJECT_NODE_TAG = 0xB002;\n// const CAMERA_NODE_TAG = 0xB003;\n// const TARGET_NODE_TAG = 0xB004;\n// const LIGHT_NODE_TAG = 0xB005;\n// const L_TARGET_NODE_TAG = 0xB006;\n// const SPOTLIGHT_NODE_TAG = 0xB007;\n// const NODE_ID = 0xB030;\n// const NODE_HDR = 0xB010;\n// const PIVOT = 0xB013;\n// const INSTANCE_NAME = 0xB011;\n// const MORPH_SMOOTH = 0xB015;\n// const BOUNDBOX = 0xB014;\n// const POS_TRACK_TAG = 0xB020;\n// const COL_TRACK_TAG = 0xB025;\n// const ROT_TRACK_TAG = 0xB021;\n// const SCL_TRACK_TAG = 0xB022;\n// const MORPH_TRACK_TAG = 0xB026;\n// const FOV_TRACK_TAG = 0xB023;\n// const ROLL_TRACK_TAG = 0xB024;\n// const HOT_TRACK_TAG = 0xB027;\n// const FALL_TRACK_TAG = 0xB028;\n// const HIDE_TRACK_TAG = 0xB029;\n// const POLY_2D = 0x5000;\n// const SHAPE_OK = 0x5010;\n// const SHAPE_NOT_OK = 0x5011;\n// const SHAPE_HOOK = 0x5020;\n// const PATH_3D = 0x6000;\n// const PATH_MATRIX = 0x6005;\n// const SHAPE_2D = 0x6010;\n// const M_SCALE = 0x6020;\n// const M_TWIST = 0x6030;\n// const M_TEETER = 0x6040;\n// const M_FIT = 0x6050;\n// const M_BEVEL = 0x6060;\n// const XZ_CURVE = 0x6070;\n// const YZ_CURVE = 0x6080;\n// const INTERPCT = 0x6090;\n// const DEFORM_LIMIT = 0x60A0;\n// const USE_CONTOUR = 0x6100;\n// const USE_TWEEN = 0x6110;\n// const USE_SCALE = 0x6120;\n// const USE_TWIST = 0x6130;\n// const USE_TEETER = 0x6140;\n// const USE_FIT = 0x6150;\n// const USE_BEVEL = 0x6160;\n// const DEFAULT_VIEW = 0x3000;\n// const VIEW_TOP = 0x3010;\n// const VIEW_BOTTOM = 0x3020;\n// const VIEW_LEFT = 0x3030;\n// const VIEW_RIGHT = 0x3040;\n// const VIEW_FRONT = 0x3050;\n// const VIEW_BACK = 0x3060;\n// const VIEW_USER = 0x3070;\n// const VIEW_CAMERA = 0x3080;\n// const VIEW_WINDOW = 0x3090;\n// const VIEWPORT_LAYOUT_OLD = 0x7000;\n// const VIEWPORT_DATA_OLD = 0x7010;\n// const VIEWPORT_LAYOUT = 0x7001;\n// const VIEWPORT_DATA = 0x7011;\n// const VIEWPORT_DATA_3 = 0x7012;\n// const VIEWPORT_SIZE = 0x7020;\n// const NETWORK_VIEW = 0x7030;\n\nexport { TDSLoader };\n","var $ = require('../internals/export');\nvar repeat = require('../internals/string-repeat');\n\n// `String.prototype.repeat` method\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","var map = {\n\t\"./GlassFrontShader/V.glsl\": \"c444\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"5303\";","import {\n\tBoxGeometry,\n\tVector3\n} from 'three';\n\nconst _tempNormal = new Vector3();\n\nfunction getUv( faceDirVector, normal, uvAxis, projectionAxis, radius, sideLength ) {\n\n\tconst totArcLength = 2 * Math.PI * radius / 4;\n\n\t// length of the planes between the arcs on each axis\n\tconst centerLength = Math.max( sideLength - 2 * radius, 0 );\n\tconst halfArc = Math.PI / 4;\n\n\t// Get the vector projected onto the Y plane\n\t_tempNormal.copy( normal );\n\t_tempNormal[ projectionAxis ] = 0;\n\t_tempNormal.normalize();\n\n\t// total amount of UV space alloted to a single arc\n\tconst arcUvRatio = 0.5 * totArcLength / ( totArcLength + centerLength );\n\n\t// the distance along one arc the point is at\n\tconst arcAngleRatio = 1.0 - ( _tempNormal.angleTo( faceDirVector ) / halfArc );\n\n\tif ( Math.sign( _tempNormal[ uvAxis ] ) === 1 ) {\n\n\t\treturn arcAngleRatio * arcUvRatio;\n\n\t} else {\n\n\t\t// total amount of UV space alloted to the plane between the arcs\n\t\tconst lenUv = centerLength / ( totArcLength + centerLength );\n\t\treturn lenUv + arcUvRatio + arcUvRatio * ( 1.0 - arcAngleRatio );\n\n\t}\n\n}\n\nclass RoundedBoxGeometry extends BoxGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, segments = 2, radius = 0.1 ) {\n\n\t\t// ensure segments is odd so we have a plane connecting the rounded corners\n\t\tsegments = segments * 2 + 1;\n\n\t\t// ensure radius isn't bigger than shortest side\n\t\tradius = Math.min( width / 2, height / 2, depth / 2, radius );\n\n\t\tsuper( 1, 1, 1, segments, segments, segments );\n\n\t\t// if we just have one segment we're the same as a regular box\n\t\tif ( segments === 1 ) return;\n\n\t\tconst geometry2 = this.toNonIndexed();\n\n\t\tthis.index = null;\n\t\tthis.attributes.position = geometry2.attributes.position;\n\t\tthis.attributes.normal = geometry2.attributes.normal;\n\t\tthis.attributes.uv = geometry2.attributes.uv;\n\n\t\t//\n\n\t\tconst position = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst box = new Vector3( width, height, depth ).divideScalar( 2 ).subScalar( radius );\n\n\t\tconst positions = this.attributes.position.array;\n\t\tconst normals = this.attributes.normal.array;\n\t\tconst uvs = this.attributes.uv.array;\n\n\t\tconst faceTris = positions.length / 6;\n\t\tconst faceDirVector = new Vector3();\n\t\tconst halfSegmentSize = 0.5 / segments;\n\n\t\tfor ( let i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tposition.fromArray( positions, i );\n\t\t\tnormal.copy( position );\n\t\t\tnormal.x -= Math.sign( normal.x ) * halfSegmentSize;\n\t\t\tnormal.y -= Math.sign( normal.y ) * halfSegmentSize;\n\t\t\tnormal.z -= Math.sign( normal.z ) * halfSegmentSize;\n\t\t\tnormal.normalize();\n\n\t\t\tpositions[ i + 0 ] = box.x * Math.sign( position.x ) + normal.x * radius;\n\t\t\tpositions[ i + 1 ] = box.y * Math.sign( position.y ) + normal.y * radius;\n\t\t\tpositions[ i + 2 ] = box.z * Math.sign( position.z ) + normal.z * radius;\n\n\t\t\tnormals[ i + 0 ] = normal.x;\n\t\t\tnormals[ i + 1 ] = normal.y;\n\t\t\tnormals[ i + 2 ] = normal.z;\n\n\t\t\tconst side = Math.floor( i / faceTris );\n\n\t\t\tswitch ( side ) {\n\n\t\t\t\tcase 0: // right\n\n\t\t\t\t\t// generate UVs along Z then Y\n\t\t\t\t\tfaceDirVector.set( 1, 0, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = getUv( faceDirVector, normal, 'z', 'y', radius, depth );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'z', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // left\n\n\t\t\t\t\t// generate UVs along Z then Y\n\t\t\t\t\tfaceDirVector.set( - 1, 0, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'z', 'y', radius, depth );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'z', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // top\n\n\t\t\t\t\t// generate UVs along X then Z\n\t\t\t\t\tfaceDirVector.set( 0, 1, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'x', 'z', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = getUv( faceDirVector, normal, 'z', 'x', radius, depth );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // bottom\n\n\t\t\t\t\t// generate UVs along X then Z\n\t\t\t\t\tfaceDirVector.set( 0, - 1, 0 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'x', 'z', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'z', 'x', radius, depth );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 4: // front\n\n\t\t\t\t\t// generate UVs along X then Y\n\t\t\t\t\tfaceDirVector.set( 0, 0, 1 );\n\t\t\t\t\tuvs[ j + 0 ] = 1.0 - getUv( faceDirVector, normal, 'x', 'y', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'x', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 5: // back\n\n\t\t\t\t\t// generate UVs along X then Y\n\t\t\t\t\tfaceDirVector.set( 0, 0, - 1 );\n\t\t\t\t\tuvs[ j + 0 ] = getUv( faceDirVector, normal, 'x', 'y', radius, width );\n\t\t\t\t\tuvs[ j + 1 ] = 1.0 - getUv( faceDirVector, normal, 'y', 'x', radius, height );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { RoundedBoxGeometry };\n","export function loadShader(shaderName: string): Array<string> {\r\n    try {\r\n        var vertexShader = require('./' + shaderName + '/V.glsl')\r\n        var fragShader = require('./' + shaderName + '/F.glsl')\r\n        return [vertexShader, fragShader]\r\n    }\r\n    catch(err) {\r\n        console.error('failed to fetch shader', err)\r\n        return ['', '']\r\n    }\r\n}","import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { RoundedBoxGeometry } from 'three/examples/jsm/geometries/RoundedBoxGeometry'\r\nimport { loadShader } from './ShaderLoader'\r\nimport { Stats } from 'three-stats'\r\nimport { ShaderMaterial } from 'three'\r\n\r\nexport class RefractionObject {\r\n    mesh: THREE.Mesh\r\n    originalMaterial: THREE.Material | THREE.Material[]\r\n    refractionMaterial: THREE.ShaderMaterial\r\n    backColor: THREE.Color\r\n    refractionMaterialUniforms: { [uniform: string]: THREE.IUniform }\r\n    // suResolution: THREE.Vector2\r\n    // suBackground: THREE.Texture\r\n    // suDepth: THREE.DepthTexture\r\n    constructor(scene: THREE.Scene, mesh: THREE.Mesh, suResolution: THREE.Vector2, suBackground: THREE.Texture, suImage: THREE.Texture | null, suDepth: THREE.DepthTexture,\r\n        backColor: THREE.Color, absorbColor: number, suRefractionFactor: number, suOpacity: number) {\r\n        this.mesh = mesh\r\n        this.mesh['refractionObject'] = this\r\n        // copy material\r\n        if (this.mesh.material instanceof Array) {\r\n            this.originalMaterial = new Array<THREE.Material>()\r\n            for (let i = 0; i < this.mesh.material.length; i++) {\r\n                this.originalMaterial.push(this.mesh.material[i].clone())\r\n            }\r\n        }\r\n        else {\r\n            this.originalMaterial = this.mesh.material.clone()\r\n        }\r\n        this.backColor = backColor\r\n        this.refractionMaterialUniforms = {\r\n            \"resolution\": { value: suResolution },\r\n            \"tBackground\":    { value: suBackground },\r\n            \"tBackDepth\": { value: suDepth },\r\n            \"tDisplayImage\": { value: suImage },\r\n            \"tSkybox\": { value: scene.environment },\r\n            \"refractionFactor\": { value: suRefractionFactor },\r\n            \"opacity\": { value: suOpacity },\r\n            \"absorbColor\": { value: new THREE.Color(absorbColor) },\r\n            \"objectCenter\": { value: mesh.position },\r\n        }\r\n        var [glassFrontVS, glassFrontFS] = loadShader('GlassFrontShader')\r\n        this.refractionMaterial = new ShaderMaterial({\r\n            vertexShader:   glassFrontVS,\r\n            fragmentShader: glassFrontFS,\r\n            uniforms: this.refractionMaterialUniforms,\r\n            // depthTest: false,\r\n            // stencilWrite: true,\r\n            // stencilRef: 999,\r\n            // stencilZPass: THREE.ReplaceStencilOp,  // write if the depth buffer test passes\r\n            side: THREE.FrontSide\r\n        })\r\n    }\r\n}\r\n\r\nexport class RefractionManager {\r\n    container: HTMLElement\r\n    backgroundScene: THREE.Scene\r\n    renderer: THREE.WebGLRenderer\r\n    camera: THREE.PerspectiveCamera\r\n\r\n    frontScene: THREE.Scene\r\n\r\n    backdepthTexture: THREE.DepthTexture\r\n    backRenderTarget: THREE.WebGLRenderTarget\r\n\r\n    refractionObjectList: Array<RefractionObject>\r\n\r\n    suResolution: THREE.Vector2\r\n\r\n    constructor(\r\n        backgroundScene: THREE.Scene, container: HTMLElement, renderer: THREE.WebGLRenderer, camera: THREE.PerspectiveCamera,\r\n        backDepthTextureSize: number = 512\r\n    ) {\r\n        this.container = container\r\n        this.backgroundScene = backgroundScene\r\n        this.renderer = renderer\r\n        this.camera = camera\r\n\r\n        this.frontScene = new THREE.Scene()\r\n        this.backdepthTexture = new THREE.DepthTexture(\r\n            backDepthTextureSize, backDepthTextureSize,\r\n            THREE.FloatType\r\n        )\r\n        this.backRenderTarget = new THREE.WebGLRenderTarget(\r\n            this.container.offsetWidth * window.devicePixelRatio,\r\n            this.container.offsetHeight * window.devicePixelRatio\r\n        )\r\n        this.backRenderTarget.depthBuffer = true;\r\n        this.backRenderTarget.depthTexture = this.backdepthTexture;\r\n        this.backRenderTarget.depthTexture.type = THREE.UnsignedIntType;\r\n        this.frontScene.background = this.backRenderTarget.texture\r\n        this.frontScene.environment = this.backgroundScene.environment\r\n        this.refractionObjectList = []\r\n        this.suResolution = new THREE.Vector2(\r\n            this.container.offsetWidth * window.devicePixelRatio,\r\n            this.container.offsetHeight * window.devicePixelRatio\r\n        )\r\n\r\n    }\r\n\r\n    genFresnelMaterial(textureCube: THREE.Texture | null) {\r\n        var shader = THREE.ShaderLib.lib[ \"fresnel\" ];\r\n        var uniforms = THREE.UniformsUtils.clone( shader.uniforms );\r\n\r\n        uniforms[ \"tCube\" ].value = textureCube;\r\n\r\n        var parameters = { fragmentShader: shader.fragmentShader, vertexShader: shader.vertexShader, uniforms: uniforms };\r\n        var material = new THREE.ShaderMaterial( parameters );\r\n        return material\r\n    }\r\n\r\n    addRefractionMesh(mesh: THREE.Mesh, setDefaultBacksideMaterial: boolean = true,\r\n        image: THREE.Texture | null,\r\n        backColor: number = 0xffffff,\r\n        absorbColor: number = 0x000000, refractionFactor: number = 1.49, opacityFactor: number = 0.2) {\r\n        const _backColor = new THREE.Color(backColor)\r\n        if (setDefaultBacksideMaterial) {\r\n            mesh.material = new THREE.MeshPhysicalMaterial({\r\n                color: _backColor,\r\n                transparent: true,\r\n                opacity: 0.5,\r\n                metalness: 1,\r\n                reflectivity: 0,\r\n                roughness: 0,\r\n                side: THREE.BackSide\r\n                // colorWrite: false\r\n            })\r\n            // mesh.material = this.genFresnelMaterial(this.backgroundScene.environment)\r\n        }\r\n        this.refractionObjectList.push(new RefractionObject(\r\n            this.backgroundScene,\r\n            mesh,\r\n            this.suResolution,\r\n            this.backRenderTarget.texture,\r\n            image,\r\n            this.backRenderTarget.depthTexture,\r\n            _backColor,\r\n            absorbColor,\r\n            refractionFactor,\r\n            opacityFactor\r\n        ))\r\n        this.backgroundScene.add(mesh)\r\n    }\r\n\r\n    onWindowResize() {\r\n        this.suResolution.x = this.container.offsetWidth * window.devicePixelRatio\r\n        this.suResolution.y = this.container.offsetHeight * window.devicePixelRatio\r\n    }\r\n\r\n    render() {\r\n        this.refractionObjectList.forEach(refObj => {\r\n            refObj.mesh.material = refObj.refractionMaterial\r\n            this.frontScene.add(refObj.mesh)\r\n        })\r\n\r\n        this.renderer.setRenderTarget(null)\r\n        this.renderer.render(this.frontScene, this.camera)\r\n\r\n        this.refractionObjectList.forEach(refObj => {\r\n            refObj.mesh.material = refObj.originalMaterial\r\n            this.backgroundScene.add(refObj.mesh)\r\n        })\r\n    }\r\n}\r\n\r\nvar container: HTMLElement\r\nvar renderer: THREE.WebGLRenderer, camera: THREE.PerspectiveCamera, controls: OrbitControls\r\nvar stats: Stats\r\nvar scene: THREE.Scene\r\nvar rm: RefractionManager\r\n\r\nexport function initScene(_container: HTMLElement) {\r\n    container = _container\r\n    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 5000 )\r\n    camera.position.set(30, 20, 200)\r\n    camera.lookAt(0, 0, 0)\r\n\r\n    scene = new THREE.Scene()\r\n\r\n    renderer = new THREE.WebGLRenderer( {antialias: true, alpha: true} )\r\n    \r\n    renderer.setClearColor( 0xffffff )\r\n    renderer.setPixelRatio( window.devicePixelRatio )\r\n    renderer.setSize(window.innerWidth, window.innerHeight)\r\n    container.appendChild( renderer.domElement )\r\n    controls = new OrbitControls(camera, container)\r\n    container.style.position = 'absolute'\r\n    container.style.top = '0px'\r\n    container.style.left = '0px'\r\n    stats = new Stats()\r\n    stats.domElement.style.zIndex = '100'\r\n    container.appendChild( stats.domElement )\r\n\r\n    // set background\r\n    const r = './cube/'\r\n\r\n    const urls = [\r\n        r + 'px.jpg', r + 'nx.jpg',\r\n        r + 'py.jpg', r + 'ny.jpg',\r\n        r + 'pz.jpg', r + 'nz.jpg'\r\n    ]\r\n\r\n    const textureCube = new THREE.CubeTextureLoader().load( urls )\r\n    textureCube.mapping = THREE.CubeRefractionMapping\r\n\r\n    scene.background = textureCube\r\n    scene.environment = textureCube\r\n    \r\n    // set light\r\n    var light = new THREE.DirectionalLight()\r\n    light.position.x = 300\r\n    light.position.y = 200\r\n    light.position.z = 100\r\n    scene.add(light)\r\n\r\n    // set floor\r\n    var floorTexture = new THREE.TextureLoader().load( './checkerboard.jpg' )\r\n\tfloorTexture.wrapS = floorTexture.wrapT = THREE.RepeatWrapping\r\n\tfloorTexture.repeat.set( 10, 10 )\r\n    var floorMaterial = new THREE.MeshBasicMaterial( { map: floorTexture, side: THREE.DoubleSide } )\r\n\tvar floorGeometry = new THREE.PlaneGeometry(1000, 1000, 1, 1)\r\n\tvar floor = new THREE.Mesh(floorGeometry, floorMaterial)\r\n\tfloor.position.y -= 20.1\r\n\tfloor.rotation.x = Math.PI / 2\r\n    // scene.add(floor)\r\n\r\n    rm = new RefractionManager(scene, container, renderer, camera)\r\n\r\n    var glassMesh1 = new THREE.Mesh(\r\n        new RoundedBoxGeometry(40, 40, 40, 5, 5),\r\n        new THREE.MeshPhongMaterial({})\r\n    )\r\n    glassMesh1.position.x -= 40\r\n    var glassMesh2 = new THREE.Mesh(\r\n        new THREE.SphereGeometry( 20 ),\r\n        new THREE.MeshPhongMaterial({})\r\n    )\r\n    var glassMesh3 = new THREE.Mesh(\r\n        new THREE.CylinderGeometry( 20, 20, 80, 36 ),\r\n        new THREE.MeshPhongMaterial({})\r\n    )\r\n    glassMesh3.position.x += 40\r\n    glassMesh3.position.y += 20\r\n\r\n    rm.addRefractionMesh(glassMesh1, true, null, 0x000000, 0x000000)\r\n    rm.addRefractionMesh(glassMesh2, true, null, 0x006000, 0x006000)\r\n    rm.addRefractionMesh(glassMesh3, true, null, 0x000633, 0x000633)\r\n\r\n    // add a few spheres\r\n    var ballMesh = new THREE.Mesh(\r\n        new THREE.SphereGeometry( 20 ),\r\n        new THREE.MeshPhongMaterial({\r\n            color: 0xff0000\r\n        })\r\n    )\r\n    ballMesh.position.copy(glassMesh1.position)\r\n    ballMesh.position.z -= 50\r\n    scene.add(ballMesh)\r\n\r\n    window.addEventListener( 'resize', onWindowResize )\r\n    animate()\r\n\r\n}\r\n\r\nfunction onWindowResize() {\r\n\r\n    camera.aspect = window.innerWidth / window.innerHeight\r\n    camera.updateProjectionMatrix()\r\n    rm.onWindowResize()\r\n    renderer.setSize( window.innerWidth, window.innerHeight )\r\n\r\n}\r\n\r\nfunction animate() {\r\n    requestAnimationFrame( animate )\r\n    render()\r\n    controls.update()\r\n    stats.update()\r\n}\r\n\r\nfunction render()\r\n{\r\n    rm.render()\r\n}","module.exports = \"varying vec2 vUv;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 vCameraPosition;\\r\\nvarying vec4 vWorldPosition;\\r\\nvarying mat4 vProjectionMatrix;\\r\\n// varying vec3 vRefract;\\r\\n// varying vec2 vRefractOffset;\\r\\nvarying vec4 vImageUVCenter;\\r\\n\\r\\nuniform vec3 objectCenter;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\\r\\n    vec4 mvPosition = viewMatrix * vWorldPosition;\\r\\n    gl_Position = projectionMatrix * mvPosition;\\r\\n    vUv = uv;\\r\\n\\r\\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\\r\\n    vCameraPosition = cameraPosition;\\r\\n\\r\\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\\r\\n    vImageUVCenter = vProjectionMatrix * vec4( objectCenter, 1.0 );\\r\\n}\\r\\n\"","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","module.exports = \"uniform vec2 resolution;\\r\\nuniform sampler2D tBackground;\\r\\nuniform sampler2D tBackDepth;\\r\\nuniform sampler2D tDisplayImage;\\r\\n\\r\\nuniform samplerCube tSkybox;\\r\\nuniform vec3 absorbColor;\\r\\nuniform float refractionFactor;\\r\\nuniform float opacity;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 vCameraPosition;\\r\\nvarying vec4 vWorldPosition;\\r\\nvarying mat4 vProjectionMatrix;\\r\\nvarying vec4 vImageUVCenter;\\r\\n\\r\\nfloat near = 0.1;\\r\\nfloat far  = 5000.0;\\r\\n\\r\\nfloat LinearizeDepth(float depth) \\r\\n{\\r\\n    float z = depth * 2.0 - 1.0; // back to NDC \\r\\n    return (2.0 * near * far) / (far + near - z * (far - near));\\t\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\\r\\n    // return;\\r\\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\\r\\n    float frontDepth = gl_FragCoord.z;\\r\\n\\r\\n    if (frontDepth > backDepth) {\\r\\n        discard;\\r\\n    }\\r\\n\\r\\n    float backDepthlinear = LinearizeDepth(backDepth);\\r\\n    float frontDepthlinear = LinearizeDepth(frontDepth);\\r\\n    \\r\\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\\r\\n    backToFrontDepth *= 0.5;\\r\\n    \\r\\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\\r\\n    vCameraRay = normalize(vCameraRay);\\r\\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\\r\\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\\r\\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\\r\\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\\r\\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\\r\\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\\r\\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\\r\\n    offset = normalize(offset);\\r\\n\\r\\n    // reflect\\r\\n    vec3 vReflect = reflect( vCameraRay, vNormal );\\r\\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\\r\\n\\r\\n    // snell's law\\r\\n    float cosTheta1 = dot(vCameraRay, vNormal);\\r\\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\\r\\n    float sinTheta2 = sinTheta1 / refractionFactor;\\r\\n    float theta2 = asin(sinTheta2);\\r\\n    offset *= sinTheta2;\\r\\n    offset *= 100.0;\\r\\n\\r\\n    offset /= backDepth;\\r\\n\\r\\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\\r\\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\\r\\n\\r\\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\\r\\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\\r\\n\\r\\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\\r\\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\\r\\n    \\r\\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\\r\\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\\r\\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\\r\\n\\r\\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\\r\\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\\r\\n    float sqrtDepth = sqrt(backToFrontDepth) * opacity;\\r\\n    float absorbFactor = sqrtDepth / (1.0 + sqrtDepth);\\r\\n    vec3 refractCol = mix(backColor, absorbColor, absorbFactor);\\r\\n\\r\\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\\r\\n\\r\\n    // gl_FragColor = vec4(refCol, 1.0);\\r\\n    float reflectionCoeff = pow(sinTheta1, 4.0);\\r\\n    // reflectionCoeff = 1.0;\\r\\n\\r\\n    // vec4 image = vec4(vec3(texture2D( tDisplayImage, vec2( (gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y ) )), 1.0);\\r\\n    // vec4 image = vec4((gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y, 1.0, 1.0);\\r\\n    // vec4 image = vec4(1.0, 0.0, 0.0, 1.0);\\r\\n\\r\\n    // gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\\r\\n    gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\\r\\n    // gl_FragColor = image;\\r\\n    // if (gl_FragCoord.x < 600.0) {\\r\\n    //     gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\\r\\n    // }\\r\\n    // gl_FragColor = vec4(backColor, 1.0);\\r\\n    // gl_FragColor = vec4(vec3(backDepthlinear * 0.01), 1.0);\\r\\n}\"","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from 'three';\n\nclass Reflector extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Reflector';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Reflector.ReflectorShader;\n\n\t\t//\n\n\t\tconst reflectorPlane = new Plane();\n\t\tconst normal = new Vector3();\n\t\tconst reflectorWorldPosition = new Vector3();\n\t\tconst cameraWorldPosition = new Vector3();\n\t\tconst rotationMatrix = new Matrix4();\n\t\tconst lookAtPosition = new Vector3( 0, 0, - 1 );\n\t\tconst clipPlane = new Vector4();\n\n\t\tconst view = new Vector3();\n\t\tconst target = new Vector3();\n\t\tconst q = new Vector4();\n\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst virtualCamera = new PerspectiveCamera();\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight );\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader\n\t\t} );\n\n\t\tmaterial.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tmaterial.uniforms[ 'color' ].value = color;\n\t\tmaterial.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\tthis.material = material;\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\treflectorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\tview.subVectors( reflectorWorldPosition, cameraWorldPosition );\n\n\t\t\t// Avoid rendering when reflector is facing away\n\n\t\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\t\tview.reflect( normal ).negate();\n\t\t\tview.add( reflectorWorldPosition );\n\n\t\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\t\ttarget.subVectors( reflectorWorldPosition, lookAtPosition );\n\t\t\ttarget.reflect( normal ).negate();\n\t\t\ttarget.add( reflectorWorldPosition );\n\n\t\t\tvirtualCamera.position.copy( view );\n\t\t\tvirtualCamera.up.set( 0, 1, 0 );\n\t\t\tvirtualCamera.up.applyMatrix4( rotationMatrix );\n\t\t\tvirtualCamera.up.reflect( normal );\n\t\t\tvirtualCamera.lookAt( target );\n\n\t\t\tvirtualCamera.far = camera.far; // Used in WebGLBackground\n\n\t\t\tvirtualCamera.updateMatrixWorld();\n\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t// Update the texture matrix\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\t\t\ttextureMatrix.multiply( virtualCamera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( virtualCamera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\t\treflectorPlane.setFromNormalAndCoplanarPoint( normal, reflectorWorldPosition );\n\t\t\treflectorPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\tclipPlane.set( reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant );\n\n\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\tq.z = - 1.0;\n\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t// Calculate the scaled plane vector\n\t\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t\t// Replacing the third row of the projection matrix\n\t\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t\t// Render\n\n\t\t\trenderTarget.texture.encoding = renderer.outputEncoding;\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // Avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// Restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nReflector.prototype.isReflector = true;\n\nReflector.ReflectorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}`\n};\n\nexport { Reflector };\n","import {\r\n\tClock,\r\n\tColor,\r\n\tMatrix4,\r\n\tMesh,\r\n\tRepeatWrapping,\r\n\tShaderMaterial,\r\n\tTextureLoader,\r\n\tUniformsLib,\r\n\tUniformsUtils,\r\n\tVector2,\r\n\tVector4,\r\n    BufferGeometry,\r\n    Camera,\r\n    Material,\r\n    Group,\r\n    Scene\r\n} from 'three';\r\nimport { Reflector } from 'three/examples/jsm/objects/Reflector'\r\nimport { Refractor } from 'three/examples/jsm/objects/Refractor'\r\nimport { Water2Options } from 'three/examples/jsm/objects/Water2'\r\n/**\r\n * References:\r\n *\thttps://github.com/mrdoob/three.js/blob/dev/examples/jsm/objects/Water2.js\r\n *\r\n */\r\n\r\nclass SQWater extends Mesh {\r\n\r\n    material: ShaderMaterial\r\n\r\n\tconstructor( geometry: BufferGeometry, reflectionScene: Scene, options: Water2Options = {} ) {\r\n\r\n\t\tsuper( geometry );\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0xFFFFFF );\r\n\t\tconst textureWidth = options.textureWidth || 512;\r\n\t\tconst textureHeight = options.textureHeight || 512;\r\n\t\tconst clipBias = options.clipBias || 0;\r\n\t\tconst flowDirection = options.flowDirection || new Vector2( 1, 0 );\r\n\t\tconst flowSpeed = options.flowSpeed || 0.01;\r\n\t\tconst reflectivity = options.reflectivity || 0.5;\r\n\t\tconst scale = options.scale || 1;\r\n\t\tconst shader = WaterShader;\r\n\r\n\t\tconst textureLoader = new TextureLoader();\r\n\r\n\t\tconst normalMap0 = options.normalMap0 || textureLoader.load( './water/Water_1_M_Normal.jpg' );\r\n\t\tconst normalMap1 = options.normalMap1 || textureLoader.load( './water/Water_2_M_Normal.jpg' );\r\n\r\n\t\tconst cycle = 0.15; // a cycle of a flow map phase\r\n\t\tconst halfCycle = cycle * 0.5;\r\n\t\tconst textureMatrix = new Matrix4();\r\n\t\tconst clock = new Clock();\r\n        this.material = new ShaderMaterial()\r\n\t\t// internal components\r\n\r\n\t\tconst reflector = new Reflector( geometry, {\r\n\t\t\ttextureWidth: textureWidth,\r\n\t\t\ttextureHeight: textureHeight,\r\n\t\t\tclipBias: clipBias\r\n\t\t} );\r\n\r\n\t\treflector.matrixAutoUpdate = false\r\n\r\n\t\t// material\r\n\r\n\t\tthis.material = new ShaderMaterial( {\r\n\t\t\tuniforms: UniformsUtils.merge( [\r\n\t\t\t\tUniformsLib[ 'fog' ],\r\n\t\t\t\tshader.uniforms\r\n\t\t\t] ),\r\n\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\tfragmentShader: shader.fragmentShader,\r\n\t\t\ttransparent: true,\r\n\t\t\tfog: true\r\n\t\t} );\r\n\r\n        this.material.uniforms[ 'flowDirection' ].value = flowDirection\r\n\r\n\t\t// maps\r\n\r\n\t\tnormalMap0.wrapS = normalMap0.wrapT = RepeatWrapping;\r\n\t\tnormalMap1.wrapS = normalMap1.wrapT = RepeatWrapping;\r\n\r\n\t\tthis.material.uniforms[ 'tReflectionMap' ].value = reflector.getRenderTarget().texture;\r\n\t\tthis.material.uniforms[ 'tNormalMap0' ].value = normalMap0;\r\n\t\tthis.material.uniforms[ 'tNormalMap1' ].value = normalMap1;\r\n\r\n\t\t// water\r\n\r\n\t\tthis.material.uniforms[ 'reflectivity' ].value = reflectivity;\r\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\r\n\r\n\t\t// inital values\r\n\r\n\t\tthis.material.uniforms[ 'config' ].value.x = 0; // flowMapOffset0\r\n\t\tthis.material.uniforms[ 'config' ].value.y = halfCycle; // flowMapOffset1\r\n\t\tthis.material.uniforms[ 'config' ].value.z = halfCycle; // halfCycle\r\n\t\tthis.material.uniforms[ 'config' ].value.w = scale; // scale\r\n\r\n\t\t// functions\r\n\r\n\t\tfunction updateTextureMatrix( camera: Camera ) {\r\n\r\n\t\t\ttextureMatrix.set(\r\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t);\r\n\r\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\r\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\r\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tfunction updateFlow() {\r\n\r\n\t\t\tconst delta = clock.getDelta();\r\n\t\t\tconst config = scope.material.uniforms[ 'config' ];\r\n\r\n\t\t\tconfig.value.x += flowSpeed * delta; // flowMapOffset0\r\n\t\t\tconfig.value.y = config.value.x + halfCycle; // flowMapOffset1\r\n\r\n\t\t\t// Important: The distance between offsets should be always the value of \"halfCycle\".\r\n\t\t\t// Moreover, both offsets should be in the range of [ 0, cycle ].\r\n\t\t\t// This approach ensures a smooth water flow and avoids \"reset\" effects.\r\n\r\n\t\t\tif ( config.value.x >= cycle ) {\r\n\r\n\t\t\t\tconfig.value.x = 0;\r\n\t\t\t\tconfig.value.y = halfCycle;\r\n\r\n\t\t\t} else if ( config.value.y >= cycle ) {\r\n\r\n\t\t\t\tconfig.value.y = config.value.y - cycle;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tthis.onBeforeRender = function ( renderer, scene, camera: Camera, geometry: BufferGeometry, material: Material, group: Group ) {\r\n\r\n\t\t\tupdateTextureMatrix( camera );\r\n\t\t\tupdateFlow();\r\n\r\n\t\t\tscope.visible = false;\r\n\r\n\t\t\treflector.matrixWorld.copy( scope.matrixWorld );\r\n\r\n\t\t\treflector.onBeforeRender( renderer, reflectionScene, camera, geometry, material, group );\r\n\r\n\t\t\tscope.visible = true;\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst WaterShader = {\r\n\r\n\tuniforms: {\r\n\r\n\t\t'reflectivity': {\r\n\t\t\ttype: 'f',\r\n\t\t\tvalue: 0\r\n\t\t},\r\n\r\n\t\t'tReflectionMap': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'tRefractionMap': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'tNormalMap0': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'tNormalMap1': {\r\n\t\t\ttype: 't',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'textureMatrix': {\r\n\t\t\ttype: 'm4',\r\n\t\t\tvalue: null\r\n\t\t},\r\n\r\n\t\t'config': {\r\n\t\t\ttype: 'v4',\r\n\t\t\tvalue: new Vector4()\r\n\t\t},\r\n\r\n\t\t'flowDirection': {\r\n            type: 'v2',\r\n            value: new Vector2()\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tvertexShader: /* glsl */`\r\n\r\n\t\t#include <common>\r\n\t\t#include <fog_pars_vertex>\r\n\t\t#include <logdepthbuf_pars_vertex>\r\n\r\n\t\tuniform mat4 textureMatrix;\r\n\r\n\t\tvarying vec4 vCoord;\r\n\t\tvarying vec2 vUv;\r\n\t\tvarying vec3 vToEye;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = uv;\r\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\r\n\r\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\r\n\t\t\tgl_Position = projectionMatrix * mvPosition;\r\n\r\n\t\t\t#include <logdepthbuf_vertex>\r\n\t\t\t#include <fog_vertex>\r\n\r\n\t\t}`,\r\n\r\n\tfragmentShader: /* glsl */`\r\n\r\n\t\t#include <common>\r\n\t\t#include <fog_pars_fragment>\r\n\t\t#include <logdepthbuf_pars_fragment>\r\n\r\n\t\tuniform sampler2D tReflectionMap;\r\n\t\tuniform sampler2D tRefractionMap;\r\n\t\tuniform sampler2D tNormalMap0;\r\n\t\tuniform sampler2D tNormalMap1;\r\n\r\n\t\tuniform vec2 flowDirection;\r\n\r\n\t\tuniform float reflectivity;\r\n\t\tuniform vec4 config;\r\n\r\n\t\tvarying vec4 vCoord;\r\n\t\tvarying vec2 vUv;\r\n\t\tvarying vec3 vToEye;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\t#include <logdepthbuf_fragment>\r\n\r\n\t\t\tfloat flowMapOffset0 = config.x;\r\n\t\t\tfloat flowMapOffset1 = config.y;\r\n\t\t\tfloat halfCycle = config.z;\r\n\t\t\tfloat scale = config.w;\r\n\r\n\t\t\tvec3 toEye = normalize( vToEye );\r\n\r\n\t\t\t// determine flow direction\r\n\t\t\tvec2 flow;\r\n\t\t\tflow = flowDirection;\r\n\t\t\tflow.x *= - 1.0;\r\n\r\n\t\t\t// sample normal maps (distort uvs with flowdata)\r\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\r\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\r\n\r\n\t\t\t// linear interpolate to get the final normal color\r\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\r\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\r\n\r\n\t\t\t// calculate normal vector\r\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\r\n\r\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\r\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\r\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\r\n            reflectance = pow(reflectance + 0.3, 4.0);\r\n            // reflectance = floor(reflectance *  2.0) / 4.0;\r\n            vec4 refractColor = vec4(1.0);\r\n\r\n\t\t\t// calculate final uv coords\r\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\r\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\r\n\r\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\r\n            reflectColor *= vec4(1.0, 1.0, 0.8, 1.0);\r\n\r\n\t\t\tgl_FragColor = mix(refractColor, reflectColor, reflectance);\r\n\r\n\t\t\t#include <tonemapping_fragment>\r\n\t\t\t#include <encodings_fragment>\r\n\t\t\t#include <fog_fragment>\r\n\r\n\t\t}`\r\n\r\n};\r\n\r\nexport { SQWater };","import * as TWEEN from '@tweenjs/tween.js'\r\nimport * as THREE from 'three'\r\n// import store from '@/store'\r\nimport * as GEOM from '../GeomUtils'\r\n\r\nclass TweenAnimController {\r\n    animationObjectCount: number\r\n    requestId: number\r\n    constructor() {\r\n        this.animationObjectCount = 0\r\n        this.requestId = -1\r\n    }\r\n    addTweenAnimObject() {\r\n        if(this.animationObjectCount <= 0) {\r\n            this.startAnim()\r\n        }\r\n        this.animationObjectCount ++\r\n    }\r\n    removeTweenAnimObject() {\r\n        if (this.animationObjectCount <= 0) {\r\n            return\r\n        }\r\n        if(this.animationObjectCount == 1) {\r\n            this.stopAnim()\r\n        }\r\n        this.animationObjectCount --\r\n    }\r\n    loopAnim = () => {\r\n        TWEEN.update()\r\n        if (this.requestId >= 0) {\r\n            this.requestId = window.requestAnimationFrame(this.loopAnim)\r\n        }\r\n    }\r\n    startAnim = () => {\r\n        if (this.requestId < 0) {\r\n            this.requestId = window.requestAnimationFrame(this.loopAnim)\r\n        }\r\n    }\r\n    stopAnim = () => {\r\n        if (this.requestId >= 0) {\r\n            window.cancelAnimationFrame(this.requestId)\r\n            this.requestId = -1\r\n        }\r\n    }\r\n    tweenNumber(\r\n            fromValue: number,\r\n            toValue: number,\r\n            onUpdateFunc: (value: number) => any,\r\n            onCompleteFunc: (value: number) => any,\r\n            duration: number = 1000,\r\n            easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n        ): void {\r\n        const v = { a: fromValue }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v)\r\n            .to({ a: toValue }, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(v.a))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(v.a)\r\n            }).start()\r\n    }\r\n    tweenVector2(\r\n        fromValue: GEOM.Vector2,\r\n        toValue: GEOM.Vector2,\r\n        onUpdateFunc: (x: number, y: number) => any,\r\n        onCompleteFunc: (x: number, y: number) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y }\r\n        const v2 = { x: toValue.x, y: toValue.y }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(v1.x, v1.y))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(v1.x, v1.y)\r\n            }).start()\r\n    }\r\n    tweenVector3(\r\n        fromValue: GEOM.Vector3,\r\n        toValue: GEOM.Vector3,\r\n        onUpdateFunc: (x: number, y: number, z: number) => any,\r\n        onCompleteFunc: (x: number, y: number, z: number) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y, z: fromValue.z }\r\n        const v2 = { x: toValue.x, y: toValue.y, z: toValue.z }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(v1.x, v1.y, v1.z))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(v1.x, v1.y, v1.z)\r\n            }).start()\r\n    }\r\n    tweenEuler(\r\n        fromValue: THREE.Euler,\r\n        toValue: THREE.Euler,\r\n        onUpdateFunc: (eu: THREE.Euler) => any,\r\n        onCompleteFunc: (eu: THREE.Euler) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y, z: fromValue.z }\r\n        const v2 = { x: toValue.x, y: toValue.y, z: toValue.z }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(new THREE.Euler(v1.x, v1.y, v1.z)))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(new THREE.Euler(v1.x, v1.y, v1.z))\r\n            }).start()\r\n    }\r\n    tweenThreeVector3(\r\n        fromValue: THREE.Vector3,\r\n        toValue: THREE.Vector3,\r\n        onUpdateFunc: (eu: THREE.Vector3) => any,\r\n        onCompleteFunc: (eu: THREE.Vector3) => any,\r\n        duration: number = 1000,\r\n        easing: (amount: number) => number = TWEEN.Easing.Quadratic.InOut\r\n    ): void {\r\n        const v1 = { x: fromValue.x, y: fromValue.y, z: fromValue.z }\r\n        const v2 = { x: toValue.x, y: toValue.y, z: toValue.z }\r\n        this.addTweenAnimObject()\r\n        new TWEEN.Tween(v1)\r\n            .to(v2, duration)\r\n            .easing(easing)\r\n            .onUpdate(() => onUpdateFunc(new THREE.Vector3(v1.x, v1.y, v1.z)))\r\n            .onComplete(() => {\r\n                this.removeTweenAnimObject()\r\n                onCompleteFunc(new THREE.Vector3(v1.x, v1.y, v1.z))\r\n            }).start()\r\n    }\r\n}\r\n\r\nconst controller = new TweenAnimController()\r\n\r\nexport { controller }"],"sourceRoot":""}
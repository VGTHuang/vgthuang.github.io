{"version":3,"sources":["webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./node_modules/core-js/modules/es.weak-map.js","webpack:///./src/views/ThreeSceneTest.vue?dfa0","webpack:///./node_modules/three/examples/jsm/shaders/CopyShader.js","webpack:///./node_modules/three/examples/jsm/postprocessing/Pass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/ShaderPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/MaskPass.js","webpack:///./node_modules/three/examples/jsm/postprocessing/EffectComposer.js","webpack:///./node_modules/three/examples/jsm/postprocessing/RenderPass.js","webpack:///./node_modules/three/examples/jsm/shaders/FXAAShader.js","webpack:///./src/scripts/Three/ShaderLoader.ts","webpack:///./src/scripts/Three/TardisCard.ts","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createSuper.js","webpack:///./src/scripts/Three/ThreeSceneLoader.ts","webpack:///./src/scripts/Three/CustomCSS3DRenderer.ts","webpack:///./src/scripts/Three/Utils.ts","webpack:///./src/views/ThreeSceneTest.vue","webpack:///./src/views/ThreeSceneTest.vue?8407","webpack:///./src/views/ThreeSceneTest.vue?51e8","webpack:///./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///./src/views/ThreeSceneTest.vue?96b2","webpack:///./node_modules/core-js/internals/object-is-extensible.js","webpack:///./src/scripts/Three sync ^\\.\\/.*\\/V\\.glsl$","webpack:///./node_modules/core-js/internals/collection.js","webpack:///./src/scripts/Three/GlassFrontShader/F.glsl","webpack:///./src/scripts/Three/FresnelShader/F.glsl","webpack:///./src/scripts/Three/CardSkyboxShader/V.glsl","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./src/scripts/Three/FresnelShader/V.glsl","webpack:///./src/scripts/Three sync ^\\.\\/.*\\/F\\.glsl$","webpack:///./src/scripts/Three/CardSkyboxShader/F.glsl","webpack:///./node_modules/core-js/internals/collection-weak.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./src/scripts/Three/GlassFrontShader/V.glsl","webpack:///./node_modules/core-js/internals/array-buffer-non-extensible.js","webpack:///./node_modules/core-js/internals/internal-metadata.js","webpack:///./node_modules/core-js/modules/es.reflect.to-string-tag.js"],"names":["global","uncurryThis","aCallable","isObject","hasOwn","arraySlice","NATIVE_BIND","Function","concat","join","factories","construct","C","argsLength","args","list","i","module","exports","bind","that","F","this","Prototype","prototype","partArgs","arguments","boundFunction","length","apply","InternalWeakMap","redefineAll","InternalMetadataModule","collection","collectionWeak","isExtensible","enforceInternalState","enforce","NATIVE_WEAK_MAP","IS_IE11","ActiveXObject","wrapper","init","undefined","$WeakMap","getConstructor","enable","WeakMapPrototype","nativeDelete","nativeHas","has","nativeGet","get","nativeSet","set","key","state","frozen","value","render","_vm","_h","$createElement","_c","_self","ref","attrs","_v","staticClass","on","cornerClicked","staticRenderFns","CopyShader","uniforms","vertexShader","fragmentShader","Pass","enabled","needsSwap","clear","renderToScreen","console","error","_camera","_geometry","setAttribute","material","_mesh","geometry","dispose","renderer","shader","textureID","super","clone","defines","Object","assign","fsQuad","writeBuffer","readBuffer","texture","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","scene","camera","inverse","context","getContext","writeValue","clearValue","buffers","color","setMask","depth","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","renderTarget","parameters","minFilter","magFilter","format","size","getSize","_pixelRatio","getPixelRatio","_width","width","_height","height","name","renderTarget1","renderTarget2","passes","copyPass","clock","tmp","pass","push","setSize","index","splice","indexOf","passIndex","deltaTime","getDelta","currentRenderTarget","getRenderTarget","maskActive","il","isLastEnabledPass","NOTEQUAL","swapBuffers","effectiveWidth","effectiveHeight","pixelRatio","overrideMaterial","clearColor","clearAlpha","clearDepth","_oldClearColor","oldAutoClear","autoClear","oldClearAlpha","oldOverrideMaterial","getClearColor","getClearAlpha","setClearColor","FXAAShader","loadShader","shaderName","fragShader","err","stencilId","cardOutsideScene","cardInsideScene","position","rotation","cardGeometry","cardMaterial","stencilWrite","stencilRef","stencilZPass","cardMesh","copy","add","isFocused","frontWallGeom","frontWallMesh","group","_recursiveGetGroupProperty","stencilFunc","children","forEach","v","Array","mat","thickness","positions","indices","points","tv","setFromPoints","computeVertexNormals","frontWallMat","textureCube","vs","fs","type","customMaterial","side","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inherits","subClass","superClass","TypeError","create","constructor","writable","configurable","defineProperty","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","sham","Proxy","Boolean","valueOf","call","e","_typeof","obj","Symbol","iterator","_possibleConstructorReturn","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","result","Super","NewTarget","possibleConstructorReturn","container","controls","fxaaPass","composer","stats","cornerObject","cornerObjectClone","cornerObjectController","cssScene","cssRenderer","cursorLightGroup","cursorLight","cursorLightController","mouseX","mouseY","glassBackScene","glassFrontScene","glassBackRenderTarget","glassBackdepthTexture","glassFrontMaterial","_position","_quaternion","_scale","element","document","createElement","style","pointerEvents","parentNode","removeChild","followObject","followObjectOffset","rotation2D","_matrix","_matrix2","domElement","_widthHalf","_heightHalf","cache","fov","objects","WeakMap","overflow","cameraElement","transformStyle","appendChild","projectionMatrix","elements","perspective","autoUpdate","updateMatrixWorld","parent","cameraCSSMatrix","getCameraCSSMatrix","matrixWorldInverse","transform","renderObject","Math","abs","matrix","epsilon","matrix3d","object","visible","layers","test","display","transpose","multiply","makeRotationZ","matrixWorld","decompose","setPosition","scale","getObjectCSSMatrix","cachedObject","objectData","l","damp","attract","targetPos","currentPos","velocity","childObjects","target","multiplyScalar","currentPath","sub","initScene","_container","window","innerWidth","innerHeight","lookAt","antialias","setPixelRatio","devicePixelRatio","OrbitControls","top","left","zIndex","tardisCard1","contentInTardisCard1","contentInTardisCard2","contentGroupInTardisCard1","z","addVisibleObjectGroup","glassNormalTexture","load","tardisCard2","contentInTardisCard3","metalness","roughness","clearcoat","normalMap","contentInTardisCard4","contentGroupInTardisCard2","hemiLight","dirLight","r","urls","reflectionTextureCube","environment","addFrontWall","reflectivity","clearcoatRoughness","addSkybox","intensity","decay","distance","addEventListener","clientX","clientY","renderPass1","renderPass2","x","offsetWidth","y","offsetHeight","addPass","stencilBuffer","depthBuffer","depthTexture","glassDiffuseMaterial","cornerGeom","map","transparent","random","PI","glassFrontVS","glassFrontFS","log","glassFrontUniforms","depthTest","addChildObj","background","onWindowResize","animate","registerCSSCoordinator","htmlContainer","htmlElem","getRaycastPos","posX","posY","ray","unproject","updatecornerObject","update","updateCursorLight","isNaN","camPosZ","targetPosVec","newz","aspect","updateProjectionMatrix","requestAnimationFrame","extend","mounted","$refs","HTMLElement","cornerObj","setFollowObject","methods","alert","component","$","fails","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","stat","forced","it","getBuiltIn","aConstructor","anObject","nativeConstruct","ObjectPrototype","NEW_TARGET_BUG","ARGS_BUG","FORCED","Target","newTarget","$args","proto","instance","createHTML","forcedStringHTMLMethod","classof","ARRAY_BUFFER_NON_EXTENSIBLE","$isExtensible","webpackContext","req","id","webpackContextResolve","__webpack_require__","Error","code","keys","resolve","isForced","redefine","iterate","anInstance","isCallable","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","CONSTRUCTOR_NAME","common","IS_MAP","IS_WEAK","ADDER","NativeConstructor","NativePrototype","Constructor","exported","fixMethod","KEY","uncurriedNativeMethod","entries","next","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","iterable","BUGGY_ZERO","$instance","dummy","AS_ENTRIES","setStrong","requireObjectCoercible","toString","quot","replace","string","tag","attribute","S","p1","getWeakData","ArrayIterationModule","InternalStateModule","setInternalState","internalStateGetterFor","getterFor","find","findIndex","uncaughtFrozenStore","store","UncaughtFrozenStore","findUncaughtFrozen","entry","getInternalState","define","data","METHOD_NAME","toLowerCase","split","preventExtensions","ArrayBuffer","buffer","hiddenKeys","f","getOwnPropertyNamesModule","getOwnPropertyNamesExternalModule","uid","FREEZING","REQUIRED","METADATA","setMetadata","objectID","weakData","fastKey","onFreeze","meta","getOwnPropertyNames"],"mappings":"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","file":"js/chunk-368d987e.6e9447f0.js","sourcesContent":["'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar arraySlice = require('../internals/array-slice');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar Function = global.Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = NATIVE_BIND ? Function.bind : function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefineAll = require('../internals/redefine-all');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\nvar isObject = require('../internals/is-object');\nvar isExtensible = require('../internals/object-is-extensible');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar NATIVE_WEAK_MAP = require('../internals/native-weak-map');\n\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.es/ecma262/#sec-weakmap-constructor\nvar $WeakMap = collection('WeakMap', wrapper, collectionWeak);\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP && IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.enable();\n  var WeakMapPrototype = $WeakMap.prototype;\n  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);\n  var nativeHas = uncurryThis(WeakMapPrototype.has);\n  var nativeGet = uncurryThis(WeakMapPrototype.get);\n  var nativeSet = uncurryThis(WeakMapPrototype.set);\n  redefineAll(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete(this, key) || state.frozen['delete'](key);\n      } return nativeDelete(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) || state.frozen.has(key);\n      } return nativeHas(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);\n      } return nativeGet(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet(this, key, value);\n      return this;\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"canvas-container\",attrs:{\"id\":\"canvas-container\"}}),_c('div',{ref:\"dom3d-container\",attrs:{\"id\":\"dom3d-container\"}},[_c('div',{ref:\"dom3d-test\",attrs:{\"id\":\"dom3d-test\"}},[_c('p',[_vm._v(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\")]),_c('p',[_vm._v(\"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\")])]),_c('div',{ref:\"dom3d-corner\",attrs:{\"id\":\"dom3d-corner\"}},[_c('div',{staticClass:\"dom3d-corner-ball\",on:{\"click\":_vm.cornerClicked}},[_c('div',{staticClass:\"dom3d-corner-ball__text\"},[_vm._v(\"click me!\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * Full-screen textured quad shader\n */\n\nvar CopyShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'opacity': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}`\n\n};\n\nexport { CopyShader };\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tOrthographicCamera,\n\tMesh\n} from 'three';\n\nclass Pass {\n\n\tconstructor() {\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nconst _geometry = new BufferGeometry();\n_geometry.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n_geometry.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Mesh( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\nexport { Pass, FullScreenQuad };\n","import {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\n\nclass ShaderPass extends Pass {\n\n\tconstructor( shader, textureID ) {\n\n\t\tsuper();\n\n\t\tthis.textureID = ( textureID !== undefined ) ? textureID : 'tDiffuse';\n\n\t\tif ( shader instanceof ShaderMaterial ) {\n\n\t\t\tthis.uniforms = shader.uniforms;\n\n\t\t\tthis.material = shader;\n\n\t\t} else if ( shader ) {\n\n\t\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t\tthis.material = new ShaderMaterial( {\n\n\t\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\t\tuniforms: this.uniforms,\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t\t} );\n\n\t\t}\n\n\t\tthis.fsQuad = new FullScreenQuad( this.material );\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n}\n\nexport { ShaderPass };\n","import { Pass } from './Pass.js';\n\nclass MaskPass extends Pass {\n\n\tconstructor( scene, camera ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.clear = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis.inverse = false;\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst context = renderer.getContext();\n\t\tconst state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tlet writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setLocked( false );\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t}\n\n}\n\nclass ClearMaskPass extends Pass {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.needsSwap = false;\n\n\t}\n\n\trender( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setLocked( false );\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n}\n\nexport { MaskPass, ClearMaskPass };\n","import {\n\tBufferGeometry,\n\tClock,\n\tFloat32BufferAttribute,\n\tLinearFilter,\n\tMesh,\n\tOrthographicCamera,\n\tRGBAFormat,\n\tVector2,\n\tWebGLRenderTarget\n} from 'three';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { ShaderPass } from './ShaderPass.js';\nimport { MaskPass } from './MaskPass.js';\nimport { ClearMaskPass } from './MaskPass.js';\n\nclass EffectComposer {\n\n\tconstructor( renderer, renderTarget ) {\n\n\t\tthis.renderer = renderer;\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst parameters = {\n\t\t\t\tminFilter: LinearFilter,\n\t\t\t\tmagFilter: LinearFilter,\n\t\t\t\tformat: RGBAFormat\n\t\t\t};\n\n\t\t\tconst size = renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, parameters );\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t\t} else {\n\n\t\t\tthis._pixelRatio = 1;\n\t\t\tthis._width = renderTarget.width;\n\t\t\tthis._height = renderTarget.height;\n\n\t\t}\n\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t\tthis.renderToScreen = true;\n\n\t\tthis.passes = [];\n\n\t\t// dependencies\n\n\t\tif ( CopyShader === undefined ) {\n\n\t\t\tconsole.error( 'THREE.EffectComposer relies on CopyShader' );\n\n\t\t}\n\n\t\tif ( ShaderPass === undefined ) {\n\n\t\t\tconsole.error( 'THREE.EffectComposer relies on ShaderPass' );\n\n\t\t}\n\n\t\tthis.copyPass = new ShaderPass( CopyShader );\n\n\t\tthis.clock = new Clock();\n\n\t}\n\n\tswapBuffers() {\n\n\t\tconst tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t}\n\n\taddPass( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tinsertPass( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tremovePass( pass ) {\n\n\t\tconst index = this.passes.indexOf( pass );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.passes.splice( index, 1 );\n\n\t\t}\n\n\t}\n\n\tisLastEnabledPass( passIndex ) {\n\n\t\tfor ( let i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\trender( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tconst currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tlet maskActive = false;\n\n\t\tfor ( let i = 0, il = this.passes.length; i < il; i ++ ) {\n\n\t\t\tconst pass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tconst context = this.renderer.getContext();\n\t\t\t\t\tconst stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\treset( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tconst effectiveWidth = this._width * this._pixelRatio;\n\t\tconst effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t}\n\n\tsetPixelRatio( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n}\n\n\nclass Pass {\n\n\tconstructor() {\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nconst _geometry = new BufferGeometry();\n_geometry.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n_geometry.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Mesh( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\nexport { EffectComposer, Pass, FullScreenQuad };\n","import {\n\tColor\n} from 'three';\nimport { Pass } from './Pass.js';\n\nclass RenderPass extends Pass {\n\n\tconstructor( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.overrideMaterial = overrideMaterial;\n\n\t\tthis.clearColor = clearColor;\n\t\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\t\tthis.clear = true;\n\t\tthis.clearDepth = false;\n\t\tthis.needsSwap = false;\n\t\tthis._oldClearColor = new Color();\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tlet oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\trenderer.render( this.scene, this.camera );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( this._oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n}\n\nexport { RenderPass };\n","import {\n\tVector2\n} from 'three';\n\n/**\n * NVIDIA FXAA by Timothy Lottes\n * https://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf\n * - WebGL port by @supereggbert\n * http://www.glge.org/demos/fxaa/\n */\n\nconst FXAAShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'resolution': { value: new Vector2( 1 / 1024, 1 / 512 ) }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader:\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:\t\t\t\tes3-kepler\\FXAA\\assets\\shaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:\t\t\t gameworks@nvidia.com\n\t// Site:\t\t\t\thttp://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//\t* Redistributions of source code must retain the above copyright\n\t//\t\tnotice, this list of conditions and the following disclaimer.\n\t//\t* Redistributions in binary form must reproduce the above copyright\n\t//\t\tnotice, this list of conditions and the following disclaimer in the\n\t//\t\tdocumentation and/or other materials provided with the distribution.\n\t//\t* Neither the name of NVIDIA CORPORATION nor the names of its\n\t//\t\tcontributors may be used to endorse or promote products derived\n\t//\t\tfrom this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS\\'\\' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.\tIN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t/* glsl */`\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\t#define FXAA_PC 1\n\t\t#define FXAA_GLSL_100 1\n\t\t#define FXAA_QUALITY_PRESET 12\n\n\t\t#define FXAA_GREEN_AS_LUMA 1\n\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_PC_CONSOLE\n\t\t\t\t//\n\t\t\t\t// The console algorithm for PC is included\n\t\t\t\t// for developers targeting really low spec machines.\n\t\t\t\t// Likely better to just run FXAA_PC, and use a really low preset.\n\t\t\t\t//\n\t\t\t\t#define FXAA_PC_CONSOLE 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GLSL_120\n\t\t\t\t#define FXAA_GLSL_120 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GLSL_130\n\t\t\t\t#define FXAA_GLSL_130 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_3\n\t\t\t\t#define FXAA_HLSL_3 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_4\n\t\t\t\t#define FXAA_HLSL_4 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_5\n\t\t\t\t#define FXAA_HLSL_5 0\n\t\t#endif\n\t\t/*==========================================================================*/\n\t\t#ifndef FXAA_GREEN_AS_LUMA\n\t\t\t\t//\n\t\t\t\t// For those using non-linear color,\n\t\t\t\t// and either not able to get luma in alpha, or not wanting to,\n\t\t\t\t// this enables FXAA to run using green as a proxy for luma.\n\t\t\t\t// So with this enabled, no need to pack luma in alpha.\n\t\t\t\t//\n\t\t\t\t// This will turn off AA on anything which lacks some amount of green.\n\t\t\t\t// Pure red and blue or combination of only R and B, will get no AA.\n\t\t\t\t//\n\t\t\t\t// Might want to lower the settings for both,\n\t\t\t\t//\t\tfxaaConsoleEdgeThresholdMin\n\t\t\t\t//\t\tfxaaQualityEdgeThresholdMin\n\t\t\t\t// In order to insure AA does not get turned off on colors\n\t\t\t\t// which contain a minor amount of green.\n\t\t\t\t//\n\t\t\t\t// 1 = On.\n\t\t\t\t// 0 = Off.\n\t\t\t\t//\n\t\t\t\t#define FXAA_GREEN_AS_LUMA 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_EARLY_EXIT\n\t\t\t\t//\n\t\t\t\t// Controls algorithm\\'s early exit path.\n\t\t\t\t// On PS3 turning this ON adds 2 cycles to the shader.\n\t\t\t\t// On 360 turning this OFF adds 10ths of a millisecond to the shader.\n\t\t\t\t// Turning this off on console will result in a more blurry image.\n\t\t\t\t// So this defaults to on.\n\t\t\t\t//\n\t\t\t\t// 1 = On.\n\t\t\t\t// 0 = Off.\n\t\t\t\t//\n\t\t\t\t#define FXAA_EARLY_EXIT 1\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_DISCARD\n\t\t\t\t//\n\t\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t\t//\n\t\t\t\t// 1 = Use discard on pixels which don\\'t need AA.\n\t\t\t\t//\t\t For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t\t// 0 = Return unchanged color on pixels which don\\'t need AA.\n\t\t\t\t//\n\t\t\t\t#define FXAA_DISCARD 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_FAST_PIXEL_OFFSET\n\t\t\t\t//\n\t\t\t\t// Used for GLSL 120 only.\n\t\t\t\t//\n\t\t\t\t// 1 = GL API supports fast pixel offsets\n\t\t\t\t// 0 = do not use fast pixel offsets\n\t\t\t\t//\n\t\t\t\t#ifdef GL_EXT_gpu_shader4\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_NV_gpu_shader5\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_ARB_gpu_shader5\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifndef FXAA_FAST_PIXEL_OFFSET\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 0\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GATHER4_ALPHA\n\t\t\t\t//\n\t\t\t\t// 1 = API supports gather4 on alpha channel.\n\t\t\t\t// 0 = API does not support gather4 on alpha channel.\n\t\t\t\t//\n\t\t\t\t#if (FXAA_HLSL_5 == 1)\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_ARB_gpu_shader5\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_NV_gpu_shader5\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifndef FXAA_GATHER4_ALPHA\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 0\n\t\t\t\t#endif\n\t\t#endif\n\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tFXAA QUALITY - TUNING KNOBS\n\t\t------------------------------------------------------------------------------\n\t\tNOTE the other tuning knobs are now in the shader function inputs!\n\t\t============================================================================*/\n\t\t#ifndef FXAA_QUALITY_PRESET\n\t\t\t\t//\n\t\t\t\t// Choose the quality preset.\n\t\t\t\t// This needs to be compiled into the shader as it effects code.\n\t\t\t\t// Best option to include multiple presets is to\n\t\t\t\t// in each shader define the preset, then include this file.\n\t\t\t\t//\n\t\t\t\t// OPTIONS\n\t\t\t\t// -----------------------------------------------------------------------\n\t\t\t\t// 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n\t\t\t\t// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n\t\t\t\t// 39\t\t\t - no dither, very expensive\n\t\t\t\t//\n\t\t\t\t// NOTES\n\t\t\t\t// -----------------------------------------------------------------------\n\t\t\t\t// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n\t\t\t\t// 13 = about same speed as FXAA 3.9 and better than 12\n\t\t\t\t// 23 = closest to FXAA 3.9 visually and performance wise\n\t\t\t\t//\t_ = the lowest digit is directly related to performance\n\t\t\t\t// _\t= the highest digit is directly related to style\n\t\t\t\t//\n\t\t\t\t#define FXAA_QUALITY_PRESET 12\n\t\t#endif\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - PRESETS\n\n\t\t============================================================================*/\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - MEDIUM DITHER PRESETS\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 10)\n\t\t\t\t#define FXAA_QUALITY_PS 3\n\t\t\t\t#define FXAA_QUALITY_P0 1.5\n\t\t\t\t#define FXAA_QUALITY_P1 3.0\n\t\t\t\t#define FXAA_QUALITY_P2 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 11)\n\t\t\t\t#define FXAA_QUALITY_PS 4\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 3.0\n\t\t\t\t#define FXAA_QUALITY_P3 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 12)\n\t\t\t\t#define FXAA_QUALITY_PS 5\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 4.0\n\t\t\t\t#define FXAA_QUALITY_P4 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 13)\n\t\t\t\t#define FXAA_QUALITY_PS 6\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 4.0\n\t\t\t\t#define FXAA_QUALITY_P5 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 14)\n\t\t\t\t#define FXAA_QUALITY_PS 7\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 4.0\n\t\t\t\t#define FXAA_QUALITY_P6 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 15)\n\t\t\t\t#define FXAA_QUALITY_PS 8\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 4.0\n\t\t\t\t#define FXAA_QUALITY_P7 12.0\n\t\t#endif\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - LOW DITHER PRESETS\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 20)\n\t\t\t\t#define FXAA_QUALITY_PS 3\n\t\t\t\t#define FXAA_QUALITY_P0 1.5\n\t\t\t\t#define FXAA_QUALITY_P1 2.0\n\t\t\t\t#define FXAA_QUALITY_P2 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 21)\n\t\t\t\t#define FXAA_QUALITY_PS 4\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 22)\n\t\t\t\t#define FXAA_QUALITY_PS 5\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 23)\n\t\t\t\t#define FXAA_QUALITY_PS 6\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 24)\n\t\t\t\t#define FXAA_QUALITY_PS 7\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 3.0\n\t\t\t\t#define FXAA_QUALITY_P6 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 25)\n\t\t\t\t#define FXAA_QUALITY_PS 8\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 4.0\n\t\t\t\t#define FXAA_QUALITY_P7 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 26)\n\t\t\t\t#define FXAA_QUALITY_PS 9\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 4.0\n\t\t\t\t#define FXAA_QUALITY_P8 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 27)\n\t\t\t\t#define FXAA_QUALITY_PS 10\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 4.0\n\t\t\t\t#define FXAA_QUALITY_P9 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 28)\n\t\t\t\t#define FXAA_QUALITY_PS 11\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 4.0\n\t\t\t\t#define FXAA_QUALITY_P10 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 29)\n\t\t\t\t#define FXAA_QUALITY_PS 12\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 2.0\n\t\t\t\t#define FXAA_QUALITY_P10 4.0\n\t\t\t\t#define FXAA_QUALITY_P11 8.0\n\t\t#endif\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - EXTREME QUALITY\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 39)\n\t\t\t\t#define FXAA_QUALITY_PS 12\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.0\n\t\t\t\t#define FXAA_QUALITY_P2 1.0\n\t\t\t\t#define FXAA_QUALITY_P3 1.0\n\t\t\t\t#define FXAA_QUALITY_P4 1.0\n\t\t\t\t#define FXAA_QUALITY_P5 1.5\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 2.0\n\t\t\t\t#define FXAA_QUALITY_P10 4.0\n\t\t\t\t#define FXAA_QUALITY_P11 8.0\n\t\t#endif\n\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAPI PORTING\n\n\t\t============================================================================*/\n\t\t#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n\t\t\t\t#define FxaaBool bool\n\t\t\t\t#define FxaaDiscard discard\n\t\t\t\t#define FxaaFloat float\n\t\t\t\t#define FxaaFloat2 vec2\n\t\t\t\t#define FxaaFloat3 vec3\n\t\t\t\t#define FxaaFloat4 vec4\n\t\t\t\t#define FxaaHalf float\n\t\t\t\t#define FxaaHalf2 vec2\n\t\t\t\t#define FxaaHalf3 vec3\n\t\t\t\t#define FxaaHalf4 vec4\n\t\t\t\t#define FxaaInt2 ivec2\n\t\t\t\t#define FxaaSat(x) clamp(x, 0.0, 1.0)\n\t\t\t\t#define FxaaTex sampler2D\n\t\t#else\n\t\t\t\t#define FxaaBool bool\n\t\t\t\t#define FxaaDiscard clip(-1)\n\t\t\t\t#define FxaaFloat float\n\t\t\t\t#define FxaaFloat2 float2\n\t\t\t\t#define FxaaFloat3 float3\n\t\t\t\t#define FxaaFloat4 float4\n\t\t\t\t#define FxaaHalf half\n\t\t\t\t#define FxaaHalf2 half2\n\t\t\t\t#define FxaaHalf3 half3\n\t\t\t\t#define FxaaHalf4 half4\n\t\t\t\t#define FxaaSat(x) saturate(x)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t#define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n\t\t\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_120 == 1)\n\t\t\t\t// Requires,\n\t\t\t\t//\t#version 120\n\t\t\t\t// And at least,\n\t\t\t\t//\t#extension GL_EXT_gpu_shader4 : enable\n\t\t\t\t//\t(or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n\t\t\t\t#define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n\t\t\t\t#if (FXAA_FAST_PIXEL_OFFSET == 1)\n\t\t\t\t\t\t#define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n\t\t\t\t#else\n\t\t\t\t\t\t#define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n\t\t\t\t#endif\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t// use #extension GL_ARB_gpu_shader5 : enable\n\t\t\t\t\t\t#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n\t\t\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n\t\t\t\t\t\t#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n\t\t\t\t\t\t#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_130 == 1)\n\t\t\t\t// Requires \"#version 130\" or better\n\t\t\t\t#define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t// use #extension GL_ARB_gpu_shader5 : enable\n\t\t\t\t\t\t#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n\t\t\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n\t\t\t\t\t\t#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n\t\t\t\t\t\t#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_3 == 1)\n\t\t\t\t#define FxaaInt2 float2\n\t\t\t\t#define FxaaTex sampler2D\n\t\t\t\t#define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\n\t\t\t\t#define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_4 == 1)\n\t\t\t\t#define FxaaInt2 int2\n\t\t\t\tstruct FxaaTex { SamplerState smpl; Texture2D tex; };\n\t\t\t\t#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_5 == 1)\n\t\t\t\t#define FxaaInt2 int2\n\t\t\t\tstruct FxaaTex { SamplerState smpl; Texture2D tex; };\n\t\t\t\t#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n\t\t\t\t#define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\n\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\n\t\t\t\t#define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\n\t\t\t\t#define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\n\t\t#endif\n\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t GREEN AS LUMA OPTION SUPPORT FUNCTION\n\t\t============================================================================*/\n\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\tFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n\t\t#else\n\t\t\t\tFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\t\t#endif\n\n\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t FXAA3 QUALITY - PC\n\n\t\t============================================================================*/\n\t\t#if (FXAA_PC == 1)\n\t\t/*--------------------------------------------------------------------------*/\n\t\tFxaaFloat4 FxaaPixelShader(\n\t\t\t\t//\n\t\t\t\t// Use noperspective interpolation here (turn off perspective interpolation).\n\t\t\t\t// {xy} = center of pixel\n\t\t\t\tFxaaFloat2 pos,\n\t\t\t\t//\n\t\t\t\t// Used only for FXAA Console, and not used on the 360 version.\n\t\t\t\t// Use noperspective interpolation here (turn off perspective interpolation).\n\t\t\t\t// {xy_} = upper left of pixel\n\t\t\t\t// {_zw} = lower right of pixel\n\t\t\t\tFxaaFloat4 fxaaConsolePosPos,\n\t\t\t\t//\n\t\t\t\t// Input color texture.\n\t\t\t\t// {rgb_} = color in linear or perceptual color space\n\t\t\t\t// if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t//\t\t {__a} = luma in perceptual color space (not linear)\n\t\t\t\tFxaaTex tex,\n\t\t\t\t//\n\t\t\t\t// Only used on the optimized 360 version of FXAA Console.\n\t\t\t\t// For everything but 360, just use the same input here as for \"tex\".\n\t\t\t\t// For 360, same texture, just alias with a 2nd sampler.\n\t\t\t\t// This sampler needs to have an exponent bias of -1.\n\t\t\t\tFxaaTex fxaaConsole360TexExpBiasNegOne,\n\t\t\t\t//\n\t\t\t\t// Only used on the optimized 360 version of FXAA Console.\n\t\t\t\t// For everything but 360, just use the same input here as for \"tex\".\n\t\t\t\t// For 360, same texture, just alias with a 3nd sampler.\n\t\t\t\t// This sampler needs to have an exponent bias of -2.\n\t\t\t\tFxaaTex fxaaConsole360TexExpBiasNegTwo,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x_} = 1.0/screenWidthInPixels\n\t\t\t\t// {_y} = 1.0/screenHeightInPixels\n\t\t\t\tFxaaFloat2 fxaaQualityRcpFrame,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// This effects sub-pixel AA quality and inversely sharpness.\n\t\t\t\t//\t Where N ranges between,\n\t\t\t\t//\t\t N = 0.50 (default)\n\t\t\t\t//\t\t N = 0.33 (sharper)\n\t\t\t\t// {x__} = -N/screenWidthInPixels\n\t\t\t\t// {_y_} = -N/screenHeightInPixels\n\t\t\t\t// {_z_} =\tN/screenWidthInPixels\n\t\t\t\t// {__w} =\tN/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsoleRcpFrameOpt,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// Not used on 360, but used on PS3 and PC.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x__} = -2.0/screenWidthInPixels\n\t\t\t\t// {_y_} = -2.0/screenHeightInPixels\n\t\t\t\t// {_z_} =\t2.0/screenWidthInPixels\n\t\t\t\t// {__w} =\t2.0/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsoleRcpFrameOpt2,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x__} =\t8.0/screenWidthInPixels\n\t\t\t\t// {_y_} =\t8.0/screenHeightInPixels\n\t\t\t\t// {_z_} = -4.0/screenWidthInPixels\n\t\t\t\t// {__w} = -4.0/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsole360RcpFrameOpt2,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_SUBPIX define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Choose the amount of sub-pixel aliasing removal.\n\t\t\t\t// This can effect sharpness.\n\t\t\t\t//\t 1.00 - upper limit (softer)\n\t\t\t\t//\t 0.75 - default amount of filtering\n\t\t\t\t//\t 0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n\t\t\t\t//\t 0.25 - almost off\n\t\t\t\t//\t 0.00 - completely off\n\t\t\t\tFxaaFloat fxaaQualitySubpix,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// The minimum amount of local contrast required to apply algorithm.\n\t\t\t\t//\t 0.333 - too little (faster)\n\t\t\t\t//\t 0.250 - low quality\n\t\t\t\t//\t 0.166 - default\n\t\t\t\t//\t 0.125 - high quality\n\t\t\t\t//\t 0.063 - overkill (slower)\n\t\t\t\tFxaaFloat fxaaQualityEdgeThreshold,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Trims the algorithm from processing darks.\n\t\t\t\t//\t 0.0833 - upper limit (default, the start of visible unfiltered edges)\n\t\t\t\t//\t 0.0625 - high quality (faster)\n\t\t\t\t//\t 0.0312 - visible limit (slower)\n\t\t\t\t// Special notes when using FXAA_GREEN_AS_LUMA,\n\t\t\t\t//\t Likely want to set this to zero.\n\t\t\t\t//\t As colors that are mostly not-green\n\t\t\t\t//\t will appear very dark in the green channel!\n\t\t\t\t//\t Tune by looking at mostly non-green content,\n\t\t\t\t//\t then start at zero and increase until aliasing is a problem.\n\t\t\t\tFxaaFloat fxaaQualityEdgeThresholdMin,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// This does not effect PS3, as this needs to be compiled in.\n\t\t\t\t//\t Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\n\t\t\t\t//\t Due to the PS3 being ALU bound,\n\t\t\t\t//\t there are only three safe values here: 2 and 4 and 8.\n\t\t\t\t//\t These options use the shaders ability to a free *|/ by 2|4|8.\n\t\t\t\t// For all other platforms can be a non-power of two.\n\t\t\t\t//\t 8.0 is sharper (default!!!)\n\t\t\t\t//\t 4.0 is softer\n\t\t\t\t//\t 2.0 is really soft (good only for vector graphics inputs)\n\t\t\t\tFxaaFloat fxaaConsoleEdgeSharpness,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// This does not effect PS3, as this needs to be compiled in.\n\t\t\t\t//\t Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\n\t\t\t\t//\t Due to the PS3 being ALU bound,\n\t\t\t\t//\t there are only two safe values here: 1/4 and 1/8.\n\t\t\t\t//\t These options use the shaders ability to a free *|/ by 2|4|8.\n\t\t\t\t// The console setting has a different mapping than the quality setting.\n\t\t\t\t// Other platforms can use other values.\n\t\t\t\t//\t 0.125 leaves less aliasing, but is softer (default!!!)\n\t\t\t\t//\t 0.25 leaves more aliasing, and is sharper\n\t\t\t\tFxaaFloat fxaaConsoleEdgeThreshold,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Trims the algorithm from processing darks.\n\t\t\t\t// The console setting has a different mapping than the quality setting.\n\t\t\t\t// This only applies when FXAA_EARLY_EXIT is 1.\n\t\t\t\t// This does not apply to PS3,\n\t\t\t\t// PS3 was simplified to avoid more shader instructions.\n\t\t\t\t//\t 0.06 - faster but more aliasing in darks\n\t\t\t\t//\t 0.05 - default\n\t\t\t\t//\t 0.04 - slower and less aliasing in darks\n\t\t\t\t// Special notes when using FXAA_GREEN_AS_LUMA,\n\t\t\t\t//\t Likely want to set this to zero.\n\t\t\t\t//\t As colors that are mostly not-green\n\t\t\t\t//\t will appear very dark in the green channel!\n\t\t\t\t//\t Tune by looking at mostly non-green content,\n\t\t\t\t//\t then start at zero and increase until aliasing is a problem.\n\t\t\t\tFxaaFloat fxaaConsoleEdgeThresholdMin,\n\t\t\t\t//\n\t\t\t\t// Extra constants for 360 FXAA Console only.\n\t\t\t\t// Use zeros or anything else for other platforms.\n\t\t\t\t// These must be in physical constant registers and NOT immediates.\n\t\t\t\t// Immediates will result in compiler un-optimizing.\n\t\t\t\t// {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n\t\t\t\tFxaaFloat4 fxaaConsole360ConstDir\n\t\t) {\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posM;\n\t\t\t\tposM.x = pos.x;\n\t\t\t\tposM.y = pos.y;\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t#if (FXAA_DISCARD == 0)\n\t\t\t\t\t\t\t\tFxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n\t\t\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\t\t\t#define lumaM rgbyM.w\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\t\t#define lumaM rgbyM.y\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\t\t\t#define lumaM luma4A.w\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#define lumaE luma4A.z\n\t\t\t\t\t\t#define lumaS luma4A.x\n\t\t\t\t\t\t#define lumaSE luma4A.y\n\t\t\t\t\t\t#define lumaNW luma4B.w\n\t\t\t\t\t\t#define lumaN luma4B.z\n\t\t\t\t\t\t#define lumaW luma4B.x\n\t\t\t\t#else\n\t\t\t\t\t\tFxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\t#define lumaM rgbyM.w\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t#define lumaM rgbyM.y\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t\t\t\t\tFxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tFxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#endif\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat maxSM = max(lumaS, lumaM);\n\t\t\t\tFxaaFloat minSM = min(lumaS, lumaM);\n\t\t\t\tFxaaFloat maxESM = max(lumaE, maxSM);\n\t\t\t\tFxaaFloat minESM = min(lumaE, minSM);\n\t\t\t\tFxaaFloat maxWN = max(lumaN, lumaW);\n\t\t\t\tFxaaFloat minWN = min(lumaN, lumaW);\n\t\t\t\tFxaaFloat rangeMax = max(maxWN, maxESM);\n\t\t\t\tFxaaFloat rangeMin = min(minWN, minESM);\n\t\t\t\tFxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n\t\t\t\tFxaaFloat range = rangeMax - rangeMin;\n\t\t\t\tFxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n\t\t\t\tFxaaBool earlyExit = range < rangeMaxClamped;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(earlyExit)\n\t\t\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\t\t\tFxaaDiscard;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\treturn rgbyM;\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 0)\n\t\t\t\t\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t\t\t\t\tFxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tFxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#endif\n\t\t\t\t#else\n\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNS = lumaN + lumaS;\n\t\t\t\tFxaaFloat lumaWE = lumaW + lumaE;\n\t\t\t\tFxaaFloat subpixRcpRange = 1.0/range;\n\t\t\t\tFxaaFloat subpixNSWE = lumaNS + lumaWE;\n\t\t\t\tFxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n\t\t\t\tFxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNESE = lumaNE + lumaSE;\n\t\t\t\tFxaaFloat lumaNWNE = lumaNW + lumaNE;\n\t\t\t\tFxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n\t\t\t\tFxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNWSW = lumaNW + lumaSW;\n\t\t\t\tFxaaFloat lumaSWSE = lumaSW + lumaSE;\n\t\t\t\tFxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n\t\t\t\tFxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n\t\t\t\tFxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n\t\t\t\tFxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n\t\t\t\tFxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n\t\t\t\tFxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n\t\t\t\tFxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n\t\t\t\tFxaaBool horzSpan = edgeHorz >= edgeVert;\n\t\t\t\tFxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(!horzSpan) lumaN = lumaW;\n\t\t\t\tif(!horzSpan) lumaS = lumaE;\n\t\t\t\tif(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n\t\t\t\tFxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat gradientN = lumaN - lumaM;\n\t\t\t\tFxaaFloat gradientS = lumaS - lumaM;\n\t\t\t\tFxaaFloat lumaNN = lumaN + lumaM;\n\t\t\t\tFxaaFloat lumaSS = lumaS + lumaM;\n\t\t\t\tFxaaBool pairN = abs(gradientN) >= abs(gradientS);\n\t\t\t\tFxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n\t\t\t\tif(pairN) lengthSign = -lengthSign;\n\t\t\t\tFxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posB;\n\t\t\t\tposB.x = posM.x;\n\t\t\t\tposB.y = posM.y;\n\t\t\t\tFxaaFloat2 offNP;\n\t\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\t\t\t\tif(!horzSpan) posB.x += lengthSign * 0.5;\n\t\t\t\tif( horzSpan) posB.y += lengthSign * 0.5;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posN;\n\t\t\t\tposN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n\t\t\t\tposN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n\t\t\t\tFxaaFloat2 posP;\n\t\t\t\tposP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n\t\t\t\tposP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n\t\t\t\tFxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n\t\t\t\tFxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n\t\t\t\tFxaaFloat subpixE = subpixC * subpixC;\n\t\t\t\tFxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(!pairN) lumaNN = lumaSS;\n\t\t\t\tFxaaFloat gradientScaled = gradient * 1.0/4.0;\n\t\t\t\tFxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n\t\t\t\tFxaaFloat subpixF = subpixD * subpixE;\n\t\t\t\tFxaaBool lumaMLTZero = lumaMM < 0.0;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tlumaEndN -= lumaNN * 0.5;\n\t\t\t\tlumaEndP -= lumaNN * 0.5;\n\t\t\t\tFxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\tFxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n\t\t\t\tFxaaBool doneNP = (!doneN) || (!doneP);\n\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(doneNP) {\n\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 3)\n\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 4)\n\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 5)\n\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 6)\n\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 7)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t#if (FXAA_QUALITY_PS > 8)\n\t\t\t\tif(doneNP) {\n\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 9)\n\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 10)\n\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 11)\n\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 12)\n\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t}\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t}\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat dstN = posM.x - posN.x;\n\t\t\t\tFxaaFloat dstP = posP.x - posM.x;\n\t\t\t\tif(!horzSpan) dstN = posM.y - posN.y;\n\t\t\t\tif(!horzSpan) dstP = posP.y - posM.y;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n\t\t\t\tFxaaFloat spanLength = (dstP + dstN);\n\t\t\t\tFxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n\t\t\t\tFxaaFloat spanLengthRcp = 1.0/spanLength;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaBool directionN = dstN < dstP;\n\t\t\t\tFxaaFloat dst = min(dstN, dstP);\n\t\t\t\tFxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n\t\t\t\tFxaaFloat subpixG = subpixF * subpixF;\n\t\t\t\tFxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n\t\t\t\tFxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n\t\t\t\tFxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n\t\t\t\tif(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n\t\t\t\tif( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\treturn FxaaTexTop(tex, posM);\n\t\t\t\t#else\n\t\t\t\t\t\treturn FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n\t\t\t\t#endif\n\t\t}\n\t\t/*==========================================================================*/\n\t\t#endif\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\tvUv,\n\t\t\t\tvec4(0.0),\n\t\t\t\ttDiffuse,\n\t\t\t\ttDiffuse,\n\t\t\t\ttDiffuse,\n\t\t\t\tresolution,\n\t\t\t\tvec4(0.0),\n\t\t\t\tvec4(0.0),\n\t\t\t\tvec4(0.0),\n\t\t\t\t0.75,\n\t\t\t\t0.166,\n\t\t\t\t0.0833,\n\t\t\t\t0.0,\n\t\t\t\t0.0,\n\t\t\t\t0.0,\n\t\t\t\tvec4(0.0)\n\t\t\t);\n\n\t\t\t// TODO avoid querying texture twice for same texel\n\t\t\tgl_FragColor.a = texture2D(tDiffuse, vUv).a;\n\t\t}`\n\n};\n\nexport { FXAAShader };\n","export function loadShader(shaderName: string): Array<string> {\r\n    try {\r\n        var vertexShader = require('./' + shaderName + '/V.glsl')\r\n        var fragShader = require('./' + shaderName + '/F.glsl')\r\n        return [vertexShader, fragShader]\r\n    }\r\n    catch(err) {\r\n        console.error('failed to fetch shader', err)\r\n        return ['', '']\r\n    }\r\n}","import * as THREE from 'three'\r\nimport { loadShader } from './ShaderLoader'\r\n\r\nexport class TardisCard {\r\n    cardGeometry: THREE.PlaneGeometry\r\n    cardMaterial: THREE.Material\r\n    cardMesh: THREE.Mesh\r\n    stencilId: number\r\n    cardOutsideScene: THREE.Scene\r\n    cardInsideScene: THREE.Scene\r\n    isFocused: boolean\r\n    height: number\r\n    width: number\r\n    frontWallGeom: THREE.BufferGeometry\r\n    frontWallMesh: THREE.Mesh\r\n    constructor(height: number = 100, width: number = 100, stencilId: number, cardOutsideScene: THREE.Scene, cardInsideScene: THREE.Scene, position: THREE.Vector3, rotation: THREE.Euler) {\r\n        this.stencilId = stencilId\r\n        this.height = height\r\n        this.width = width\r\n        this.cardGeometry = new THREE.PlaneGeometry(width, height)\r\n        this.cardMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0xf0f0f0,\r\n            // colorWrite: false,\r\n            stencilWrite: true,\r\n            stencilRef: stencilId,\r\n            stencilZPass: THREE.ReplaceStencilOp,  // write if the depth buffer test passes\r\n        })\r\n        this.cardMesh = new THREE.Mesh(this.cardGeometry, this.cardMaterial)\r\n        this.cardMesh.position.copy(position)\r\n        this.cardMesh.rotation.copy(rotation)\r\n        this.cardOutsideScene = cardOutsideScene\r\n        this.cardInsideScene = cardInsideScene\r\n        this.cardOutsideScene.add(this.cardMesh)\r\n        this.isFocused = false\r\n        this.frontWallGeom = new THREE.BufferGeometry()\r\n        this.frontWallMesh = new THREE.Mesh()\r\n    }\r\n    /**\r\n     * add group of objects to card that acts as contents that COULD BE VISIBLE FROM THE OUTSIDE\r\n     * @param group\r\n     */\r\n    addVisibleObjectGroup(group: THREE.Group) {\r\n        this._recursiveGetGroupProperty(group, (cardMaterial) => {\r\n            cardMaterial.stencilWrite = true\r\n            cardMaterial.stencilRef = this.stencilId\r\n            cardMaterial.stencilFunc = THREE.EqualStencilFunc\r\n            // cardMaterial.depthTest = false\r\n        })\r\n        this.cardInsideScene.add(group)\r\n    }\r\n    _recursiveGetGroupProperty( group: THREE.Group, setFunc: {  (cardMesh: THREE.Material): any } ) {\r\n        group.children.forEach(v => {\r\n            if (v instanceof THREE.Mesh) {\r\n                if (v.material instanceof THREE.Material) {\r\n                    setFunc(v.material)\r\n                }\r\n                else if (v.material instanceof Array) {\r\n                    v.material.forEach(mat => {\r\n                        setFunc(mat)\r\n                    })\r\n                }\r\n            }\r\n            else if (v instanceof THREE.Group) {\r\n                this._recursiveGetGroupProperty(v, setFunc)\r\n            }\r\n        })\r\n    }\r\n    addFrontWall(thickness: number = 10, material: THREE.Material | undefined = undefined) {\r\n        const positions = [\r\n            new THREE.Vector3(-this.width/2, -this.height/2, 0),\r\n            new THREE.Vector3(-this.width/2,  this.height/2, 0),\r\n            new THREE.Vector3( this.width/2,  this.height/2, 0),\r\n            new THREE.Vector3( this.width/2, -this.height/2, 0),\r\n            new THREE.Vector3(-this.width/2, -this.height/2, -thickness),\r\n            new THREE.Vector3(-this.width/2,  this.height/2, -thickness),\r\n            new THREE.Vector3( this.width/2,  this.height/2, -thickness),\r\n            new THREE.Vector3( this.width/2, -this.height/2, -thickness)\r\n        ]\r\n\r\n        const indices = [\r\n            1, 0, 4,\r\n            5, 1, 4,\r\n            2, 1, 5,\r\n            6, 2, 5,\r\n            3, 2, 6,\r\n            7, 3, 6,\r\n            0, 3, 7,\r\n            4, 0, 7\r\n        ]\r\n\r\n        const points: Array<THREE.Vector3> = []\r\n        indices.forEach(i => {\r\n            let tv = new THREE.Vector3()\r\n            // tv.multiplyScalar(100)\r\n            tv.copy(positions[i])\r\n            points.push(tv)\r\n        })\r\n        this.frontWallGeom.setFromPoints(points)\r\n        this.frontWallGeom.computeVertexNormals()\r\n        const frontWallMat = (material == undefined) ? new THREE.MeshPhongMaterial({\r\n            color: 0xa0a0a0,\r\n        }) : material\r\n        frontWallMat.stencilWrite = true\r\n        frontWallMat.stencilRef = this.stencilId\r\n        frontWallMat.stencilFunc = THREE.EqualStencilFunc\r\n        this.frontWallMesh = new THREE.Mesh(\r\n            // geometry as first argument\r\n            this.frontWallGeom,\r\n            // then Material\r\n            frontWallMat\r\n        )\r\n        this.frontWallMesh.position.copy(this.cardMesh.position)\r\n        this.cardInsideScene.add(this.frontWallMesh)\r\n    }\r\n    addSkybox(textureCube: THREE.CubeTexture) {\r\n        var [vs, fs] = loadShader('CardSkyboxShader')\r\n        var uniforms = \r\n        {\r\n            \"tCube\":            { type: \"t\", value: textureCube }\r\n        }\r\n        var customMaterial = new THREE.ShaderMaterial( \r\n            {\r\n                uniforms:       uniforms,\r\n                vertexShader:   vs,\r\n                fragmentShader: fs,\r\n                side: THREE.DoubleSide,\r\n                stencilWrite: true,\r\n                stencilRef: this.stencilId,\r\n                stencilZPass: THREE.ReplaceStencilOp,  // write if the depth buffer test passes\r\n            }\r\n        )\r\n        this.cardMaterial = customMaterial\r\n        this.cardMesh.material = this.cardMaterial\r\n    }\r\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","import * as THREE from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\r\nimport { FXAAShader  } from 'three/examples/jsm/shaders/FXAAShader'\r\n// import { ClearPass } from 'three/examples/jsm/postprocessing/ClearPass'\r\n// import FresnelShader from './FresnelShader'\r\nimport { loadShader } from './ShaderLoader'\r\nimport { Stats } from 'three-stats'\r\nimport { TardisCard } from './TardisCard'\r\nimport { CustomCSS3DObject, CustomCSS3DSprite, CustomCSS3DRenderer } from './CustomCSS3DRenderer'\r\nimport { DampingMovementController } from './Utils'\r\n\r\nvar container: HTMLElement\r\nvar renderer: THREE.WebGLRenderer, camera: THREE.PerspectiveCamera, controls: OrbitControls\r\nvar fxaaPass: ShaderPass\r\nvar composer: EffectComposer\r\nvar cardOutsideScene: THREE.Scene, cardInsideScene: THREE.Scene\r\nvar stats: Stats\r\n\r\nexport var cornerObject: THREE.Mesh\r\nvar cornerObjectClone: THREE.Mesh\r\nvar cornerObjectController: DampingMovementController\r\n\r\nvar cssScene: THREE.Scene\r\nvar cssRenderer: CustomCSS3DRenderer\r\n\r\nvar cursorLightGroup: THREE.Group\r\nvar cursorLight: THREE.PointLight\r\nvar cursorLightController: DampingMovementController\r\nvar mouseX: number, mouseY: number\r\n\r\n// https://github.com/stemkoski/stemkoski.github.com/blob/master/Three.js/Camera-Texture.html\r\nvar glassBackScene: THREE.Scene\r\nvar glassFrontScene: THREE.Scene\r\nvar glassBackRenderTarget: THREE.WebGLRenderTarget\r\nvar glassBackdepthTexture: THREE.DepthTexture\r\nvar glassBackMaterial: THREE.Material\r\nvar glassFrontMaterial: THREE.ShaderMaterial\r\n\r\nexport function initScene(_container: HTMLElement) {\r\n    container = _container\r\n    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 5000 )\r\n    camera.position.set(0, 0, 1000)\r\n    camera.lookAt(0, 0, 0)\r\n\r\n    cardOutsideScene = new THREE.Scene()\r\n    cardInsideScene = new THREE.Scene()\r\n\r\n    renderer = new THREE.WebGLRenderer( {antialias: true} )\r\n    // renderer.autoClear = false\r\n    renderer.setClearColor( 0xffffff )\r\n    renderer.setPixelRatio( window.devicePixelRatio )\r\n    renderer.setSize(window.innerWidth, window.innerHeight)\r\n    container.appendChild( renderer.domElement )\r\n    controls = new OrbitControls(camera, renderer.domElement)\r\n    renderer.domElement.style.position = 'absolute'\r\n    renderer.domElement.style.top = '0px'\r\n    renderer.domElement.style.left = '0px'\r\n\r\n    // stat\r\n    stats = new Stats()\r\n    stats.domElement.style.zIndex = '100'\r\n    container.appendChild( stats.domElement )\r\n\r\n    // add objects\r\n\r\n    // const cdt = new THREE.TextureLoader().load( './cd.jpg' )\r\n    // const cnt = new THREE.TextureLoader().load( './cn.jpg' )\r\n    // const crt = new THREE.TextureLoader().load( './cr.jpg' )\r\n\r\n    // add a tardis card\r\n    var tardisCard1 = new TardisCard(500, 700, 123, cardOutsideScene, cardInsideScene, new THREE.Vector3(0, 0, 0), new THREE.Euler())\r\n    var contentInTardisCard1 = new THREE.Mesh(\r\n        new THREE.BoxGeometry(200, 200, 200),\r\n        new THREE.MeshPhysicalMaterial({\r\n            color: 0xff00ff\r\n        })\r\n    )\r\n    var contentInTardisCard2 = new THREE.Mesh(\r\n        new THREE.BoxGeometry(200, 200, 200),\r\n        new THREE.MeshPhysicalMaterial({\r\n            color: 0xffff00\r\n        })\r\n    )\r\n    contentInTardisCard1.position.set(30, 30, -30)\r\n    contentInTardisCard2.position.set(-30, -30, 30)\r\n    // scene.add(contentInTardisCard)\r\n    var contentGroupInTardisCard1 = new THREE.Group()\r\n    contentGroupInTardisCard1.add(contentInTardisCard1)\r\n    contentGroupInTardisCard1.add(contentInTardisCard2)\r\n    contentGroupInTardisCard1.position.copy(tardisCard1.cardMesh.position)\r\n    contentGroupInTardisCard1.position.z -= 300\r\n    tardisCard1.addVisibleObjectGroup(contentGroupInTardisCard1)\r\n\r\n    const glassNormalTexture = new THREE.TextureLoader().load( './golf-normal.jpg' )\r\n    // add second tardis card\r\n    var tardisCard2 = new TardisCard(700, 500, 124, cardOutsideScene, cardInsideScene, new THREE.Vector3(650, 0, 0), new THREE.Euler())\r\n    var contentInTardisCard3 = new THREE.Mesh(\r\n        new THREE.SphereGeometry(100),\r\n        new THREE.MeshPhysicalMaterial({\r\n            metalness: 0.5,\r\n            roughness: 0.2,\r\n            clearcoat: 0.2,\r\n            normalMap: glassNormalTexture\r\n        })\r\n    )\r\n    var contentInTardisCard4 = new THREE.Mesh(\r\n        new THREE.SphereGeometry(100),\r\n        new THREE.MeshPhysicalMaterial({\r\n            metalness: 0.2,\r\n            roughness: 0.2,\r\n            clearcoat: 0.5,\r\n            normalMap: glassNormalTexture\r\n        })\r\n    )\r\n    contentInTardisCard3.position.set(30, 30, -30)\r\n    contentInTardisCard4.position.set(-30, -30, 30)\r\n    // scene.add(contentInTardisCard)\r\n    var contentGroupInTardisCard2 = new THREE.Group()\r\n    contentGroupInTardisCard2.add(contentInTardisCard3)\r\n    contentGroupInTardisCard2.add(contentInTardisCard4)\r\n    contentGroupInTardisCard2.position.copy(tardisCard2.cardMesh.position)\r\n    contentGroupInTardisCard2.position.z -= 300\r\n    tardisCard2.addVisibleObjectGroup(contentGroupInTardisCard2)\r\n    \r\n    const hemiLight = new THREE.HemisphereLight( 0xffffff, 0x444444 )\r\n    hemiLight.position.set( 0, 1000, 0 )\r\n\r\n    const dirLight = new THREE.DirectionalLight( 0xffffff, 0.8 )\r\n    dirLight.position.set( - 3000, 1000, - 1000 )\r\n\r\n    cardInsideScene.add( hemiLight )\r\n    cardInsideScene.add( dirLight )\r\n\r\n    // add env\r\n    const r = './cube/'\r\n\r\n    const urls = [\r\n        r + 'px.jpg', r + 'nx.jpg',\r\n        r + 'py.jpg', r + 'ny.jpg',\r\n        r + 'pz.jpg', r + 'nz.jpg'\r\n    ]\r\n\r\n    const reflectionTextureCube = new THREE.CubeTextureLoader().load( urls )\r\n    // reflectionTextureCube.mapping = THREE.CubeReflectionMapping\r\n\r\n    cardOutsideScene.environment = reflectionTextureCube\r\n    cardInsideScene.environment = reflectionTextureCube\r\n\r\n    \r\n    tardisCard1.addFrontWall(50)\r\n    tardisCard2.addFrontWall(100, new THREE.MeshPhysicalMaterial({\r\n        color: 0xa0a0a0,\r\n        metalness: 0,\r\n        roughness: 0,\r\n        clearcoat: 0.5,\r\n        reflectivity: 0.2,\r\n        clearcoatRoughness: 0.8,\r\n    }))\r\n    tardisCard2.addSkybox(reflectionTextureCube)\r\n    \r\n\r\n    // add cursor light\r\n    cursorLightGroup = new THREE.Group()\r\n    cursorLight = new THREE.PointLight()\r\n    cursorLight.intensity = 0.5\r\n    cursorLight.decay = 1\r\n    cursorLight.distance = 500\r\n    cursorLight.color = new THREE.Color( 0xaaccff )\r\n    cursorLightGroup.add(cursorLight)\r\n    cardInsideScene.add(cursorLightGroup)\r\n    cursorLightController = new DampingMovementController(cursorLightGroup, 0.3, 0.1)\r\n    window.addEventListener('mousemove', e => {\r\n        mouseX = e.clientX\r\n        mouseY = e.clientY\r\n    })\r\n\r\n    cssScene = new THREE.Scene()\r\n\r\n    const renderPass1 = new RenderPass(cardOutsideScene, camera)\r\n    renderPass1.clear = true\r\n\r\n    const renderPass2 = new RenderPass(cardInsideScene, camera)\r\n    renderPass2.clearDepth = true\r\n    renderPass2.clear = false\r\n    \r\n\r\n    fxaaPass = new ShaderPass( FXAAShader )\r\n    fxaaPass.material.uniforms[ 'resolution' ].value.x = 1 / ( container.offsetWidth * window.devicePixelRatio )\r\n    fxaaPass.material.uniforms[ 'resolution' ].value.y = 1 / ( container.offsetHeight * window.devicePixelRatio )\r\n    \r\n    composer = new EffectComposer(renderer)\r\n    composer.addPass(renderPass1)\r\n    composer.addPass(renderPass2)\r\n\tcomposer.addPass( fxaaPass )\r\n    composer.renderTarget1.stencilBuffer = true\r\n    composer.renderTarget2.stencilBuffer = true\r\n\r\n    composer.renderToScreen = false\r\n\r\n    // add corner object\r\n    glassBackdepthTexture = new THREE.DepthTexture(1024, 1024)\r\n    glassBackRenderTarget = new THREE.WebGLRenderTarget(\r\n        container.offsetWidth * window.devicePixelRatio,\r\n        container.offsetHeight * window.devicePixelRatio\r\n    )\r\n    glassBackRenderTarget.depthBuffer = true;\r\n    glassBackRenderTarget.depthTexture = glassBackdepthTexture;\r\n    glassBackRenderTarget.depthTexture.type = THREE.UnsignedIntType;\r\n\r\n    glassBackScene = new THREE.Scene()\r\n    glassFrontScene = new THREE.Scene()\r\n\r\n    const glassDiffuseMaterial = new THREE.TextureLoader().load( './glass_cube_diffuse.png' )\r\n    let cornerGeom = new THREE.BoxGeometry( 40, 40, 40 )\r\n    cornerObject = new THREE.Mesh( cornerGeom, new THREE.MeshBasicMaterial({\r\n        map: glassDiffuseMaterial,\r\n        transparent: true,\r\n        // depthTest: false,\r\n        // depthWrite: true,\r\n        // stencilWrite: true,\r\n        // stencilRef: 999,\r\n        // stencilZPass: THREE.ReplaceStencilOp,  // write if the depth buffer test passes\r\n        side: THREE.BackSide\r\n    }) )\r\n    // cornerObject.material = new THREE.MeshDepthMaterial({\r\n    //     side: THREE.BackSide\r\n    // })\r\n    cornerObject.rotation.x = Math.random() * Math.PI\r\n    cornerObject.rotation.y = Math.random() * Math.PI\r\n    cornerObject.rotation.z = Math.random() * Math.PI\r\n    glassBackScene.add(cornerObject)\r\n\r\n    var [glassFrontVS, glassFrontFS] = loadShader('GlassFrontShader')\r\n    console.log(glassBackRenderTarget.depthTexture)\r\n    var glassFrontUniforms = \r\n    {\r\n        \"resolution\": { type: \"v\", value: new THREE.Vector2(\r\n            container.offsetWidth * window.devicePixelRatio,\r\n            container.offsetHeight * window.devicePixelRatio\r\n        ) },\r\n        \"tBackground\":    { type: \"t\", value: glassBackRenderTarget.texture },\r\n        \"tBackDepth\": { type: \"t\", value: glassBackRenderTarget.depthTexture },\r\n\r\n    }\r\n    glassFrontMaterial = new THREE.ShaderMaterial( \r\n        {\r\n            vertexShader:   glassFrontVS,\r\n            fragmentShader: glassFrontFS,\r\n            uniforms: glassFrontUniforms,\r\n            depthTest: false,\r\n            // stencilWrite: true,\r\n            // stencilRef: 999,\r\n            // stencilZPass: THREE.ReplaceStencilOp,  // write if the depth buffer test passes\r\n            side: THREE.FrontSide\r\n        }\r\n    )\r\n    cornerObjectClone = cornerObject.clone()\r\n    cornerObjectClone.material = glassFrontMaterial\r\n    glassFrontScene.add(cornerObjectClone)\r\n\r\n    cornerObjectController = new DampingMovementController(cornerObject, 0.5, 0.1)\r\n    cornerObjectController.addChildObj(cornerObjectClone)\r\n    \r\n    glassBackScene.background = composer.renderTarget2.texture\r\n    glassFrontScene.background = glassBackRenderTarget.texture\r\n\r\n\r\n    window.addEventListener( 'resize', onWindowResize )\r\n    animate()\r\n}\r\n\r\nexport function registerCSSCoordinator(htmlContainer: HTMLElement, htmlElem: HTMLElement, position: THREE.Vector3 = new THREE.Vector3()): CustomCSS3DObject {\r\n    if (cssRenderer == undefined) {\r\n        cssRenderer = new CustomCSS3DRenderer(htmlContainer)\r\n        cssRenderer.setSize( window.innerWidth, window.innerHeight )\r\n    }\r\n    // controls = new OrbitControls(camera, cssRenderer.domElement)\r\n    const object = new CustomCSS3DObject( htmlElem )\r\n    object.position.copy(position)\r\n    cssScene.add(object)\r\n    return object\r\n    // cssCoordinators.push(new ThreeCSSCoordinator(htmlContainer, htmlCamera, htmlElem, camera, position))\r\n}\r\n\r\nfunction getRaycastPos(posX: number, posY: number) {\r\n    let x = (2.0 * posX) / window.innerWidth - 1.0\r\n    let y = 1.0 - (2.0 * posY) / window.innerHeight\r\n    // let z = 1.0\r\n    // let ray_nds = new THREE.Vector3(x, y, z)\r\n    let ray = new THREE.Vector3(x, y, 0.9975)\r\n    ray.unproject(camera)\r\n    return ray\r\n}\r\n\r\nfunction updatecornerObject() {\r\n    let targetPos = getRaycastPos(200, 200)\r\n    // let lastPos = cornerObject.position\r\n    cornerObjectController.update(targetPos)\r\n    // let currentPath = targetPos.sub(lastPos)\r\n    // cornerObjectVelocity.multiplyScalar(0.3)\r\n    // cornerObjectVelocity.add(currentPath.multiplyScalar(damp))\r\n    // cornerObject.position.add(cornerObjectVelocity)\r\n}\r\n\r\nfunction updateCursorLight() {\r\n    if (!isNaN(mouseX) && !isNaN(mouseY)) {\r\n        let targetPos = getRaycastPos(mouseX, mouseY)\r\n        let camPosZ = camera.position.z\r\n        let targetPosVec = new THREE.Vector3().copy(targetPos)\r\n        targetPosVec = targetPosVec.sub(camera.position)\r\n        let newz = -80\r\n        let x = (newz - camPosZ) / targetPosVec.z\r\n        targetPos.copy(camera.position)\r\n        targetPosVec.multiplyScalar(x)\r\n        targetPos.add(targetPosVec)\r\n        cursorLightController.update(targetPos)\r\n    }\r\n}\r\n\r\nfunction onWindowResize() {\r\n\r\n    camera.aspect = window.innerWidth / window.innerHeight\r\n    camera.updateProjectionMatrix()\r\n\r\n    fxaaPass.material.uniforms[ 'resolution' ].value.x = 1 / ( container.offsetWidth * window.devicePixelRatio )\r\n    fxaaPass.material.uniforms[ 'resolution' ].value.y = 1 / ( container.offsetHeight * window.devicePixelRatio )\r\n    glassFrontMaterial.uniforms[ 'resolution' ].value.x = container.offsetWidth * window.devicePixelRatio\r\n    glassFrontMaterial.uniforms[ 'resolution' ].value.y = container.offsetHeight * window.devicePixelRatio\r\n    renderer.setSize( window.innerWidth, window.innerHeight )\r\n    composer.setSize( window.innerWidth, window.innerHeight )\r\n    if (cssRenderer) {\r\n        cssRenderer.setSize( window.innerWidth, window.innerHeight )\r\n    }\r\n\r\n}\r\n\r\nfunction animate() {\r\n    requestAnimationFrame( animate )\r\n    updatecornerObject()\r\n    updateCursorLight()\r\n    render()\r\n    controls.update()\r\n    stats.update()\r\n\r\n    // https://github.com/mrdoob/three.js/blob/master/examples/js/renderers/CustomCSS3DRenderer.js\r\n\t// camera.updateMatrixWorld();\r\n    // camera.updateMatrixWorld()\r\n    // const fov = camera.projectionMatrix.elements[ 5 ] * window.innerHeight;\r\n    // const style = 'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) // + 'translate(' + window.innerWidth/2 + 'px,' + window.innerHeight/2 + 'px)';\r\n    // let cameraCSSMatrix = getCameraCSSMatrix( camera.matrixWorldInverse.toArray() )\r\n    // let style = 'translate(' + window.innerWidth/2 + 'px,' + window.innerHeight/2 + 'px)' + cameraCSSMatrix;\r\n    // cssCoordinators.forEach(coordinator => {\r\n    //     coordinator.update(fov, style)\r\n    // })\r\n\r\n}\r\n\r\nfunction render()\r\n{\r\n    composer.render()\r\n    renderer.clearDepth()\r\n    renderer.setRenderTarget(glassBackRenderTarget)\r\n    renderer.render(glassBackScene, camera)\r\n    renderer.setRenderTarget(null)\r\n    renderer.render(glassFrontScene, camera)\r\n    if (cssRenderer) {\r\n        cssRenderer.render(cssScene, camera)\r\n    }\r\n}","import * as THREE from 'three'\r\n/**\r\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\r\n */\r\n\r\nconst _position = new THREE.Vector3();\r\nconst _quaternion = new THREE.Quaternion();\r\nconst _scale = new THREE.Vector3();\r\n\r\nclass CustomCSS3DObject extends THREE.Object3D {\r\n\r\n    element: HTMLElement\r\n    followObject: THREE.Object3D | null\r\n    followObjectOffset: THREE.Vector3\r\n\r\n    constructor( element: HTMLElement = document.createElement( 'div' ) ) {\r\n\r\n        super();\r\n\r\n        this.element = element;\r\n        this.element.style.position = 'absolute';\r\n        this.element.style.pointerEvents = 'all';\r\n        \r\n        if (element.parentNode !== null) {\r\n            element.parentNode.removeChild( element )\r\n        }\r\n        else {\r\n            document.removeChild(element)\r\n        }\r\n        this.followObject = null\r\n        this.followObjectOffset = new THREE.Vector3()\r\n\r\n    }\r\n\r\n    setFollowObject(followObject: THREE.Object3D, followObjectOffset: THREE.Vector3) {\r\n        this.followObject = followObject\r\n        this.followObjectOffset = followObjectOffset\r\n    }\r\n\r\n}\r\n\r\n\r\nclass CustomCSS3DSprite extends CustomCSS3DObject {\r\n\r\n    rotation2D: number\r\n\r\n    constructor( element: HTMLElement ) {\r\n\r\n        super( element );\r\n\r\n        this.rotation2D = 0;\r\n\r\n    }\r\n\r\n}\r\n\r\nconst _matrix = new THREE.Matrix4();\r\nconst _matrix2 = new THREE.Matrix4();\r\n\r\ninterface CustomCSS3DRendererCache {\r\n    camera: {\r\n        fov: number,\r\n        style: string\r\n    },\r\n    objects: WeakMap<any, any>\r\n}\r\n\r\nclass CustomCSS3DRenderer {\r\n\r\n    domElement: HTMLElement\r\n    cameraElement: HTMLElement\r\n    _width: number\r\n    _height: number\r\n    _widthHalf: number\r\n    _heightHalf: number\r\n    cache: CustomCSS3DRendererCache\r\n\r\n    constructor( domElement: HTMLElement ) {\r\n\r\n        this._width = 0\r\n        this._height = 0\r\n        this._widthHalf = 0\r\n        this._heightHalf = 0\r\n\r\n        this.cache = {\r\n            camera: { fov: 0, style: '' },\r\n            objects: new WeakMap()\r\n        };\r\n\r\n        this.domElement = domElement !== undefined ? domElement : document.createElement( 'div' );\r\n\r\n        // this.domElement.style.overflow = 'hidden';\r\n        this.domElement.style.position = 'absolute';\r\n        this.domElement.style.overflow = 'visible';\r\n        this.domElement.style.pointerEvents = 'none';\r\n\r\n        this.cameraElement = document.createElement( 'div' );\r\n        this.cameraElement.style.overflow = 'visible';\r\n\r\n        this.cameraElement.style.transformStyle = 'preserve-3d';\r\n        this.cameraElement.style.pointerEvents = 'none';\r\n\r\n        domElement.appendChild( this.cameraElement );\r\n    }\r\n    \r\n    getSize () {\r\n\r\n        return {\r\n            width: this._width,\r\n            height: this._height\r\n        };\r\n\r\n    }\r\n    \r\n    render ( scene: THREE.Scene, camera: THREE.PerspectiveCamera ) {\r\n\r\n        const fov = camera.projectionMatrix.elements[ 5 ] * this._heightHalf;\r\n\r\n        if ( this.cache.camera.fov !== fov ) {\r\n\r\n            this.domElement.style.perspective = fov + 'px'\r\n            this.cache.camera.fov = fov;\r\n\r\n        }\r\n\r\n        if ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n        if ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n        const cameraCSSMatrix = 'translateZ(' + fov + 'px)' + this.getCameraCSSMatrix( camera.matrixWorldInverse );\r\n\r\n        const style = cameraCSSMatrix +\r\n            'translate(' + this._widthHalf + 'px,' + this._heightHalf + 'px)';\r\n\r\n        if ( this.cache.camera.style !== style ) {\r\n\r\n            this.cameraElement.style.transform = style;\r\n\r\n            this.cache.camera.style = style;\r\n\r\n        }\r\n\r\n        this.renderObject( scene, scene, camera, cameraCSSMatrix );\r\n\r\n    }\r\n\r\n    setSize ( width: number, height: number ) {\r\n\r\n        this._width = width;\r\n        this._height = height;\r\n        this._widthHalf = this._width / 2;\r\n        this._heightHalf = this._height / 2;\r\n\r\n        this.domElement.style.width = this._width + 'px';\r\n        this.domElement.style.height = this._height + 'px';\r\n\r\n        this.cameraElement.style.width = this._width + 'px';\r\n        this.cameraElement.style.height = this._height + 'px';\r\n\r\n    }\r\n\r\n    epsilon( value: number ) {\r\n\r\n        return Math.abs( value ) < 1e-10 ? 0 : value;\r\n\r\n    }\r\n\r\n    getCameraCSSMatrix( matrix: THREE.Matrix4 ) {\r\n\r\n        const elements = matrix.elements;\r\n\r\n        return 'matrix3d(' +\r\n            this.epsilon( elements[ 0 ] ) + ',' +\r\n            this.epsilon( - elements[ 1 ] ) + ',' +\r\n            this.epsilon( elements[ 2 ] ) + ',' +\r\n            this.epsilon( elements[ 3 ] ) + ',' +\r\n            this.epsilon( elements[ 4 ] ) + ',' +\r\n            this.epsilon( - elements[ 5 ] ) + ',' +\r\n            this.epsilon( elements[ 6 ] ) + ',' +\r\n            this.epsilon( elements[ 7 ] ) + ',' +\r\n            this.epsilon( elements[ 8 ] ) + ',' +\r\n            this.epsilon( - elements[ 9 ] ) + ',' +\r\n            this.epsilon( elements[ 10 ] ) + ',' +\r\n            this.epsilon( elements[ 11 ] ) + ',' +\r\n            this.epsilon( elements[ 12 ] ) + ',' +\r\n            this.epsilon( - elements[ 13 ] ) + ',' +\r\n            this.epsilon( elements[ 14 ] ) + ',' +\r\n            this.epsilon( elements[ 15 ] ) +\r\n        ')';\r\n\r\n    }\r\n\r\n    getObjectCSSMatrix( matrix: THREE.Matrix4 ) {\r\n\r\n        const elements = matrix.elements;\r\n        const matrix3d = 'matrix3d(' +\r\n            this.epsilon( elements[ 0 ] ) + ',' +\r\n            this.epsilon( elements[ 1 ] ) + ',' +\r\n            this.epsilon( elements[ 2 ] ) + ',' +\r\n            this.epsilon( elements[ 3 ] ) + ',' +\r\n            this.epsilon( - elements[ 4 ] ) + ',' +\r\n            this.epsilon( - elements[ 5 ] ) + ',' +\r\n            this.epsilon( - elements[ 6 ] ) + ',' +\r\n            this.epsilon( - elements[ 7 ] ) + ',' +\r\n            this.epsilon( elements[ 8 ] ) + ',' +\r\n            this.epsilon( elements[ 9 ] ) + ',' +\r\n            this.epsilon( elements[ 10 ] ) + ',' +\r\n            this.epsilon( elements[ 11 ] ) + ',' +\r\n            this.epsilon( elements[ 12 ] ) + ',' +\r\n            this.epsilon( elements[ 13 ] ) + ',' +\r\n            this.epsilon( elements[ 14 ] ) + ',' +\r\n            this.epsilon( elements[ 15 ] ) +\r\n        ')';\r\n\r\n        return matrix3d;\r\n\r\n    }\r\n\r\n    renderObject( object: THREE.Object3D, scene: THREE.Scene, camera: THREE.PerspectiveCamera, cameraCSSMatrix: string ) {\r\n\r\n        if ( object instanceof CustomCSS3DObject ) {\r\n\r\n            const visible = object.visible && object.layers.test( camera.layers );\r\n            object.element.style.display = visible ? '' : 'none';\r\n\r\n            // only getObjectCSSMatrix when object.visible\r\n            if ( visible ) {\r\n\r\n                let style;\r\n\r\n                if (object.followObject != undefined) {\r\n                    object.position.copy(object.followObject.position)\r\n                    object.position.add(object.followObjectOffset)\r\n                }\r\n\r\n                if ( object instanceof CustomCSS3DSprite ) {\r\n\r\n                    // http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\r\n\r\n                    _matrix.copy( camera.matrixWorldInverse );\r\n                    _matrix.transpose();\r\n\r\n                    if ( object.rotation2D !== 0 ) _matrix.multiply( _matrix2.makeRotationZ( object.rotation2D ) );\r\n\r\n                    object.matrixWorld.decompose( _position, _quaternion, _scale );\r\n                    _matrix.setPosition( _position );\r\n                    _matrix.scale( _scale );\r\n\r\n                    _matrix.elements[ 3 ] = 0;\r\n                    _matrix.elements[ 7 ] = 0;\r\n                    _matrix.elements[ 11 ] = 0;\r\n                    _matrix.elements[ 15 ] = 1;\r\n\r\n                    style = this.getObjectCSSMatrix( _matrix );\r\n\r\n                } else {\r\n\r\n                    style = this.getObjectCSSMatrix( object.matrixWorld );\r\n\r\n                }\r\n\r\n                const element = object.element;\r\n                const cachedObject = this.cache.objects.get( object );\r\n\r\n                if ( cachedObject === undefined || cachedObject.style !== style ) {\r\n\r\n                    element.style.transform = style;\r\n\r\n                    const objectData = { style: style };\r\n                    this.cache.objects.set( object, objectData );\r\n\r\n                }\r\n\r\n                if ( element.parentNode !== this.cameraElement ) {\r\n\r\n                    this.cameraElement.appendChild( element );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        for ( let i = 0, l = object.children.length; i < l; i ++ ) {\r\n            if (object.children[ i ] instanceof CustomCSS3DObject) {\r\n                this.renderObject( object.children[ i ], scene, camera, cameraCSSMatrix );\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport { CustomCSS3DObject, CustomCSS3DSprite, CustomCSS3DRenderer };\r\n","import { Vector3, Object3D } from 'three'\r\n\r\nexport class DampingMovementController {\r\n    damp: number\r\n    attract: number\r\n    targetPos: Vector3\r\n    currentPos: Vector3\r\n    object: Object3D\r\n    velocity: Vector3\r\n    childObjects: Array<Object3D>\r\n    constructor(object: Object3D, damp: number = 0.5, attract: number = 0.5) {\r\n        this.damp = damp\r\n        this.attract = attract\r\n        this.targetPos = new Vector3().copy(object.position)\r\n        this.currentPos = new Vector3().copy(object.position)\r\n        this.object = object\r\n        this.velocity = new Vector3()\r\n        this.childObjects = []\r\n    }\r\n    addChildObj(object: Object3D) {\r\n        this.childObjects.push(object)\r\n    }\r\n    update(target: Vector3) {\r\n        this.velocity.multiplyScalar(this.damp)\r\n        let currentPath = target.sub(this.object.position)\r\n        this.velocity.add(currentPath.multiplyScalar(this.attract))\r\n        this.object.position.add(this.velocity)\r\n        this.childObjects.forEach(obj => {\r\n            obj.position.copy(this.object.position)\r\n            obj.rotation.copy(this.object.rotation)\r\n        })\r\n    }\r\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport * as THREE from 'three'\r\nimport Vue from 'vue'\r\nimport * as ThreeSceneLoader from '../scripts/Three/ThreeSceneLoader'\r\n\r\nexport default Vue.extend({\r\n    mounted() {\r\n        if (this.$refs['canvas-container'] instanceof HTMLElement) {\r\n            ThreeSceneLoader.initScene(this.$refs['canvas-container'])\r\n        }\r\n        if (this.$refs['dom3d-container'] instanceof HTMLElement && this.$refs['dom3d-test'] instanceof HTMLElement) {\r\n            ThreeSceneLoader.registerCSSCoordinator(this.$refs['dom3d-container'], this.$refs['dom3d-test'], new THREE.Vector3(-350, -250, 0))\r\n        }\r\n        if (this.$refs['dom3d-container'] instanceof HTMLElement && this.$refs['dom3d-corner'] instanceof HTMLElement) {\r\n            const cornerObj = ThreeSceneLoader.registerCSSCoordinator(this.$refs['dom3d-container'], this.$refs['dom3d-corner'], new THREE.Vector3(0, 20, 10))\r\n            cornerObj.setFollowObject(ThreeSceneLoader.cornerObject, new THREE.Vector3())\r\n            \r\n        }\r\n    },\r\n    methods: {\r\n        cornerClicked() {\r\n            alert('corner clicked!')\r\n        }\r\n    }\r\n})\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeSceneTest.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--15-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeSceneTest.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ThreeSceneTest.vue?vue&type=template&id=6806294d&scoped=true&\"\nimport script from \"./ThreeSceneTest.vue?vue&type=script&lang=ts&\"\nexport * from \"./ThreeSceneTest.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ThreeSceneTest.vue?vue&type=style&index=0&id=6806294d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6806294d\",\n  null\n  \n)\n\nexport default component.exports","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind');\nvar aConstructor = require('../internals/a-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreeSceneTest.vue?vue&type=style&index=0&id=6806294d&scoped=true&lang=css&\"","var fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\nmodule.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {\n  if (!isObject(it)) return false;\n  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return false;\n  return $isExtensible ? $isExtensible(it) : true;\n} : $isExtensible;\n","var map = {\n\t\"./CardSkyboxShader/V.glsl\": \"8437\",\n\t\"./FresnelShader/V.glsl\": \"8c9f\",\n\t\"./GlassFrontShader/V.glsl\": \"c182\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"5d16\";","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        uncurriedNativeMethod(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        uncurriedNativeMethod(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.enable();\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, NativePrototype);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","module.exports = \"uniform vec2 resolution;\\r\\nuniform sampler2D tBackground;\\r\\nuniform sampler2D tBackDepth;\\r\\n\\r\\nvarying vec2 vUv;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 vCameraRay;\\r\\nvarying vec4 vWorldPosition;\\r\\nvarying mat4 vProjectionMatrix;\\r\\n\\r\\nfloat near = 0.1;\\r\\nfloat far  = 20000.0; \\r\\n\\r\\nfloat LinearizeDepth(float depth) \\r\\n{\\r\\n    float z = depth * 2.0 - 1.0; // back to NDC \\r\\n    return (2.0 * near * far) / (far + near - z * (far - near));\\t\\r\\n}\\r\\n\\r\\nfloat refractionFactor = 1.49; // glass\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n\\r\\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\\r\\n    float frontDepth = gl_FragCoord.z;\\r\\n\\r\\n    float backDepthlinear = LinearizeDepth(backDepth);\\r\\n    float frontDepthlinear = LinearizeDepth(frontDepth);\\r\\n    \\r\\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\\r\\n    backToFrontDepth *= 0.005;\\r\\n    \\r\\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\\r\\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\\r\\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\\r\\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\\r\\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\\r\\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\\r\\n    vec4 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos);\\r\\n\\r\\n    // snell's law\\r\\n    float cosTheta1 = dot(vCameraRay, vNormal);\\r\\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\\r\\n    float sinTheta2 = sinTheta1 / refractionFactor;\\r\\n    float theta2 = asin(sinTheta2);\\r\\n    offset *= theta2;\\r\\n\\r\\n    float samplePointX = gl_FragCoord.x / resolution.x + backToFrontDepth * offset.x;\\r\\n    float samplePointY = gl_FragCoord.y / resolution.y + backToFrontDepth * offset.y;\\r\\n    \\r\\n    vec3 backColor = texture2D( tBackground, vec2( samplePointX, samplePointY ) ).xyz;\\r\\n    // vec4 vNewSample = projectionMatrix * (vec4(vRefract, 0.0) + worldPosition);\\r\\n    // vRefractOffset = vNewSample.xy / vNewSample.w;\\r\\n    // // vNormal = normal;\\r\\n    // vec3 vRefractOffsetT = vRefract + 0.5;\\r\\n    // gl_FragColor = vec4(backColor * 0.5 + vNormal * 0.2 + depthColor * 0.1, 1.0);\\r\\n    gl_FragColor = vec4(backColor, 1.0);\\r\\n    // gl_FragColor = vec4(vec3(backToFrontDepth) * 100.0, 1.0);\\r\\n    // gl_FragColor = vec4(offset.xy / offset.w + 0.5, 0.0, 1.0);\\r\\n    // gl_FragColor = vec4(vec3(theta2), 1.0);\\r\\n\\r\\n    // gl_FragColor = vec4(vec3(gl_FragCoord.z / gl_FragCoord.w - fragColor2.x * 10.0) / 2000.0, 1.0);\\r\\n}\"","module.exports = \"uniform samplerCube tCube;\\r\\nvarying vec3 vReflect;\\r\\nvarying vec3 vRefract[3];\\r\\nvarying float vReflectionFactor;\\r\\nvarying vec2 vUv;\\r\\n\\r\\nuniform sampler2D tNormal;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n    vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\\r\\n    vec4 refractedColor = vec4( 1.0 );\\r\\n\\r\\n    vec3 tnm = vec3(texture2D(tNormal, vUv));\\r\\n    tnm = tnm * 2.0 - 1.0;\\r\\n    tnm = 0.0 * tnm;\\r\\n    // tnm *= 0.01;\\r\\n    refractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) - tnm ).r;\\r\\n    refractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) - tnm ).g;\\r\\n    refractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) - tnm ).b;\\r\\n\\r\\n    gl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\\r\\n}\"","module.exports = \"varying vec3 vPos;\\r\\n\\r\\nvoid main() {\\r\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\r\\n    gl_Position = projectionMatrix * mvPosition;\\r\\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\r\\n    vPos = worldPosition.xyz - cameraPosition;\\r\\n}\\r\\n\"","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\n\nvar quot = /\"/g;\nvar replace = uncurryThis(''.replace);\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = toString(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + replace(toString(value), quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","module.exports = \"uniform float mRefractionRatio;\\r\\nuniform float mFresnelBias;\\r\\nuniform float mFresnelScale;\\r\\nuniform float mFresnelPower;\\r\\n\\r\\nvarying vec3 vReflect;\\r\\nvarying vec3 vRefract[3];\\r\\nvarying float vReflectionFactor;\\r\\nvarying vec2 vUv;\\r\\n\\r\\nvoid main() {\\r\\n\\r\\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\r\\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\r\\n\\r\\n    vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\\r\\n\\r\\n    vec3 I = worldPosition.xyz - cameraPosition;\\r\\n\\r\\n    vReflect = reflect( I, worldNormal );\\r\\n    vRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );\\r\\n    vRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );\\r\\n    vRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );\\r\\n    vReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );\\r\\n\\r\\n    gl_Position = projectionMatrix * mvPosition;\\r\\n    vUv = uv;\\r\\n\\r\\n}\\r\\n\"","var map = {\n\t\"./CardSkyboxShader/F.glsl\": \"91bc\",\n\t\"./FresnelShader/F.glsl\": \"7bcb\",\n\t\"./GlassFrontShader/F.glsl\": \"71cc\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"8e1c\";","module.exports = \"uniform samplerCube tCube;\\r\\nvarying vec3 vPos;\\r\\n\\r\\nvoid main() {\\r\\n    vec4 reflectedColor = textureCube( tCube, vec3(-vPos.x, vPos.yz) );\\r\\n    gl_FragColor = reflectedColor;\\r\\n}\"","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefineAll = require('../internals/redefine-all');\nvar getWeakData = require('../internals/internal-metadata').getWeakData;\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar ArrayIterationModule = require('../internals/array-iteration');\nvar hasOwn = require('../internals/has-own-property');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar splice = uncurryThis([].splice);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (store) {\n  return store.frozen || (store.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) splice(this.entries, index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: undefined\n      });\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    redefineAll(Prototype, {\n      // `{ WeakMap, WeakSet }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.delete\n      // https://tc39.es/ecma262/#sec-weakset.prototype.delete\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && hasOwn(data, state.id) && delete data[state.id];\n      },\n      // `{ WeakMap, WeakSet }.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.has\n      // https://tc39.es/ecma262/#sec-weakset.prototype.has\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && hasOwn(data, state.id);\n      }\n    });\n\n    redefineAll(Prototype, IS_MAP ? {\n      // `WeakMap.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.get\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          return data ? data[state.id] : undefined;\n        }\n      },\n      // `WeakMap.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.set\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // `WeakSet.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-weakset.prototype.add\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return Constructor;\n  }\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","module.exports = \"varying vec2 vUv;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 vCameraRay;\\r\\nvarying vec4 vWorldPosition;\\r\\nvarying mat4 vProjectionMatrix;\\r\\n// varying vec3 vRefract;\\r\\n// varying vec2 vRefractOffset;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\\r\\n    vec4 mvPosition = viewMatrix * vWorldPosition;\\r\\n    gl_Position = projectionMatrix * mvPosition;\\r\\n    vUv = uv;\\r\\n\\r\\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\\r\\n    vCameraRay = normalize(vWorldPosition.xyz - cameraPosition);\\r\\n\\r\\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\\r\\n}\\r\\n\"","// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it\nvar fails = require('../internals/fails');\n\nmodule.exports = fails(function () {\n  if (typeof ArrayBuffer == 'function') {\n    var buffer = new ArrayBuffer(8);\n    // eslint-disable-next-line es/no-object-isextensible, es/no-object-defineproperty -- safe\n    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });\n  }\n});\n","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternalModule = require('../internals/object-get-own-property-names-external');\nvar isExtensible = require('../internals/object-is-extensible');\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar REQUIRED = false;\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + id++, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar enable = function () {\n  meta.enable = function () { /* empty */ };\n  REQUIRED = true;\n  var getOwnPropertyNames = getOwnPropertyNamesModule.f;\n  var splice = uncurryThis([].splice);\n  var test = {};\n  test[METADATA] = 1;\n\n  // prevent exposing of metadata key\n  if (getOwnPropertyNames(test).length) {\n    getOwnPropertyNamesModule.f = function (it) {\n      var result = getOwnPropertyNames(it);\n      for (var i = 0, length = result.length; i < length; i++) {\n        if (result[i] === METADATA) {\n          splice(result, i, 1);\n          break;\n        }\n      } return result;\n    };\n\n    $({ target: 'Object', stat: true, forced: true }, {\n      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f\n    });\n  }\n};\n\nvar meta = module.exports = {\n  enable: enable,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n$({ global: true }, { Reflect: {} });\n\n// Reflect[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-reflect-@@tostringtag\nsetToStringTag(global.Reflect, 'Reflect', true);\n"],"sourceRoot":""}
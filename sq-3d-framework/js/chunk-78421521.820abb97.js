(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78421521"],{"08fd":function(t,e,n){var r={"./GlassFrontShader/F.glsl":"f430"};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id="08fd"},1148:function(t,e,n){"use strict";var r=n("da84"),i=n("5926"),a=n("577e"),o=n("1d80"),s=r.RangeError;t.exports=function(t){var e=a(o(this)),n="",r=i(t);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},"22b5":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return d}));var r,i={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Bounce.In(2*t):.5*i.Bounce.Out(2*t-1)+.5}}};r="undefined"===typeof self&&"undefined"!==typeof t&&t.hrtime?function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var a=r,o=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=a()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!e;i&&!1===i.update(t,o)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),s={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=s.Utils.Linear;return e<0?a(t[0],t[1],r):e>1?a(t[n],t[n-1],n-r):a(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,a=s.Utils.Bernstein,o=0;o<=r;o++)n+=i(1-e,r-o)*i(e,o)*t[o]*a(r,o);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=s.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),a(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):a(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=s.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var a=.5*(n-t),o=.5*(r-e),s=i*i,l=i*s;return(2*e-2*n+a+o)*l+(-3*e+3*n-2*a-o)*s+a*i+e}}},l=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),u=new o,c=function(){function t(t,e){void 0===e&&(e=u),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=i.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=l.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},t.prototype.duration=function(t){return this._duration=t,this},t.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"===typeof t?a()+parseFloat(t):t:a(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(t,e,n,r){for(var i in n){var a=t[i],o=Array.isArray(a),s=o?"array":typeof a,l=!o&&Array.isArray(n[i]);if("undefined"!==s&&"function"!==s){if(l){var u=n[i];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,a)),n[i]=[a].concat(u)}if("object"!==s&&!o||!a||l)"undefined"===typeof e[i]&&(e[i]=a),o||(e[i]*=1),r[i]=l?n[i].slice().reverse():e[i]||0;else{for(var c in e[i]=o?[]:{},a)e[i][c]=a[c];r[i]=o?[]:{},this._setupProperties(a,e[i],n[i],r[i])}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=a()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=a()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return this._group=t,this},t.prototype.delay=function(t){return this._delayTime=t,this},t.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=a()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,r){for(var i in n)if(void 0!==e[i]){var a=e[i]||0,o=n[i],s=Array.isArray(t[i]),l=Array.isArray(o),u=!s&&l;u?t[i]=this._interpolationFunction(o,r):"object"===typeof o&&o?this._updateProperties(t[i],a,o,r):(o=this._handleRelativeValue(a,o),"number"===typeof o&&(t[i]=a+(o-a)*r))}},t.prototype._handleRelativeValue=function(t,e){return"string"!==typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"===typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),h=(l.nextId,u),d=(h.getAll.bind(h),h.removeAll.bind(h),h.add.bind(h),h.remove.bind(h),h.update.bind(h))}).call(this,n("4362"))},"25ae":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("5a89");class i extends r["B"]{constructor(t){super(t),this.debug=!1,this.group=null,this.materials=[],this.meshes=[]}load(t,e,n,i){const a=this,o=""===this.path?r["C"].extractUrlBase(t):this.path,s=new r["r"](this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{e(a.parse(n,o))}catch(r){i?i(r):console.error(r),a.manager.itemError(t)}}),n,i)}parse(t,e){this.group=new r["v"],this.materials=[],this.meshes=[],this.readFile(t,e);for(let n=0;n<this.meshes.length;n++)this.group.add(this.meshes[n]);return this.group}readFile(t,e){const n=new DataView(t),r=new a(n,0,this.debugMessage);if(r.id===s||r.id===l||r.id===o){let t=r.readChunk();while(t){if(t.id===u){const e=t.readDWord();this.debugMessage("3DS file version: "+e)}else t.id===g?this.readMeshData(t,e):this.debugMessage("Unknown main chunk: "+t.hexId);t=r.readChunk()}}this.debugMessage("Parsed "+this.meshes.length+" meshes")}readMeshData(t,e){let n=t.readChunk();while(n){if(n.id===m){const t=+n.readDWord();this.debugMessage("Mesh Version: "+t)}else if(n.id===b){const t=n.readFloat();this.debugMessage("Master scale: "+t),this.group.scale.set(t,t,t)}else n.id===E?(this.debugMessage("Named Object"),this.readNamedObject(n)):n.id===y?(this.debugMessage("Material"),this.readMaterialEntry(n,e)):this.debugMessage("Unknown MDATA chunk: "+n.hexId);n=t.readChunk()}}readNamedObject(t){const e=t.readString();let n=t.readChunk();while(n){if(n.id===B){const t=this.readMesh(n);t.name=e,this.meshes.push(t)}else this.debugMessage("Unknown named object chunk: "+n.hexId);n=t.readChunk()}}readMaterialEntry(t,e){let n=t.readChunk();const i=new r["K"];while(n){if(n.id===w)i.name=n.readString(),this.debugMessage("   Name: "+i.name);else if(n.id===P)this.debugMessage("   Wireframe"),i.wireframe=!0;else if(n.id===T){const t=n.readByte();i.wireframeLinewidth=t,this.debugMessage("   Wireframe Thickness: "+t)}else if(n.id===O)i.side=r["m"],this.debugMessage("   DoubleSided");else if(n.id===j)this.debugMessage("   Additive Blending"),i.blending=r["a"];else if(n.id===_)this.debugMessage("   Diffuse Color"),i.color=this.readColor(n);else if(n.id===M)this.debugMessage("   Specular Color"),i.specular=this.readColor(n);else if(n.id===x)this.debugMessage("   Ambient color"),i.color=this.readColor(n);else if(n.id===C){const t=this.readPercentage(n);i.shininess=100*t,this.debugMessage("   Shininess : "+t)}else if(n.id===k){const t=this.readPercentage(n);i.opacity=1-t,this.debugMessage("  Transparency : "+t),i.transparent=i.opacity<1}else n.id===S?(this.debugMessage("   ColorMap"),i.map=this.readMap(n,e)):n.id===R?(this.debugMessage("   BumpMap"),i.bumpMap=this.readMap(n,e)):n.id===F?(this.debugMessage("   OpacityMap"),i.alphaMap=this.readMap(n,e)):n.id===D?(this.debugMessage("   SpecularMap"),i.specularMap=this.readMap(n,e)):this.debugMessage("   Unknown material chunk: "+n.hexId);n=t.readChunk()}this.materials[i.name]=i}readMesh(t){let e=t.readChunk();const n=new r["d"],i=new r["K"],a=new r["H"](n,i);a.name="mesh";while(e){if(e.id===N){const t=e.readWord();this.debugMessage("   Vertex: "+t);const i=[];for(let n=0;n<t;n++)i.push(e.readFloat()),i.push(e.readFloat()),i.push(e.readFloat());n.setAttribute("position",new r["s"](i,3))}else if(e.id===V)this.readFaceArray(e,a);else if(e.id===L){const t=e.readWord();this.debugMessage("   UV: "+t);const i=[];for(let n=0;n<t;n++)i.push(e.readFloat()),i.push(e.readFloat());n.setAttribute("uv",new r["s"](i,2))}else if(e.id===H){this.debugMessage("   Tranformation Matrix (TODO)");const t=[];for(let n=0;n<12;n++)t[n]=e.readFloat();const i=new r["G"];i.elements[0]=t[0],i.elements[1]=t[6],i.elements[2]=t[3],i.elements[3]=t[9],i.elements[4]=t[2],i.elements[5]=t[8],i.elements[6]=t[5],i.elements[7]=t[11],i.elements[8]=t[1],i.elements[9]=t[7],i.elements[10]=t[4],i.elements[11]=t[10],i.elements[12]=0,i.elements[13]=0,i.elements[14]=0,i.elements[15]=1,i.transpose();const o=new r["G"];o.copy(i).invert(),n.applyMatrix4(o),i.decompose(a.position,a.quaternion,a.scale)}else this.debugMessage("   Unknown mesh chunk: "+e.hexId);e=t.readChunk()}return n.computeVertexNormals(),a}readFaceArray(t,e){const n=t.readWord();this.debugMessage("   Faces: "+n);const r=[];for(let o=0;o<n;++o)r.push(t.readWord(),t.readWord(),t.readWord()),t.readWord();e.geometry.setIndex(r);let i=0,a=0;while(!t.endOfChunk){const n=t.readChunk();if(n.id===q){this.debugMessage("      Material Group");const t=this.readMaterialGroup(n),r=3*t.index.length;e.geometry.addGroup(a,r,i),a+=r,i++;const o=this.materials[t.name];!1===Array.isArray(e.material)&&(e.material=[]),void 0!==o&&e.material.push(o)}else this.debugMessage("      Unknown face array chunk: "+n.hexId)}1===e.material.length&&(e.material=e.material[0])}readMap(t,e){let n=t.readChunk(),i={};const a=new r["fb"](this.manager);a.setPath(this.resourcePath||e).setCrossOrigin(this.crossOrigin);while(n){if(n.id===I){const t=n.readString();i=a.load(t),this.debugMessage("      File: "+e+t)}else n.id===U?(i.offset.x=n.readFloat(),this.debugMessage("      OffsetX: "+i.offset.x)):n.id===W?(i.offset.y=n.readFloat(),this.debugMessage("      OffsetY: "+i.offset.y)):n.id===z?(i.repeat.x=n.readFloat(),this.debugMessage("      RepeatX: "+i.repeat.x)):n.id===A?(i.repeat.y=n.readFloat(),this.debugMessage("      RepeatY: "+i.repeat.y)):this.debugMessage("      Unknown map chunk: "+n.hexId);n=t.readChunk()}return i}readMaterialGroup(t){const e=t.readString(),n=t.readWord();this.debugMessage("         Name: "+e),this.debugMessage("         Faces: "+n);const r=[];for(let i=0;i<n;++i)r.push(t.readWord());return{name:e,index:r}}readColor(t){const e=t.readChunk(),n=new r["g"];if(e.id===h||e.id===d){const t=e.readByte(),r=e.readByte(),i=e.readByte();n.setRGB(t/255,r/255,i/255),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else if(e.id===c||e.id===f){const t=e.readFloat(),r=e.readFloat(),i=e.readFloat();n.setRGB(t,r,i),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else this.debugMessage("      Unknown color chunk: "+e.hexId);return n}readPercentage(t){const e=t.readChunk();switch(e.id){case p:return e.readShort()/100;case v:return e.readFloat();default:return this.debugMessage("      Unknown percentage chunk: "+e.hexId),0}}debugMessage(t){this.debug&&console.log(t)}}class a{constructor(t,e,n){this.data=t,this.offset=e,this.position=e,this.debugMessage=n,this.debugMessage instanceof Function&&(this.debugMessage=function(){}),this.id=this.readWord(),this.size=this.readDWord(),this.end=this.offset+this.size,this.end>t.byteLength&&this.debugMessage("Bad chunk size for chunk at "+e)}readChunk(){if(this.endOfChunk)return null;try{const t=new a(this.data,this.position,this.debugMessage);return this.position+=t.size,t}catch(t){return this.debugMessage("Unable to read chunk at "+this.position),null}}get hexId(){return this.id.toString(16)}get endOfChunk(){return this.position>=this.end}readByte(){const t=this.data.getUint8(this.position,!0);return this.position+=1,t}readFloat(){try{const t=this.data.getFloat32(this.position,!0);return this.position+=4,t}catch(t){return this.debugMessage(t+" "+this.position+" "+this.data.byteLength),0}}readInt(){const t=this.data.getInt32(this.position,!0);return this.position+=4,t}readShort(){const t=this.data.getInt16(this.position,!0);return this.position+=2,t}readDWord(){const t=this.data.getUint32(this.position,!0);return this.position+=4,t}readWord(){const t=this.data.getUint16(this.position,!0);return this.position+=2,t}readString(){let t="",e=this.readByte();while(e)t+=String.fromCharCode(e),e=this.readByte();return t}}const o=19789,s=15786,l=49725,u=2,c=16,h=17,d=18,f=19,p=48,v=49,g=15677,m=15678,b=256,y=45055,w=40960,x=40976,_=40992,M=41008,C=41024,k=41040,O=41089,j=41091,P=41093,T=41095,S=41472,F=41488,R=41520,D=41476,I=41728,z=41812,A=41814,U=41816,W=41818,E=16384,B=16640,N=16656,V=16672,q=16688,L=16704,H=16736},"38cf":function(t,e,n){var r=n("23e7"),i=n("1148");r({target:"String",proto:!0},{repeat:i})},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},5303:function(t,e,n){var r={"./GlassFrontShader/V.glsl":"c444"};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id="5303"},7612:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5a89");const i=new r["kb"];function a(t,e,n,r,a,o){const s=2*Math.PI*a/4,l=Math.max(o-2*a,0),u=Math.PI/4;i.copy(e),i[r]=0,i.normalize();const c=.5*s/(s+l),h=1-i.angleTo(t)/u;if(1===Math.sign(i[n]))return h*c;{const t=l/(s+l);return t+c+c*(1-h)}}class o extends r["c"]{constructor(t=1,e=1,n=1,i=2,o=.1){if(i=2*i+1,o=Math.min(t/2,e/2,n/2,o),super(1,1,1,i,i,i),1===i)return;const s=this.toNonIndexed();this.index=null,this.attributes.position=s.attributes.position,this.attributes.normal=s.attributes.normal,this.attributes.uv=s.attributes.uv;const l=new r["kb"],u=new r["kb"],c=new r["kb"](t,e,n).divideScalar(2).subScalar(o),h=this.attributes.position.array,d=this.attributes.normal.array,f=this.attributes.uv.array,p=h.length/6,v=new r["kb"],g=.5/i;for(let r=0,m=0;r<h.length;r+=3,m+=2){l.fromArray(h,r),u.copy(l),u.x-=Math.sign(u.x)*g,u.y-=Math.sign(u.y)*g,u.z-=Math.sign(u.z)*g,u.normalize(),h[r+0]=c.x*Math.sign(l.x)+u.x*o,h[r+1]=c.y*Math.sign(l.y)+u.y*o,h[r+2]=c.z*Math.sign(l.z)+u.z*o,d[r+0]=u.x,d[r+1]=u.y,d[r+2]=u.z;const i=Math.floor(r/p);switch(i){case 0:v.set(1,0,0),f[m+0]=a(v,u,"z","y",o,n),f[m+1]=1-a(v,u,"y","z",o,e);break;case 1:v.set(-1,0,0),f[m+0]=1-a(v,u,"z","y",o,n),f[m+1]=1-a(v,u,"y","z",o,e);break;case 2:v.set(0,1,0),f[m+0]=1-a(v,u,"x","z",o,t),f[m+1]=a(v,u,"z","x",o,n);break;case 3:v.set(0,-1,0),f[m+0]=1-a(v,u,"x","z",o,t),f[m+1]=1-a(v,u,"z","x",o,n);break;case 4:v.set(0,0,1),f[m+0]=1-a(v,u,"x","y",o,t),f[m+1]=1-a(v,u,"y","x",o,e);break;case 5:v.set(0,0,-1),f[m+0]=a(v,u,"x","y",o,t),f[m+1]=1-a(v,u,"y","x",o,e);break}}}}},"7d52":function(t,e,n){"use strict";n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return w})),n.d(e,"c",(function(){return x}));var r=n("3835"),i=n("bee2"),a=n("d4ec"),o=n("ade3"),s=(n("d3b7"),n("159b"),n("38cf"),n("5a89")),l=n("4721"),u=n("7612");function c(t){try{var e=n("5303")("./"+t+"/V.glsl"),r=n("08fd")("./"+t+"/F.glsl");return[e,r]}catch(i){return console.error("failed to fetch shader",i),["",""]}}var h,d,f,p,v,g,m,b=n("61d9"),y=Object(i["a"])((function t(e,n,i,l,u,h,d,f,p,v){if(Object(a["a"])(this,t),Object(o["a"])(this,"mesh",void 0),Object(o["a"])(this,"originalMaterial",void 0),Object(o["a"])(this,"refractionMaterial",void 0),Object(o["a"])(this,"backColor",void 0),Object(o["a"])(this,"refractionMaterialUniforms",void 0),this.mesh=n,this.mesh["refractionObject"]=this,this.mesh.material instanceof Array){this.originalMaterial=new Array;for(var g=0;g<this.mesh.material.length;g++)this.originalMaterial.push(this.mesh.material[g].clone())}else this.originalMaterial=this.mesh.material.clone();this.backColor=d,this.refractionMaterialUniforms={resolution:{value:i},tBackground:{value:l},tBackDepth:{value:h},tDisplayImage:{value:u},tSkybox:{value:e.environment},refractionFactor:{value:p},opacity:{value:v},absorbColor:{value:new s["g"](f)},objectCenter:{value:n.position}};var m=c("GlassFrontShader"),b=Object(r["a"])(m,2),y=b[0],w=b[1];this.refractionMaterial=new s["ab"]({vertexShader:y,fragmentShader:w,uniforms:this.refractionMaterialUniforms,side:s["u"]})})),w=function(){function t(e,n,r,i){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:512;Object(a["a"])(this,t),Object(o["a"])(this,"container",void 0),Object(o["a"])(this,"backgroundScene",void 0),Object(o["a"])(this,"renderer",void 0),Object(o["a"])(this,"camera",void 0),Object(o["a"])(this,"frontScene",void 0),Object(o["a"])(this,"backdepthTexture",void 0),Object(o["a"])(this,"backRenderTarget",void 0),Object(o["a"])(this,"refractionObjectList",void 0),Object(o["a"])(this,"suResolution",void 0),this.container=n,this.backgroundScene=e,this.renderer=r,this.camera=i,this.frontScene=new s["Y"],this.backdepthTexture=new s["k"](l,l,s["t"]),this.backRenderTarget=new s["nb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio),this.backRenderTarget.depthBuffer=!0,this.backRenderTarget.depthTexture=this.backdepthTexture,this.backRenderTarget.depthTexture.type=s["ib"],this.frontScene.background=this.backRenderTarget.texture,this.frontScene.environment=this.backgroundScene.environment,this.refractionObjectList=[],this.suResolution=new s["jb"](this.container.offsetWidth*window.devicePixelRatio,this.container.offsetHeight*window.devicePixelRatio)}return Object(i["a"])(t,[{key:"genFresnelMaterial",value:function(t){var e=s["Z"].lib["fresnel"],n=s["hb"].clone(e.uniforms);n["tCube"].value=t;var r={fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:n},i=new s["ab"](r);return i}},{key:"addRefractionMesh",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16777215,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1.49,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.2,l=new s["g"](r);e&&(t.material=new s["L"]({color:l,transparent:!0,opacity:.5,metalness:1,reflectivity:0,roughness:0,side:s["b"]})),this.refractionObjectList.push(new y(this.backgroundScene,t,this.suResolution,this.backRenderTarget.texture,n,this.backRenderTarget.depthTexture,l,i,a,o)),this.backgroundScene.add(t)}},{key:"onWindowResize",value:function(){this.suResolution.x=this.container.offsetWidth*window.devicePixelRatio,this.suResolution.y=this.container.offsetHeight*window.devicePixelRatio}},{key:"render",value:function(){var t=this;this.refractionObjectList.forEach((function(e){e.mesh.material=e.refractionMaterial,t.frontScene.add(e.mesh)})),this.renderer.setRenderTarget(null),this.renderer.render(this.frontScene,this.camera),this.refractionObjectList.forEach((function(e){e.mesh.material=e.originalMaterial,t.backgroundScene.add(e.mesh)}))}}]),t}();function x(t){h=t,f=new s["O"](45,window.innerWidth/window.innerHeight,1,5e3),f.position.set(30,20,200),f.lookAt(0,0,0),g=new s["Y"],d=new s["ob"]({antialias:!0,alpha:!0}),d.setClearColor(16777215),d.setPixelRatio(window.devicePixelRatio),d.setSize(window.innerWidth,window.innerHeight),h.appendChild(d.domElement),p=new l["a"](f,h),h.style.position="absolute",h.style.top="0px",h.style.left="0px",v=new b["Stats"],v.domElement.style.zIndex="100",h.appendChild(v.domElement);var e="./cube/",n=[e+"px.jpg",e+"nx.jpg",e+"py.jpg",e+"ny.jpg",e+"pz.jpg",e+"nz.jpg"],r=(new s["i"]).load(n);r.mapping=s["h"],g.background=r,g.environment=r;var i=new s["l"];i.position.x=300,i.position.y=200,i.position.z=100,g.add(i);var a=(new s["fb"]).load("./checkerboard.jpg");a.wrapS=a.wrapT=s["W"],a.repeat.set(10,10);var o=new s["I"]({map:a,side:s["m"]}),c=new s["R"](1e3,1e3,1,1),y=new s["H"](c,o);y.position.y-=20.1,y.rotation.x=Math.PI/2,m=new w(g,h,d,f);var x=new s["H"](new u["a"](40,40,40,5,5),new s["K"]({}));x.position.x-=40;var C=new s["H"](new s["bb"](20),new s["K"]({})),k=new s["H"](new s["j"](20,20,80,36),new s["K"]({}));k.position.x+=40,k.position.y+=20,m.addRefractionMesh(x,!0,null,0,0),m.addRefractionMesh(C,!0,null,24576,24576),m.addRefractionMesh(k,!0,null,1587,1587);var O=new s["H"](new s["bb"](20),new s["K"]({color:16711680}));O.position.copy(x.position),O.position.z-=50,g.add(O),window.addEventListener("resize",_),M()}function _(){f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),m.onWindowResize(),d.setSize(window.innerWidth,window.innerHeight)}function M(){requestAnimationFrame(M),C(),p.update(),v.update()}function C(){m.render()}},c444:function(t,e){t.exports="varying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\n// varying vec3 vRefract;\r\n// varying vec2 vRefractOffset;\r\nvarying vec4 vImageUVCenter;\r\n\r\nuniform vec3 objectCenter;\r\n\r\n\r\nvoid main() {\r\n    vWorldPosition = modelMatrix * vec4( position, 1.0 );\r\n    vec4 mvPosition = viewMatrix * vWorldPosition;\r\n    gl_Position = projectionMatrix * mvPosition;\r\n    vUv = uv;\r\n\r\n    vNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\r\n    vCameraPosition = cameraPosition;\r\n\r\n    vProjectionMatrix = projectionMatrix * modelViewMatrix;\r\n    vImageUVCenter = vProjectionMatrix * vec4( objectCenter, 1.0 );\r\n}\r\n"},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===a(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,l=0;l<o;l++)if(i[l]!==a[l]){s=l;break}var u=[];for(l=s;l<i.length;l++)u.push("..");return u=u.concat(a.slice(s)),u.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,a=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===e?e=o:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){n=o+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===n+1?"":t.slice(e,r)};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},f430:function(t,e){t.exports="uniform vec2 resolution;\r\nuniform sampler2D tBackground;\r\nuniform sampler2D tBackDepth;\r\nuniform sampler2D tDisplayImage;\r\n\r\nuniform samplerCube tSkybox;\r\nuniform vec3 absorbColor;\r\nuniform float refractionFactor;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\nvarying vec3 vCameraPosition;\r\nvarying vec4 vWorldPosition;\r\nvarying mat4 vProjectionMatrix;\r\nvarying vec4 vImageUVCenter;\r\n\r\nfloat near = 0.1;\r\nfloat far  = 5000.0;\r\n\r\nfloat LinearizeDepth(float depth) \r\n{\r\n    float z = depth * 2.0 - 1.0; // back to NDC \r\n    return (2.0 * near * far) / (far + near - z * (far - near));\t\r\n}\r\n\r\nvoid main() {\r\n\r\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n    // return;\r\n    float backDepth = float(texture2D( tBackDepth, vec2( gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y ) ).x);\r\n    float frontDepth = gl_FragCoord.z;\r\n\r\n    if (frontDepth > backDepth) {\r\n        discard;\r\n    }\r\n\r\n    float backDepthlinear = LinearizeDepth(backDepth);\r\n    float frontDepthlinear = LinearizeDepth(frontDepth);\r\n    \r\n    float backToFrontDepth = backDepthlinear - frontDepthlinear;\r\n    backToFrontDepth *= 0.5;\r\n    \r\n    vec3 vCameraRay = vWorldPosition.xyz / vWorldPosition.w - vCameraPosition;\r\n    vCameraRay = normalize(vCameraRay);\r\n    vec3 vRefract = refract( vCameraRay, vNormal, 1.0 / refractionFactor );\r\n    vec4 vOriginalPos = vWorldPosition + vec4(vCameraRay, 0.0);\r\n    vec4 vRefractedPos = vWorldPosition + vec4(vRefract, 0.0);\r\n    // vRefractedPos = vOriginalPos; //vWorldPosition + vec4(vRefract, 0.0);\r\n    vec4 vOriginalProjectedPos = vProjectionMatrix * vOriginalPos;\r\n    vec4 vRefractedProjectedPos = vProjectionMatrix * vRefractedPos;\r\n    vec2 offset = normalize(vRefractedProjectedPos - vOriginalProjectedPos).xy;\r\n    offset = normalize(offset);\r\n\r\n    // reflect\r\n    vec3 vReflect = reflect( vCameraRay, vNormal );\r\n    vec3 refCol = vec3(textureCube(tSkybox, vReflect));\r\n\r\n    // snell's law\r\n    float cosTheta1 = dot(vCameraRay, vNormal);\r\n    float sinTheta1 = 1.0 - cosTheta1 * cosTheta1;\r\n    float sinTheta2 = sinTheta1 / refractionFactor;\r\n    float theta2 = asin(sinTheta2);\r\n    offset *= sinTheta2;\r\n    offset *= 100.0;\r\n\r\n    offset /= backDepth;\r\n\r\n    float samplePointX_r = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.9) / resolution.x;\r\n    float samplePointY_r = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.9) / resolution.y;\r\n\r\n    float samplePointX_g = (gl_FragCoord.x + backToFrontDepth * offset.x * 0.95) / resolution.x;\r\n    float samplePointY_g = (gl_FragCoord.y + backToFrontDepth * offset.y * 0.95) / resolution.y;\r\n\r\n    float samplePointX_b = (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x;\r\n    float samplePointY_b = (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y;\r\n    \r\n    float backColor_r = texture2D( tBackground, vec2( samplePointX_r, samplePointY_r ) * 1.0 ).x;\r\n    float backColor_g = texture2D( tBackground, vec2( samplePointX_g, samplePointY_g ) * 1.0 ).y;\r\n    float backColor_b = texture2D( tBackground, vec2( samplePointX_b, samplePointY_b ) * 1.0 ).z;\r\n\r\n    vec3 backColor = vec3(backColor_r, backColor_g, backColor_b);\r\n    vec3 absorbColor = absorbColor * sqrt(backToFrontDepth) * opacity;\r\n    float sqrtDepth = sqrt(backToFrontDepth) * opacity;\r\n    float absorbFactor = sqrtDepth / (1.0 + sqrtDepth);\r\n    vec3 refractCol = mix(backColor, absorbColor, absorbFactor);\r\n\r\n    // backColor = texture2D( tBackground, vec2( (gl_FragCoord.x + backToFrontDepth * offset.x) / resolution.x, (gl_FragCoord.y + backToFrontDepth * offset.y) / resolution.y ) * 1.0 ).xyz;\r\n\r\n    // gl_FragColor = vec4(refCol, 1.0);\r\n    float reflectionCoeff = pow(sinTheta1, 4.0);\r\n    // reflectionCoeff = 1.0;\r\n\r\n    // vec4 image = vec4(vec3(texture2D( tDisplayImage, vec2( (gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y ) )), 1.0);\r\n    // vec4 image = vec4((gl_FragCoord.x + vImageUVCenter.x) / resolution.x, (gl_FragCoord.y + vImageUVCenter.y) / resolution.y, 1.0, 1.0);\r\n    // vec4 image = vec4(1.0, 0.0, 0.0, 1.0);\r\n\r\n    // gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    // gl_FragColor = image;\r\n    // if (gl_FragCoord.x < 600.0) {\r\n    //     gl_FragColor = vec4(mix(refractCol, refCol, reflectionCoeff), 1.0);\r\n    // }\r\n    // gl_FragColor = vec4(backColor, 1.0);\r\n    // gl_FragColor = vec4(vec3(backDepthlinear * 0.01), 1.0);\r\n}"},f93b:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("bee2"),i=n("d4ec"),a=n("257e"),o=n("262e"),s=n("2caf"),l=n("ade3"),u=n("5a89");class c extends u["H"]{constructor(t,e={}){super(t),this.type="Reflector";const n=this,r=void 0!==e.color?new u["g"](e.color):new u["g"](8355711),i=e.textureWidth||512,a=e.textureHeight||512,o=e.clipBias||0,s=e.shader||c.ReflectorShader,l=new u["P"],h=new u["kb"],d=new u["kb"],f=new u["kb"],p=new u["G"],v=new u["kb"](0,0,-1),g=new u["lb"],m=new u["kb"],b=new u["kb"],y=new u["lb"],w=new u["G"],x=new u["O"],_=new u["nb"](i,a),M=new u["ab"]({uniforms:u["hb"].clone(s.uniforms),fragmentShader:s.fragmentShader,vertexShader:s.vertexShader});M.uniforms["tDiffuse"].value=_.texture,M.uniforms["color"].value=r,M.uniforms["textureMatrix"].value=w,this.material=M,this.onBeforeRender=function(t,e,r){if(d.setFromMatrixPosition(n.matrixWorld),f.setFromMatrixPosition(r.matrixWorld),p.extractRotation(n.matrixWorld),h.set(0,0,1),h.applyMatrix4(p),m.subVectors(d,f),m.dot(h)>0)return;m.reflect(h).negate(),m.add(d),p.extractRotation(r.matrixWorld),v.set(0,0,-1),v.applyMatrix4(p),v.add(f),b.subVectors(d,v),b.reflect(h).negate(),b.add(d),x.position.copy(m),x.up.set(0,1,0),x.up.applyMatrix4(p),x.up.reflect(h),x.lookAt(b),x.far=r.far,x.updateMatrixWorld(),x.projectionMatrix.copy(r.projectionMatrix),w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(x.projectionMatrix),w.multiply(x.matrixWorldInverse),w.multiply(n.matrixWorld),l.setFromNormalAndCoplanarPoint(h,d),l.applyMatrix4(x.matrixWorldInverse),g.set(l.normal.x,l.normal.y,l.normal.z,l.constant);const i=x.projectionMatrix;y.x=(Math.sign(g.x)+i.elements[8])/i.elements[0],y.y=(Math.sign(g.y)+i.elements[9])/i.elements[5],y.z=-1,y.w=(1+i.elements[10])/i.elements[14],g.multiplyScalar(2/g.dot(y)),i.elements[2]=g.x,i.elements[6]=g.y,i.elements[10]=g.z+1-o,i.elements[14]=g.w,_.texture.encoding=t.outputEncoding,n.visible=!1;const a=t.getRenderTarget(),s=t.xr.enabled,u=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(_),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(e,x),t.xr.enabled=s,t.shadowMap.autoUpdate=u,t.setRenderTarget(a);const c=r.viewport;void 0!==c&&t.state.viewport(c),n.visible=!0},this.getRenderTarget=function(){return _},this.dispose=function(){_.dispose(),n.material.dispose()}}}c.prototype.isReflector=!0,c.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"};var h=function(t){Object(o["a"])(n,t);var e=Object(s["a"])(n);function n(t,r){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i["a"])(this,n),o=e.call(this,t),Object(l["a"])(Object(a["a"])(o),"material",void 0);var h=Object(a["a"])(o),f=(void 0!==s.color?new u["g"](s.color):new u["g"](16777215),s.textureWidth||512),p=s.textureHeight||512,v=s.clipBias||0,g=s.flowDirection||new u["jb"](1,0),m=s.flowSpeed||.01,b=s.reflectivity||.5,y=s.scale||1,w=d,x=new u["fb"],_=s.normalMap0||x.load("./water/Water_1_M_Normal.jpg"),M=s.normalMap1||x.load("./water/Water_2_M_Normal.jpg"),C=.15,k=.5*C,O=new u["G"],j=new u["f"];o.material=new u["ab"];var P=new c(t,{textureWidth:f,textureHeight:p,clipBias:v});function T(t){O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(t.projectionMatrix),O.multiply(t.matrixWorldInverse),O.multiply(h.matrixWorld)}function S(){var t=j.getDelta(),e=h.material.uniforms["config"];e.value.x+=m*t,e.value.y=e.value.x+k,e.value.x>=C?(e.value.x=0,e.value.y=k):e.value.y>=C&&(e.value.y=e.value.y-C)}return P.matrixAutoUpdate=!1,o.material=new u["ab"]({uniforms:u["hb"].merge([u["gb"]["fog"],w.uniforms]),vertexShader:w.vertexShader,fragmentShader:w.fragmentShader,transparent:!0,fog:!0}),o.material.uniforms["flowDirection"].value=g,_.wrapS=_.wrapT=u["W"],M.wrapS=M.wrapT=u["W"],o.material.uniforms["tReflectionMap"].value=P.getRenderTarget().texture,o.material.uniforms["tNormalMap0"].value=_,o.material.uniforms["tNormalMap1"].value=M,o.material.uniforms["reflectivity"].value=b,o.material.uniforms["textureMatrix"].value=O,o.material.uniforms["config"].value.x=0,o.material.uniforms["config"].value.y=k,o.material.uniforms["config"].value.z=k,o.material.uniforms["config"].value.w=y,o.onBeforeRender=function(t,e,n,i,a,o){T(n),S(),h.visible=!1,P.matrixWorld.copy(h.matrixWorld),P.onBeforeRender(t,r,n,i,a,o),h.visible=!0},o}return Object(r["a"])(n)}(u["H"]),d={uniforms:{reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new u["lb"]},flowDirection:{type:"v2",value:new u["jb"]}},vertexShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\tuniform vec2 flowDirection;\n\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\tflow = flowDirection;\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n            reflectance = pow(reflectance + 0.3, 4.0);\n            // reflectance = floor(reflectance *  2.0) / 4.0;\n            vec4 refractColor = vec4(1.0);\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\n\t\t\tgl_FragColor = mix(refractColor, reflectColor, reflectance);\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}"}},f998:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("d4ec"),i=n("bee2"),a=n("ade3"),o=n("22b5"),s=n("5a89"),l=function(){function t(){var e=this;Object(r["a"])(this,t),Object(a["a"])(this,"animationObjectCount",void 0),Object(a["a"])(this,"requestId",void 0),Object(a["a"])(this,"loopAnim",(function(){o["c"](),e.requestId>=0&&(e.requestId=window.requestAnimationFrame(e.loopAnim))})),Object(a["a"])(this,"startAnim",(function(){e.requestId<0&&(e.requestId=window.requestAnimationFrame(e.loopAnim))})),Object(a["a"])(this,"stopAnim",(function(){e.requestId>=0&&(window.cancelAnimationFrame(e.requestId),e.requestId=-1)})),this.animationObjectCount=0,this.requestId=-1}return Object(i["a"])(t,[{key:"addTweenAnimObject",value:function(){this.animationObjectCount<=0&&this.startAnim(),this.animationObjectCount++}},{key:"removeTweenAnimObject",value:function(){this.animationObjectCount<=0||(1==this.animationObjectCount&&this.stopAnim(),this.animationObjectCount--)}},{key:"tweenNumber",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,l={a:t};this.addTweenAnimObject(),new o["b"](l).to({a:e},a).easing(s).onUpdate((function(){return n(l.a)})).onComplete((function(){i.removeTweenAnimObject(),r(l.a)})).start()}},{key:"tweenVector2",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,l={x:t.x,y:t.y},u={x:e.x,y:e.y};this.addTweenAnimObject(),new o["b"](l).to(u,a).easing(s).onUpdate((function(){return n(l.x,l.y)})).onComplete((function(){i.removeTweenAnimObject(),r(l.x,l.y)})).start()}},{key:"tweenVector3",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,l={x:t.x,y:t.y,z:t.z},u={x:e.x,y:e.y,z:e.z};this.addTweenAnimObject(),new o["b"](l).to(u,a).easing(s).onUpdate((function(){return n(l.x,l.y,l.z)})).onComplete((function(){i.removeTweenAnimObject(),r(l.x,l.y,l.z)})).start()}},{key:"tweenEuler",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,u={x:t.x,y:t.y,z:t.z},c={x:e.x,y:e.y,z:e.z};this.addTweenAnimObject(),new o["b"](u).to(c,a).easing(l).onUpdate((function(){return n(new s["p"](u.x,u.y,u.z))})).onComplete((function(){i.removeTweenAnimObject(),r(new s["p"](u.x,u.y,u.z))})).start()}},{key:"tweenThreeVector3",value:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o["a"].Quadratic.InOut,u={x:t.x,y:t.y,z:t.z},c={x:e.x,y:e.y,z:e.z};this.addTweenAnimObject(),new o["b"](u).to(c,a).easing(l).onUpdate((function(){return n(new s["kb"](u.x,u.y,u.z))})).onComplete((function(){i.removeTweenAnimObject(),r(new s["kb"](u.x,u.y,u.z))})).start()}}]),t}(),u=new l}}]);
//# sourceMappingURL=chunk-78421521.820abb97.js.map
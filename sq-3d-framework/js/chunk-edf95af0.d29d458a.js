(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edf95af0"],{"2af1":function(t,e,i){var a=i("23e7"),s=i("f748");a({target:"Math",stat:!0},{sign:s})},"2ffd":function(t,e,i){},8896:function(t,e,i){"use strict";i("2ffd")},9037:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[i("div",{staticClass:"loading-container",class:{"loading-container--hidden":t.loadingStat.isLoaded,"loading-container--none":t.loadingStat.noLoadingStat}},[i("div",{staticClass:"load-stat"},[i("div",{staticClass:"load-pgbar",style:{width:100*t.loadingStat.loaded/t.loadingStat.total+"%"}}),i("div",{staticClass:"load-text"},[t._v(t._s(Math.round(100*t.loadingStat.loaded/t.loadingStat.total))+" %")])])])])])},s=[],n=i("2b0e"),o=i("ade3"),r=i("d4ec"),h=i("bee2"),c=i("262e"),d=i("2caf"),l=(i("2af1"),i("d3b7"),i("159b"),i("5a89")),u=i("61d9"),m=i("26e3"),g=function(){function t(e,i,a,s,n,h){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.01;Object(r["a"])(this,t),Object(o["a"])(this,"angle",void 0),Object(o["a"])(this,"radius",void 0),Object(o["a"])(this,"z",void 0),Object(o["a"])(this,"angleTarget",void 0),Object(o["a"])(this,"radiusTarget",void 0),Object(o["a"])(this,"zTarget",void 0),Object(o["a"])(this,"angleV",void 0),Object(o["a"])(this,"radiusV",void 0),Object(o["a"])(this,"zV",void 0),Object(o["a"])(this,"momentum",void 0),Object(o["a"])(this,"attraction",void 0),Object(o["a"])(this,"relVelocity",void 0),Object(o["a"])(this,"isAlmostStatic",void 0),Object(o["a"])(this,"staticThreshold",void 0),Object(o["a"])(this,"afterStaticEvent",void 0),this.angle=e,this.radius=i,this.z=a,this.angleTarget=e,this.radiusTarget=i,this.zTarget=a,this.angleV=0,this.radiusV=0,this.zV=0,this.momentum=s,this.attraction=n,this.relVelocity=h,this.isAlmostStatic=!0,this.staticThreshold=c,this.afterStaticEvent=void 0}return Object(h["a"])(t,[{key:"getPosition",value:function(){return new l["Gb"](-this.radius*Math.cos(this.angle+Math.PI/2),this.radius*Math.sin(this.angle+Math.PI/2),-this.z)}},{key:"getRotation",value:function(){return new l["x"](0,0,-this.angle-Math.PI/2)}},{key:"nonlinear",value:function(t){return Math.sqrt(Math.abs(t))*Math.sign(t)}},{key:"update",value:function(){this.angleV=this.attraction*this.nonlinear(this.angleTarget-this.angle)+this.momentum*this.angleV,this.radiusV=this.attraction*this.nonlinear(this.radiusTarget-this.radius)+this.momentum*this.radiusV,this.zV=this.attraction*this.nonlinear(this.zTarget-this.z)+this.momentum*this.zV,this.angle+=this.relVelocity*this.angleV*.1,this.radius+=this.relVelocity*this.radiusV,this.z+=this.relVelocity*this.zV;var t=this.isAlmostStatic;this.isAlmostStatic=Math.abs(this.radiusTarget-this.radius)+Math.abs(this.angleTarget-this.angle)+Math.abs(this.zTarget-this.z)<this.staticThreshold,!t&&this.isAlmostStatic&&this.afterStaticEvent&&(this.afterStaticEvent(),this.afterStaticEvent=void 0)}}]),t}(),v=function(t){Object(c["a"])(i,t);var e=Object(d["a"])(i);function i(t,a,s,n,o,h){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.01;return Object(r["a"])(this,i),e.call(this,t,a,s,n,o,h,c)}return Object(h["a"])(i,[{key:"getPosition",value:function(){return new l["Gb"](-this.radius*Math.cos(this.angle+Math.PI/2),this.radius*Math.sin(this.angle+Math.PI/2),-this.z)}},{key:"getRotation",value:function(){return new l["x"](Math.PI/2,-this.angle,Math.PI/2)}},{key:"nonlinear",value:function(t){return Math.sqrt(Math.abs(t))*Math.sign(t)}},{key:"update",value:function(){this.angleV=this.attraction*this.nonlinear(this.angleTarget-this.angle)+this.momentum*this.angleV,this.radiusV=this.attraction*this.nonlinear(this.radiusTarget-this.radius)+this.momentum*this.radiusV,this.zV=this.attraction*this.nonlinear(this.zTarget-this.z)+this.momentum*this.zV,this.angle+=this.relVelocity*this.angleV*.1,this.radius+=this.relVelocity*this.radiusV,this.z+=this.relVelocity*this.zV;var t=this.isAlmostStatic;this.isAlmostStatic=Math.abs(this.radiusTarget-this.radius)+Math.abs(this.angleTarget-this.angle)+Math.abs(this.zTarget-this.z)<this.staticThreshold,!t&&this.isAlmostStatic&&this.afterStaticEvent&&(this.afterStaticEvent(),this.afterStaticEvent=void 0)}}]),i}(g),f=function(){function t(e,i,a){Object(r["a"])(this,t),Object(o["a"])(this,"mesh",void 0),Object(o["a"])(this,"info",void 0),Object(o["a"])(this,"controller",void 0),this.mesh=e,this.info=i,this.controller=a,this.mesh.position.copy(this.controller.getPosition()),this.mesh.rotation.copy(this.controller.getRotation())}return Object(h["a"])(t,[{key:"updateByController",value:function(){this.controller.update(),this.mesh.position.copy(this.controller.getPosition()),this.mesh.rotation.copy(this.controller.getRotation())}}]),t}(),b=function(){function t(e,i,a,s,n,h,c){var d=this,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{cardSizeX:70,cardSizeY:50,cardRingRadius:90,cardRingFocusRadius:70,cardMomentum:.87,cardAttraction:.25,cardRelVelocity:.18,wheelSpeedFactor:.4,cameraDist:220};Object(r["a"])(this,t),Object(o["a"])(this,"container",void 0),Object(o["a"])(this,"renderer",void 0),Object(o["a"])(this,"scene",void 0),Object(o["a"])(this,"stats",void 0),Object(o["a"])(this,"mousePosX",void 0),Object(o["a"])(this,"mousePosY",void 0),Object(o["a"])(this,"pointer",void 0),Object(o["a"])(this,"camera",void 0),Object(o["a"])(this,"cameraBasicLookAt",void 0),Object(o["a"])(this,"cameraBasicPosition",void 0),Object(o["a"])(this,"raycaster",void 0),Object(o["a"])(this,"intersectObjs",void 0),Object(o["a"])(this,"cssScene",void 0),Object(o["a"])(this,"cssRenderer",void 0),Object(o["a"])(this,"loadingManager",void 0),Object(o["a"])(this,"cards",void 0),Object(o["a"])(this,"cardGroup",void 0),Object(o["a"])(this,"configs",void 0),Object(o["a"])(this,"pickedCardIndex",void 0),Object(o["a"])(this,"carouselRotateAngle",void 0),Object(o["a"])(this,"lastWheelTime",void 0),Object(o["a"])(this,"onCardFocus",void 0),Object(o["a"])(this,"onCardRouteJump",void 0),Object(o["a"])(this,"cameraPositionController",void 0),Object(o["a"])(this,"cameraWithMouseRotateFactor",void 0),Object(o["a"])(this,"isScenePaused",void 0),Object(o["a"])(this,"animate",(function(){d.isScenePaused||(requestAnimationFrame(d.animate),d.cards.forEach((function(t){t.updateByController()})),d.render(),d.stats.update())})),Object(o["a"])(this,"onWindowResize",(function(){d.camera.aspect=window.innerWidth/window.innerHeight,d.camera.updateProjectionMatrix(),d.renderer.setSize(window.innerWidth,window.innerHeight),d.cssRenderer&&d.cssRenderer.setSize(window.innerWidth,window.innerHeight)})),Object(o["a"])(this,"onMouseWheel",(function(t){d.lastWheelTime=(new Date).getTime(),t.deltaY>0?d.carouselRotateAngle+=d.configs.wheelSpeedFactor:d.carouselRotateAngle-=d.configs.wheelSpeedFactor;var e=d;setTimeout((function(){var t=(new Date).getTime();if(t-e.lastWheelTime>=199){var i=Math.round(e.carouselRotateAngle),a=(i%e.cards.length+e.cards.length)%e.cards.length;console.log("AAAAAAAAAA",a,i),e.pickCard(e.pickedCardIndex,a)}}),200),d.makeCarousel()})),Object(o["a"])(this,"onMouseMove",(function(t){d.mousePosX=t.clientX,d.mousePosY=t.clientY,d.pointer.x=t.clientX/window.innerWidth*2-1,d.pointer.y=-t.clientY/window.innerHeight*2+1})),Object(o["a"])(this,"onClick",(function(t){d.raycaster.setFromCamera(d.pointer,d.camera);var e=d.raycaster.intersectObjects(d.intersectObjs,!1);if(e.length>=1){for(var i=0;i<d.cards.length;i++)if(e[0].object==d.cards[i].mesh)break;d.pickCard(d.pickedCardIndex,i)}}));this.container=e,this.camera=new l["db"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new l["Lb"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=l["cb"],this.stats=new u["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.cameraBasicLookAt=new l["Gb"](0),this.cameraBasicPosition=new l["Gb"](0,0,g.cameraDist),this.camera.position.copy(this.cameraBasicPosition),this.camera.lookAt(this.cameraBasicLookAt),this.scene=new l["pb"],this.cssScene=new l["pb"],this.loadingManager=new l["N"]((function(){a&&(a(),d.makeCarousel())}),(function(t,e,i){s&&s(t,e,i)}),(function(t){n&&n(t)})),this.intersectObjs=[],this.cardGroup=new l["D"],this.cards=[],this.configs=g;var b=new l["gb"](g.cardSizeX,g.cardSizeY);i.forEach((function(t,e){var a=new l["Ab"](d.loadingManager).load(t.imgUrl),s=new f(new l["T"](b,new l["U"]({map:a,side:l["t"]})),t,new v(2*Math.random()+e*Math.PI*2/i.length,200,200*Math.random()+100,d.configs.cardMomentum,d.configs.cardAttraction,d.configs.cardRelVelocity));s.mesh.castShadow=!0,s.mesh.receiveShadow=!0,d.cards.push(s),d.cardGroup.add(s.mesh),d.intersectObjs.push(s.mesh)})),this.cardGroup.rotation.x=Math.PI/2,this.scene.add(this.cardGroup),this.carouselRotateAngle=0,this.pickedCardIndex=0,this.lastWheelTime=0,this.onCardFocus=h,this.onCardRouteJump=c,this.raycaster=new l["mb"],this.cameraPositionController=new m["b"](new l["Gb"],.9,.002),this.cameraWithMouseRotateFactor=35,this.mousePosX=0,this.mousePosY=0,this.pointer=new l["Fb"],this.isScenePaused=!1,this.resumeScene()}return Object(h["a"])(t,[{key:"render",value:function(){this.renderer.render(this.scene,this.camera),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"makeCarousel",value:function(){var t=this,e=2*Math.PI/this.cards.length;this.cards.forEach((function(i,a){i.controller.angleTarget=(a-t.carouselRotateAngle)*e,i.controller.radiusTarget=t.configs.cardRingRadius,i.controller.zTarget=0}))}},{key:"makeCarouselFocus",value:function(t,e){e<t&&(e+=this.cards.length),this.carouselRotateAngle=Math.round(this.carouselRotateAngle),e<=t+this.cards.length/2?this.carouselRotateAngle+=e-t:this.carouselRotateAngle+=e-t-this.cards.length,this.makeCarousel()}},{key:"pickCard",value:function(t,e){e<0||e>this.cards.length-1||(this.makeCarouselFocus(t,e),this.onCardFocus&&this.onCardFocus(e),this.pickedCardIndex=e)}},{key:"updateCamera",value:function(){var t=new l["Gb"](this.pointer.x*this.cameraWithMouseRotateFactor,this.pointer.y*this.cameraWithMouseRotateFactor,-this.pointer.y*this.cameraWithMouseRotateFactor);this.cameraPositionController.update(t),t.copy(this.cameraPositionController.currentVec3).add(this.cameraBasicPosition),this.camera.position.copy(t),this.camera.lookAt(this.cameraBasicLookAt)}},{key:"pauseScene",value:function(){this.isScenePaused=!0;var t=this;window.removeEventListener("resize",t.onWindowResize),window.removeEventListener("wheel",t.onMouseWheel),window.removeEventListener("mousemove",t.onMouseMove),window.removeEventListener("click",t.onClick)}},{key:"resumeScene",value:function(){this.isScenePaused=!1,this.animate();var t=this;window.addEventListener("resize",t.onWindowResize),window.addEventListener("wheel",t.onMouseWheel),window.addEventListener("mousemove",t.onMouseMove),window.addEventListener("click",t.onClick)}}]),t}(),w=n["a"].extend({data:function(){return{cm:null,loadingStat:{loaded:0,total:1,isLoaded:!1,noLoadingStat:!1},cardInfos:new Array}},mounted:function(){for(var t=this,e=this,i=0;i<10;i++)this.cardInfos.push({imgUrl:"card".concat(Math.floor(i%3)+1,".jpg"),url:"fakeUrl_"+i});this.$refs["canvas-container"]instanceof HTMLElement&&(this.cm=new b(this.$refs["canvas-container"],this.cardInfos,(function(){console.log("loaded"),e.loadingStat.isLoaded=!0,setTimeout((function(){e.loadingStat.noLoadingStat=!0}),501)}),(function(e,i,a){t.loadingStat.loaded=i,t.loadingStat.total=a}),(function(t){console.error("failed to load asset: "+t),e.loadingStat.isLoaded=!0}),(function(t){console.log("focused on card: ",t)})))},methods:{onGlassClick:function(){alert("glass clicked!")}}}),p=w,j=(i("8896"),i("2877")),O=Object(j["a"])(p,a,s,!1,null,"d72f668e",null);e["default"]=O.exports},f748:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}}}]);
//# sourceMappingURL=chunk-edf95af0.d29d458a.js.map
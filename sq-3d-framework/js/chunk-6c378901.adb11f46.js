(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c378901"],{"0da5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"canvas-container",attrs:{id:"canvas-container"}},[i("div",{staticClass:"loading-container",class:{"loading-container--hidden":t.loadingStat.isLoaded,"loading-container--none":t.loadingStat.noLoadingStat}},[i("div",{staticClass:"load-stat"},[i("div",{staticClass:"load-pgbar",style:{width:100*t.loadingStat.loaded/t.loadingStat.total+"%"}}),i("div",{staticClass:"load-text"},[t._v(t._s(Math.round(100*t.loadingStat.loaded/t.loadingStat.total))+" %")])])])]),i("div",{ref:"dom3d-container",attrs:{id:"dom3d-container"}},[i("div",{ref:"dom3d-test",attrs:{id:"dom3d-test"}},[i("p",[t._v("HTML element: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua")])])])])},a=[],o=i("5a89"),s=i("2b0e"),r=i("d4ec"),c=i("bee2"),d=i("ade3"),h=(i("d3b7"),i("159b"),i("22b5")),l=i("32d9"),u=i("93e9"),m=i("61d9"),v=i("25ae"),g=i("fb12"),p=i("26e3"),b=i("7d52"),f=i("7612"),w=i("f998"),j=i("257e"),O=i("262e"),M=i("2caf"),y=function(){function t(e,i,n,a,s){Object(r["a"])(this,t),Object(d["a"])(this,"birthTime",void 0),Object(d["a"])(this,"deathTime",void 0),Object(d["a"])(this,"position",void 0),Object(d["a"])(this,"scale",void 0),Object(d["a"])(this,"rotation",void 0),Object(d["a"])(this,"color",void 0),Object(d["a"])(this,"instanceIndex",void 0),Object(d["a"])(this,"dummy",void 0),this.birthTime=0,this.deathTime=1,this.position=e,this.rotation=i,this.scale=n,this.dummy=new o["M"],this.color=a,this.instanceIndex=s}return Object(c["a"])(t,[{key:"resetGeom",value:function(t){this.dummy.position.copy(this.position),this.dummy.rotation.copy(this.rotation),this.dummy.scale.set(this.scale,this.scale,this.scale),this.dummy.updateMatrix(),t.setMatrixAt(this.instanceIndex,this.dummy.matrix),t.setColorAt(this.instanceIndex,this.color)}}]),t}(),S=function(t){Object(O["a"])(i,t);var e=Object(M["a"])(i);function i(t,n,a,s,c,h){var l;return Object(r["a"])(this,i),l=e.call(this,t,n,a,s,h),Object(d["a"])(Object(j["a"])(l),"direction",void 0),Object(d["a"])(Object(j["a"])(l),"mixColor",void 0),Object(d["a"])(Object(j["a"])(l),"randomFactor",void 0),l.direction=(new o["kb"]).copy(t),l.birthTime=.2*Math.random(),l.deathTime=.2*Math.random()+.8,l.mixColor=c,l.randomFactor=Math.random(),l}return Object(c["a"])(i,[{key:"updateGeomByRule",value:function(t,e,i){if(!(e<this.birthTime))if(e>=this.deathTime)this.resetGeom(t);else{var n=i({index:this.instanceIndex,interp:(e-this.birthTime)/(this.deathTime-this.birthTime),originalPosition:this.position,originalRotation:this.rotation,originalColor:this.color,originalScale:this.scale,mixColor:this.mixColor,randomFactor:this.randomFactor});this.dummy.position.copy(n.curPosition),this.dummy.rotation.copy(n.curRotation),this.dummy.scale.set(n.curScale,n.curScale,n.curScale),this.dummy.updateMatrix(),t.setMatrixAt(this.instanceIndex,this.dummy.matrix),t.setColorAt(this.instanceIndex,n.curColor)}}}]),i}(y),C=Object(c["a"])((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;Object(r["a"])(this,t),Object(d["a"])(this,"particleCount",void 0),Object(d["a"])(this,"mesh",void 0),this.particleCount=e,this.mesh=new o["z"](i,n,e),this.mesh.instanceMatrix.setUsage(o["n"])})),x=function(t){Object(O["a"])(i,t);var e=Object(M["a"])(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,a=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;Object(r["a"])(this,i),t=e.call(this,n,a,o),Object(d["a"])(Object(j["a"])(t),"particleControllers",void 0),t.particleControllers=[];for(var u=0;u<n;u++){var m=s(u),v=c(u),g=h(u),p=l(u),b=new y(m,v,g,p,u);t.particleControllers.push(b),b.resetGeom(t.mesh)}return t}return Object(c["a"])(i)}(C),P=function(t){Object(O["a"])(i,t);var e=Object(M["a"])(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,a=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,m=arguments.length>8?arguments[8]:void 0;Object(r["a"])(this,i),t=e.call(this,n,a,o),Object(d["a"])(Object(j["a"])(t),"isInTransition",void 0),Object(d["a"])(Object(j["a"])(t),"particleControllers",void 0),Object(d["a"])(Object(j["a"])(t),"animRuleFunc",void 0),t.isInTransition=!1,t.particleControllers=[],t.animRuleFunc=m;for(var v=0;v<n;v++){var g=s(v),p=c(v),b=h(v),f=l(v),w=u(v),O=new S(g,p,b,f,w,v);t.particleControllers.push(O),O.resetGeom(t.mesh)}return t}return Object(c["a"])(i,[{key:"transit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;if(!this.isInTransition){var e=this;w["a"].tweenNumber(0,1,(function(t){e.particleControllers.forEach((function(i){i.updateGeomByRule(e.mesh,t,e.animRuleFunc)})),e.mesh.instanceMatrix.needsUpdate=!0,e.mesh.instanceColor&&(e.mesh.instanceColor.needsUpdate=!0)}),(function(){e.isInTransition=!1,e.mesh.instanceMatrix.needsUpdate=!0,e.mesh.instanceColor&&(e.mesh.instanceColor.needsUpdate=!0)}),t)}}}]),i}(C),R=i("f93b"),k=function(){function t(e,i,n,a){var s=this;Object(r["a"])(this,t),Object(d["a"])(this,"container",void 0),Object(d["a"])(this,"renderer",void 0),Object(d["a"])(this,"cardInsideScene",void 0),Object(d["a"])(this,"scene",void 0),Object(d["a"])(this,"composer",void 0),Object(d["a"])(this,"stats",void 0),Object(d["a"])(this,"refractionManager",void 0),Object(d["a"])(this,"mousePosX",void 0),Object(d["a"])(this,"mousePosY",void 0),Object(d["a"])(this,"pointer",void 0),Object(d["a"])(this,"camera",void 0),Object(d["a"])(this,"cameraZPosition",void 0),Object(d["a"])(this,"cameraLootAtController",void 0),Object(d["a"])(this,"cameraTargetPosition",void 0),Object(d["a"])(this,"cameraWithMouseMoveFactor",void 0),Object(d["a"])(this,"raycaster",void 0),Object(d["a"])(this,"intersectGlassObjs",void 0),Object(d["a"])(this,"glassPosRadius",void 0),Object(d["a"])(this,"glassSelected",void 0),Object(d["a"])(this,"glassIsRotating",void 0),Object(d["a"])(this,"cssScene",void 0),Object(d["a"])(this,"cssRenderer",void 0),Object(d["a"])(this,"loadingManager",void 0),Object(d["a"])(this,"leavesParticleCount",void 0),Object(d["a"])(this,"leavesMatrixDummy",void 0),Object(d["a"])(this,"leavesParticlesMeshes",void 0),Object(d["a"])(this,"particleEngineDict",void 0),Object(d["a"])(this,"animate",(function(){requestAnimationFrame(s.animate),s.updateCamera(),s.render(),s.stats.update()}));var c=this;this.cameraZPosition=500,this.container=e,this.camera=new o["O"](45,window.innerWidth/window.innerHeight,1,5e3),this.renderer=new o["ob"]({alpha:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.container.appendChild(this.renderer.domElement),this.stats=new m["Stats"],this.stats.domElement.style.zIndex="100",this.container.appendChild(this.stats.domElement),this.camera.position.set(0,200,200),this.scene=new o["Y"],this.cssScene=new o["Y"],this.cardInsideScene=new o["Y"],this.loadingManager=new o["D"]((function(){i&&i()}),(function(t,e,i){n&&n(t,e,i)}),(function(t){a&&a(t)}));var h="./cube1/",g=[h+"px.jpg",h+"nx.jpg",h+"py.jpg",h+"ny.jpg",h+"pz.jpg",h+"nz.jpg"],w=new o["i"](this.loadingManager).load(g);w.mapping=o["h"],this.scene.environment=w,this.refractionManager=new b["a"](this.scene,this.container,this.renderer,this.camera);var j=new u["a"](this.scene,this.camera);j.clear=!0,j.clearDepth=!1,this.composer=new l["a"](this.renderer,this.refractionManager.backRenderTarget),this.composer.renderToScreen=!1,this.composer.addPass(j),this.refractionManager.backRenderTarget.texture=this.composer.readBuffer.texture,this.refractionManager.frontScene.background=this.composer.readBuffer.texture;var O=new o["S"];O.position.x=0,O.position.y=100,O.position.z=0,this.scene.add(O),this.particleEngineDict=[],this.intersectGlassObjs=[];var M=new o["H"](new f["a"](40,40,40,5,5),new o["K"]({color:new o["g"](16711935)})),y=.6-Math.PI/2;this.glassPosRadius=120,M.position.set(Math.cos(y)*this.glassPosRadius,30,Math.sin(y)*this.glassPosRadius);var S=new o["fb"](this.loadingManager).load("./jutabag3ds/texture/normal.jpg");this.refractionManager.addRefractionMesh(M,!0,S,16777215,16777215,2,0),this.intersectGlassObjs.push(M);var C=new v["a"](this.loadingManager);C.load("./dodeca/dodeca.3ds",(function(t){if(t instanceof o["v"]&&t.children[0]instanceof o["H"]){var e=t.children[0];e.scale.multiplyScalar(.3),y=-.6-Math.PI/2,e.position.set(Math.cos(y)*s.glassPosRadius,30,Math.sin(y)*s.glassPosRadius),s.refractionManager.addRefractionMesh(e,!0,S,16752640,49407,2,.8),s.intersectGlassObjs.push(e);var i=new P(300,I,T,(function(t){var e=2*Math.PI*Math.random(),i=2+Object(p["c"])(),n=new o["kb"](1*Object(p["c"])(),1*Object(p["c"])(),1*Object(p["c"])());return new o["kb"](Math.cos(e),0,Math.sin(e)).multiplyScalar(i).add(n)}),(function(t){return new o["p"](0,0,0)}),(function(t){return 0}),(function(t){return Math.random()<.5?new o["g"](49407):new o["g"](2293616)}),(function(t){return new o["g"](16776960)}),(function(t){var e=Math.atan(t.originalPosition.z/t.originalPosition.x);t.originalPosition.x<0&&(e+=Math.PI),e-=t.interp*t.interp;var i=new o["kb"](10*Math.cos(e)+t.originalPosition.x,0,10*Math.sin(e)+t.originalPosition.z).multiplyScalar(3*t.interp+1+t.randomFactor),n={curPosition:i,curRotation:new o["p"](1,0,1),curScale:t.interp*(1-t.interp)*4,curColor:(new o["g"]).copy(t.originalColor).lerp(t.mixColor,t.interp*t.interp)};return n}));i.mesh.position.copy(e.position),i.mesh.position.y-=15,s.scene.add(i.mesh),s.particleEngineDict.push({mesh:e,pe:i})}})),this.leavesParticleCount=50,this.leavesMatrixDummy=new o["M"],this.leavesParticlesMeshes=[];var k=new o["J"]({side:o["m"]});C.load("./particles/leaves.3ds",(function(t){t instanceof o["v"]&&(console.log(t),t.children.forEach((function(t){if(t instanceof o["H"]){var e=new x(c.leavesParticleCount,t.geometry,k,c.getRandomLeavePosition,c.getRandomLeaveRotation,c.getRandomLeaveScale,(function(t){return new o["g"](267386880)}));c.scene.add(e.mesh)}})))}));var I=(new o["y"]).copy(new o["bb"](.5,4)),T=new o["I"]({}),E=new P(300,I,T,(function(t){var e=2*Math.PI*Math.random(),i=60+Object(p["c"])(),n=new o["kb"](10*Object(p["c"])(),1*Object(p["c"])(),10*Object(p["c"])());return new o["kb"](Math.cos(e),0,Math.sin(e)).multiplyScalar(i).add(n)}),(function(t){return new o["p"](0,0,0)}),(function(t){return 0}),(function(t){return new o["g"](16752640)}),(function(t){return new o["g"](5308400)}),(function(t){Math.atan(t.originalPosition.z/t.originalPosition.x);t.originalPosition.x<0&&Math.PI,t.interp,t.interp;var e=(new o["kb"]).copy(t.originalPosition).multiplyScalar(t.interp),i=5*Math.sqrt(t.interp)-10;e.y+=i;var n={curPosition:e,curRotation:new o["p"](1,0,1),curScale:t.interp*(1-t.interp)*4,curColor:(new o["g"]).copy(t.originalColor).lerp(t.mixColor,t.interp*t.interp)};return n}));E.mesh.position.copy(M.position),E.mesh.position.y-=15,this.scene.add(E.mesh),this.particleEngineDict.push({mesh:M,pe:E});var L=new o["R"](2e3,2e3);console.log(this.composer.readBuffer);var W=new R["a"](L,this.scene,{flowDirection:new o["jb"](1,1),textureWidth:512,textureHeight:512});W.position.y=-10,W.rotation.x=-.5*Math.PI,this.scene.add(W),this.cameraWithMouseMoveFactor=.1,this.cameraTargetPosition=(new o["kb"]).copy(M.position),this.cameraLootAtController=new p["b"]((new o["kb"]).copy(this.cameraTargetPosition),.9,.002),window.addEventListener("mousemove",(function(t){c.onMouseMove(t)})),this.raycaster=new o["V"],this.glassSelected=void 0,this.glassIsRotating=!1,this.mousePosX=0,this.mousePosY=0,this.pointer=new o["jb"],window.addEventListener("resize",(function(){c.onWindowResize()})),window.addEventListener("click",(function(t){c.onClick(t)})),this.animate()}return Object(c["a"])(t,[{key:"render",value:function(){this.renderer.setRenderTarget(this.refractionManager.backRenderTarget),this.composer.render(),this.refractionManager.render(),this.cssRenderer&&this.cssRenderer.render(this.cssScene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.refractionManager.onWindowResize(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.cssRenderer&&this.cssRenderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseMove",value:function(t){var e=this;this.mousePosX=t.clientX,this.mousePosY=t.clientY,this.pointer.x=t.clientX/window.innerWidth*2-1,this.pointer.y=-t.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var i=this.raycaster.intersectObjects(this.intersectGlassObjs,!1);if(1!=i.length||this.glassIsRotating||this.glassSelected===i[0].object){if(0==i.length&&void 0!==this.glassSelected){this.glassIsRotating=!0;var n=this.glassSelected,a=this.glassSelected["refractionObject"];w["a"].tweenEuler(this.glassSelected.rotation,new o["p"](0,0,0),(function(t){n.rotation.copy(t)}),(function(){e.glassIsRotating=!1}),1e3,h["a"].Exponential.InOut),w["a"].tweenNumber(0,1,(function(t){a.refractionMaterialUniforms["absorbColor"].value.b=t}),(function(){}),500),this.glassSelected=void 0}}else{this.glassIsRotating=!0;var s=i[0].object,r=s?s["refractionObject"]:null;if(s instanceof o["H"]&&r instanceof b["b"]){console.log(i.length),this.cameraTargetPosition.copy(s.position);for(var c=0;c<this.particleEngineDict.length;c++){var d=this.particleEngineDict[c].pe;if(this.particleEngineDict[c].mesh==s&&d instanceof P){d.transit(2e3);break}}this.glassSelected=s,w["a"].tweenEuler(this.glassSelected.rotation,new o["p"](.5,.8,1),(function(t){s.rotation.copy(t)}),(function(){e.glassIsRotating=!1}),1e3,h["a"].Exponential.InOut),w["a"].tweenNumber(1,0,(function(t){r.refractionMaterialUniforms["absorbColor"].value.b=t}),(function(){}),500)}}}},{key:"onClick",value:function(t){}},{key:"getRaycastPos",value:function(t,e){var i=2*t/window.innerWidth-1,n=1-2*e/window.innerHeight,a=new o["kb"](i,n,.995);return a.unproject(this.camera),a}},{key:"updateCamera",value:function(){var t=window.innerWidth/2-this.mousePosX,e=window.innerHeight/2-this.mousePosY,i=new o["kb"](-t*this.cameraWithMouseMoveFactor,e*this.cameraWithMouseMoveFactor,0).add(this.cameraTargetPosition);this.cameraLootAtController.update(i),this.camera.lookAt(this.cameraLootAtController.currentVec3);var n=this.cameraLootAtController.velocity;this.camera.position.x=n.y*this.cameraWithMouseMoveFactor,this.camera.position.y=200-n.x*this.cameraWithMouseMoveFactor}},{key:"registerCSSCoordinator",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o["kb"],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;void 0==this.cssRenderer&&(this.cssRenderer=new g["b"](t),this.cssRenderer.setSize(window.innerWidth,window.innerHeight));var a=new g["a"](e);return a.position.copy(i),a.scale.multiplyScalar(n),this.cssScene.add(a),a}},{key:"getRandomLeavePosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=.8*Object(p["c"])()-Math.PI/2,n=e+Object(p["c"])(),a=new o["kb"](60*Object(p["c"])(),5*Object(p["c"])(),60*Object(p["c"])());return new o["kb"](Math.cos(i),0,Math.sin(i)).multiplyScalar(n).add(a)}},{key:"getRandomLeaveRotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new o["p"](Math.random()*e,Math.random()*e,0)}},{key:"getRandomLeaveScale",value:function(){return.2*Math.random()+.2}}]),t}(),I=s["a"].extend({data:function(){return{fpm:null,loadingStat:{loaded:0,total:1,isLoaded:!1,noLoadingStat:!1}}},mounted:function(){var t=this,e=this;this.$refs["canvas-container"]instanceof HTMLElement&&(this.fpm=new k(this.$refs["canvas-container"],(function(){console.log("loaded"),e.loadingStat.isLoaded=!0,setTimeout((function(){e.loadingStat.noLoadingStat=!0}),501)}),(function(e,i,n){t.loadingStat.loaded=i,t.loadingStat.total=n}),(function(t){console.error("failed to load asset: "+t),e.loadingStat.isLoaded=!0})),this.$refs["dom3d-container"]instanceof HTMLElement&&this.$refs["dom3d-test"]instanceof HTMLElement&&this.fpm.registerCSSCoordinator(this.$refs["dom3d-container"],this.$refs["dom3d-test"],new o["kb"](-200,200,0)))},methods:{onGlassClick:function(){alert("glass clicked!")}}}),T=I,E=(i("bccc"),i("2877")),L=Object(E["a"])(T,n,a,!1,null,"504acd3e",null);e["default"]=L.exports},"2f41":function(t,e,i){},bccc:function(t,e,i){"use strict";i("2f41")}}]);
//# sourceMappingURL=chunk-6c378901.adb11f46.js.map
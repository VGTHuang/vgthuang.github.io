(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0622497d"],{"12b2":function(t,e,i){},"13b3":function(t,e,i){},1553:function(t,e,i){},1681:function(t,e,i){},"1b45":function(t,e,i){"use strict";i("eb99")},"1bfb":function(t,e,i){},"2bfd":function(t,e,i){},4791:function(t,e,i){"use strict";i("c81e")},"608c":function(t,e,i){},"7e58":function(t,e,i){},"8fa3":function(t,e,i){"use strict";i("b591")},9734:function(t,e,i){},"97b1":function(t,e,i){"use strict";i("1553")},b591:function(t,e,i){},b6f9:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas-container"},[i("alert-snackbar"),t.mouseHintShow?i("v-card",{staticClass:"pointer-tag pb-2 flex-column align-center",attrs:{color:"#80808080"}},[i("v-flex",{staticClass:"pa-2",domProps:{innerHTML:t._s(t.mouseHint)}}),i("v-btn",{attrs:{tile:""},on:{click:function(e){t.mouseHintShow=!1}}},[t._v(t._s(t.$t("m.i.gotIt")))])],1):t._e(),i("div",{ref:"canvas-box",staticClass:"canvas-box"},[i("canvas",{ref:"main-canvas",class:{"canvas--pointer-on":t.canvasPointerIsOn},attrs:{id:"main-canvas"},on:{mousedown:t.onCanvasMouseDown,mouseup:t.onCanvasClickedOrTouched,dblclick:t.onCanvasDblClick,touchstart:t.onCanvasTouchStart,touchend:t.onCanvasTouchEnd}})]),i("side-bar",{ref:"side-bar",staticClass:"editor-right-bar",attrs:{sceneIsSet:t.sceneIsSet},scopedSlots:t._u([{key:"file",fn:function(){return[i("file-panel",{on:{loadObj:t.loadObj,saveConfigJson:t.saveConfigJson}})]},proxy:!0},{key:"scene",fn:function(){return[i("scene-panel",{ref:"scenePanel",attrs:{isViewer:!1,bgColor:t.bgColor,lights:t.lights,neuronList:t.neuronList},on:{bgColorChanged:t.bgColorChanged,renderOnce:t.render,controlsTypeChanged:function(e){return t.controlsTypeChanged(e)}}})]},proxy:!0},{key:"draw",fn:function(){return[i("draw-panel",{ref:"drawPanel",attrs:{bgColor:t.bgColor,tagList:t.tagList,tagActionIndex:t.tagActionIndex,controls:t.controls},on:{startCreatingTag:t.startCreatingTag,endCreatingTag:t.endCreatingTag,startDeletingTag:t.startDeletingTag,cancelDeletingTag:t.cancelDeletingTag,startRelocatingTag:t.startRelocatingTag,cancelRelocatingTag:t.cancelRelocatingTag,startToggleSelectTag:t.startToggleSelectTag,cancelToggleSelectTag:t.cancelToggleSelectTag,renderOnce:t.render,drawPanelEnded:t.drawPanelEnded,deleteTag:t.deleteTag}})]},proxy:!0},{key:"neurons",fn:function(){return[i("neuron-panel",{ref:"neuronPanel",attrs:{router:"editor",neurons:t.loadedObj,camera:t.camera,controls:t.controls,neuronList:t.neuronList,groupList:t.groupList},on:{renderOnce:t.render}})]},proxy:!0}])}),i("material-dialog",{attrs:{neuron:t.rightClickSelectedNeuron},on:{materialChanged:t.render},model:{value:t.rightClickMaterialDialogOpen,callback:function(e){t.rightClickMaterialDialogOpen=e},expression:"rightClickMaterialDialogOpen"}})],1)},s=[],o=(i("4160"),i("c975"),i("a434"),i("b0c0"),i("b64b"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("159b"),i("ddb0"),i("5a89")),a=i("920c"),r=i("4721"),l=i("5a15"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right-bar-wrapper"},[i("v-card",{staticClass:"right-bar-container",attrs:{tile:"",elevation:5}},[i("v-tooltip",{attrs:{left:t.isDesktop,bottom:!t.isDesktop},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"expand-retract-flex",attrs:{dark:"",tile:""},on:{click:function(e){return e.stopPropagation(),t.expandRetract(e)}}},"v-btn",s,!1),n),[i("v-icon",{attrs:{dark:""}},[t._v("mdi-arrow-left-drop-circle "+t._s(t.isDesktop?"mdi-arrow-left-drop-circle":"mdi-chevron-down-circle")+" "+t._s(t.$store.state.panelOpen?"mdi-rotate-180":void 0)+" ")])],1)]}}])},[i("span",[t._v(t._s(t.$store.state.panelOpen?t.$t("m.i.fold"):t.$t("m.i.unfold")))])]),i("v-tabs",{attrs:{"hide-slider":t.isDesktop,dense:"",vertical:t.isDesktop}},t._l(t.displayedItems,(function(e,n){return i("v-tooltip",{key:n,attrs:{left:t.isDesktop,bottom:!t.isDesktop},scopedSlots:t._u([{key:"activator",fn:function(n){var s=n.on,o=n.attrs;return[i("v-tab",t._g(t._b({on:{click:function(i){return i.stopPropagation(),t.togglePanelWrappers(e.itemIndex)}}},"v-tab",o,!1),s),[i("v-icon",[t._v(t._s(e.icon))])],1)]}}],null,!0)},[i("span",[t._v(t._s(e.tooltip))])])})),1)],1),i("aside",{staticClass:"panels-wrapper theme--light elevation-4",class:{"panels-wrapper-open":t.$store.state.panelOpen}},[0==t.$store.state.panelIndex?t._t("file"):t._e(),1==t.$store.state.panelIndex?t._t("scene"):2==t.$store.state.panelIndex?t._t("draw"):3==t.$store.state.panelIndex?t._t("neurons"):t._t("default")],2)],1)},h=[],d=(i("fb6a"),{name:"RightBar",props:{sceneIsSet:{type:Boolean,default:!1}},data:function(){return{items:[{icon:"mdi-file",tooltip:this.$t("m.i.file"),itemIndex:0},{icon:"mdi-brain",tooltip:this.$t("m.i.neuron"),itemIndex:3},{icon:"mdi-draw",tooltip:this.$t("m.i.draw"),itemIndex:2},{icon:"mdi-image",tooltip:this.$t("m.i.scene"),itemIndex:1}],documentWidth:0}},computed:{isDesktop:function(){return this.documentWidth>800},displayedItems:function(){return this.sceneIsSet?this.items:this.items.slice(0,1)}},mounted:function(){this.resized()},methods:{resized:function(){this.documentWidth=document.body.clientWidth},togglePanelWrappers:function(t){this.$store.commit("setPanelStat",{open:this.$store.state.panelIndex!=t||!this.$store.state.panelOpen,index:t})},expandRetract:function(){this.$store.commit("setPanelStat",{open:!this.$store.state.panelOpen})}}}),u=d,f=(i("e829"),i("2877")),g=i("6544"),p=i.n(g),v=i("8336"),m=i("b0af"),b=i("132d"),x=i("5530"),C=i("4e82"),w=i("1c87"),I=i("7560"),T=i("80d2"),S=i("58df"),y=Object(S["a"])(w["a"],Object(C["a"])("tabsBar"),I["a"]),k=y.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0}},data:function(){return{proxyClass:"v-tab--active"}},computed:{classes:function(){return Object(x["a"])(Object(x["a"])({"v-tab":!0},w["a"].options.computed.classes.call(this)),{},{"v-tab--disabled":this.disabled},this.groupClasses)},value:function(){var t=this.to||this.href||"";if(this.$router&&this.to===Object(this.to)){var e=this.$router.resolve(this.to,this.$route,this.append);t=e.href}return t.replace("#","")}},mounted:function(){this.onRouteChange()},methods:{click:function(t){this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle()}},render:function(t){var e=this,i=this.generateRouteLink(),n=i.tag,s=i.data;return s.attrs=Object(x["a"])(Object(x["a"])({},s.attrs),{},{"aria-selected":String(this.isActive),role:"tab",tabindex:0}),s.on=Object(x["a"])(Object(x["a"])({},s.on),{},{keydown:function(t){t.keyCode===T["x"].enter&&e.click(t),e.$emit("keydown",t)}}),t(n,s,this.$slots.default)}}),$=(i("a9e3"),i("1bfb"),i("b85c")),O=(i("99af"),i("caad"),i("608c"),i("9d26")),B=i("0789"),D=i("604c"),P=i("e4cd"),_=i("dc22"),j=function(t){var e=t.touchstartX,i=t.touchendX,n=t.touchstartY,s=t.touchendY,o=.5,a=16;t.offsetX=i-e,t.offsetY=s-n,Math.abs(t.offsetY)<o*Math.abs(t.offsetX)&&(t.left&&i<e-a&&t.left(t),t.right&&i>e+a&&t.right(t)),Math.abs(t.offsetX)<o*Math.abs(t.offsetY)&&(t.up&&s<n-a&&t.up(t),t.down&&s>n+a&&t.down(t))};function A(t,e){var i=t.changedTouches[0];e.touchstartX=i.clientX,e.touchstartY=i.clientY,e.start&&e.start(Object.assign(t,e))}function R(t,e){var i=t.changedTouches[0];e.touchendX=i.clientX,e.touchendY=i.clientY,e.end&&e.end(Object.assign(t,e)),j(e)}function L(t,e){var i=t.changedTouches[0];e.touchmoveX=i.clientX,e.touchmoveY=i.clientY,e.move&&e.move(Object.assign(t,e))}function V(t){var e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:function(t){return A(t,e)},touchend:function(t){return R(t,e)},touchmove:function(t){return L(t,e)}}}function z(t,e,i){var n=e.value,s=n.parent?t.parentElement:t,o=n.options||{passive:!0};if(s){var a=V(e.value);s._touchHandlers=Object(s._touchHandlers),s._touchHandlers[i.context._uid]=a,Object(T["y"])(a).forEach((function(t){s.addEventListener(t,a[t],o)}))}}function E(t,e,i){var n=e.value.parent?t.parentElement:t;if(n&&n._touchHandlers){var s=n._touchHandlers[i.context._uid];Object(T["y"])(s).forEach((function(t){n.removeEventListener(t,s[t])})),delete n._touchHandlers[i.context._uid]}}var M={inserted:z,unbind:E},H=M,F=Object(S["a"])(D["a"],P["a"]).extend({name:"base-slide-group",directives:{Resize:_["a"],Touch:H},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:function(t){return"boolean"===typeof t||["always","desktop","mobile"].includes(t)}}},data:function(){return{internalItemsLength:0,isOverflowing:!1,resizeTimeout:0,startX:0,scrollOffset:0,widths:{content:0,wrapper:0}}},computed:{__cachedNext:function(){return this.genTransition("next")},__cachedPrev:function(){return this.genTransition("prev")},classes:function(){return Object(x["a"])(Object(x["a"])({},D["a"].options.computed.classes.call(this)),{},{"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing})},hasAffixes:function(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing;case"mobile":return this.isMobile||this.isOverflowing;default:return!this.isMobile&&this.isOverflowing}},hasNext:function(){if(!this.hasAffixes)return!1;var t=this.widths,e=t.content,i=t.wrapper;return e>Math.abs(this.scrollOffset)+i},hasPrev:function(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset:function(t){this.$refs.content.style.transform="translateX(".concat(-t,"px)")}},beforeUpdate:function(){this.internalItemsLength=(this.$children||[]).length},updated:function(){this.internalItemsLength!==(this.$children||[]).length&&this.setWidths()},methods:{genNext:function(){var t=this,e=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:function(){return t.onAffixClick("next")}},key:"next"},[e])},genContent:function(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content"},this.$slots.default)},genData:function(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon:function(t){var e=t;this.$vuetify.rtl&&"prev"===t?e="next":this.$vuetify.rtl&&"next"===t&&(e="prev");var i="".concat(t[0].toUpperCase()).concat(t.slice(1)),n=this["has".concat(i)];return this.showArrows||n?this.$createElement(O["a"],{props:{disabled:!n}},this["".concat(e,"Icon")]):null},genPrev:function(){var t=this,e=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:function(){return t.onAffixClick("prev")}},key:"prev"},[e])},genTransition:function(t){return this.$createElement(B["c"],[this.genIcon(t)])},genWrapper:function(){var t=this;return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:function(e){return t.overflowCheck(e,t.onTouchStart)},move:function(e){return t.overflowCheck(e,t.onTouchMove)},end:function(e){return t.overflowCheck(e,t.onTouchEnd)}}}],ref:"wrapper"},[this.genContent()])},calculateNewOffset:function(t,e,i,n){var s=i?-1:1,o=s*n+("prev"===t?-1:1)*e.wrapper;return s*Math.max(Math.min(o,e.content-e.wrapper),0)},onAffixClick:function(t){this.$emit("click:".concat(t)),this.scrollTo(t)},onResize:function(){this._isDestroyed||this.setWidths()},onTouchStart:function(t){var e=this.$refs.content;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove:function(t){this.scrollOffset=this.startX-t.touchmoveX},onTouchEnd:function(){var t=this.$refs,e=t.content,i=t.wrapper,n=e.clientWidth-i.clientWidth;e.style.setProperty("transition",null),e.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-n&&(this.scrollOffset=-n):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=n&&(this.scrollOffset=n)},overflowCheck:function(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView:function(){this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=this.calculateCenteredOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=this.calculateUpdatedOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},calculateUpdatedOffset:function(t,e,i,n){var s=t.clientWidth,o=i?e.content-t.offsetLeft-s:t.offsetLeft;i&&(n=-n);var a=e.wrapper+n,r=s+o,l=.4*s;return o<=n?n=Math.max(o-l,0):a<=r&&(n=Math.min(n-(a-r-l),e.content-e.wrapper)),i?-n:n},calculateCenteredOffset:function(t,e,i){var n=t.offsetLeft,s=t.clientWidth;if(i){var o=e.content-n-s/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,o))}var a=n+s/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,a))},scrollTo:function(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths:function(){var t=this;window.requestAnimationFrame((function(){var e=t.$refs,i=e.content,n=e.wrapper;t.widths={content:i?i.clientWidth:0,wrapper:n?n.clientWidth:0},t.isOverflowing=t.widths.wrapper<t.widths.content,t.scrollIntoView()}))}},render:function(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}}),N=(F.extend({name:"v-slide-group",provide:function(){return{slideGroup:this}}}),i("d10f")),W=Object(S["a"])(F,N["a"],I["a"]).extend({name:"v-tabs-bar",provide:function(){return{tabsBar:this}},computed:{classes:function(){return Object(x["a"])(Object(x["a"])({},F.options.computed.classes.call(this)),{},{"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows},this.themeClasses)}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider:function(){this.isBooted&&this.$emit("call:slider")},genContent:function(){var t=F.options.methods.genContent.call(this);return t.data=t.data||{},t.data.staticClass+=" v-tabs-bar__content",t},onRouteChange:function(t,e){if(!this.mandatory){var i,n=this.items,s=t.path,o=e.path,a=!1,r=!1,l=Object($["a"])(n);try{for(l.s();!(i=l.n()).done;){var c=i.value;if(c.to===s?a=!0:c.to===o&&(r=!0),a&&r)break}}catch(h){l.e(h)}finally{l.f()}!a&&r&&(this.internalValue=void 0)}}},render:function(t){var e=F.options.render.call(this,t);return e.data.attrs={role:"tablist"},e}}),X=(i("7db0"),i("c740"),i("13b3"),i("afdd")),Y=D["a"].extend({name:"v-window",directives:{Touch:H},provide:function(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:{type:Boolean,default:void 0},showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data:function(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive:function(){return this.transitionCount>0},classes:function(){return Object(x["a"])(Object(x["a"])({},D["a"].options.computed.classes.call(this)),{},{"v-window--show-arrows-on-hover":this.showArrowsOnHover})},computedTransition:function(){if(!this.isBooted)return"";var t=this.vertical?"y":"x",e=this.$vuetify.rtl&&"x"===t?!this.internalReverse:this.internalReverse,i=e?"-reverse":"";return"v-window-".concat(t).concat(i,"-transition")},hasActiveItems:function(){return Boolean(this.items.find((function(t){return!t.disabled})))},hasNext:function(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev:function(){return this.continuous||this.internalIndex>0},internalIndex:function(){var t=this;return this.items.findIndex((function(e,i){return t.internalValue===t.getValue(e,i)}))},internalReverse:function(){return this.reverse?!this.isReverse:this.isReverse}},watch:{internalIndex:"updateReverse"},mounted:function(){var t=this;window.requestAnimationFrame((function(){return t.isBooted=!0}))},methods:{genContainer:function(){var t=[this.$slots.default];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon:function(t,e,i){var n=this;return this.$createElement("div",{staticClass:"v-window__".concat(t)},[this.$createElement(X["a"],{props:{icon:!0},attrs:{"aria-label":this.$vuetify.lang.t("$vuetify.carousel.".concat(t))},on:{click:function(){n.changedByDelimiters=!0,i()}}},[this.$createElement(O["a"],{props:{large:!0}},e)])])},genControlIcons:function(){var t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){var i=this.genIcon("prev",e,this.prev);i&&t.push(i)}var n=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&n&&"string"===typeof n){var s=this.genIcon("next",n,this.next);s&&t.push(s)}return t},getNextIndex:function(t){var e=(t+1)%this.items.length,i=this.items[e];return i.disabled?this.getNextIndex(e):e},getPrevIndex:function(t){var e=(t+this.items.length-1)%this.items.length,i=this.items[e];return i.disabled?this.getPrevIndex(e):e},next:function(){if(this.isReverse=this.$vuetify.rtl,this.hasActiveItems&&this.hasNext){var t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)}},prev:function(){if(this.isReverse=!this.$vuetify.rtl,this.hasActiveItems&&this.hasPrev){var t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)}},updateReverse:function(t,e){this.changedByDelimiters?this.changedByDelimiters=!1:this.isReverse=t<e}},render:function(t){var e=this,i={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){var n=this.touch||{left:function(){e.$vuetify.rtl?e.prev():e.next()},right:function(){e.$vuetify.rtl?e.next():e.prev()},end:function(t){t.stopPropagation()},start:function(t){t.stopPropagation()}};i.directives.push({name:"touch",value:n})}return t("div",i,[this.genContainer()])}}),U=Y.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes:function(){return Object(x["a"])(Object(x["a"])({},Y.options.computed.classes.call(this)),{},{"v-tabs-items":!0})},isDark:function(){return this.rootIsDark}},methods:{getValue:function(t,e){return t.id||D["a"].options.methods.getValue.call(this,t,e)}}}),G=i("a9ad"),q=Object(S["a"])(G["a"]).extend({name:"v-tabs-slider",render:function(t){return t("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}}),J=i("a452"),K=Object(S["a"])(G["a"],J["a"],I["a"]),Z=K.extend().extend({name:"v-tabs",directives:{Resize:_["a"]},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakpoint:[String,Number],nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:[Boolean,String],sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data:function(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes:function(){return Object(x["a"])({"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical},this.themeClasses)},isReversed:function(){return this.$vuetify.rtl&&this.vertical},sliderStyles:function(){return{height:Object(T["g"])(this.slider.height),left:this.isReversed?void 0:Object(T["g"])(this.slider.left),right:this.isReversed?Object(T["g"])(this.slider.right):void 0,top:this.vertical?Object(T["g"])(this.slider.top):void 0,transition:null!=this.slider.left?null:"none",width:Object(T["g"])(this.slider.width)}},computedColor:function(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted:function(){var t=this;this.$nextTick((function(){window.setTimeout(t.callSlider,30)}))},methods:{callSlider:function(){var t=this;return!this.hideSlider&&this.$refs.items&&this.$refs.items.selectedItems.length?(this.$nextTick((function(){var e=t.$refs.items.selectedItems[0];if(!e||!e.$el)return t.slider.width=0,void(t.slider.left=0);var i=e.$el;t.slider={height:t.vertical?i.scrollHeight:Number(t.sliderSize),left:t.vertical?0:i.offsetLeft,right:t.vertical?0:i.offsetLeft+i.offsetWidth,top:i.offsetTop,width:t.vertical?Number(t.sliderSize):i.scrollWidth}})),!0):(this.slider.width=0,!1)},genBar:function(t,e){var i=this,n={style:{height:Object(T["g"])(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:function(t){i.internalValue=t}},ref:"items"};return this.setTextColor(this.computedColor,n),this.setBackgroundColor(this.backgroundColor,n),this.$createElement(W,n,[this.genSlider(e),t])},genItems:function(t,e){var i=this;return t||(e.length?this.$createElement(U,{props:{value:this.internalValue},on:{change:function(t){i.internalValue=t}}},e):null)},genSlider:function(t){return this.hideSlider?null:(t||(t=this.$createElement(q,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[t]))},onResize:function(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes:function(){for(var t=null,e=null,i=[],n=[],s=this.$slots.default||[],o=s.length,a=0;a<o;a++){var r=s[a];if(r.componentOptions)switch(r.componentOptions.Ctor.options.name){case"v-tabs-slider":e=r;break;case"v-tabs-items":t=r;break;case"v-tab-item":i.push(r);break;default:n.push(r)}else n.push(r)}return{tab:n,slider:e,items:t,item:i}}},render:function(t){var e=this.parseNodes(),i=e.tab,n=e.slider,s=e.items,o=e.item;return t("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(i,n),this.genItems(s,o)])}}),Q=i("ade3"),tt=(i("9734"),i("4ad4")),et=i("16b7"),it=i("b848"),nt=i("75eb"),st=i("f573"),ot=i("f2e7"),at=i("d9bd"),rt=Object(S["a"])(G["a"],et["a"],it["a"],nt["a"],st["a"],ot["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!this.bottom&&!this.left&&!this.top&&!this.right,s=!1!==this.attach?e.offsetLeft:e.left,o=0;return this.top||this.bottom||n?o=s+e.width/2-i.width/2:(this.left||this.right)&&(o=s+(this.right?e.width:-i.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(o,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,i=t.content,n=!1!==this.attach?e.offsetTop:e.top,s=0;return this.top||this.bottom?s=n+(this.bottom?e.height:-i.height)+(this.bottom?10:-10):(this.left||this.right)&&(s=n+e.height/2-i.height/2),this.nudgeTop&&(s-=parseInt(this.nudgeTop)),this.nudgeBottom&&(s+=parseInt(this.nudgeBottom)),"".concat(this.calcYOverflow(s+this.pageYOffset),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(T["g"])(this.maxWidth),minWidth:Object(T["g"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(T["t"])(this,"activator",!0)&&Object(at["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=tt["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===T["x"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(Q["a"])(t,this.contentClass,!0),Object(Q["a"])(t,"menuable__content__active",this.isActive),Object(Q["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}}),lt=Object(f["a"])(u,c,h,!1,null,"3aaa95e6",null),ct=lt.exports;p()(lt,{VBtn:v["a"],VCard:m["a"],VIcon:b["a"],VTab:k,VTabs:Z,VTooltip:rt});var ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"right-panel-container"},[i("nl-title",{attrs:{title:"文件"}}),i("v-expansion-panels",{staticClass:"right-panel",attrs:{tile:"",accordion:"",multiple:""},model:{value:t.openedPanels,callback:function(e){t.openedPanels=e},expression:"openedPanels"}},[i("v-expansion-panel",[i("v-expansion-panel-header",[t._v(t._s(t.$t("m.i.load")))]),i("v-expansion-panel-content",[i("nf-buttons",{attrs:{vertical:"",btns:t.loadObjBtn},on:{loadObj:t.loadObj,loadObjLocal:t.loadObjLocal}}),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"localFileInput",attrs:{type:"file"},on:{change:t.localFileLoaded}})],1)],1),i("v-expansion-panel",[i("v-expansion-panel-header",[t._v(t._s(t.$t("m.i.save")))]),i("v-expansion-panel-content",[i("nf-buttons",{attrs:{vertical:"",btns:t.saveObjBtn},on:{saveConfigJson:t.saveConfigJson}}),i("v-row",{staticClass:"pa-1",attrs:{"no-gutters":""}},[i("p",[i("b",[t._v("config的用法：")])]),i("p",[t._v("Config文件由"),i("code",[t._v("configPath.txt")]),t._v("指定，该文件包含config文件与之的相对路径和名称，如 "),i("v-card",{staticClass:"ma-1 pa-1",attrs:{light:"",width:"100%"}},[i("pre",[t._v("./model/config.json")])]),t._v("。")],1),i("p",[t._v("初始时的config文件应设置如下 "),i("v-card",{staticClass:"ma-1 pa-1",attrs:{light:"",width:"100%"}},[i("pre",[t._v('{\n    "fileList": [\n        "file_1.obj",\n        "file_2.zip"\n    ]\n}')])]),t._v(" 其中"),i("code",[t._v("file_1")]),t._v("、"),i("code",[t._v("file_2")]),t._v("等均为位于与config同级的"),i("code",[t._v("/objects")]),t._v("文件夹下需要包含在工程中的文件；文件后缀支持.zip和.obj两种，其中.zip文件为压缩后的若干.obj文件。")],1),i("p",[t._v("进行各种修改后，点击“保存config”，将原config替换为下载得到的文件，并将其路径和名称与"),i("code",[t._v("configPath.txt")]),t._v("相匹配。")])])],1)],1)],1)],1)},dt=[],ut={data:function(){return{openedPanels:[0,1],loadObjBtn:[{label:this.$t("m.i.reloadNeuron"),method:"loadObj"}],saveObjBtn:[{label:this.$t("m.i.saveConfig"),method:"saveConfigJson"}]}},methods:{loadObj:function(){var t=confirm(this.$t("m.a.qDoReloadNeuron"));t&&this.$emit("loadObj")},loadObjLocal:function(){this.$refs["localFileInput"].click()},localFileLoaded:function(t){this.$emit("loadObjLocal")},saveConfigJson:function(){this.$emit("saveConfigJson")}}},ft=ut,gt=i("a523"),pt=i("cd55"),vt=i("49e2"),mt=i("c865"),bt=i("0393"),xt=i("0fd9"),Ct=Object(f["a"])(ft,ht,dt,!1,null,"50d42134",null),wt=Ct.exports;p()(Ct,{VCard:m["a"],VContainer:gt["a"],VExpansionPanel:pt["a"],VExpansionPanelContent:vt["a"],VExpansionPanelHeader:mt["a"],VExpansionPanels:bt["a"],VRow:xt["a"]});var It=i("97f5"),Tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"right-panel-container"},[i("nl-title",{attrs:{title:t.$t("m.i.draw")}}),i("v-expansion-panels",{staticClass:"right-panel",attrs:{tile:"",accordion:"",multiple:""},model:{value:t.openedPanels,callback:function(e){t.openedPanels=e},expression:"openedPanels"}},[i("v-expansion-panel",[i("v-expansion-panel-header",[t._v(t._s(t.$t("m.i.tagOperations")))]),i("v-expansion-panel-content",[i("nf-buttons",{attrs:{btns:t.tagBtns},on:{createTag:t.createTag,deleteTag:t.deleteTag,relocateTag:t.relocateTag,toggleSelectTag:t.toggleSelectTag}})],1)],1),i("v-expansion-panel",[i("v-expansion-panel-header",[t._v(t._s(t.$t("m.i.tagList")))]),i("v-expansion-panel-content",{staticClass:"list-content"},[i("v-row",{attrs:{"no-gutters":""}},[i("tag-table",{ref:"tagTable",attrs:{tagList:t.tagList},on:{focusOnItem:t.focusOnItem,renderOnce:t.renderOnce,openModifyTagDialog:t.openModifyTagDialog},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}})],1)],1)],1),i("v-expansion-panel",[i("v-expansion-panel-header",[t._v(t._s(t.$t("m.i.tagBatchOperations")))]),i("v-expansion-panel-content",[i("nf-buttons",{attrs:{btns:t.batchBtns},on:{batchSetTag:t.batchSetTag,batchDeleteTag:t.batchDeleteTag}})],1)],1)],1),i("new-tag-dialog",{ref:"newTagDialog",attrs:{bgColor:t.bgColor},on:{newTagDialogClosed:t.newTagDialogClosed},model:{value:t.newTagDialogOpen,callback:function(e){t.newTagDialogOpen=e},expression:"newTagDialogOpen"}})],1)},St=[],yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{staticClass:"height-no-limit",attrs:{"overlay-opacity":"0",width:"min-content",persistent:"",eager:""},model:{value:t.newTagDialogOpen,callback:function(e){t.newTagDialogOpen=e},expression:"newTagDialogOpen"}},[[i("v-card",{staticClass:"pa-4 group-dialog-card"},[i("v-row",{attrs:{"no-gutters":""}},[i("v-textarea",{ref:"tagTextarea",attrs:{solo:"","no-resize":"",label:t.$t("m.i.content"),rows:"3",autofocus:"",disabled:!t.isOperatingOnSingleTag},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),i("v-col",{attrs:{"no-gutters":""}},[i("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[i("v-checkbox",{staticClass:"ma-0 pa-0",scopedSlots:t._u([{key:"label",fn:function(){return[i("v-icon",[t._v("mdi-format-bold")])]},proxy:!0}]),model:{value:t.fontBold,callback:function(e){t.fontBold=e},expression:"fontBold"}})],1),i("v-col",{attrs:{cols:"6"}},[i("nf-color",{staticClass:"tag-nfcolor",attrs:{name:t.$t("m.i.fontColor"),alphaEnabled:""},model:{value:t.fontColor,callback:function(e){t.fontColor=e},expression:"fontColor"}})],1)],1),i("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[i("v-checkbox",{staticClass:"ma-0 pa-0",scopedSlots:t._u([{key:"label",fn:function(){return[i("v-icon",[t._v("mdi-format-italic")])]},proxy:!0}]),model:{value:t.fontItalic,callback:function(e){t.fontItalic=e},expression:"fontItalic"}})],1),i("v-col",{attrs:{cols:"6"}},[i("nf-color",{staticClass:"tag-nfcolor",attrs:{name:t.$t("m.i.backgroundColor"),disabled:!t.hasBackground,alphaEnabled:""},model:{value:t.backgroundColor,callback:function(e){t.backgroundColor=e},expression:"backgroundColor"}})],1)],1),i("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[i("v-combobox",{attrs:{items:t.fontSizes,label:t.$t("m.i.fontSize"),dense:"",error:t.isFontSizeInputError},on:{focus:t.fontSizeFocused,"update:error":t.fontSizeUpdateError},model:{value:t.fontSize,callback:function(e){t.fontSize=e},expression:"fontSize"}})],1),i("v-col",{attrs:{cols:"6"}},[i("nf-color",{staticClass:"tag-nfcolor",attrs:{name:t.$t("m.i.borderColor"),disabled:!t.hasBorder,alphaEnabled:""},model:{value:t.borderColor,callback:function(e){t.borderColor=e},expression:"borderColor"}})],1)],1),i("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[i("v-btn",{attrs:{icon:"",outlined:"left"==t.textAlign},on:{click:function(e){t.textAlign="left"}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-format-align-left")])],1),i("v-btn",{attrs:{icon:"",outlined:"center"==t.textAlign},on:{click:function(e){t.textAlign="center"}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-format-align-center")])],1),i("v-btn",{attrs:{icon:"",outlined:"right"==t.textAlign},on:{click:function(e){t.textAlign="right"}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-format-align-right")])],1)],1),i("v-col",{attrs:{cols:"6"}},[i("nf-toggle",{attrs:{name:t.$t("m.i.borderRadius"),disabled:!t.hasBorder,min:0,max:20},model:{value:t.borderRadius,callback:function(e){t.borderRadius=e},expression:"borderRadius"}})],1)],1),i("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[i("v-col",{staticClass:"pr-2 d-flex flex-row",attrs:{cols:"6"}},[i("v-checkbox",{staticClass:"ma-0 pa-0 pr-2",attrs:{label:t.$t("m.i.hasBorder")},model:{value:t.hasBorder,callback:function(e){t.hasBorder=e},expression:"hasBorder"}}),i("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{label:t.$t("m.i.background")},model:{value:t.hasBackground,callback:function(e){t.hasBackground=e},expression:"hasBackground"}})],1),i("v-col",{attrs:{cols:"6"}},[i("nf-toggle",{attrs:{name:t.$t("m.i.borderThickness"),disabled:!t.hasBorder,min:0,max:10},model:{value:t.borderThickness,callback:function(e){t.borderThickness=e},expression:"borderThickness"}})],1)],1)],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-flex",{staticClass:"ma-2",style:{background:t.bgColor}},[i("v-flex",{staticClass:"d-flex justify-center align-center preview-window",on:{mousewheel:t.previewBlockRescaleOnScroll}},[i("div",{staticClass:"preview-block",style:{"border-width":t.hasBorder?t.borderThickness+"px":0,"border-color":t.borderColor,"border-radius":t.borderRadius+"px",background:t.hasBackground?t.backgroundColor:"none",color:t.fontColor,"font-size":t.fontSize+"px","font-weight":t.fontBold?"bold":"normal","font-style":t.fontItalic?"italic":"normal","text-align":t.textAlign,transform:"scale("+t.previewBlockScale+")"}},[t._v(t._s(t.text))]),i("v-btn-toggle",{staticClass:"scale-btns"},[i("v-btn",{attrs:{icon:"",small:"",plain:"",disabled:t.previewBlockScale<=.11},on:{click:function(e){return t.previewBlockRescale(!1)}}},[i("v-icon",[t._v("mdi-minus")])],1),i("v-flex",{staticClass:"scale-display"},[t._v(t._s(t.previewBlockScale.toFixed(1))+"×")]),i("v-btn",{attrs:{icon:"",small:"",plain:"",disabled:t.previewBlockScale>=9.99},on:{click:function(e){return t.previewBlockRescale(!0)}}},[i("v-icon",[t._v("mdi-plus")])],1),i("v-btn",{attrs:{icon:"",small:"",plain:""},on:{click:function(e){t.previewBlockScale=1}}},[i("v-icon",[t._v("mdi-refresh")])],1)],1)],1)],1)],1),i("v-row",{attrs:{"no-gutters":""}},[i("nf-buttons",{attrs:{btns:t.openCloseBtns},on:{confirm:function(e){return t.close(!0)},cancel:function(e){return t.close(!1)}}})],1)],1)]],2)},kt=[],$t=i("b31f"),Ot={props:{value:{type:Boolean,default:!1},bgColor:{type:String,default:"#000000"}},data:function(){return{tagInfo:void 0,newTagDialogOpen:!1,isOperatingOnSingleTag:!0,openCloseBtns:[{label:this.$t("m.i.confirm"),col:"grey",method:"confirm"},{label:this.$t("m.i.cancel"),col:"red",method:"cancel"}],text:"",hasBorder:!0,hasBackground:!0,borderThickness:1,borderColor:"#000000ff",borderRadius:2,backgroundColor:"#80808050",fontColor:"#ffffffff",fontSize:24,fontBold:!0,fontItalic:!0,textAlign:"left",ruler:void 0,canvas:void 0,sprite:void 0,idValue:void 0,fontSizes:[8,10,12,14,16,18,20,22,24,26,28,36,48,72,108,144,196,256],oldFontSize:24,previewBlockScale:1,zoomStep:.1}},computed:{isFontSizeInputError:function(){return!(this.fontSize>=2&&this.fontSize<=1e3)}},methods:{setValues:function(t,e,i){this.tagInfo=t,this.tagInfo?(this.text=this.tagInfo.text,this.hasBorder=this.tagInfo.hasBorder,this.hasBackground=this.tagInfo.hasBackground,this.borderThickness=this.tagInfo.borderThickness,this.borderColor=this.tagInfo.borderColor,this.borderRadius=this.tagInfo.borderRadius,this.backgroundColor=this.tagInfo.backgroundColor,this.fontColor=this.tagInfo.fontColor,this.fontSize=this.tagInfo.fontSize,this.fontBold=this.tagInfo.fontBold,this.fontItalic=this.tagInfo.fontItalic,this.textAlign=this.tagInfo.textAlign,this.ruler=this.tagInfo.ruler,this.canvas=this.tagInfo.canvas,this.sprite=this.tagInfo.sprite,this.idValue=this.tagInfo.idValue):(this.ruler=void 0,this.canvas=void 0,this.sprite=void 0,this.idValue=i),this.text=e||this.text;var n=this.$refs["tagTextarea"].$el.getElementsByTagName("textarea")[0];this.$nextTick((function(){n.select()}))},fontSizeFocused:function(){this.oldFontSize=this.fontSize},fontSizeUpdateError:function(){var t=this;this.$store.commit("alert",{content:this.$t("m.a.fontSizeMustBeWithinRange")}),this.$nextTick((function(){t.fontSize=t.oldFontSize}))},previewBlockRescale:function(t){!t&&this.previewBlockScale>.11?this.previewBlockScale-=this.zoomStep:t&&this.previewBlockScale<9.99&&(this.previewBlockScale+=this.zoomStep)},previewBlockRescaleOnScroll:function(t){t.deltaY>0&&this.previewBlockScale>.11?this.previewBlockScale-=this.zoomStep:t.deltaY<0&&this.previewBlockScale<9.99&&(this.previewBlockScale+=this.zoomStep)},close:function(t){this.generatedSpriteInfo=!0,this.newTagDialogOpen=!1,this.$emit("input",this.newTagDialogOpen);var e=null;if(t){if(this.isOperatingOnSingleTag){var i=Object($t["a"])(this.text,{fontSize:this.fontSize,fontColor:this.fontColor,fontBold:this.fontBold,fontItalic:this.fontItalic,textAlign:this.textAlign,borderThickness:this.borderThickness,borderColor:this.hasBorder?this.borderColor:"#00000000",borderRadius:this.borderRadius,backgroundColor:this.hasBackground?this.backgroundColor:"#00000000"},this.idValue/1e3,this.ruler,this.canvas,this.sprite);e=i.sprite,this.ruler=i.ruler,this.canvas=i.canvas}this.tagInfo?(this.tagInfo.text=this.text,this.tagInfo.fontItalic=this.fontItalic,this.tagInfo.fontBold=this.fontBold,this.tagInfo.fontSize=this.fontSize,this.tagInfo.textAlign=this.textAlign,this.tagInfo.fontColor=this.fontColor,this.tagInfo.hasBorder=this.hasBorder,this.tagInfo.borderColor=this.borderColor,this.tagInfo.borderRadius=this.borderRadius,this.tagInfo.borderThickness=this.borderThickness,this.tagInfo.hasBackground=this.hasBackground,this.tagInfo.backgroundColor=this.backgroundColor,this.tagInfo.idValue=this.idValue,this.tagInfo.ruler=this.ruler,this.tagInfo.canvas=this.canvas):this.tagInfo={sprite:e,position:void 0,text:this.text,fontItalic:this.fontItalic,fontBold:this.fontBold,fontSize:this.fontSize,textAlign:this.textAlign,fontColor:this.fontColor,hasBorder:this.hasBorder,borderColor:this.borderColor,borderRadius:this.borderRadius,borderThickness:this.borderThickness,hasBackground:this.hasBackground,backgroundColor:this.backgroundColor,idValue:this.idValue,ruler:this.ruler,canvas:this.canvas},this.isOperatingOnSingleTag=!0,this.$emit("newTagDialogClosed",this.tagInfo)}else this.isOperatingOnSingleTag=!0}},watch:{value:function(t){t&&(this.newTagDialogOpen=!0)}}},Bt=Ot,Dt=(i("1b45"),i("7e58"),D["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return D["a"].options.computed.classes.call(this)}},methods:{genData:D["a"].options.methods.genData}})),Pt=Object(S["a"])(Dt,G["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(x["a"])(Object(x["a"])({},Dt.options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var t=this.setTextColor(this.color,Object(x["a"])({},Dt.options.methods.genData.call(this)));return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}}),_t=i("ac7c"),jt=i("62ad"),At=(i("25f0"),i("8a79"),i("2bfd"),i("b974")),Rt=(i("4de4"),i("d81d"),i("45fc"),i("498a"),i("8654")),Lt=i("d9f7"),Vt=Object(x["a"])(Object(x["a"])({},At["b"]),{},{offsetY:!0,offsetOverflow:!0,transition:!1}),zt=At["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:function(t,e,i){return i.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}},hideNoData:Boolean,menuProps:{type:At["a"].options.props.menuProps.type,default:function(){return Vt}},noFilter:Boolean,searchInput:{type:String,default:void 0}},data:function(){return{lazySearch:this.searchInput}},computed:{classes:function(){return Object(x["a"])(Object(x["a"])({},At["a"].options.computed.classes.call(this)),{},{"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1})},computedItems:function(){return this.filteredItems},selectedValues:function(){var t=this;return this.selectedItems.map((function(e){return t.getValue(e)}))},hasDisplayedItems:function(){var t=this;return this.hideSelected?this.filteredItems.some((function(e){return!t.hasItem(e)})):this.filteredItems.length>0},currentRange:function(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems:function(){var t=this;return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((function(e){var i=Object(T["r"])(e,t.itemText),n=null!=i?String(i):"";return t.filter(e,String(t.internalSearch),n)}))},internalSearch:{get:function(){return this.lazySearch},set:function(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed:function(){return!1},isDirty:function(){return this.searchIsDirty||this.selectedItems.length>0},isSearching:function(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps:function(){var t=At["a"].options.computed.$_menuProps.call(this);return t.contentClass="v-autocomplete__content ".concat(t.contentClass||"").trim(),Object(x["a"])(Object(x["a"])({},Vt),t)},searchIsDirty:function(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem:function(){var t=this;return this.multiple?null:this.selectedItems.find((function(e){return t.valueComparator(t.getValue(e),t.getValue(t.internalValue))}))},listData:function(){var t=At["a"].options.computed.listData.call(this);return t.props=Object(x["a"])(Object(x["a"])({},t.props),{},{items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch}),t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused:function(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive:function(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items:function(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput:function(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created:function(){this.setSearch()},destroyed:function(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged:function(t,e){var i=this;t!==e&&(this.setMenuIndex(-1),this.$nextTick((function(){i.internalSearch&&(1===t.length||i.autoSelectFirst)&&(i.$refs.menu.getTiles(),i.setMenuIndex(0))})))},onInternalSearchChanged:function(){this.updateMenuDimensions()},updateMenuDimensions:function(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex:function(t){this.searchIsDirty||(this.multiple&&t===T["x"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===T["x"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==T["x"].backspace&&t!==T["x"].delete||this.deleteCurrentItem())},deleteCurrentItem:function(){var t=this.selectedIndex,e=this.selectedItems[t];if(this.isInteractive&&!this.getDisabled(e)){var i=this.selectedItems.length-1;if(-1!==this.selectedIndex||0===i){var n=this.selectedItems.length,s=t!==n-1?t:t-1,o=this.selectedItems[s];o?this.selectItem(e):this.setValue(this.multiple?[]:void 0),this.selectedIndex=s}else this.selectedIndex=i}},clearableCallback:function(){this.internalSearch=void 0,At["a"].options.methods.clearableCallback.call(this)},genInput:function(){var t=Rt["a"].options.methods.genInput.call(this);return t.data=Object(Lt["a"])(t.data,{attrs:{"aria-activedescendant":Object(T["p"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(T["p"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot:function(){var t=At["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections:function(){return this.hasSlot||this.multiple?At["a"].options.methods.genSelections.call(this):[]},onClick:function(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput:function(t){if(!(this.selectedIndex>-1)&&t.target){var e=t.target,i=e.value;e.value&&this.activateMenu(),this.internalSearch=i,this.badInput=e.validity&&e.validity.badInput}},onKeyDown:function(t){var e=t.keyCode;At["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown:function(t){},onTabDown:function(t){At["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown:function(t){t.preventDefault(),this.activateMenu()},selectItem:function(t){At["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems:function(){At["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch:function(){var t=this;this.$nextTick((function(){t.multiple&&t.internalSearch&&t.isMenuActive||(t.internalSearch=!t.selectedItems.length||t.multiple||t.hasSlot?null:t.getText(t.selectedItem))}))},updateSelf:function(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem:function(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy:function(t){var e,i;if(-1!==this.selectedIndex){var n=this.selectedItems[this.selectedIndex],s=this.getText(n);null==(e=t.clipboardData)||e.setData("text/plain",s),null==(i=t.clipboardData)||i.setData("text/vnd.vuetify.autocomplete.item+plain",s),t.preventDefault()}}}}),Et=zt.extend({name:"v-combobox",props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{computedCounterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return At["a"].options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onInternalSearchChanged:function(t){if(t&&this.multiple&&this.delimiters.length){var e=this.delimiters.find((function(e){return t.endsWith(e)}));null!=e&&(this.internalSearch=t.slice(0,t.length-e.length),this.updateTags())}this.updateMenuDimensions()},genInput:function(){var t=zt.options.methods.genInput.call(this);return delete t.data.attrs.name,t.data.on.paste=this.onPaste,t},genChipSelection:function(t,e){var i=this,n=At["a"].options.methods.genChipSelection.call(this,t,e);return this.multiple&&(n.componentOptions.listeners=Object(x["a"])(Object(x["a"])({},n.componentOptions.listeners),{},{dblclick:function(){i.editingIndex=e,i.internalSearch=i.getText(t),i.selectedIndex=-1}})),n},onChipInput:function(t){At["a"].options.methods.onChipInput.call(this,t),this.editingIndex=-1},onEnterDown:function(t){t.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onFilteredItemsChanged:function(t,e){this.autoSelectFirst&&zt.options.methods.onFilteredItemsChanged.call(this,t,e)},onKeyDown:function(t){var e=t.keyCode;At["a"].options.methods.onKeyDown.call(this,t),this.multiple&&e===T["x"].left&&0===this.$refs.input.selectionStart?this.updateSelf():e===T["x"].enter&&this.onEnterDown(t),this.changeSelectedIndex(e)},onTabDown:function(t){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return t.preventDefault(),t.stopPropagation(),this.updateTags();zt.options.methods.onTabDown.call(this,t)},selectItem:function(t){this.editingIndex>-1?this.updateEditing():zt.options.methods.selectItem.call(this,t)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(t){var e;At["a"].options.methods.setValue.call(this,null!=(e=t)?e:this.internalSearch)},updateEditing:function(){var t=this.internalValue.slice();t[this.editingIndex]=this.internalSearch,this.setValue(t),this.editingIndex=-1},updateCombobox:function(){var t=Boolean(this.$scopedSlots.selection)||this.hasChips;t&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),t&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var t=this.getMenuIndex();if(!(t<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var e=this.selectedItems.indexOf(this.internalSearch);if(e>-1){var i=this.internalValue.slice();i.splice(e,1),this.setValue(i)}if(t>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}},onPaste:function(t){var e;if(this.multiple&&!this.searchIsDirty){var i=null==(e=t.clipboardData)?void 0:e.getData("text/vnd.vuetify.autocomplete.item+plain");i&&-1===this.findExistingIndex(i)&&(t.preventDefault(),At["a"].options.methods.selectItem.call(this,i))}}}}),Mt=i("169a"),Ht=i("0e8f"),Ft=(i("1681"),Object(S["a"])(Rt["a"])),Nt=Ft.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(x["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},Rt["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"}},genInput:function(){var t=Rt["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){Rt["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),Wt=Object(f["a"])(Bt,yt,kt,!1,null,"df96088c",null),Xt=Wt.exports;p()(Wt,{VBtn:v["a"],VBtnToggle:Pt,VCard:m["a"],VCheckbox:_t["a"],VCol:jt["a"],VCombobox:Et,VDialog:Mt["a"],VFlex:Ht["a"],VIcon:b["a"],VRow:xt["a"],VTextarea:Nt});var Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"tag-table",attrs:{headers:t.headers,items:t.tagList,"item-key":"idValue","show-select":"",dense:"","mobile-breakpoint":"0","disable-pagination":"","hide-default-footer":""},on:{"item-selected":t.itemSelected,"toggle-select-all":t.toggleSelectedAll},scopedSlots:t._u([{key:"item.text",fn:function(t){var e=t.item;return[i("div",{staticClass:"text-display",attrs:{title:e.text}},[i("input",{staticClass:"name-input",attrs:{disabled:""},domProps:{value:e.text}})])]}},{key:"item.settings",fn:function(e){var n=e.item;return[i("v-row",{staticClass:"settings-btns-row justify-center",attrs:{"no-gutters":""}},[i("v-icon",{attrs:{title:t.$t("m.i.draw")},on:{click:function(e){return t.$emit("openModifyTagDialog",n)}}},[t._v("mdi-draw")]),i("v-icon",{attrs:{title:t.$t("m.i.center")},on:{click:function(e){return t.focusClicked(n)}}},[t._v("mdi-camera")])],1)]}}]),model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}})},Ut=[],Gt={props:{value:{default:function(){return[]},type:Array},tagList:{type:Array,default:function(){return[]}}},data:function(){return{headers:[{text:this.$t("m.i.text"),value:"text",align:"center",width:100,groupable:!1,sortable:!0},{text:this.$t("m.i.settings"),value:"settings",align:"center",groupable:!1,sortable:!1}],selectedTags:[]}},methods:{forceRefreshSelectedTags:function(){this.selectedTags=this.value},itemSelected:function(t){var e=this;t&&this.setSelectMaterial(t.item,t.value),this.$nextTick((function(){e.$emit("input",e.selectedTags)}))},toggleSelectedAll:function(t){var e=this;t.value?(this.selectedTags=this.tagList,this.tagList.forEach((function(t){e.setSelectMaterial(t,!0)}))):(this.selectedTags=[],this.tagList.forEach((function(t){e.setSelectMaterial(t,!1)}))),this.itemSelected()},setSelectMaterial:function(t,e){t.sprite.material.uniforms.isSelected.value=e,this.valueChanged()},focusClicked:function(t){this.$emit("focusOnItem",t)},valueChanged:function(){this.$emit("renderOnce")}}},qt=Gt,Jt=(i("4791"),i("8fea")),Kt=Object(f["a"])(qt,Yt,Ut,!1,null,"25232e95",null),Zt=Kt.exports;p()(Kt,{VDataTable:Jt["a"],VIcon:b["a"],VRow:xt["a"]});var Qt={components:{NewTagDialog:Xt,TagTable:Zt},props:{bgColor:{type:String,default:"#000000"},tagList:{type:Array,default:function(){return[]}},tagActionIndex:{type:Number,default:0},controls:{default:null,type:Object}},data:function(){return{openedPanels:[0,1,2],tagBtns:[{label:this.$t("m.i.addTag"),method:"createTag"},{label:this.$t("m.i.deleteTag"),method:"deleteTag"},{label:this.$t("m.i.relocateTag"),method:"relocateTag"},{label:this.$t("m.i.toggleSelectTag"),method:"toggleSelectTag"}],batchBtns:[{label:this.$t("m.i.batchSetTag"),method:"batchSetTag"},{label:this.$t("m.i.batchDeleteTag"),method:"batchDeleteTag"}],tagIsBeingModified:!1,tagIsBeingBatchModified:!1,newTagDialogOpen:!1,tagPositionInfo:void 0,selectedTags:[]}},mounted:function(){this.newTagDialog=this.$refs["newTagDialog"]},methods:{createTag:function(){1!==this.tagActionIndex?this.$emit("startCreatingTag"):this.$emit("endCreatingTag")},tagPositionSet:function(t,e){this.tagPositionInfo=t,t[0]&&t[0].neuron?(this.newTagDialogOpen=!0,this.newTagDialog.setValues(void 0,t[0].neuron.name,e)):this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")})},newTagDialogClosed:function(t){var e=this;this.tagIsBeingBatchModified?(this.tagIsBeingBatchModified=!1,this.selectedTags.forEach((function(i){var n=i.sprite.material.uniforms.isSelected.value,s=Object($t["a"])(i.text,{fontSize:t.fontSize,fontColor:t.fontColor,fontBold:t.fontBold,fontItalic:t.fontItalic,textAlign:t.textAlign,borderThickness:t.borderThickness,borderColor:t.hasBorder?t.borderColor:"#00000000",borderRadius:t.borderRadius,backgroundColor:t.hasBackground?t.backgroundColor:"#00000000"},i.idValue/1e3,i.ruler,i.canvas,i.sprite),o=s.sprite,a=s.ruler,r=s.canvas;i.sprite=o,i.fontItalic=t.fontItalic,i.fontBold=t.fontBold,i.fontSize=t.fontSize,i.textAlign=t.textAlign,i.fontColor=t.fontColor,i.hasBorder=t.hasBorder,i.borderColor=t.borderColor,i.borderRadius=t.borderRadius,i.borderThickness=t.borderThickness,i.hasBackground=t.hasBackground,i.backgroundColor=t.backgroundColor,i.ruler=a,i.canvas=r,i.sprite.material.uniforms.isSelected.value=n,e.renderOnce()}))):this.tagIsBeingModified?(t&&t.sprite&&this.$emit("renderOnce"),this.tagIsBeingModified=!1):(t&&t.sprite&&(t.sprite.position.set(this.tagPositionInfo[1],this.tagPositionInfo[2],this.tagPositionInfo[3]),t.position=[this.tagPositionInfo[1],this.tagPositionInfo[2],this.tagPositionInfo[3]]),this.$emit("endCreatingTag",t))},deleteTag:function(){2!=this.tagActionIndex?this.$emit("startDeletingTag"):this.$emit("cancelDeletingTag")},renderOnce:function(){this.$emit("renderOnce")},openModifyTagDialog:function(t){this.newTagDialogOpen=!0,this.tagIsBeingModified=!0,this.newTagDialog.setValues(t,t.text,t.idValue)},relocateTag:function(){3!=this.tagActionIndex?this.$emit("startRelocatingTag"):this.$emit("cancelRelocatingTag")},toggleSelectTag:function(){4!=this.tagActionIndex?this.$emit("startToggleSelectTag"):this.$emit("cancelToggleSelectTag")},toggleSelectTagChange:function(t){var e=this.selectedTags.indexOf(t);e<0?(this.selectedTags.push(t),t.sprite.material.uniforms.isSelected.value=!0):(this.selectedTags.splice(e,1),t.sprite.material.uniforms.isSelected.value=!1),this.$refs["tagTable"].forceRefreshSelectedTags(),this.renderOnce()},focusOnItem:function(t){this.controls.target.fromArray(t.position),this.controls.update(),this.renderOnce()},batchSetTag:function(){this.selectedTags.length<=0?this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")}):(this.tagIsBeingBatchModified=!0,this.newTagDialogOpen=!0,this.newTagDialog.isOperatingOnSingleTag=!1,this.newTagDialog.setValues(void 0,this.$t("m.i.exampleText"),0),this.renderOnce())},batchDeleteTag:function(){var t=this;if(this.selectedTags.length<=0)this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")});else{var e=confirm(this.$t("m.a.qDoBatchRemoveTag"));e&&(this.selectedTags.forEach((function(e){t.$emit("deleteTag",e)})),this.selectedTags.length=0,this.$refs["tagTable"].forceRefreshSelectedTags(),this.renderOnce()),this.renderOnce()}}},beforeDestroy:function(){this.$emit("drawPanelEnded")},watch:{tagActionIndex:function(t){switch(this.tagBtns[0].label=this.$t("m.i.addTag"),this.tagBtns[1].label=this.$t("m.i.deleteTag"),this.tagBtns[2].label=this.$t("m.i.relocateTag"),this.tagBtns[3].label=this.$t("m.i.toggleSelectTag"),t){case 1:this.tagBtns[0].label=this.$t("m.i.cancelAddTag");break;case 2:this.tagBtns[1].label=this.$t("m.i.cancelDeleteTag");break;case 3:this.tagBtns[2].label=this.$t("m.i.cancelRelocateTag");break;case 4:this.tagBtns[3].label=this.$t("m.i.cancelToggleSelectTag");break}}}},te=Qt,ee=(i("97b1"),Object(f["a"])(te,Tt,St,!1,null,"4e0aef07",null)),ie=ee.exports;p()(ee,{VContainer:gt["a"],VExpansionPanel:pt["a"],VExpansionPanelContent:vt["a"],VExpansionPanelHeader:mt["a"],VExpansionPanels:bt["a"],VRow:xt["a"]});var ne=i("062b"),se=i("bed6"),oe=i("8146"),ae=i("07b4"),re=i("8a20"),le=i("7ab8"),ce=i("bc3a"),he=i.n(ce),de=i("c4e3"),ue=i.n(de),fe=i("0083"),ge=i.n(fe),pe={name:"MyCanvas",components:{SideBar:ct,FilePanel:wt,ScenePanel:It["a"],DrawPanel:ie,NeuronPanel:ne["a"],AlertSnackbar:se["a"],MaterialDialog:oe["a"]},data:function(){return{modelPath:void 0,fov:30,near:.1,far:1e4,canvasWidth:600,canvasHeight:400,canvas:void 0,canvasBox:void 0,sideBar:void 0,camera:void 0,scene:void 0,renderer:void 0,controls:void 0,three:void 0,bgColor:"#000000",blackColor:"#000000",sceneIsSet:!1,sceneIsFirstSet:!1,sceneIsOn:!0,panelsOpen:!1,lights:[{color:void 0,strength:1,outColor:void 0},{color:void 0,strength:.5,direction:new o["B"](1,0,0),outColor:void 0},{color:void 0,strength:.5,direction:new o["B"](-1,0,0),outColor:void 0}],loadedObj:void 0,neuronList:[],groupList:[],defaultGroupText:this.$t("m.i.defaultGroupText"),neuronCount:0,loadingProgress:0,individualUnzippingProgress:[],individualLoadingProgress:[],pickScene:void 0,pickingTexture:new o["C"](1,1,{type:o["g"]}),pixelBuffer:new Float32Array(4),elementDict:{},rightClickMaterialDialogOpen:!1,rightClickSelectedNeuron:void 0,tagActionIndex:0,tagList:[],tagIdCount:0,relocatingTag:void 0,cvsMouseOrTouchPosX:0,cvsMouseOrTouchPosY:0,fileList:[],pointerTagShow:!0,mouseHintShow:!0}},computed:{canvasPointerIsOn:function(){return 2===this.$store.state.panelIndex&&0!=this.tagActionIndex||3===this.$store.state.panelIndex},mouseHint:function(){if(2!==this.$store.state.panelIndex)return 3===this.$store.state.panelIndex?this.$t("m.i.mouseHintNeuron"):this.$t("m.i.mouseHintDblClick");switch(this.tagActionIndex){case 1:return this.$t("m.i.mouseHintCreateTag");case 2:return this.$t("m.i.mouseHintDeleteTag");case 3:return this.relocatingTag?this.$t("m.i.mouseHintRelocatingTag2"):this.$t("m.i.mouseHintRelocatingTag1");case 4:return this.$t("m.i.mouseHintToggleSelectTag");default:return this.$t("m.i.mouseHintDblClick")}}},mounted:function(){this.canvas=this.$refs["main-canvas"],this.canvasBox=this.$refs["canvas-box"],this.sideBar=this.$refs["side-bar"],window.onresize=this.render,window.onbeforeunload=function(t){var e=t||window.event;return e&&(t.returnValue=this.$t("m.a.qWindowsClose")),this.$t("m.a.qWindowsClose")},this.loadObj()},methods:{loadObj:function(){var t=this,e="/model/config.json";he.a.get("/configPath.txt").then((function(i){e=i.data,t.modelPath=e.replace(/\/[^/]+$/,"")})).finally((function(){he.a.get(e).then((function(e){t.sceneIsOn=!0,t.loadCanvas(e.data)}))}))},getRomoteZipFiles:function(t,e,i){var n=this;return new Promise((function(s,o){ge.a.getBinaryContent(t,{callback:function(t,e){t?o(t):s(e)},progress:function(t){n.loadingProgress-=n.individualUnzippingProgress[e]/i,n.individualUnzippingProgress[e]=t.loaded/t.total,n.loadingProgress+=n.individualUnzippingProgress[e]/i,n.$store.commit("loadingProgressChanged",n.loadingProgress)}})})).then((function(t){return ue.a.loadAsync(t)})).then((function(t){Object.keys(t.files);return t}))},loadCanvas:function(t){var e=this;this.sceneIsSet=!1,this.canvasWidth=this.canvasBox.getBoundingClientRect().width,this.canvasHeight=this.canvasBox.getBoundingClientRect().height,this.canvas.style.width=this.canvasWidth,this.canvas.style.height=this.canvasHeight,this.sceneIsFirstSet||(this.scene=new o["v"],this.pickScene=new o["v"],this.pickScene.background=new o["d"](0)),this.scene.children.length=[],this.pickScene.children.length=[],this.lights.forEach((function(e,i){if(t.scene){var n=t.scene.lighting[i];e.color=new o["d"](n.color),e.strength=n.strength}else e.color=new o["d"](1,1,1);e.outColor=new o["B"](e.color.r,e.color.g,e.color.b),e.outColor.multiplyScalar(e.strength)})),this.sceneIsFirstSet||(this.renderer=new o["D"]({canvas:this.canvas,antialias:!0,preserveDrawingBuffer:!0})),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.renderLists.dispose(),t.scene&&t.scene.camera?this.controlsTypeChanged(1,t.scene.camera,!0):this.controlsTypeChanged(1,void 0,!1),this.loadedObj&&this.loadedObj.children&&(this.loadedObj.children.forEach((function(t){null})),this.loadedObj=null),this.loadedObj=new o["p"],this.elementDict={},this.tagIdCount=500,this.tagList.length=0,t.tags&&t.tags.forEach((function(t){e.addTagToScene(t)})),this.loadingProgress=0,this.$store.commit("loadingProgressChanged",this.loadingProgress),this.neuronList.length=0,this.fileList.length=0,this.groupList.length=0,this.neuronCount=0,this.$store.commit("setPanelStat",{open:!1,index:0});var i=!1;if(t.groups)for(var n in t.groups)n==this.defaultGroupText&&(i=!0),this.groupList.push(n);i||this.groupList.push(this.defaultGroupText),this.$store.commit("loadingScreenFadeIn"),this.individualLoadingProgress=0;var s={},a=[],r=0;t.fileList.forEach((function(t,i){e.fileList.push(t);var n=ae["a"].getFileType(t);".zip"==n&&(r+=1)})),r>0?(this.individualUnzippingProgress=new Float32Array(r),this.$store.state.loadingPhase=0):this.$store.state.loadingPhase=1;var l=0;t.fileList.forEach((function(t,i){e.fileList.push(t);var n=ae["a"].getFileType(t);if(".zip"==n){var o=e.modelPath+"/objects/".concat(t),c=e.getRomoteZipFiles(o,l,r).then((function(i){var n=Object.keys(i.files);n.forEach((function(n){var o=ae["a"].getFileType(n);if(".obj"==o){var a=t+"_"+n,r=i.file(n).async("string");s[a]=r,e.individualLoadingProgress+=1}}))}));a.push(c),l+=1}else".obj"==n&&(e.individualLoadingProgress+=1)})),Promise.all(a).then((function(){console.log("unzipped")})).catch((function(t){e.$store.commit("alert",{content:e.$t("m.a.fileUnableToUnzip")+t,timeout:1e6})})).finally((function(){e.$store.state.loadingPhase=1,e.loadingProgress=0,e.$store.commit("loadingProgressChanged",e.loadingProgress),e.individualLoadingProgress=new Float32Array(e.individualLoadingProgress),e.loadModels(s,t)}))},loadModels:function(t,e){var i=this,n=[],s={},a=function(t){e.groups[t].forEach((function(e){s[e]=t}))};for(var r in e.groups)a(r);var l=0;Object.keys(t).forEach((function(o){var a=t[o],r=i.loadModelLocal(a,l,i.individualLoadingProgress.length).then((function(t){i.addLoadedResultsToObj(t,e,o,s)}));n.push(r),l+=1})),e.fileList.forEach((function(t,o){var a=ae["a"].getFileType(t);if(".obj"==a){var r=i.loadModel(i.modelPath+"/objects/".concat(t),l,i.individualLoadingProgress.length).then((function(n){i.addLoadedResultsToObj(n,e,t,s)}));n.push(r),l+=1}})),Promise.all(n).then((function(){console.log("files loaded")})).catch((function(t){i.$store.commit("alert",{content:i.$t("m.a.fileUnableToLoad")+t,timeout:1e6})})).finally((function(){if(i.scene.add(i.loadedObj),!e.scene||!e.scene.camera){var t=new o["a"](i.loadedObj,16711680),n=t.geometry.boundingSphere;i.controlsTypeChanged(1,n,!1)}i.$store.commit("loadingScreenFadeOut"),i.sceneIsSet=!0,i.bgColor=e.scene?e.scene.background:"#000000",i.bgColorChanged(i.bgColor),i.sceneIsFirstSet=!0,i.render()}))},loadModel:function(t,e,i){var n=this;return new Promise((function(s,o){(new l["a"]).load(t,s,(function(t){n.loadingProgress-=n.individualLoadingProgress[e]/i,n.individualLoadingProgress[e]=t.loaded/t.total,n.loadingProgress+=n.individualLoadingProgress[e]/i,n.$store.commit("loadingProgressChanged",n.loadingProgress)}),(function(e){o(t)}))}))},loadModelLocal:function(t,e,i){var n=this;return new Promise((function(s,o){t.then((function(t){(new l["a"]).loadStr(t,s,(function(t){n.loadingProgress-=n.individualLoadingProgress[e]/i,n.individualLoadingProgress[e]=t.loaded/t.total,n.loadingProgress+=n.individualLoadingProgress[e]/i,n.$store.commit("loadingProgressChanged",n.loadingProgress)}),(function(t){o()}))}))}))},addLoadedResultsToObj:function(t,e,i,n){var s=this;t.children.forEach((function(t,o){s.neuronCount+=1;var a=s.neuronCount+1,r=ae["a"].sansFileType(i);o>0&&(r+="_"+(o+1));var l=e.aliases&&e.aliases[r]||r;t.name=l;var c=1,h="#b0b0b0",d="#000000",u=16,f=!0,g=e.materials?e.materials[l]:void 0;g&&(c=g.type,h=g.primaryColor,d=g.secondaryColor,u=g.shininess,f=1==g.visible),t.material=re["a"](s.camera,a/1e3,s.lights,{type:c,primaryColor:h,secondaryColor:d,shininess:u}),t.visible=f;var p={index:a,group:n[l]||s.defaultGroupText,originalName:r,name:l,neuron:t};s.neuronList.push(p),s.elementDict[a]=p,s.loadedObj.add(t)}))},addTagToScene:function(t){var e=this.tagIdCount;this.tagIdCount+=1;var i=Object($t["a"])(t.text,{fontSize:t.fontSize,fontColor:t.fontColor,fontBold:t.fontBold,fontItalic:t.fontItalic,textAlign:t.textAlign,borderThickness:t.borderThickness,borderColor:t.hasBorder?t.borderColor:"#00000000",borderRadius:t.borderRadius,backgroundColor:t.hasBackground?t.backgroundColor:"#00000000"},e/1e3),n=i.sprite;n.position.set(t.position[0],t.position[1],t.position[2]),t.sprite=n,t.ruler=i.ruler,t.canvas=i.canvas,t.idValue=e,this.elementDict[e]=t,this.tagList.push(t),this.loadedObj.add(n)},controlsTypeChanged:function(t,e,i){i&&e&&void 0!==e.type&&(t=e.type),this.camera||(this.camera=new o["q"](this.fov,this.canvasWidth/this.canvasHeight,this.near,this.far));var n=new o["B"];i?n.fromArray(e.position):e?n.set(e.center.x-2*e.radius,e.center.y,e.center.z):n.copy(this.camera.position);var s=new o["B"];i?s.fromArray(e.target):e?s.set(e.center.x,e.center.y,e.center.z):this.controls&&s.copy(this.controls.target),this.controls&&this.controls.dispose();var l=new o["B"];if(i?l.fromArray(e.up):l.copy(this.camera.up),this.camera.position.copy(n),this.camera.up.copy(l),this.camera.updateProjectionMatrix(),0==t)this.camera.up.set(0,1,0),this.controls=new r["a"](this.camera,this.canvas);else{this.controls=new a["a"](this.camera,this.canvas),this.controls.staticMoving=!0;var c=.5;i&&e.panSpeed&&(c=e.panSpeed),this.controls.panSpeed=c}this.controls.target.copy(s),this.controls.removeEventListener("change",this.render),this.controls.addEventListener("change",this.render),this.controls.update(),this.$store.commit("setControls",this.controls)},renderNeedsResize:function(){this.canvasWidth=this.canvasBox.getBoundingClientRect().width,this.canvasHeight=this.canvasBox.getBoundingClientRect().height;var t=this.canvas.width!==this.canvasWidth||this.canvas.height!==this.canvasHeight;if(t)return this.sideBar.resized(),[this.canvasWidth,this.canvasHeight]},render:function(){var t=this.renderNeedsResize();this.sceneIsSet&&(void 0!==t&&(this.renderer.setSize(t[0],t[1],!1),this.canvas.style.width=t[0]+"px",this.canvas.style.height=t[1]+"px",this.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight,this.camera.updateProjectionMatrix()),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera))},bgColorChanged:function(t){this.bgColor=t,this.renderer.setClearColor(this.bgColor,1),this.render()},onTransitionEnd:function(t){t.target.classList.remove("fade-in")},getCanvasRelativePosition:function(t){var e=this.canvas.getBoundingClientRect();return{x:(t.clientX-e.left)*this.canvas.width/e.width,y:(t.clientY-e.top)*this.canvas.height/e.height}},getClickInfo:function(t){var e=this.getClickInfoOnce(t);if(e[0])return e;for(var i=5,n={clientX:t.clientX,clientY:t.clientY},s=void 0,o=1;o<=i;o+=1){if(n.clientX-=o,s=this.getClickInfoOnce(n),s[0])return s;if(n.clientX+=2*o,s=this.getClickInfoOnce(n),s[0])return s;if(n.clientX-=o,n.clientY-=o,s=this.getClickInfoOnce(n),s[0])return s;if(n.clientY+=2*o,s=this.getClickInfoOnce(n),s[0])return s;n.clientY-=o}return e},getClickInfoOnce:function(t){var e=this.getCanvasRelativePosition(t),i=this.renderer.getPixelRatio();this.camera.setViewOffset(this.renderer.getContext().drawingBufferWidth,this.renderer.getContext().drawingBufferHeight,e.x*i|0,e.y*i|0,1,1),this.renderer.setClearColor(this.blackColor,1),this.renderer.setRenderTarget(this.pickingTexture),this.renderer.antialias=!1,this.pickScene.add(this.loadedObj),this.loadedObj.children.forEach((function(t){t.material.uniforms.isInfo.value=!0})),this.renderer.render(this.pickScene,this.camera),this.renderer.readRenderTargetPixels(this.pickingTexture,0,0,1,1,this.pixelBuffer);var n=Math.round(1e3*this.pixelBuffer[0]);return this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.bgColor,1),this.camera.clearViewOffset(),this.scene.add(this.loadedObj),this.loadedObj.children.forEach((function(t){t.material.uniforms.isInfo.value=!1})),this.renderer.antialias=!0,[this.elementDict[n],this.pixelBuffer[1],this.pixelBuffer[2],this.pixelBuffer[3]]},onCanvasMouseDown:function(t){t.preventDefault(),this.cvsMouseOrTouchPosX=t.clientX,this.cvsMouseOrTouchPosY=t.clientY},onCanvasTouchStart:function(t){this.cvsMouseOrTouchPosX=t.touches[0].clientX,this.cvsMouseOrTouchPosY=t.touches[0].clientY},onCanvasTouchEnd:function(t){this.onCanvasClickedOrTouched(t.changedTouches[0])},onCanvasDblClick:function(t){if(3!==this.$store.state.panelIndex){var e=this.getClickInfo(t);e[0]&&(void 0!==e[0].neuron?(this.controls.target.set(e[1],e[2],e[3]),this.controls.update()):(this.controls.target.fromArray(e[0].position),this.controls.update()))}},onCanvasClickedOrTouched:function(t){if(t.preventDefault&&t.preventDefault(),t.clientX===this.cvsMouseOrTouchPosX&&t.clientY===this.cvsMouseOrTouchPosY){var e=void 0;if(2==this.$store.state.panelIndex)if(e=this.getClickInfo(t),1==this.tagActionIndex)this.$refs["drawPanel"].tagPositionSet(e,this.tagIdCount),this.tagIdCount+=1;else if(2==this.tagActionIndex)if(e[0]&&e[0].sprite){var i=confirm(this.$t("m.a.qDoRemoveTag"));i&&(this.deleteTag(e[0]),this.render())}else this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")});else 3==this.tagActionIndex?this.relocatingTag?e[0]&&e[0].neuron?(this.relocatingTag.position[0]=e[1],this.relocatingTag.position[1]=e[2],this.relocatingTag.position[2]=e[3],this.relocatingTag.sprite.position.fromArray(this.relocatingTag.position),this.render(),this.cancelRelocatingTag()):this.$store.commit("alert",{content:this.$t("m.a.newLocationNotSelected")}):e[0]&&e[0].sprite?this.relocatingTag=e[0]:this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")}):4==this.tagActionIndex&&e[0]&&e[0].sprite&&this.$refs["drawPanel"].toggleSelectTagChange(e[0]);else 3==this.$store.state.panelIndex&&(e=this.getClickInfo(t),2==t.button?e[0]&&e[0].neuron&&(this.rightClickMaterialDialogOpen=!0,this.rightClickSelectedNeuron=e[0].neuron):e[0]&&e[0].neuron&&this.$refs["neuronPanel"].neuronPicked(e[0]))}},startCreatingTag:function(){this.tagActionIndex=1,this.mouseHintShow=!0,this.$store.commit("setPanelStat",{open:!1})},endCreatingTag:function(t){this.resetTagActionIndex(),t&&t.sprite&&(this.elementDict[t.idValue]=t,this.tagList.push(t),this.loadedObj.add(t.sprite),this.render()),this.$store.commit("setPanelStat",{open:!0})},startDeletingTag:function(){this.tagActionIndex=2,this.mouseHintShow=!0,this.$store.commit("setPanelStat",{open:!1})},cancelDeletingTag:function(){this.resetTagActionIndex(),this.$store.commit("setPanelStat",{open:!0})},deleteTag:function(t){var e=this.tagList.indexOf(t);e>=0&&this.tagList.splice(e,1),this.loadedObj.remove(t.sprite)},startRelocatingTag:function(){this.tagActionIndex=3,this.mouseHintShow=!0,this.$store.commit("setPanelStat",{open:!1})},cancelRelocatingTag:function(){this.resetTagActionIndex(),this.relocatingTag=void 0,this.$store.commit("setPanelStat",{open:!0})},startToggleSelectTag:function(){this.tagActionIndex=4,this.mouseHintShow=!0},cancelToggleSelectTag:function(){this.resetTagActionIndex()},resetTagActionIndex:function(){this.tagActionIndex=0},drawPanelEnded:function(){this.resetTagActionIndex(),this.tagList.forEach((function(t){t.sprite.material.uniforms.isSelected.value=!1})),this.render()},saveConfigJson:function(){try{new Blob}catch(h){this.$store.commit("alert",{content:this.$t("m.a.browserVersionTooOld")})}var t={};t["fileList"]=this.fileList;var e={},i={},n={};this.groupList.forEach((function(t){i[t]=[]})),this.neuronList.forEach((function(t){var s=i[t.group];void 0!=s?s.push(t.neuron.name):i[t.group]=[t.neuron.name],e[t.originalName]=t.neuron.name;var o=t.neuron.material;n[t.neuron.name]={type:o.uniforms.type.value,primaryColor:"#"+o.uniforms.primaryColor.value.getHexString(),secondaryColor:"#"+o.uniforms.secondaryColor.value.getHexString(),shininess:o.uniforms.shininess.value,visible:t.neuron.visible}})),t["aliases"]=e,t["groups"]=i,t["materials"]=n;var s=[];this.lights.forEach((function(t){s.push({color:"#"+t.color.getHexString(),strength:t.strength})}));var o=this.$store.getters.controlsType,a=.5;1==o&&this.controls.panSpeed&&(a=this.controls.panSpeed);var r={type:o,panSpeed:a,position:this.camera.position.toArray(),target:this.controls.target.toArray(),up:this.camera.up.toArray()};t["scene"]={background:this.bgColor,lighting:s,camera:r};var l=[];this.tagList.forEach((function(t){l.push({position:t.position,text:t.text,fontItalic:t.fontItalic,fontBold:t.fontBold,fontSize:t.fontSize,textAlign:t.textAlign,fontColor:t.fontColor,hasBorder:t.hasBorder,borderColor:t.borderColor,borderRadius:t.borderRadius,borderThickness:t.borderThickness,hasBackground:t.hasBackground,backgroundColor:t.backgroundColor})})),t["tags"]=l;var c=JSON.stringify(t,null,4);Object(le["a"])(c,"config.json","text/plain")},saveScreenshot:function(){var t="image/jpeg",e=this.renderer.domElement.toDataURL(t),i=document.createElement("a");i.download="neuron.png",i.href=e,i.click()}},beforeDestroy:function(){window.removeEventListener("resize",this.render)}},ve=pe,me=(i("8fa3"),Object(f["a"])(ve,n,s,!1,null,"6f104025",null));e["default"]=me.exports;p()(me,{VBtn:v["a"],VCard:m["a"],VFlex:Ht["a"]})},c81e:function(t,e,i){},e829:function(t,e,i){"use strict";i("12b2")},eb99:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0622497d.4fbcca2c.js.map
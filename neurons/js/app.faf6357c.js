(function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},a={app:0},r={app:0},i=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-cc7dbe50":"76d862b5"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-cc7dbe50":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-cc7dbe50":"28051f64"}[e]+".css",r=l.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===o||u===r))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===o||u===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var o=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete a[e],h.parentNode.removeChild(h),n(i)},h.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){a[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=i);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(h);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,n[1](d)}r[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/neurons/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var h=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"017e":function(e,t,n){"use strict";n("82e6")},"034f":function(e,t,n){"use strict";n("85ec")},"062b":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"right-panel-container"},[n("nl-title",{attrs:{title:e.$t("m.i.neuron")}}),n("v-expansion-panels",{staticClass:"right-panel",attrs:{tile:"",accordion:"",multiple:""},model:{value:e.openedPanels,callback:function(t){e.openedPanels=t},expression:"openedPanels"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.neuronList")))]),n("v-expansion-panel-content",{staticClass:"list-content"},[n("v-row",{attrs:{"no-gutters":""}},[n("neuron-list-table",{ref:"neuronListTable",attrs:{router:e.router,neuronList:e.neuronList},on:{renderOnce:e.valueChanged,openMaterialDialog:e.openMaterialDialog,focusOnItem:e.focusOnItem,groupNameChanged:e.groupNameChanged},model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})],1)],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.batchOperations")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{btns:e.batchOperationBtnGroup1},on:{batchSetVisible:function(t){return e.batchSetVisibility(!0)},batchSetInvisible:function(t){return e.batchSetVisibility(!1)}}}),n("nf-buttons",{staticStyle:{"margin-top":"0"},attrs:{btns:e.batchOperationBtnGroup2},on:{batchSetColor:e.batchSetColor,batchSetMaterial:e.batchSetMaterial,groupDialogOpen:e.groupDialogOpen}})],1)],1)],1),n("material-dialog",{attrs:{neuron:e.selectedNeuron},on:{materialChanged:e.valueChanged},model:{value:e.materialDialogOpen,callback:function(t){e.materialDialogOpen=t},expression:"materialDialogOpen"}}),e.batchColorPanelOpen?n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content"},model:{value:e.batchColorPanelOpen,callback:function(t){e.batchColorPanelOpen=t},expression:"batchColorPanelOpen"}},[n("v-color-picker",{attrs:{dark:""},on:{"update:color":e.batchColorChanged},model:{value:e.batchColor,callback:function(t){e.batchColor=t},expression:"batchColor"}})],1):e._e(),n("material-dialog",{ref:"batchMaterialDialog",on:{materialChanged:e.batchValueChanged},model:{value:e.batchMaterialDialogOpen,callback:function(t){e.batchMaterialDialogOpen=t},expression:"batchMaterialDialogOpen"}}),n("group-dialog",{ref:"batchGroupDialog",attrs:{groupList:e.groupList,neuronList:e.neuronList},on:{input:e.groupDialogClosed},model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})],1)},a=[],r=(n("4160"),n("c975"),n("a434"),n("159b"),n("5a89"),n("8146")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content",height:"400px",persistent:""},model:{value:e.groupDialogOpen,callback:function(t){e.groupDialogOpen=t},expression:"groupDialogOpen"}},[[n("v-card",{staticClass:"pa-4 group-dialog-card"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-data-table",{staticClass:"group-table",attrs:{headers:e.headers,items:e.neuronList,"item-key":"index","show-select":"",dense:"","calculate-widths":"","items-per-page":10,"mobile-breakpoint":"0"},on:{"item-selected":e.itemSelected,"toggle-select-all":e.toggleSelectedAll},scopedSlots:e._u([{key:"item.name",fn:function(t){var o=t.item;return[n("v-flex",{staticClass:"name-cell"},[e._v(e._s(o.neuron.name))])]}}]),model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})],1),n("v-row",{attrs:{"no-gutters":""}},[e.groupDialogOpen?n("v-select",{attrs:{items:e.groupList,label:e.$t("m.i.moveToGroup")},scopedSlots:e._u([{key:"append-item",fn:function(){return[n("v-divider",{staticClass:"mb-2"}),n("v-list-item",[n("v-text-field",{attrs:{label:e.$t("m.i.addGroup"),rules:e.rules},on:{"update:error":e.addGroupInputUpdateError,change:e.addGroupInputChanged},model:{value:e.addGroupName,callback:function(t){e.addGroupName=t},expression:"addGroupName"}})],1)]},proxy:!0},{key:"item",fn:function(t){var o=t.item;return[n("v-flex",{staticClass:"d-flex justify-space-between"},[n("span",[e._v(e._s(o))]),n("v-icon",{on:{click:function(t){return t.stopPropagation(),e.removeGroup(t,o)}}},[e._v("mdi-close")])],1)]}}],null,!1,1938673044),model:{value:e.selectedGroup,callback:function(t){e.selectedGroup=t},expression:"selectedGroup"}}):e._e()],1),n("v-row",{attrs:{"no-gutters":""}},[n("nf-buttons",{attrs:{btns:e.openCloseBtns},on:{confirm:function(t){return e.close(!0)},cancel:function(t){return e.close(!1)}}})],1)],1)]],2)},s=[],l={props:{groupList:{type:Array,default:function(){return[]}},neuronList:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}}},data:function(){return{selectedNeurons:[],groupDialogOpen:!1,openCloseBtns:[{label:this.$t("m.i.confirm"),col:"grey",method:"confirm"},{label:this.$t("m.i.cancel"),col:"red",method:"cancel"}],selectedGroup:null,headers:[{text:"name",value:"name",align:"center",width:200,groupable:!1,sortable:!0}],addGroupName:"",rules:void 0,addGroupDuplicateErr:!1}},created:function(){var e=this,t=this;this.rules=[function(t){return t.length>0||e.$t("m.a.groupNameCantBeBlank")},function(n){return t.groupList.indexOf(n)<0||e.$t("m.a.groupNameMustBeUnique")}]},methods:{open:function(){this.groupDialogOpen=!0,this.selectedNeurons=this.value},toggleSelectedAll:function(e){e.value?(this.selectedNeurons=this.neuronList,this.neuronList.forEach((function(e){e.neuron.material.uniforms.isSelected.value=!0}))):(this.selectedNeurons=[],this.neuronList.forEach((function(e){e.neuron.material.uniforms.isSelected.value=!1})))},itemSelected:function(e){this.setSelectMaterial(e.item,e.value)},setSelectMaterial:function(e,t){e.neuron.material.uniforms.isSelected.value=t},removeGroup:function(e,t){for(var n=0;n<this.neuronList.length;n++)if(this.neuronList[n].group==t)return void this.$store.commit("alert",{content:this.$t("m.a.mustClearBeforeDeleteGroup")});var o=this.groupList.indexOf(t);o>=0&&this.groupList.splice(o,1)},addGroupInputUpdateError:function(e){this.addGroupDuplicateErr=e},addGroupInputChanged:function(e){!this.addGroupDuplicateErr&&e.length>0&&(this.groupList.push(e),this.addGroupName="")},close:function(e){var t=this;e&&this.selectedGroup&&this.selectedNeurons.forEach((function(e){e.group=t.selectedGroup})),this.groupDialogOpen=!1,this.$emit("input",this.selectedNeurons)}}},c=l,u=(n("9952"),n("2877")),d=n("6544"),h=n.n(d),f=n("b0af"),p=n("8fea"),g=n("169a"),m=n("ce7e"),v=n("0e8f"),b=n("132d"),C=n("da13"),y=n("0fd9"),x=n("b974"),O=n("8654"),w=Object(u["a"])(c,i,s,!1,null,"47612ea4",null),S=w.exports;h()(w,{VCard:f["a"],VDataTable:p["a"],VDialog:g["a"],VDivider:m["a"],VFlex:v["a"],VIcon:b["a"],VListItem:C["a"],VRow:y["a"],VSelect:x["a"],VTextField:O["a"]});var P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"neuron-table",attrs:{headers:e.headers,items:e.neuronList,"item-key":"index","show-select":"",dense:"","group-by":"group","show-group-by":"","mobile-breakpoint":"0","disable-pagination":"","hide-default-footer":""},on:{"item-selected":e.itemSelected,"toggle-select-all":e.toggleSelectedAll},scopedSlots:e._u([{key:"item.name",fn:function(t){var o=t.item;return[e.isEditor?n("v-edit-dialog",{attrs:{"return-value":o.neuron.name},on:{"update:returnValue":function(t){return e.$set(o.neuron,"name",t)},"update:return-value":function(t){return e.$set(o.neuron,"name",t)}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{label:"Edit","single-line":"",counter:""},model:{value:o.neuron.name,callback:function(t){e.$set(o.neuron,"name",t)},expression:"item.neuron.name"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(o.neuron.name)+" ")]):n("div",{staticClass:"name-display",attrs:{title:o.neuron.name}},[n("input",{staticClass:"name-input",domProps:{value:o.neuron.name}})])]}},{key:"item.settings",fn:function(t){var o=t.item;return[n("v-row",{staticClass:"settings-btns-row justify-center",attrs:{"no-gutters":""}},[n("v-icon",{attrs:{title:e.$t("m.i.material")},on:{click:function(t){return e.$emit("openMaterialDialog",o.neuron)}}},[e._v(" mdi-alpha-m-box ")]),n("v-icon",{attrs:{title:e.$t("m.i.visibility")},on:{click:function(t){return e.visibilityChanged(o.neuron)}}},[e._v(" "+e._s(e.visibilityIcons[o.neuron.visible+0])+" ")]),n("v-icon",{attrs:{title:e.$t("m.i.center")},on:{click:function(t){return e.focusClicked(o)}}},[e._v("mdi-camera")])],1)]}},{key:"group.header",fn:function(t){var o=t.group,a=t.items;return[n("td",{staticClass:"group-row text-start",attrs:{colspan:e.headers.length+1}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-icon",{staticClass:"group-icon",on:{click:function(t){return e.checkGroup(t,o)}}},[e._v(" "+e._s(e.groupCheckedIcons[e.isChecked(a)])+" ")]),e.isEditor?n("v-edit-dialog",{scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{value:o,label:"Edit","single-line":"",counter:""},on:{input:function(t){return e.groupNameChanged(t,o)}}})]},proxy:!0}],null,!0)},[n("span",{staticClass:"ms-2"},[n("i",[e._v(e._s(o))])])]):n("span",{staticClass:"ms-2"},[n("i",[e._v(e._s(o))])])],1)],1)]}}]),model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})},k=[],$={props:{router:{type:String,default:"viewer"},neuronList:{default:function(){return[]},type:Array},value:{default:function(){return[]},type:Array}},data:function(){return{isEditor:!1,openedPanels:[0,1],selectedNeurons:[],headers:[{text:this.$t("m.i.name"),value:"name",align:"center",width:100,groupable:!1,sortable:!0},{text:this.$t("m.i.settings"),value:"settings",align:"center",groupable:!1,sortable:!1}],wireframeIcons:["mdi-rhombus-split","mdi-rhombus-split-outline"],groupCheckedIcons:["mdi-checkbox-marked","mdi-checkbox-blank-outline","mdi-minus-box"],visibilityIcons:["mdi-eye-off","mdi-eye"]}},created:function(){this.forceRefreshSelectedNeurons(),"viewer"==this.router?this.isEditor=!1:this.isEditor=!0},methods:{forceRefreshSelectedNeurons:function(){this.selectedNeurons=this.value},itemSelected:function(e){var t=this;e&&this.setSelectMaterial(e.item,e.value),this.$nextTick((function(){t.$emit("input",t.selectedNeurons)}))},toggleSelectedAll:function(e){var t=this;e.value?(this.selectedNeurons=this.neuronList,this.neuronList.forEach((function(e){t.setSelectMaterial(e,!0)}))):(this.selectedNeurons=[],this.neuronList.forEach((function(e){t.setSelectMaterial(e,!1)}))),this.itemSelected()},valueChanged:function(){this.$emit("renderOnce")},checkGroup:function(e,t){var n=this;e.target.classList.contains(this.groupCheckedIcons[0])?this.neuronList.forEach((function(e){var o=n.selectedNeurons.indexOf(e);e.group==t&&o>=0&&(n.selectedNeurons.splice(o,1),n.setSelectMaterial(e,!1))})):this.neuronList.forEach((function(e){e.group==t&&n.selectedNeurons.indexOf(e)<0&&(n.selectedNeurons.push(e),n.setSelectMaterial(e,!0))})),this.itemSelected()},isChecked:function(e){for(var t=!1,n=!1,o=0;o<e.length;o++)this.selectedNeurons.indexOf(e[o])<0?n=!0:t=!0;return t&&n?2:t&&!n?0:1},visibilityChanged:function(e){e.visible=!e.visible,this.valueChanged()},focusClicked:function(e){this.$emit("focusOnItem",e)},setSelectMaterial:function(e,t){e.neuron.material.uniforms.isSelected.value=t,this.valueChanged()},groupNameChanged:function(e,t){this.neuronList.forEach((function(n){n.group===t&&(n.group=e)})),this.$emit("groupNameChanged",[e,t])}}},_=$,T=(n("9a87"),n("7679")),L=Object(u["a"])(_,P,k,!1,null,"b20b843c",null),V=L.exports;h()(L,{VDataTable:p["a"],VEditDialog:T["a"],VIcon:b["a"],VRow:y["a"],VTextField:O["a"]});n("8a20");var j={components:{NeuronListTable:V,MaterialDialog:r["a"],GroupDialog:S},props:{router:{type:String,default:"viewer"},camera:{default:null,type:Object},controls:{default:null,type:Object},neuronList:{default:function(){return[]},type:Array},groupList:{default:function(){return[]},type:Array}},data:function(){return{openedPanels:[0,1],selectedNeurons:[],batchOperationBtnGroup1:[{label:this.$t("m.i.visible"),method:"batchSetVisible"},{label:this.$t("m.i.invisible"),method:"batchSetInvisible"}],batchOperationBtnGroup2:[{label:this.$t("m.i.colorSetting"),method:"batchSetColor"},{label:this.$t("m.i.materialSetting"),method:"batchSetMaterial"}],materialDialogOpen:!1,selectedNeuron:null,batchColorPanelOpen:!1,batchColor:"#ff0000",batchMaterialDialogOpen:!1,neuronListTable:void 0}},created:function(){"editor"==this.router&&this.batchOperationBtnGroup2.push({label:this.$t("m.i.groupingSetting"),method:"groupDialogOpen"})},mounted:function(){this.neuronListTable=this.$refs["neuronListTable"]},methods:{valueChanged:function(){this.$emit("renderOnce")},itemMaterialChanged:function(e){this.$emit("renderOnce")},openMaterialDialog:function(e){this.materialDialogOpen=!0,this.selectedNeuron=e},focusOnItem:function(e){var t=e.neuron.geometry.boundingSphere;this.controls.target.set(t.center.x,t.center.y,t.center.z),this.controls.update(),this.valueChanged()},batchSetVisibility:function(e){this.selectedNeurons.length<=0?this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")}):(this.selectedNeurons.forEach((function(t){t.neuron.visible=e})),this.valueChanged())},batchSetColor:function(){this.selectedNeurons.length?(this.batchColor="#"+this.selectedNeurons[0].neuron.material.uniforms.primaryColor.value.getHexString(),this.batchColorPanelOpen=!0):this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")})},batchColorChanged:function(e){this.selectedNeurons.forEach((function(t){var n=t.neuron.material.uniforms.primaryColor.value;n.r=e.rgba.r/255,n.g=e.rgba.g/255,n.b=e.rgba.b/255})),this.valueChanged()},batchSetMaterial:function(){if(this.selectedNeurons.length<=0)this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")});else{var e=this.$refs["batchMaterialDialog"],t=new Array(e.materialTypes.length);this.selectedNeurons.forEach((function(e){var n=Math.round(e.neuron.material.uniforms.type.value);t[n]=!0}));var n=-1,o=0;t.forEach((function(e,t){e&&(n=t,o+=1)})),e.selectedMaterial=1==o?n:-1,this.batchMaterialDialogOpen=!0}},batchValueChanged:function(e){1==e[1]?this.selectedNeurons.forEach((function(t){var n=t.neuron.material.uniforms.primaryColor.value;n.r=e[0].r,n.g=e[0].g,n.b=e[0].b})):2==e[1]?this.selectedNeurons.forEach((function(t){var n=t.neuron.material.uniforms.secondaryColor.value;n.r=e[0].r,n.g=e[0].g,n.b=e[0].b})):3==e[1]?this.selectedNeurons.forEach((function(t){t.neuron.material.uniforms.type.value=e[0]})):4==e[1]?this.selectedNeurons.forEach((function(t){t.neuron.material.wireframe=e[0]})):5==e[1]&&this.selectedNeurons.forEach((function(t){t.neuron.material.uniforms.shininess.value=e[0]})),this.valueChanged()},groupDialogOpen:function(){this.$refs["batchGroupDialog"].open()},groupDialogClosed:function(){var e=this;this.$nextTick((function(){e.valueChanged(),e.neuronListTable.forceRefreshSelectedNeurons()}))},neuronPicked:function(e){var t=this;e&&this.$nextTick((function(){var n=t.selectedNeurons.indexOf(e);n<0?(t.selectedNeurons.push(e),t.neuronListTable.setSelectMaterial(e,!0)):(t.selectedNeurons.splice(n,1),t.neuronListTable.setSelectMaterial(e,!1)),t.neuronListTable.forceRefreshSelectedNeurons(),t.valueChanged()}))},groupNameChanged:function(e){var t=this.groupList.indexOf(e[0]),n=this.groupList.indexOf(e[1]);t>=0?this.groupList.splice(t,1):this.groupList[n]=e[0]}},beforeDestroy:function(){var e=this;this.neuronList.forEach((function(t){e.neuronListTable.setSelectMaterial(t,!1)}))}},D=j,M=(n("b2ad"),n("03a4")),E=n("a523"),N=n("cd55"),B=n("49e2"),I=n("c865"),F=n("0393"),A=Object(u["a"])(D,o,a,!1,null,"b984029e",null);t["a"]=A.exports;h()(A,{VColorPicker:M["a"],VContainer:E["a"],VDialog:g["a"],VExpansionPanel:N["a"],VExpansionPanelContent:B["a"],VExpansionPanelHeader:I["a"],VExpansionPanels:F["a"],VRow:y["a"]})},"07a4":function(e,t,n){"use strict";var o=n("2b0e"),a=n("2f62"),r=n("920c");o["a"].use(a["a"]),t["a"]=new a["a"].Store({state:{loadingPhase:0,loadingProgressComponent:void 0,loadingProgress:0,controls:void 0,panelOpen:!1,panelIndex:0,alertOpenMethod:void 0,isMobile:!1},getters:{loadingPercentage:function(e){return Math.round(100*e.loadingProgress)+"%"},controlsType:function(e){return e.controls&&e.controls instanceof r["a"]?1:0}},mutations:{setControls:function(e,t){e.controls=t},setLoadingProgressComponent:function(e,t){e.loadingProgressComponent=t},resetLoadingProgressComponent:function(e,t){e.loadingProgressComponent&&e.loadingProgressComponent.resetLoadingScreen()},loadingProgressChanged:function(e,t){e.loadingProgressComponent.startLoading(),e.loadingProgress=t},loadingScreenFadeIn:function(e){e.loadingProgressComponent.fadeIn()},loadingScreenFadeOut:function(e){e.loadingProgressComponent.fadeOut()},setPanelStat:function(e,t){void 0!=t.open&&(e.panelOpen=t.open),void 0!=t.index&&(e.panelIndex=t.index)},setAlertOpenMethod:function(e,t){e.alertOpenMethod=t},alert:function(e,t){e.alertOpenMethod(t)},setIsMobile:function(e){e.isMobile=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)}}})},"07b4":function(e,t,n){"use strict";n("baa5");var o={getFileType:function(e){var t=e,n=t.lastIndexOf("."),o=t.length,a=t.substring(n,o);return a},sansFileType:function(e){var t=e,n=t.lastIndexOf("."),o=t.substring(0,n);return o}};t["a"]=o},"07f5":function(e,t,n){},1108:function(e,t){e.exports="// plain\r\n\r\nvoid main()\r\n{\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}"},2520:function(e,t,n){"use strict";n("55ae")},"368b":function(e,t,n){},3774:function(e,t,n){},"3c2b":function(e,t,n){"use strict";n("ec0d")},"401b":function(e,t,n){},"4e72":function(e,t,n){"use strict";n("6ba8")},5286:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"canvas-container"},[n("alert-snackbar"),n("v-card",{directives:[{name:"show",rawName:"v-show",value:e.mouseHintShow,expression:"mouseHintShow"}],staticClass:"pointer-tag pb-2 flex-column align-center",attrs:{color:"#80808080"}},[n("v-flex",{staticClass:"pa-2",domProps:{innerHTML:e._s(e.mouseHint)}}),n("v-btn",{attrs:{tile:""},on:{click:function(t){e.mouseHintShow=!1}}},[e._v(e._s(e.$t("m.i.gotIt")))])],1),n("div",{ref:"canvas-box",staticClass:"canvas-box"},[n("canvas",{ref:"main-canvas",attrs:{id:"main-canvas"},on:{mousedown:e.onCanvasMouseDown,mouseup:e.onCanvasClickedOrTouched,dblclick:e.onCanvasDblClick,touchstart:e.onCanvasTouchStart,touchend:e.onCanvasTouchEnd}})]),n("material-dialog",{attrs:{neuron:e.rightClickSelectedNeuron},on:{materialChanged:e.render},model:{value:e.rightClickMaterialDialogOpen,callback:function(t){e.rightClickMaterialDialogOpen=t},expression:"rightClickMaterialDialogOpen"}}),n("v-btn",{staticClass:"panels-toggle-btn",attrs:{color:"red",fab:""},on:{click:function(t){return t.stopPropagation(),e.togglePanel(t)}}},[n("v-icon",{attrs:{color:"white"}},[e._v(e._s(e.panelsOpen?"mdi-minus":"mdi-plus"))])],1),n("div",{staticClass:"panels-container elevation-3",class:{"panels-container-mobile":e.$store.state.isMobile},style:{"max-height":e.panelsOpen?"calc(100% - 40px)":"0"}},[e.sceneIsOn?n("div",{staticClass:"panels-wrapper"},[n("neuron-panel",{ref:"neuronPanel",attrs:{router:"viewer",camera:e.camera,controls:e.controls,neuronList:e.neuronList},on:{renderOnce:e.render}}),n("scene-panel",{ref:"scenePanel",attrs:{isViewer:!0,bgColor:e.bgColor,lights:e.lights,neuronList:e.neuronList},on:{reload:e.loadObj,downloadConfig:e.saveConfigJson,loadCanvas:e.loadCanvas,saveScreenshot:e.saveScreenshot,bgColorChanged:e.bgColorChanged,renderOnce:e.render,controlsTypeChanged:function(t){return e.controlsTypeChanged(t)}}})],1):e._e()])],1)},a=[],r=(n("4160"),n("b0c0"),n("b64b"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("ddb0"),n("5a89")),i=n("920c"),s=n("4721"),l=n("5a15"),c=n("bed6"),u=n("97f5"),d=n("062b"),h=n("8146"),f=n("07b4"),p=n("8a20"),g=n("b31f"),m=n("7ab8"),v=n("bc3a"),b=n.n(v),C=n("c4e3"),y=n.n(C),x=n("0083"),O=n.n(x),w={name:"MyCanvas",components:{AlertSnackbar:c["a"],MaterialDialog:h["a"],ScenePanel:u["a"],NeuronPanel:d["a"]},data:function(){return{modelPath:void 0,fov:30,near:.1,far:1e4,canvasWidth:600,canvasHeight:400,canvas:void 0,canvasBox:void 0,camera:void 0,scene:void 0,renderer:void 0,controls:void 0,three:void 0,bgColor:"#000000",blackColor:"#000000",sceneIsSet:!1,sceneIsFirstSet:!1,sceneIsOn:!0,panelsOpen:!1,lights:[{color:void 0,strength:1,outColor:void 0},{color:void 0,strength:.5,direction:new r["B"](1,0,0),outColor:void 0},{color:void 0,strength:.5,direction:new r["B"](-1,0,0),outColor:void 0}],loadedObj:void 0,neuronList:[],groupList:[],defaultGroupText:this.$t("m.i.defaultGroupText"),neuronCount:0,loadingProgress:0,individualUnzippingProgress:[],individualLoadingProgress:[],clickTimeoutId:0,pickScene:void 0,pickingTexture:new r["C"](1,1,{type:r["g"]}),pixelBuffer:new Float32Array(4),elementDict:{},rightClickMaterialDialogOpen:!1,rightClickSelectedNeuron:void 0,touchTimeStamp:0,tagList:[],cvsMouseOrTouchPosX:0,cvsMouseOrTouchPosY:0,fileList:[],mouseHint:this.$store.state.isMobile?this.$t("m.i.mouseHintMobile"):this.$t("m.i.mouseHintDesktop"),mouseHintShow:!0}},mounted:function(){this.canvas=this.$refs["main-canvas"],this.canvasBox=this.$refs["canvas-box"],window.onresize=this.render,window.onbeforeunload=function(e){var t=e||window.event;return t&&(e.returnValue=this.$t("m.a.qWindowsClose")),this.$t("m.a.qWindowsClose")},this.loadObj()},methods:{loadObj:function(){var e=this,t="./model/config.json";b.a.get("./configPath.txt").then((function(n){t=n.data,e.modelPath=t.replace(/\/[^/]+$/,"")})).finally((function(){b.a.get(t).then((function(t){e.sceneIsOn=!0,e.loadCanvas(t.data)}))}))},getRomoteZipFiles:function(e,t,n){var o=this;return new Promise((function(a,r){O.a.getBinaryContent(e,{callback:function(e,t){e?r(e):a(t)},progress:function(e){o.loadingProgress-=o.individualUnzippingProgress[t]/n,o.individualUnzippingProgress[t]=e.loaded/e.total,o.loadingProgress+=o.individualUnzippingProgress[t]/n}})})).then((function(e){return y.a.loadAsync(e)})).then((function(e){Object.keys(e.files);return e}))},loadCanvas:function(e){var t=this;this.sceneIsSet=!1,this.canvasWidth=this.canvasBox.getBoundingClientRect().width,this.canvasHeight=this.canvasBox.getBoundingClientRect().height,this.canvas.style.width=this.canvasWidth,this.canvas.style.height=this.canvasHeight,this.sceneIsFirstSet||(this.scene=new r["v"],this.pickScene=new r["v"],this.pickScene.background=new r["d"](0)),this.scene.children.length=[],this.pickScene.children.length=[],this.lights.forEach((function(t,n){if(e.scene){var o=e.scene.lighting[n];t.color=new r["d"](o.color),t.strength=o.strength}else t.color=new r["d"](1,1,1);t.outColor=new r["B"](t.color.r,t.color.g,t.color.b),t.outColor.multiplyScalar(t.strength)})),this.sceneIsFirstSet||(this.renderer=new r["D"]({canvas:this.canvas,antialias:!0,preserveDrawingBuffer:!0})),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.renderLists.dispose(),e.scene&&e.scene.camera?this.controlsTypeChanged(1,e.scene.camera,!0):this.controlsTypeChanged(1,void 0,!1),this.loadedObj&&this.loadedObj.children&&(this.loadedObj.children.forEach((function(e){null})),this.loadedObj=null),this.loadedObj=new r["p"],this.elementDict={},this.tagIdCount=500,this.tagList.length=0,e.tags&&e.tags.forEach((function(e){t.addTagToScene(e)})),this.panelsOpen=!1,this.mouseHintShow=!0,this.loadingProgress=0,this.$store.commit("loadingProgressChanged",this.loadingProgress),this.neuronList.length=0,this.fileList.length=0,this.groupList.length=0,this.neuronCount=0;var n=!1;if(e.groups)for(var o in e.groups)o==this.defaultGroupText&&(n=!0),this.groupList.push(o);n||this.groupList.push(this.defaultGroupText),this.$store.commit("loadingScreenFadeIn"),this.individualLoadingProgress=0;var a={},i=[],s=0;e.fileList.forEach((function(e,n){t.fileList.push(e);var o=f["a"].getFileType(e);".zip"==o&&(s+=1)})),s>0?(this.individualUnzippingProgress=new Float32Array(s),this.$store.state.loadingPhase=0):this.$store.state.loadingPhase=1;var l=0;e.fileList.forEach((function(e,n){t.fileList.push(e);var o=f["a"].getFileType(e);if(".zip"==o){var r=t.modelPath+"/objects/".concat(e);console.log(r);var c=t.getRomoteZipFiles(r,l,s).then((function(n){var o=Object.keys(n.files);o.forEach((function(o){var r=f["a"].getFileType(o);if(".obj"==r){var i=e+"_"+o,s=n.file(o).async("string");a[i]=s,t.individualLoadingProgress+=1}}))}));i.push(c),l+=1}else".obj"==o&&(t.individualLoadingProgress+=1)})),Promise.all(i).then((function(){console.log("unzipped")})).catch((function(e){t.$store.commit("alert",{content:t.$t("m.a.fileUnableToUnzip")+e,timeout:1e6})})).finally((function(){t.$store.state.loadingPhase=1,t.loadingProgress=0,t.$store.commit("loadingProgressChanged",t.loadingProgress),t.individualLoadingProgress=new Float32Array(t.individualLoadingProgress),t.loadModels(a,e)}))},loadModels:function(e,t){var n=this,o=[],a={},i=function(e){t.groups[e].forEach((function(t){a[t]=e}))};for(var s in t.groups)i(s);var l=0;Object.keys(e).forEach((function(r){var i=e[r],s=n.loadModelLocal(i,l,n.individualLoadingProgress.length).then((function(e){n.addLoadedResultsToObj(e,t,r,a)}));o.push(s),l+=1})),t.fileList.forEach((function(e,r){var i=f["a"].getFileType(e);if(".obj"==i){var s=n.loadModel(n.modelPath+"/objects/".concat(e),l,n.individualLoadingProgress.length).then((function(o){n.addLoadedResultsToObj(o,t,e,a)}));o.push(s),l+=1}})),Promise.all(o).then((function(){console.log("files loaded")})).catch((function(e){n.$store.commit("alert",{content:n.$t("m.a.fileUnableToLoad")+e,timeout:1e6})})).finally((function(){if(n.scene.add(n.loadedObj),!t.scene||!t.scene.camera){var e=new r["a"](n.loadedObj,16711680),o=e.geometry.boundingSphere;n.controlsTypeChanged(1,o,!1)}n.$store.commit("loadingScreenFadeOut"),n.sceneIsSet=!0,n.bgColor=t.scene?t.scene.background:"#000000",n.$refs["scenePanel"].bgColorVal=n.bgColor,n.bgColorChanged(n.bgColor),n.sceneIsFirstSet=!0,n.render()}))},loadModel:function(e,t,n){var o=this;return new Promise((function(a,r){(new l["a"]).load(e,a,(function(e){o.loadingProgress-=o.individualLoadingProgress[t]/n,o.individualLoadingProgress[t]=e.loaded/e.total,o.loadingProgress+=o.individualLoadingProgress[t]/n,o.$store.commit("loadingProgressChanged",o.loadingProgress)}),(function(t){r(e)}))}))},loadModelLocal:function(e,t,n){var o=this;return new Promise((function(a,r){e.then((function(e){(new l["a"]).loadStr(e,a,(function(e){o.loadingProgress-=o.individualLoadingProgress[t]/n,o.individualLoadingProgress[t]=e.loaded/e.total,o.loadingProgress+=o.individualLoadingProgress[t]/n,o.$store.commit("loadingProgressChanged",o.loadingProgress)}),(function(e){r()}))}))}))},addLoadedResultsToObj:function(e,t,n,o){var a=this;e.children.forEach((function(e,r){a.neuronCount+=1;var i=a.neuronCount+1,s=f["a"].sansFileType(n);r>0&&(s+="_"+(r+1));var l=t.aliases&&t.aliases[s]||s;e.name=l;var c=1,u="#b0b0b0",d="#000000",h=16,g=!0,m=t.materials?t.materials[l]:void 0;m&&(c=m.type,u=m.primaryColor,d=m.secondaryColor,h=m.shininess,g=1==m.visible),e.material=p["a"](a.camera,i/1e3,a.lights,{type:c,primaryColor:u,secondaryColor:d,shininess:h}),e.visible=g;var v={index:i,group:o[l]||a.defaultGroupText,originalName:s,name:l,neuron:e};a.neuronList.push(v),a.elementDict[i]=v,a.loadedObj.add(e)}))},addTagToScene:function(e){var t=this.tagIdCount;this.tagIdCount+=1;var n=Object(g["a"])(e.text,{fontSize:e.fontSize,fontColor:e.fontColor,fontBold:e.fontBold,fontItalic:e.fontItalic,textAlign:e.textAlign,borderThickness:e.borderThickness,borderColor:e.hasBorder?e.borderColor:"#00000000",borderRadius:e.borderRadius,backgroundColor:e.hasBackground?e.backgroundColor:"#00000000"},t/1e3),o=n.sprite;o.position.set(e.position[0],e.position[1],e.position[2]),e.sprite=o,e.ruler=n.ruler,e.canvas=n.canvas,e.idValue=t,this.elementDict[t]=e,this.tagList.push(e),this.loadedObj.add(o)},controlsTypeChanged:function(e,t,n){n&&t&&void 0!==t.type&&(e=t.type),this.camera||(this.camera=new r["q"](this.fov,this.canvasWidth/this.canvasHeight,this.near,this.far));var o=new r["B"];n?o.fromArray(t.position):t?o.set(t.center.x-2*t.radius,t.center.y,t.center.z):o.copy(this.camera.position);var a=new r["B"];n?a.fromArray(t.target):t?a.set(t.center.x,t.center.y,t.center.z):this.controls&&a.copy(this.controls.target),this.controls&&this.controls.dispose();var l=new r["B"];if(n?l.fromArray(t.up):l.copy(this.camera.up),this.camera.position.copy(o),this.camera.up.copy(l),this.camera.updateProjectionMatrix(),0==e)this.camera.up.set(0,1,0),this.controls=new s["a"](this.camera,this.canvas);else{this.controls=new i["a"](this.camera,this.canvas),this.controls.staticMoving=!0;var c=.5;n&&t.panSpeed&&(c=t.panSpeed),this.controls.panSpeed=c}this.controls.target.copy(a),this.controls.removeEventListener("change",this.render),this.controls.addEventListener("change",this.render),this.controls.update(),this.$store.commit("setControls",this.controls)},renderNeedsResize:function(){this.canvasWidth=this.canvasBox.getBoundingClientRect().width,this.canvasHeight=this.canvasBox.getBoundingClientRect().height;var e=this.canvas.width!==this.canvasWidth||this.canvas.height!==this.canvasHeight;if(e)return[this.canvasWidth,this.canvasHeight]},render:function(){var e=this.renderNeedsResize();this.sceneIsSet&&(void 0!==e&&(this.renderer.setSize(e[0],e[1],!1),this.canvas.style.width=e[0]+"px",this.canvas.style.height=e[1]+"px",this.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight,this.camera.updateProjectionMatrix()),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera))},bgColorChanged:function(e){this.bgColor=e,this.renderer.setClearColor(this.bgColor,1),this.render()},onTransitionEnd:function(e){e.target.classList.remove("fade-in")},getCanvasRelativePosition:function(e){var t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left)*this.canvas.width/t.width,y:(e.clientY-t.top)*this.canvas.height/t.height}},getClickInfo:function(e){var t=this.getClickInfoOnce(e);if(t[0])return t;for(var n=5,o={clientX:e.clientX,clientY:e.clientY},a=void 0,r=1;r<=n;r+=1){if(o.clientX-=r,a=this.getClickInfoOnce(o),a[0])return a;if(o.clientX+=2*r,a=this.getClickInfoOnce(o),a[0])return a;if(o.clientX-=r,o.clientY-=r,a=this.getClickInfoOnce(o),a[0])return a;if(o.clientY+=2*r,a=this.getClickInfoOnce(o),a[0])return a;o.clientY-=r}return t},getClickInfoOnce:function(e){var t=this.getCanvasRelativePosition(e),n=this.renderer.getPixelRatio();this.camera.setViewOffset(this.renderer.getContext().drawingBufferWidth,this.renderer.getContext().drawingBufferHeight,t.x*n|0,t.y*n|0,1,1),this.renderer.setClearColor(this.blackColor,1),this.renderer.setRenderTarget(this.pickingTexture),this.renderer.antialias=!1,this.pickScene.add(this.loadedObj),this.loadedObj.children.forEach((function(e){e.material.uniforms.isInfo.value=!0})),this.renderer.render(this.pickScene,this.camera),this.renderer.readRenderTargetPixels(this.pickingTexture,0,0,1,1,this.pixelBuffer);var o=Math.round(1e3*this.pixelBuffer[0]);return this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.bgColor,1),this.camera.clearViewOffset(),this.scene.add(this.loadedObj),this.loadedObj.children.forEach((function(e){e.material.uniforms.isInfo.value=!1})),this.renderer.antialias=!0,[this.elementDict[o],this.pixelBuffer[1],this.pixelBuffer[2],this.pixelBuffer[3]]},onCanvasMouseDown:function(e){e.preventDefault(),this.cvsMouseOrTouchPosX=e.clientX,this.cvsMouseOrTouchPosY=e.clientY},onCanvasTouchStart:function(e){this.touchTimeStamp=e.timeStamp,this.cvsMouseOrTouchPosX=e.touches[0].clientX,this.cvsMouseOrTouchPosY=e.touches[0].clientY},onCanvasTouchEnd:function(e){this.touchTimeStamp=e.timeStamp-this.touchTimeStamp,this.onCanvasClickedOrTouched(e.changedTouches[0])},onCanvasDblClick:function(e){clearTimeout(this.clickTimeoutId);var t=this.getClickInfo(e);t[0]&&(void 0!==t[0].neuron?(this.controls.target.set(t[1],t[2],t[3]),this.controls.update()):(this.controls.target.fromArray(t[0].position),this.controls.update()))},onCanvasClickedOrTouched:function(e){var t=this;e.preventDefault&&e.preventDefault(),e.clientX===this.cvsMouseOrTouchPosX&&e.clientY===this.cvsMouseOrTouchPosY&&(clearTimeout(this.clickTimeoutId),this.clickTimeoutId=setTimeout((function(){var n=t.getClickInfo(e);n[0]&&void 0!==n[0].neuron&&(2==e.button?n[0]&&(t.rightClickMaterialDialogOpen=!0,t.rightClickSelectedNeuron=n[0].neuron):t.touchTimeStamp<300?t.$refs["neuronPanel"].neuronPicked(n[0]):(t.rightClickMaterialDialogOpen=!0,t.rightClickSelectedNeuron=n[0].neuron))}),200))},saveConfigJson:function(){try{new Blob}catch(l){this.$store.commit("alert",{content:this.$t("m.a.browserVersionTooOld")})}var e={};e.useZip=this.useZip,e["fileList"]=this.fileList;var t={},n={},o={};this.groupList.forEach((function(e){n[e]=[]})),this.neuronList.forEach((function(e){var a=n[e.group];void 0!=a?a.push(e.neuron.name):n[e.group]=[e.neuron.name],t[e.originalName]=e.neuron.name;var r=e.neuron.material;o[e.neuron.name]={type:r.uniforms.type.value,primaryColor:"#"+r.uniforms.primaryColor.value.getHexString(),secondaryColor:"#"+r.uniforms.secondaryColor.value.getHexString(),shininess:r.uniforms.shininess.value,visible:e.neuron.visible}})),e["aliases"]=t,e["groups"]=n,e["materials"]=o;var a=[];this.lights.forEach((function(e){a.push({color:"#"+e.color.getHexString(),strength:e.strength})}));var r={position:this.camera.position.toArray(),target:this.controls.target.toArray()};e["scene"]={background:this.bgColor,lighting:a,camera:r};var i=[];this.tagList.forEach((function(e){i.push({position:e.position,text:e.text,fontItalic:e.fontItalic,fontBold:e.fontBold,fontSize:e.fontSize,textAlign:e.textAlign,fontColor:e.fontColor,hasBorder:e.hasBorder,borderColor:e.borderColor,borderRadius:e.borderRadius,borderThickness:e.borderThickness,hasBackground:e.hasBackground,backgroundColor:e.backgroundColor})})),e["tags"]=i;var s=JSON.stringify(e,null,4);Object(m["a"])(s,"config.json","text/plain")},saveScreenshot:function(){var e="image/jpeg",t=this.renderer.domElement.toDataURL(e),n=document.createElement("a");n.download="neuron.png",n.href=t,n.click()},togglePanel:function(e){this.panelsOpen=!this.panelsOpen,e.target.blur()}},beforeDestroy:function(){window.removeEventListener("resize",this.render)}},S=w,P=(n("f955"),n("2877")),k=n("6544"),$=n.n(k),_=n("8336"),T=n("b0af"),L=n("0e8f"),V=n("132d"),j=Object(P["a"])(S,o,a,!1,null,"39de36e0",null);t["default"]=j.exports;$()(j,{VBtn:_["a"],VCard:T["a"],VFlex:L["a"],VIcon:V["a"]})},"55ae":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=n("2f62"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app","data-app":""}},[n("loading-screen",{ref:"loading-screen",attrs:{loadingProgress:e.loadingProgress}}),n("copyright-bar"),n("my-canvas")],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:!e.objLoaded,expression:"!objLoaded"}],staticClass:"loading-screen",class:{"fade-out":e.loadingScreenFadeout}},[n("div",{staticClass:"row1"},[e._v(e._s(e.$t("m.i.loadingScreenName")))]),n("div",{staticClass:"row2"},[n("div",{staticClass:"loader-container",class:{"visible-container":e.objLoading}},[n("div",{staticClass:"loader-label"},[e._v(" "+e._s(e.loadingPhases[e.$store.state.loadingPhase])),n("br"),e._v(e._s(e.$store.getters.loadingPercentage)+" ")]),n("div",{staticClass:"loader",style:{width:e.$store.getters.loadingPercentage}})])])])},l=[],c={data:function(){return{objLoading:!1,objLoaded:!1,loadingScreenFadeout:!1,showBtnContainer:!0,loadingPhases:[this.$t("m.i.loadingPhaseDownloadZip"),this.$t("m.i.loadingPhaseLoadObj")]}},mounted:function(){this.loadCanvas("/viewer")},methods:{resetLoadingScreen:function(){this.objLoading=!1,this.objLoaded=!1,this.loadingScreenFadeout=!1,this.showBtnContainer=!0},startLoading:function(){this.showBtnContainer=!1,this.objLoading=!0},loadCanvas:function(e){var t=this;this.objLoading=!0,setTimeout((function(){t.showBtnContainer=!1,t.$emit("loadCanvas",e)}),500)},fadeIn:function(){this.objLoading=!0,this.loadingScreenFadeout=!1,this.objLoaded=!1},fadeOut:function(){var e=this;setTimeout((function(){e.loadingScreenFadeout=!0,setTimeout((function(){e.objLoaded=!0}),500)}),500)}}},u=c,d=(n("612a"),n("2877")),h=Object(d["a"])(u,s,l,!1,null,"55737008",null),f=h.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"copyright-bar"},[e._v(e._s(e.$t("m.i.copyright")))])},g=[],m=(n("9444"),{}),v=Object(d["a"])(m,p,g,!1,null,"5d7ed53f",null),b=v.exports,C=n("5286"),y={name:"App",components:{LoadingScreen:f,CopyrightBar:b,MyCanvas:C["default"]},data:function(){return{loadingProgress:0}},mounted:function(){this.$store.commit("setIsMobile"),this.$store.commit("setLoadingProgressComponent",this.$refs["loading-screen"])},methods:{}},x=y,O=(n("034f"),n("6544")),w=n.n(O),S=n("7496"),P=Object(d["a"])(x,r,i,!1,null,null,null),k=P.exports;w()(P,{VApp:S["a"]});var $=n("07a4"),_=n("f309"),T=n("5025"),L=n.n(T);n("d4b8"),n("5363");o["a"].use(_["a"]);var V=new _["a"]({lang:{locales:{zhHans:L.a},current:"zhHans"},icons:{iconfont:"mdi"}}),j=(n("bf40"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-btn",{staticClass:"small-btn-3",attrs:{tile:"",depressed:"",disabled:e.disabled,color:e.color},on:{click:function(t){return t.stopPropagation(),e.$emit("click")}}},[e._v(e._s(e.name))])],1)}),D=[],M={props:{name:String,disabled:{type:Boolean,default:!1},color:{type:String,default:""}}},E=M,N=(n("3c2b"),n("8336")),B=n("0fd9"),I=Object(d["a"])(E,j,D,!1,null,"da8d2736",null),F=I.exports;w()(I,{VBtn:N["a"],VRow:B["a"]});var A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"justify-space-between nf-buttons",class:{"vertical-btns":e.btns.length>=3||e.vertical},attrs:{"no-gutters":""}},e._l(e.btns,(function(t,o){return n("v-btn",{key:o,staticClass:"nf-btn",attrs:{tile:"",color:t.col},on:{click:function(n){return e.btnClicked(o,t.method)}}},[e._v(" "+e._s(t.label)+" ")])})),1)},R=[],G={props:{btns:{type:Array,default:function(){return[{label:"btn1",col:"red",method:"btn1Clicked"},{label:"btn2",col:"grey",method:"btn2Clicked"}]}},vertical:{type:Boolean,default:!1}},methods:{btnClicked:function(e,t){void 0!=t?this.$emit(t):this.$emit("btnClicked",e)}}},z=G,H=(n("4e72"),Object(d["a"])(z,A,R,!1,null,"a99552a2",null)),W=H.exports;w()(H,{VBtn:N["a"],VRow:B["a"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"justify-space-around",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"nf-btn-var-title"},[e._v(e._s(e.title))]),n("v-col",{staticClass:"nf-btn-var-btn"},[n("v-btn",{staticClass:"nf-btn",attrs:{tile:"",color:e.color},on:{click:function(t){return e.$emit("click")}}},[e._t("default",[e._v(e._s(e.name))])],2)],1)],1)},q=[],X={props:{title:{type:String,default:"title"},name:{type:String,default:"name"},color:{type:String,default:"grey"}}},Y=X,J=(n("017e"),n("62ad")),Z=Object(d["a"])(Y,U,q,!1,null,"61a171c4",null),K=Z.exports;w()(Z,{VBtn:N["a"],VCol:J["a"],VRow:B["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"8"}},[e._v(e._s(e.name))]),n("v-col",{attrs:{cols:"4"}},[n("v-btn",{staticClass:"small-btn-2",attrs:{tile:"",disabled:e.disabled,color:e.value},on:{click:function(t){return t.stopPropagation(),e.openColorController(t)}}})],1),e.colorPanelOpen?n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content"},model:{value:e.colorPanelOpen,callback:function(t){e.colorPanelOpen=t},expression:"colorPanelOpen"}},[n("v-color-picker",{attrs:{dark:"",value:e.value},on:{"update:color":e.colorControllerChanged}})],1):e._e()],1)},ee=[],te={props:{name:String,value:String,disabled:{type:Boolean,default:!1},alphaEnabled:{type:Boolean,default:!1}},data:function(){return{colorPanelOpen:!1}},methods:{openColorController:function(){this.colorPanelOpen=!0},colorControllerChanged:function(e){this.$emit("input",this.alphaEnabled?e.hexa:e.hex)}}},ne=te,oe=(n("aa47"),n("03a4")),ae=n("169a"),re=Object(d["a"])(ne,Q,ee,!1,null,"61fc3452",null),ie=re.exports;w()(re,{VBtn:N["a"],VCol:J["a"],VColorPicker:oe["a"],VDialog:ae["a"],VRow:B["a"]});var se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{class:{"no-row":e.small}},[0==e.small?n("v-col",{class:{"text--disabled":e.disabled},attrs:{cols:"8"}},[e._v(e._s(e.name))]):e._e(),0==e.small?n("v-col",{attrs:{cols:"4"}},[n("v-btn",{staticClass:"small-btn-2",attrs:{tile:"",disabled:e.disabled,color:e.threeToStr(e.value)},on:{click:function(t){return t.stopPropagation(),e.openColorController(t)}}})],1):n("v-icon",{staticClass:"small-btn-3",attrs:{disabled:e.disabled,color:e.threeToStr(e.value)},on:{click:function(t){return t.stopPropagation(),e.openColorController(t)}}},[e._v("mdi-alpha-c-box-outline")]),e.colorPanelOpen?n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content"},model:{value:e.colorPanelOpen,callback:function(t){e.colorPanelOpen=t},expression:"colorPanelOpen"}},[n("v-color-picker",{attrs:{dark:"",value:e.threeToStr(e.value)},on:{"update:color":e.colorControllerChanged}})],1):e._e()],1)},le=[],ce=n("5a89"),ue={props:{name:String,value:{type:Object,default:function(){return new ce["d"](1,0,0)}},disabled:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},data:function(){return{colorPanelOpen:!1}},methods:{openColorController:function(){this.colorPanelOpen=!0},threeToStr:function(e){return"#"+e.getHexString()},colorControllerChanged:function(e){this.value.r=e.rgba.r/255,this.value.g=e.rgba.g/255,this.value.b=e.rgba.b/255,this.$emit("input",this.value)}}},de=ue,he=(n("65b1"),n("132d")),fe=Object(d["a"])(de,se,le,!1,null,"73df1c20",null),pe=fe.exports;w()(fe,{VBtn:N["a"],VCol:J["a"],VColorPicker:oe["a"],VDialog:ae["a"],VIcon:he["a"],VRow:B["a"]});var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{light:"",label:e.displayedName,disabled:e.disabled,value:e.value,"hide-details":""},on:{change:e.change}})],1)],1)},me=[],ve={props:{label:{type:[Array,String],default:function(){return[]}},value:Boolean,disabled:{type:Boolean,default:!1}},computed:{displayedName:function(){return this.label.constructor==String?this.label:this.label[this.value+0]}},methods:{change:function(e){this.$emit("input",e)}}},be=ve,Ce=(n("e7cb"),n("ac7c")),ye=Object(d["a"])(be,ge,me,!1,null,"639c2a1c",null),xe=ye.exports;w()(ye,{VCheckbox:Ce["a"],VCol:J["a"],VRow:B["a"]});var Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{staticClass:"nf-toggle--name",class:{"text--disabled":e.disabled}},[e._v(e._s(e.name))]),n("v-col",{staticClass:"d-flex align-center nf-toggle--toggle"},[n("v-slider",{staticClass:"my-slider",attrs:{value:e.value,min:e.min,max:e.max,step:e.step,"thumb-label":!0,disabled:e.disabled,"hide-details":"","persistent-hint":""},on:{change:e.change}})],1)],1)},we=[],Se=(n("a9e3"),{props:{name:String,value:{type:Number,default:50},disabled:{type:Boolean,default:!1},step:{tyep:Number,default:1},min:{tyep:Number,default:1},max:{tyep:Number,default:100}},methods:{change:function(e){this.$emit("input",e)}}}),Pe=Se,ke=(n("c53d"),n("ba0d")),$e=Object(d["a"])(Pe,Oe,we,!1,null,"2d19600c",null),_e=$e.exports;w()($e,{VCol:J["a"],VRow:B["a"],VSlider:ke["a"]});var Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-radio-group",{attrs:{value:e.value},on:{change:e.change}},e._l(e.radios,(function(e,t){return n("v-radio",{key:t,attrs:{label:e.label,disabled:e.disabled,value:void 0!=e.value?e.value:t}})})),1)},Le=[],Ve={props:{value:{type:Number,default:0},radios:{type:Array,default:function(){return[{label:"radio 1",disabled:!1},{label:"radio 2",disabled:!1},{label:"radio 3",disabled:!0}]}}},methods:{change:function(e){this.$emit("input",e)}}},je=Ve,De=n("67b6"),Me=n("43a6"),Ee=Object(d["a"])(je,Te,Le,!1,null,null,null),Ne=Ee.exports;w()(Ee,{VRadio:De["a"],VRadioGroup:Me["a"]});var Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{staticClass:"main-app-bar pl-2",attrs:{color:"grey darken-3",dark:""}},[n("span",[e._v(e._s(e.title))])])},Ie=[],Fe={name:"NlTitle",props:{title:String}},Ae=Fe,Re=(n("2520"),n("40dc")),Ge=Object(d["a"])(Ae,Be,Ie,!1,null,"4ef6f1f1",null),ze=Ge.exports;w()(Ge,{VAppBar:Re["a"]});var He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"ma-0 pa-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.x,expression:"value.x"}],staticClass:"small-input",attrs:{type:"number"},domProps:{value:e.value.x},on:{input:[function(t){t.target.composing||e.$set(e.value,"x",t.target.value)},e.valueChanged]}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.y,expression:"value.y"}],staticClass:"small-input",attrs:{type:"number"},domProps:{value:e.value.y},on:{input:[function(t){t.target.composing||e.$set(e.value,"y",t.target.value)},e.valueChanged]}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.z,expression:"value.z"}],staticClass:"small-input",attrs:{type:"number"},domProps:{value:e.value.z},on:{input:[function(t){t.target.composing||e.$set(e.value,"z",t.target.value)},e.valueChanged]}})])},We=[],Ue={name:"NfVectorInput",props:{value:Object},methods:{valueChanged:function(){this.$emit("change",this.value)}}},qe=Ue,Xe=(n("6433"),Object(d["a"])(qe,He,We,!1,null,"7613c5be",null)),Ye=Xe.exports;w()(Xe,{VRow:B["a"]}),o["a"].component("nf-button",F),o["a"].component("nf-buttons",W),o["a"].component("nf-button-variant",K),o["a"].component("nf-color",ie),o["a"].component("nf-color-three",pe),o["a"].component("nf-checkbox",xe),o["a"].component("nf-toggle",_e),o["a"].component("nf-radio",Ne),o["a"].component("nl-title",ze),o["a"].component("nf-vector-input",Ye);var Je=n("a925"),Ze=n("8c4f"),Ke=new Ze["a"]({mode:"history",routes:[{path:"/",component:null},{path:"/viewer",component:function(e){return Promise.resolve().then(function(){var t=[n("5286")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/editor",component:function(e){return n.e("chunk-cc7dbe50").then(function(){var t=[n("b6f9")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]});Ke.beforeEach((function(e,t,n){"/"==e.path&&"/"!=t.path&&$["a"].commit("resetLoadingProgressComponent"),n()}));var Qe=Ke,et=(n("d3b7"),n("bc3a")),tt=n.n(et);function nt(){return new Promise((function(e){tt.a.get("lang/zh.json").then((function(t){e(t.data)}))}))}o["a"].config.productionTip=!1,o["a"].use(a["a"]),o["a"].use(Je["a"]),o["a"].use(Ze["a"]),nt().then((function(e){var t=new Je["a"]({locale:"zh-CN",messages:{"zh-CN":e}});new o["a"]({router:Qe,store:$["a"],vuetify:V,i18n:t,render:function(e){return e(k)}}).$mount("#app")}))},"5b42":function(e,t,n){},"612a":function(e,t,n){"use strict";n("e286")},6433:function(e,t,n){"use strict";n("b6d6")},"65b1":function(e,t,n){"use strict";n("dd98")},"6ba8":function(e,t,n){},"6dfe":function(e,t,n){},7739:function(e,t,n){"use strict";n("7d42")},"7ab8":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");
/*! @source https://stackoverflow.com/questions/13405129/javascript-create-and-save-file# */
function o(e,t,n){var o=new Blob([e],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,t);else{var a=document.createElement("a"),r=URL.createObjectURL(o);a.href=r,a.download=t,document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(r)}),0)}}},"7d42":function(e,t,n){},8146:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"overlay-opacity":"0",width:"400",height:"400px"},model:{value:e.materialDialogOpen,callback:function(t){e.materialDialogOpen=t},expression:"materialDialogOpen"}},[[n("v-card",{staticClass:"pa-4 px-8"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-select",{attrs:{items:e.materialTypes,label:e.$t("m.i.material")},on:{change:e.materialTypeChanged},model:{value:e.selectedMaterial,callback:function(t){e.selectedMaterial=t},expression:"selectedMaterial"}})],1),n("v-row",{attrs:{"no-gutters":""}},[n("v-checkbox",{attrs:{label:e.$t("m.i.wireframe"),dense:""},on:{change:e.wireframeChanged},model:{value:e.isWireframe,callback:function(t){e.isWireframe=t},expression:"isWireframe"}})],1),n("nf-color-three",{attrs:{name:e.$t("m.i.mainColor"),value:e.primaryColor},on:{input:function(t){return e.$emit("materialChanged",[e.primaryColor,1])}}}),n("nf-color-three",{attrs:{name:e.$t("m.i.secondaryColor"),value:e.secondaryColor,disabled:0!=e.selectedMaterial},on:{input:function(t){return e.$emit("materialChanged",[e.secondaryColor,2])}}}),n("nf-toggle",{staticStyle:{margin:"12px 0"},attrs:{name:e.$t("m.i.shininess"),min:0,max:6,step:1,disabled:1!=e.selectedMaterial},on:{input:e.shininessChanged},model:{value:e.shininess,callback:function(t){e.shininess=t},expression:"shininess"}})],1)]],2)},a=[],r=(n("c975"),n("5a89")),i={props:{neuron:{type:Object,default:null},value:{type:Boolean,default:!1}},data:function(){return{materialDialogOpen:!1,materialTypes:[{text:this.$t("m.i.matGlow"),value:0},{text:this.$t("m.i.matSolid"),value:1},{text:this.$t("m.i.matFlat"),value:2}],selectedMaterial:0,primaryColor:new r["d"](0,0,0),secondaryColor:new r["d"](0,0,0),isWireframe:!1,shininess:2,shininessValues:[1,2,4,8,16,32,64,128]}},methods:{getMaterialType:function(e){return e?e.material.uniforms.type.value:-1},setValues:function(){this.neuron?(this.primaryColor=this.neuron.material.uniforms.primaryColor.value,this.secondaryColor=this.neuron.material.uniforms.secondaryColor.value,this.isWireframe=this.neuron.material.wireframe,this.shininess=this.shininessValues.indexOf(this.neuron.material.uniforms.shininess.value),-1==this.shininess&&(this.shininess=2)):this.shininess=2},shininessChanged:function(){this.neuron&&(this.neuron.material.uniforms.shininess.value=this.shininessValues[this.shininess]),this.$emit("materialChanged",[this.shininessValues[this.shininess],5])},materialTypeChanged:function(){this.neuron&&(this.neuron.material.uniforms.type.value=this.selectedMaterial),this.$emit("materialChanged",[this.selectedMaterial,3])},wireframeChanged:function(){this.neuron&&(this.neuron.material.wireframe=this.isWireframe),this.$emit("materialChanged",[this.isWireframe,4])}},watch:{value:function(e){e&&(this.materialDialogOpen=!0,this.neuron&&(this.selectedMaterial=this.getMaterialType(this.neuron)),this.setValues())},materialDialogOpen:function(e){e||this.$emit("input",!1)}}},s=i,l=n("2877"),c=n("6544"),u=n.n(c),d=n("b0af"),h=n("ac7c"),f=n("169a"),p=n("0fd9"),g=n("b974"),m=Object(l["a"])(s,o,a,!1,null,null,null);t["a"]=m.exports;u()(m,{VCard:d["a"],VCheckbox:h["a"],VDialog:f["a"],VRow:p["a"],VSelect:g["a"]})},8218:function(e,t,n){"use strict";n("368b")},"82e6":function(e,t,n){},"85ec":function(e,t,n){},"8a20":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var o=n("5a89"),a=n("07a4");function r(e){try{var t=n("f74e")("./"+e+".glsl");return t}catch(o){return a["a"].commit("alert",{content:"获取GLSL文件失败"}),null}}function i(e,t,n,a){var i=a.primaryColor,s=void 0===i?12632256:i,l=a.secondaryColor,c=void 0===l?0:l,u=a.isSelected,d=void 0!==u&&u,h=a.type,f=void 0===h?1:h,p=a.shininess,g=void 0===p?16:p,m=r("MainVertexShader"),v=r("MainFragmentShader"),b=new o["w"]({uniforms:{type:{type:"f",value:f},viewVector:{type:"v3",value:e.position},primaryColor:{type:"c",value:new o["d"](s)},secondaryColor:{type:"c",value:new o["d"](c)},light1Color:{type:"c",value:n[0].outColor},light2Color:{type:"c",value:n[1].outColor},light3Color:{type:"c",value:n[2].outColor},light2Dir:{type:"c",value:n[1].direction},light3Dir:{type:"c",value:n[2].direction},isSelected:{type:"b",value:d},isInfo:{type:"b",value:!1},idValue:{type:"b",value:t},shininess:{type:"f",value:g}},vertexShader:m,fragmentShader:v,side:o["h"]});return b}function s(e,t,n){var a=r("TagVertexShader"),i=r("TagFragmentShader"),s=new o["w"]({uniforms:{translation:{type:"c",value:new o["B"]},scale:{type:"v2",value:e},u_texture:{type:"t",value:t},isSelected:{type:"b",value:!1},idValue:{type:"b",value:n},isInfo:{type:"b",value:!1}},vertexShader:a,fragmentShader:i,side:o["h"]});return s.depthTest=!1,s.depthWrite=!1,s}},"938a":function(e,t){e.exports="uniform vec2 scale;\r\nvarying vec2 vsOutUv;\r\nvarying float test;\r\n\r\nmat4 getRotAndScaleMat(mat4 mat) {\r\n    mat4 rmatrix;\r\n\r\n    rmatrix[0][0] = mat[0][0] * scale[0];\r\n    rmatrix[0][1] = mat[1][0] * scale[0];\r\n    rmatrix[0][2] = mat[2][0] * scale[0];\r\n    rmatrix[0][3] = 0.0;\r\n\r\n    rmatrix[1][0] = mat[0][1] * scale[1];\r\n    rmatrix[1][1] = mat[1][1] * scale[1];\r\n    rmatrix[1][2] = mat[2][1] * scale[1];\r\n    rmatrix[1][3] = 0.0;\r\n\r\n    rmatrix[2][0] = mat[0][2];\r\n    rmatrix[2][1] = mat[1][2];\r\n    rmatrix[2][2] = mat[2][2];\r\n    rmatrix[2][3] = 0.0;\r\n    \r\n    rmatrix[3][0] = 0.0;\r\n    rmatrix[3][1] = 0.0;\r\n    rmatrix[3][2] = 0.0;\r\n    rmatrix[3][3] = 1.0;\r\n\r\n    return rmatrix;\r\n}\r\n\r\nvoid main()\r\n{\r\n    gl_Position = projectionMatrix * modelViewMatrix * getRotAndScaleMat(viewMatrix) * vec4( position, 1.0 );\r\n    vsOutUv = uv;\r\n    test = 1.0;\r\n}"},9444:function(e,t,n){"use strict";n("6dfe")},"97f5":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"right-panel-container"},[n("nl-title",{attrs:{title:e.$t("m.i.scene")}}),n("v-expansion-panels",{staticClass:"right-panel",staticStyle:{height:"0"},attrs:{tile:"",accordion:"",multiple:""},model:{value:e.openedPanels,callback:function(t){e.openedPanels=t},expression:"openedPanels"}},[e.isViewer?n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.file")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{btns:e.fileBtnGroup},on:{reload:e.reload,downloadConfig:e.downloadConfig,useConfig:e.useConfig,saveScreenshot:e.saveScreenshot}}),n("input",{ref:"json-file-input",staticStyle:{visibility:"hidden",position:"absolute"},attrs:{type:"file",accept:".json"},on:{change:e.fileInputChange}})],1)],1):e._e(),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.sceneSettings")))]),n("v-expansion-panel-content",[n("nf-color",{attrs:{name:e.$t("m.i.background")},on:{input:e.bgColorChanged},model:{value:e.bgColorVal,callback:function(t){e.bgColorVal=t},expression:"bgColorVal"}}),n("nf-buttons",{attrs:{btns:e.moreOptionsBtnGroup},on:{openMoreOptionsDialog:e.openMoreOptionsDialog}})],1)],1)],1),n("lights-dialog",{ref:"lights-dialog",attrs:{lights:e.lights},on:{lightValChanged:e.lightValChanged,controlsTypeChanged:e.controlsTypeChanged}})],1)},a=[],r=(n("4160"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"overlay-opacity":"0",width:"300"},model:{value:e.lightsDialogOpen,callback:function(t){e.lightsDialogOpen=t},expression:"lightsDialogOpen"}},[[n("v-row",{staticClass:"v-expansion-panel-header",attrs:{"no-gutters":""}},[e._v(e._s(e.$t("m.i.lightings")))]),n("v-flex",{staticClass:"pa-4 lights-dialog-card",attrs:{tile:"",flat:""}},e._l(e.lights,(function(t,o){return n("div",{key:o,staticClass:"mx-4"},[n("v-row",{staticClass:"mt-2",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"font-weight-bold d-flex align-center",attrs:{cols:"4"}},[e._v(e._s(e.$t("m.i.lightings"))+e._s(o+1))]),n("v-col",{attrs:{cols:"8"}},[n("nf-color-three",{attrs:{name:e.$t("m.i.color")},on:{input:function(t){return e.lightValChanged(o)}},model:{value:e.lights[o].color,callback:function(t){e.$set(e.lights[o],"color",t)},expression:"lights[i].color"}}),n("nf-toggle",{attrs:{name:e.$t("m.i.strength"),min:0,max:2,step:.05},on:{input:function(t){return e.lightValChanged(o)}},model:{value:e.lights[o].strength,callback:function(t){e.$set(e.lights[o],"strength",t)},expression:"lights[i].strength"}})],1)],1),o<e.lights.length-1?n("v-divider",{staticClass:"mt-2"}):e._e()],1)})),0),n("v-row",{staticClass:"v-expansion-panel-header",attrs:{"no-gutters":""}},[e._v(e._s(e.$t("m.i.camera")))]),n("v-flex",{staticClass:"pa-4 px-8 lights-dialog-card"},[n("v-select",{attrs:{items:e.cameraTypes,label:e.$t("m.i.cameraType")},on:{change:e.controlsTypeChanged},model:{value:e.selectedCameraType,callback:function(t){e.selectedCameraType=t},expression:"selectedCameraType"}}),e.lightsDialogOpen?n("nf-toggle",{attrs:{name:e.$t("m.i.cameraPanSpeed"),disabled:0==e.selectedCameraType,min:.1,max:2,step:.05},model:{value:e.$store.state.controls.panSpeed,callback:function(t){e.$set(e.$store.state.controls,"panSpeed",t)},expression:"$store.state.controls.panSpeed"}}):e._e()],1)]],2)}),i=[],s={props:{lights:{type:Array,default:function(){return[]}}},data:function(){return{lightsDialogOpen:!1,cameraTypes:[{value:0,text:this.$t("m.i.cameraType1")},{value:1,text:this.$t("m.i.cameraType2")}],selectedCameraType:0}},methods:{open:function(){this.lightsDialogOpen=!0,1==this.$store.getters.controlsType?this.selectedCameraType=1:this.selectedCameraType=0},lightValChanged:function(e){this.$emit("lightValChanged",e)},controlsTypeChanged:function(e){this.$emit("controlsTypeChanged",e)}}},l=s,c=(n("8218"),n("2877")),u=n("6544"),d=n.n(u),h=n("62ad"),f=n("169a"),p=n("ce7e"),g=n("0e8f"),m=n("0fd9"),v=n("b974"),b=Object(c["a"])(l,r,i,!1,null,"20614b50",null),C=b.exports;d()(b,{VCol:h["a"],VDialog:f["a"],VDivider:p["a"],VFlex:g["a"],VRow:m["a"],VSelect:v["a"]});var y={name:"ScenePanel",components:{LightsDialog:C},props:{isViewer:Boolean,bgColor:String,lights:Array,neuronList:Array},data:function(){return{fileBtnGroup:[{label:this.$t("m.i.relaodScene"),method:"reload"},{label:this.$t("m.i.saveScreenshot"),method:"saveScreenshot"}],moreOptionsBtnGroup:[{label:this.$t("m.i.moreOptions"),method:"openMoreOptionsDialog"}],openedPanels:[0,1],bgColorVal:"#ffff00",model:[]}},created:function(){this.bgColorVal=this.bgColor},methods:{reload:function(){var e=window.confirm(this.$t("m.a.qDoReloadScene"));e&&this.$emit("reload")},downloadConfig:function(){this.$emit("downloadConfig")},saveScreenshot:function(){this.$emit("saveScreenshot")},bgColorChanged:function(){this.$emit("bgColorChanged",this.bgColorVal)},lightValChanged:function(e){var t=this.lights[e];t.outColor.x=t.color.r,t.outColor.y=t.color.g,t.outColor.z=t.color.b,t.outColor=t.outColor.multiplyScalar(t.strength);var n="light"+(e+1)+"Color";this.neuronList.forEach((function(e){var o=e.neuron.material.uniforms[n].value;o.x=t.outColor.x,o.y=t.outColor.y,o.z=t.outColor.z})),this.$emit("renderOnce")},useConfig:function(){var e=this.$refs["json-file-input"];e.click()},fileInputChange:function(e){var t=this,n=new FileReader;n.readAsText(e.target.files[0],"UTF-8"),e.target.value="",n.onload=function(e){var n=e.target.result;try{var o=JSON.parse(n);if(void 0===o.fileList)throw"err";t.$emit("loadCanvas",o)}catch(a){t.$store.commit("alert",{content:this.$t("m.a.jsonFileInvalid")})}}},openMoreOptionsDialog:function(){this.$refs["lights-dialog"].open()},controlsTypeChanged:function(e){this.$emit("controlsTypeChanged",e)}}},x=y,O=(n("7739"),n("a523")),w=n("cd55"),S=n("49e2"),P=n("c865"),k=n("0393"),$=Object(c["a"])(x,o,a,!1,null,"152d05d6",null);t["a"]=$.exports;d()($,{VContainer:O["a"],VExpansionPanel:w["a"],VExpansionPanelContent:S["a"],VExpansionPanelHeader:P["a"],VExpansionPanels:k["a"]})},9952:function(e,t,n){"use strict";n("07f5")},"9a87":function(e,t,n){"use strict";n("401b")},"9f12":function(e,t,n){},aa47:function(e,t,n){"use strict";n("3774")},b2ad:function(e,t,n){"use strict";n("9f12")},b31f:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("cb29"),n("4160"),n("ac1f"),n("1276"),n("159b");var o=n("5a89"),a=n("8a20"),r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;t||(t={});var l=Object.prototype.hasOwnProperty.call(t,"fontFace")?t["fontFace"]:"Arial",c=Object.prototype.hasOwnProperty.call(t,"fontSize")?t["fontSize"]:18,u=Object.prototype.hasOwnProperty.call(t,"fontColor")?t["fontColor"]:"rgba(0, 0, 0, 1)",d=!!Object.prototype.hasOwnProperty.call(t,"fontBold")&&t["fontBold"],h=!!Object.prototype.hasOwnProperty.call(t,"fontItalic")&&t["fontItalic"],f=Object.prototype.hasOwnProperty.call(t,"textAlign")?t["textAlign"]:"left",p=Object.prototype.hasOwnProperty.call(t,"borderThickness")?t["borderThickness"]:4,g=Object.prototype.hasOwnProperty.call(t,"borderColor")?t["borderColor"]:"rgba(0, 0, 0, 1)",m=Object.prototype.hasOwnProperty.call(t,"borderRadius")?t["borderRadius"]:0,v=Object.prototype.hasOwnProperty.call(t,"backgroundColor")?t["backgroundColor"]:"rgba(255, 255, 255, 1)";r||(r=document.createElement("canvas").getContext("2d")),r.font=(d?"Bold ":"")+(h?"Italic ":"")+c+"px "+l;var b=e.split("\n"),C=0;b.forEach((function(e){var t=r.measureText(e);C=t.width>C?t.width:C}));var y=1.4*c*b.length;i||(i=document.createElement("canvas")),i.width=C+2*p,i.height=y+2*p;var x=i.getContext("2d");x.font=r.font,x.fillStyle=v,x.strokeStyle=g,x.lineWidth=p,_(x,p/2,p/2,C+p,y+p-1,m),x.fillStyle=u,x.textAlign=f;var O={left:p,start:p,center:C/2+p,right:C+p,end:C+p},w=c+p;b.forEach((function(e){x.fillText(e,O[f],w),w+=1.4*c}));var S=new o["z"](i);S.needsUpdate=!0;var P=new o["A"](i.width/10,i.height/10),k=a["b"](P,S,n);if(!s){var $=new o["r"](1,1);s=new o["n"]($),s.frustumCulled=!1}return s.material=k,s.material.transparent=!0,s.updateMorphTargets(),{sprite:s,ruler:r,canvas:i};function _(e,t,n,o,a,r){e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+o-r,n),e.quadraticCurveTo(t+o,n,t+o,n+r),e.lineTo(t+o,n+a-r),e.quadraticCurveTo(t+o,n+a,t+o-r,n+a),e.lineTo(t+r,n+a),e.quadraticCurveTo(t,n+a,t,n+a-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath(),e.fill(),e.stroke()}}},b6d6:function(e,t,n){},bbcd:function(e,t){e.exports="// plain\r\nuniform vec3 primaryColor;\r\nuniform bool isSelected;\r\n\r\nvoid main()\r\n{\r\n    // draw dotted patterns\r\n    if(isSelected == true\r\n    && int(gl_FragCoord.x) % 5 < 2\r\n    && int(gl_FragCoord.y) % 5 < 2) {\r\n        gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\r\n    }\r\n    // draw original color\r\n    else {\r\n        gl_FragColor = vec4( primaryColor, 1.0 );\r\n    }\r\n}"},bed6:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{timeout:e.timeout,color:"red"},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.attrs;return[n("v-btn",e._b({attrs:{color:"white",icon:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",o,!1),[n("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.content)+" ")])},a=[],r={data:function(){return{snackbar:!1,content:"My timeout is set to 2000.",timeout:3e3}},mounted:function(){this.$store.commit("setAlertOpenMethod",this.open)},methods:{open:function(e){this.content=e.content,void 0===e.timeout?this.timeout=3e3:this.timeout=e.timeout,this.snackbar=!0}}},i=r,s=n("2877"),l=n("6544"),c=n.n(l),u=n("8336"),d=n("132d"),h=n("2db4"),f=Object(s["a"])(i,o,a,!1,null,null,null);t["a"]=f.exports;c()(f,{VBtn:u["a"],VIcon:d["a"],VSnackbar:h["a"]})},c10a:function(e,t,n){},c53d:function(e,t,n){"use strict";n("5b42")},cfaf:function(e,t){e.exports="uniform vec3 primaryColor;\r\nuniform vec3 secondaryColor;\r\nuniform vec3 light1Color;\r\nuniform vec3 light2Color;\r\nuniform vec3 light2Dir;\r\nuniform vec3 light3Color;\r\nuniform vec3 light3Dir;\r\nuniform float type;\r\nuniform bool isSelected;\r\nuniform bool isInfo;    // renders info if set to true\r\nuniform float idValue;  // a unique float value for this object\r\nuniform float shininess;\r\nvarying float intensity;\r\nvarying float vsOutType;\r\nvarying vec3 vsOutPosition;\r\nvarying vec3 vsOutCameraPosition;\r\nvarying vec3 vsOutnormal;\r\n\r\nvec3 calcParallelLight(vec3 normal, vec3 camDir, vec3 lightDir, vec3 lightCol, float specAdjustedWeight) {\r\n    // diffuse\r\n    float diffuseStrength = max(dot(normal, lightDir), 0.0);\r\n    // specular (blinn-phong)\r\n    vec3 bisector = normalize(camDir + lightDir);\r\n    float specularStrength = pow(max(dot(bisector, normal), 0.0), shininess) * specAdjustedWeight;\r\n    return lightCol * (0.2 + diffuseStrength * 0.5 + specularStrength);\r\n}\r\n\r\nvoid main()\r\n{\r\n    if(isInfo) {\r\n        gl_FragColor = vec4( idValue, vsOutPosition.x, vsOutPosition.y, vsOutPosition.z ); // r - id value; (g,b,a) => position\r\n    }\r\n    else {\r\n        // draw dotted patterns\r\n        if(isSelected == true\r\n        && int(gl_FragCoord.x) % 4 < 2\r\n        && int(gl_FragCoord.y) % 4 < 2) {\r\n            gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\r\n        }\r\n        // draw original color\r\n        else {\r\n            switch(int(vsOutType)) {\r\n                case 0:\r\n                // glow\r\n                    vec3 outColor = primaryColor * intensity + secondaryColor * (1.0 - intensity);\r\n                    gl_FragColor = vec4( outColor, 1.0 );\r\n                    break;\r\n                case 1:\r\n                // solid\r\n                    // 1. light from camera\r\n                    float camDist = distance(vsOutPosition, vsOutCameraPosition);\r\n                    vec3 normal = normalize(vsOutnormal);\r\n                    vec3 camDir = normalize(vsOutCameraPosition - vsOutPosition);\r\n                    // diffuse\r\n                    float diffuseStrength = max(dot(normal, camDir), 0.0);\r\n                    // specular (blinn-phong)\r\n                    float specStrength = pow(diffuseStrength, shininess);\r\n                    // attenuation\r\n                    float atten = 1.0 / (1.0 + 0.007 * camDist);\r\n                    // adjusts spec strength to balance the reflection outputs with varying shininess values\r\n                    float specAdjustedWeight = (log2(shininess) + 1.0) / 8.0;\r\n\r\n                    vec3 light1Result = \r\n                        primaryColor * (0.2 + diffuseStrength * 0.5 + specStrength * specAdjustedWeight) * light1Color * atten;\r\n                    vec3 light2Result =\r\n                        primaryColor * calcParallelLight(normal, camDir, light2Dir, light2Color, specAdjustedWeight);\r\n                    vec3 light3Result =\r\n                        primaryColor * calcParallelLight(normal, camDir, light3Dir, light3Color, specAdjustedWeight);\r\n\r\n                    gl_FragColor = vec4( (light1Result + light2Result + light3Result), 1.0 );\r\n                    break;\r\n                case 2:\r\n                // flat\r\n                    gl_FragColor = vec4( primaryColor, 1.0 );\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\t\r\n}"},dd98:function(e,t,n){},e286:function(e,t,n){},e5f4:function(e,t){e.exports="// glow\r\nvarying vec2 vsOutUv;\r\nuniform sampler2D u_texture;\r\nuniform bool isSelected;\r\nuniform bool isInfo;    // renders info if set to true\r\nuniform float idValue;  // a unique float value for this object\r\nvarying float test;\r\n\r\nvoid main()\r\n{\r\n    // draw dotted patterns\r\n    if(isInfo) {\r\n        gl_FragColor = vec4( idValue, 0.0, 0.0, 1.0 ); // r - id value\r\n    }\r\n    else if(isSelected == true\r\n    && int(gl_FragCoord.x) % 4 < 2\r\n    && int(gl_FragCoord.y) % 4 < 2) {\r\n        gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\r\n    }\r\n    else {\r\n\r\n        gl_FragColor = texture2D(u_texture, vsOutUv);\r\n    }\r\n    // if (gl_FragColor.a <= 0.0) {\r\n    //     gl_FragColor = vec4(test, 0.0, 0.0, 1.0);\r\n    // }\r\n}"},e7cb:function(e,t,n){"use strict";n("ec1d")},ec0d:function(e,t,n){},ec1d:function(e,t,n){},f74e:function(e,t,n){var o={"./MainFragmentShader.glsl":"cfaf","./MainVertexShader.glsl":"fdb3","./PlainFragmentShader.glsl":"bbcd","./PlainVertexShader.glsl":"1108","./TagFragmentShader.glsl":"e5f4","./TagVertexShader.glsl":"938a"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="f74e"},f955:function(e,t,n){"use strict";n("c10a")},fdb3:function(e,t){e.exports="uniform vec3 viewVector;\r\nuniform float type; // 0-glow 1-flat\r\nvarying float vsOutType;\r\nvarying float intensity;\r\nvarying vec3 vsOutPosition;\r\nvarying vec3 vsOutCameraPosition;\r\nvarying vec3 vsOutnormal;\r\n\r\nvoid main()\r\n{\r\n    if(type == 0.0) {\r\n        // glow\r\n        float angle = dot(normalize(normal), normalize(viewVector - position));\r\n        \r\n        intensity = 1.0 - abs(angle);\r\n        if(angle < 0.0) {\r\n            intensity *= 0.5;\r\n        }\r\n    }\r\n    else if(type == 1.0) {\r\n        // solid\r\n        vsOutnormal = normal;\r\n        vsOutCameraPosition = viewVector;\r\n\r\n    }\r\n\r\n    vsOutType = type + 0.1;\r\n    vsOutPosition = position;\r\n\t\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}"}});
//# sourceMappingURL=app.faf6357c.js.map
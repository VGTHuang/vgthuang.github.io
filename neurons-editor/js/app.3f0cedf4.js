(function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);h&&h(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(a=!1)}a&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},o={app:0},i={app:0},r=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-119b8350":"6f482b5c"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-119b8350":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-119b8350":"28c2e7d4"}[e]+".css",i=l.p+a,r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var c=r[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===i))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===a||u===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete o[e],h.parentNode.removeChild(h),n(r)},h.href=i;var g=document.getElementsByTagName("head")[0];g.appendChild(h)})).then((function(){o[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise((function(t,n){a=i[e]=[t,n]}));t.push(a[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(h);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}i[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/neurons-editor/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var h=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"017e":function(e,t,n){"use strict";n("82e6")},"034f":function(e,t,n){"use strict";n("85ec")},"062b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"right-panel-container"},[n("nl-title",{attrs:{title:e.$t("m.i.neuron")}}),n("v-expansion-panels",{staticClass:"right-panel",attrs:{tile:"",accordion:"",multiple:""},model:{value:e.openedPanels,callback:function(t){e.openedPanels=t},expression:"openedPanels"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.neuronList")))]),n("v-expansion-panel-content",{staticClass:"list-content"},[n("v-row",{attrs:{"no-gutters":""}},[n("neuron-list-table",{ref:"neuronListTable",attrs:{router:e.router,neuronList:e.neuronList},on:{renderOnce:e.valueChanged,openMaterialDialog:e.openMaterialDialog,focusOnItem:e.focusOnItem,groupNameChanged:e.groupNameChanged},model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})],1)],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.batchOperations")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{btns:e.batchOperationBtnGroup1},on:{batchSetVisible:function(t){return e.batchSetVisibility(!0)},batchSetInvisible:function(t){return e.batchSetVisibility(!1)}}}),n("nf-buttons",{staticStyle:{"margin-top":"0"},attrs:{btns:e.batchOperationBtnGroup2},on:{batchSetColor:e.batchSetColor,batchSetMaterial:e.batchSetMaterial,groupDialogOpen:e.groupDialogOpen}})],1)],1)],1),n("material-dialog",{attrs:{neuron:e.selectedNeuron},on:{materialChanged:e.valueChanged},model:{value:e.materialDialogOpen,callback:function(t){e.materialDialogOpen=t},expression:"materialDialogOpen"}}),e.batchColorPanelOpen?n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content"},model:{value:e.batchColorPanelOpen,callback:function(t){e.batchColorPanelOpen=t},expression:"batchColorPanelOpen"}},[n("v-color-picker",{attrs:{dark:""},on:{"update:color":e.batchColorChanged},model:{value:e.batchColor,callback:function(t){e.batchColor=t},expression:"batchColor"}})],1):e._e(),n("material-dialog",{ref:"batchMaterialDialog",on:{materialChanged:e.batchValueChanged},model:{value:e.batchMaterialDialogOpen,callback:function(t){e.batchMaterialDialogOpen=t},expression:"batchMaterialDialogOpen"}}),n("group-dialog",{ref:"batchGroupDialog",attrs:{groupList:e.groupList,neuronList:e.neuronList},on:{input:e.groupDialogClosed},model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})],1)},o=[],i=(n("4160"),n("c975"),n("a434"),n("159b"),n("5a89"),n("8146")),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content",height:"400px",persistent:""},model:{value:e.groupDialogOpen,callback:function(t){e.groupDialogOpen=t},expression:"groupDialogOpen"}},[[n("v-card",{staticClass:"pa-4 group-dialog-card"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-data-table",{staticClass:"group-table",attrs:{headers:e.headers,items:e.neuronList,"item-key":"index","show-select":"",dense:"","calculate-widths":"","items-per-page":10,"mobile-breakpoint":"0"},on:{"item-selected":e.itemSelected,"toggle-select-all":e.toggleSelectedAll},scopedSlots:e._u([{key:"item.name",fn:function(t){var a=t.item;return[n("v-flex",{staticClass:"name-cell"},[e._v(e._s(a.neuron.name))])]}}]),model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})],1),n("v-row",{attrs:{"no-gutters":""}},[e.groupDialogOpen?n("v-select",{attrs:{items:e.groupList,label:e.$t("m.i.moveToGroup")},scopedSlots:e._u([{key:"append-item",fn:function(){return[n("v-divider",{staticClass:"mb-2"}),n("v-list-item",[n("v-text-field",{attrs:{label:e.$t("m.i.addGroup"),rules:e.rules},on:{"update:error":e.addGroupInputUpdateError,change:e.addGroupInputChanged},model:{value:e.addGroupName,callback:function(t){e.addGroupName=t},expression:"addGroupName"}})],1)]},proxy:!0},{key:"item",fn:function(t){var a=t.item;return[n("v-flex",{staticClass:"d-flex justify-space-between"},[n("span",[e._v(e._s(a))]),n("v-icon",{on:{click:function(t){return t.stopPropagation(),e.removeGroup(t,a)}}},[e._v("mdi-close")])],1)]}}],null,!1,1938673044),model:{value:e.selectedGroup,callback:function(t){e.selectedGroup=t},expression:"selectedGroup"}}):e._e()],1),n("v-row",{attrs:{"no-gutters":""}},[n("nf-buttons",{attrs:{btns:e.openCloseBtns},on:{confirm:function(t){return e.close(!0)},cancel:function(t){return e.close(!1)}}})],1)],1)]],2)},s=[],l={props:{groupList:{type:Array,default:function(){return[]}},neuronList:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}}},data:function(){return{selectedNeurons:[],groupDialogOpen:!1,openCloseBtns:[{label:this.$t("m.i.confirm"),col:"grey",method:"confirm"},{label:this.$t("m.i.cancel"),col:"red",method:"cancel"}],selectedGroup:null,headers:[{text:"name",value:"name",align:"center",width:200,groupable:!1,sortable:!0}],addGroupName:"",rules:void 0,addGroupDuplicateErr:!1}},created:function(){var e=this,t=this;this.rules=[function(t){return t.length>0||e.$t("m.a.groupNameCantBeBlank")},function(n){return t.groupList.indexOf(n)<0||e.$t("m.a.groupNameMustBeUnique")}]},methods:{open:function(){this.groupDialogOpen=!0,this.selectedNeurons=this.value},toggleSelectedAll:function(e){e.value?(this.selectedNeurons=this.neuronList,this.neuronList.forEach((function(e){e.neuron.material.uniforms.isSelected.value=!0}))):(this.selectedNeurons=[],this.neuronList.forEach((function(e){e.neuron.material.uniforms.isSelected.value=!1})))},itemSelected:function(e){this.setSelectMaterial(e.item,e.value)},setSelectMaterial:function(e,t){e.neuron.material.uniforms.isSelected.value=t},removeGroup:function(e,t){for(var n=0;n<this.neuronList.length;n++)if(this.neuronList[n].group==t)return void this.$store.commit("alert",{content:this.$t("m.a.mustClearBeforeDeleteGroup")});var a=this.groupList.indexOf(t);a>=0&&this.groupList.splice(a,1)},addGroupInputUpdateError:function(e){this.addGroupDuplicateErr=e},addGroupInputChanged:function(e){!this.addGroupDuplicateErr&&e.length>0&&(this.groupList.push(e),this.addGroupName="")},close:function(e){var t=this;e&&this.selectedGroup&&this.selectedNeurons.forEach((function(e){e.group=t.selectedGroup})),this.groupDialogOpen=!1,this.$emit("input",this.selectedNeurons)}}},c=l,u=(n("9952"),n("2877")),d=n("6544"),h=n.n(d),g=n("b0af"),f=n("8fea"),p=n("169a"),m=n("ce7e"),v=n("0e8f"),b=n("132d"),C=n("da13"),x=n("0fd9"),y=n("b974"),S=n("8654"),T=Object(u["a"])(c,r,s,!1,null,"47612ea4",null),w=T.exports;h()(T,{VCard:g["a"],VDataTable:f["a"],VDialog:p["a"],VDivider:m["a"],VFlex:v["a"],VIcon:b["a"],VListItem:C["a"],VRow:x["a"],VSelect:y["a"],VTextField:S["a"]});var k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"neuron-table",attrs:{headers:e.headers,items:e.neuronList,"item-key":"index","show-select":"",dense:"","group-by":"group","show-group-by":"","mobile-breakpoint":"0","disable-pagination":"","hide-default-footer":""},on:{"item-selected":e.itemSelected,"toggle-select-all":e.toggleSelectedAll},scopedSlots:e._u([{key:"item.name",fn:function(t){var a=t.item;return[e.isEditor?n("v-edit-dialog",{attrs:{"return-value":a.neuron.name},on:{"update:returnValue":function(t){return e.$set(a.neuron,"name",t)},"update:return-value":function(t){return e.$set(a.neuron,"name",t)}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{label:"Edit","single-line":"",counter:""},model:{value:a.neuron.name,callback:function(t){e.$set(a.neuron,"name",t)},expression:"item.neuron.name"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(a.neuron.name)+" ")]):n("div",{staticClass:"name-display",attrs:{title:a.neuron.name}},[n("input",{staticClass:"name-input",domProps:{value:a.neuron.name}})])]}},{key:"item.settings",fn:function(t){var a=t.item;return[n("v-row",{staticClass:"settings-btns-row justify-center",attrs:{"no-gutters":""}},[n("v-icon",{attrs:{title:e.$t("m.i.material")},on:{click:function(t){return e.$emit("openMaterialDialog",a.neuron)}}},[e._v(" mdi-alpha-m-box ")]),n("v-icon",{attrs:{title:e.$t("m.i.visibility")},on:{click:function(t){return e.visibilityChanged(a.neuron)}}},[e._v(" "+e._s(e.visibilityIcons[a.neuron.visible+0])+" ")]),n("v-icon",{attrs:{title:e.$t("m.i.center")},on:{click:function(t){return e.focusClicked(a)}}},[e._v("mdi-camera")])],1)]}},{key:"group.header",fn:function(t){var a=t.group,o=t.items;return[n("td",{staticClass:"group-row text-start",attrs:{colspan:e.headers.length+1}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-icon",{staticClass:"group-icon",on:{click:function(t){return e.checkGroup(t,a)}}},[e._v(" "+e._s(e.groupCheckedIcons[e.isChecked(o)])+" ")]),e.isEditor?n("v-edit-dialog",{scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{value:a,label:"Edit","single-line":"",counter:""},on:{input:function(t){return e.groupNameChanged(t,a)}}})]},proxy:!0}],null,!0)},[n("span",{staticClass:"ms-2"},[n("i",[e._v(e._s(a))])])]):n("span",{staticClass:"ms-2"},[n("i",[e._v(e._s(a))])])],1)],1)]}}]),model:{value:e.selectedNeurons,callback:function(t){e.selectedNeurons=t},expression:"selectedNeurons"}})},O=[],$={props:{router:{type:String,default:"viewer"},neuronList:{default:function(){return[]},type:Array},value:{default:function(){return[]},type:Array}},data:function(){return{isEditor:!1,openedPanels:[0,1],selectedNeurons:[],headers:[{text:this.$t("m.i.name"),value:"name",align:"center",width:100,groupable:!1,sortable:!0},{text:this.$t("m.i.settings"),value:"settings",align:"center",groupable:!1,sortable:!1}],wireframeIcons:["mdi-rhombus-split","mdi-rhombus-split-outline"],groupCheckedIcons:["mdi-checkbox-marked","mdi-checkbox-blank-outline","mdi-minus-box"],visibilityIcons:["mdi-eye-off","mdi-eye"]}},created:function(){this.forceRefreshSelectedNeurons(),"viewer"==this.router?this.isEditor=!1:this.isEditor=!0},methods:{forceRefreshSelectedNeurons:function(){this.selectedNeurons=this.value},itemSelected:function(e){var t=this;e&&this.setSelectMaterial(e.item,e.value),this.$nextTick((function(){t.$emit("input",t.selectedNeurons)}))},toggleSelectedAll:function(e){var t=this;e.value?(this.selectedNeurons=this.neuronList,this.neuronList.forEach((function(e){t.setSelectMaterial(e,!0)}))):(this.selectedNeurons=[],this.neuronList.forEach((function(e){t.setSelectMaterial(e,!1)}))),this.itemSelected()},valueChanged:function(){this.$emit("renderOnce")},checkGroup:function(e,t){var n=this;e.target.classList.contains(this.groupCheckedIcons[0])?this.neuronList.forEach((function(e){var a=n.selectedNeurons.indexOf(e);e.group==t&&a>=0&&(n.selectedNeurons.splice(a,1),n.setSelectMaterial(e,!1))})):this.neuronList.forEach((function(e){e.group==t&&n.selectedNeurons.indexOf(e)<0&&(n.selectedNeurons.push(e),n.setSelectMaterial(e,!0))})),this.itemSelected()},isChecked:function(e){for(var t=!1,n=!1,a=0;a<e.length;a++)this.selectedNeurons.indexOf(e[a])<0?n=!0:t=!0;return t&&n?2:t&&!n?0:1},visibilityChanged:function(e){e.visible=!e.visible,this.valueChanged()},focusClicked:function(e){this.$emit("focusOnItem",e)},setSelectMaterial:function(e,t){e.neuron.material.uniforms.isSelected.value=t,this.valueChanged()},groupNameChanged:function(e,t){this.neuronList.forEach((function(n){n.group===t&&(n.group=e)})),this.$emit("groupNameChanged",[e,t])}}},P=$,_=(n("9a87"),n("7679")),I=Object(u["a"])(P,k,O,!1,null,"b20b843c",null),B=I.exports;h()(I,{VDataTable:f["a"],VEditDialog:_["a"],VIcon:b["a"],VRow:x["a"],VTextField:S["a"]});n("8a20");var V={components:{NeuronListTable:B,MaterialDialog:i["a"],GroupDialog:w},props:{router:{type:String,default:"viewer"},camera:{default:null,type:Object},controls:{default:null,type:Object},neuronList:{default:function(){return[]},type:Array},groupList:{default:function(){return[]},type:Array}},data:function(){return{openedPanels:[0,1],selectedNeurons:[],batchOperationBtnGroup1:[{label:this.$t("m.i.visible"),method:"batchSetVisible"},{label:this.$t("m.i.invisible"),method:"batchSetInvisible"}],batchOperationBtnGroup2:[{label:this.$t("m.i.colorSetting"),method:"batchSetColor"},{label:this.$t("m.i.materialSetting"),method:"batchSetMaterial"}],materialDialogOpen:!1,selectedNeuron:null,batchColorPanelOpen:!1,batchColor:"#ff0000",batchMaterialDialogOpen:!1,neuronListTable:void 0}},created:function(){"editor"==this.router&&this.batchOperationBtnGroup2.push({label:this.$t("m.i.groupingSetting"),method:"groupDialogOpen"})},mounted:function(){this.neuronListTable=this.$refs["neuronListTable"]},methods:{valueChanged:function(){this.$emit("renderOnce")},itemMaterialChanged:function(e){this.$emit("renderOnce")},openMaterialDialog:function(e){this.materialDialogOpen=!0,this.selectedNeuron=e},focusOnItem:function(e){var t=e.neuron.geometry.boundingSphere;this.controls.target.set(t.center.x,t.center.y,t.center.z),this.controls.update(),this.valueChanged()},batchSetVisibility:function(e){this.selectedNeurons.length<=0?this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")}):(this.selectedNeurons.forEach((function(t){t.neuron.visible=e})),this.valueChanged())},batchSetColor:function(){this.selectedNeurons.length?(this.batchColor="#"+this.selectedNeurons[0].neuron.material.uniforms.primaryColor.value.getHexString(),this.batchColorPanelOpen=!0):this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")})},batchColorChanged:function(e){this.selectedNeurons.forEach((function(t){var n=t.neuron.material.uniforms.primaryColor.value;n.r=e.rgba.r/255,n.g=e.rgba.g/255,n.b=e.rgba.b/255})),this.valueChanged()},batchSetMaterial:function(){if(this.selectedNeurons.length<=0)this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")});else{var e=this.$refs["batchMaterialDialog"],t=new Array(e.materialTypes.length);this.selectedNeurons.forEach((function(e){var n=Math.round(e.neuron.material.uniforms.type.value);t[n]=!0}));var n=-1,a=0;t.forEach((function(e,t){e&&(n=t,a+=1)})),e.selectedMaterial=1==a?n:-1,this.batchMaterialDialogOpen=!0}},batchValueChanged:function(e){1==e[1]?this.selectedNeurons.forEach((function(t){var n=t.neuron.material.uniforms.primaryColor.value;n.r=e[0].r,n.g=e[0].g,n.b=e[0].b})):2==e[1]?this.selectedNeurons.forEach((function(t){var n=t.neuron.material.uniforms.secondaryColor.value;n.r=e[0].r,n.g=e[0].g,n.b=e[0].b})):3==e[1]?this.selectedNeurons.forEach((function(t){t.neuron.material.uniforms.type.value=e[0]})):4==e[1]?this.selectedNeurons.forEach((function(t){t.neuron.material.wireframe=e[0]})):5==e[1]&&this.selectedNeurons.forEach((function(t){t.neuron.material.uniforms.shininess.value=e[0]})),this.valueChanged()},groupDialogOpen:function(){this.$refs["batchGroupDialog"].open()},groupDialogClosed:function(){var e=this;this.$nextTick((function(){e.valueChanged(),e.neuronListTable.forceRefreshSelectedNeurons()}))},neuronPicked:function(e){var t=this;e&&this.$nextTick((function(){var n=t.selectedNeurons.indexOf(e);n<0?(t.selectedNeurons.push(e),t.neuronListTable.setSelectMaterial(e,!0)):(t.selectedNeurons.splice(n,1),t.neuronListTable.setSelectMaterial(e,!1)),t.neuronListTable.forceRefreshSelectedNeurons(),t.valueChanged()}))},groupNameChanged:function(e){var t=this.groupList.indexOf(e[0]),n=this.groupList.indexOf(e[1]);t>=0?this.groupList.splice(t,1):this.groupList[n]=e[0]}},beforeDestroy:function(){var e=this;this.neuronList.forEach((function(t){e.neuronListTable.setSelectMaterial(t,!1)}))}},D=V,L=(n("b2ad"),n("03a4")),j=n("a523"),E=n("cd55"),M=n("49e2"),A=n("c865"),N=n("0393"),R=Object(u["a"])(D,a,o,!1,null,"b984029e",null);t["a"]=R.exports;h()(R,{VColorPicker:L["a"],VContainer:j["a"],VDialog:p["a"],VExpansionPanel:E["a"],VExpansionPanelContent:M["a"],VExpansionPanelHeader:A["a"],VExpansionPanels:N["a"],VRow:x["a"]})},"07a4":function(e,t,n){"use strict";var a=n("2b0e"),o=n("2f62"),i=n("920c");a["a"].use(o["a"]),t["a"]=new o["a"].Store({state:{loadingPhase:0,loadingProgressComponent:void 0,loadingProgress:0,controls:void 0,panelOpen:!1,panelIndex:0,alertOpenMethod:void 0,isMobile:!1},getters:{loadingPercentage:function(e){return Math.round(100*e.loadingProgress)+"%"},controlsType:function(e){return e.controls&&e.controls instanceof i["a"]?1:0}},mutations:{setControls:function(e,t){e.controls=t},setLoadingProgressComponent:function(e,t){e.loadingProgressComponent=t},resetLoadingProgressComponent:function(e,t){e.loadingProgressComponent&&e.loadingProgressComponent.resetLoadingScreen()},loadingProgressChanged:function(e,t){e.loadingProgressComponent.startLoading(),e.loadingProgress=t},loadingScreenFadeIn:function(e){e.loadingProgressComponent.fadeIn()},loadingScreenFadeOut:function(e){e.loadingProgressComponent.fadeOut()},setPanelStat:function(e,t){void 0!=t.open&&(e.panelOpen=t.open),void 0!=t.index&&(e.panelIndex=t.index)},setAlertOpenMethod:function(e,t){e.alertOpenMethod=t},alert:function(e,t){e.alertOpenMethod(t)},setIsMobile:function(e){e.isMobile=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)}}})},"07b4":function(e,t,n){"use strict";n("baa5");var a={getFileType:function(e){var t=e,n=t.lastIndexOf("."),a=t.length,o=t.substring(n,a);return o},sansFileType:function(e){var t=e,n=t.lastIndexOf("."),a=t.substring(0,n);return a}};t["a"]=a},"07f5":function(e,t,n){},1108:function(e,t){e.exports="// plain\r\n\r\nvoid main()\r\n{\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}"},"12b2":function(e,t,n){},1553:function(e,t,n){},"1b45":function(e,t,n){"use strict";n("eb99")},2520:function(e,t,n){"use strict";n("55ae")},"340d":function(e,t,n){"use strict";n("af59")},"368b":function(e,t,n){},3774:function(e,t,n){},"3c2b":function(e,t,n){"use strict";n("ec0d")},"401b":function(e,t,n){},4791:function(e,t,n){"use strict";n("c81e")},"48cb":function(e,t,n){},"4e72":function(e,t,n){"use strict";n("6ba8")},"55ae":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=n("2f62"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app","data-app":""}},[n("loading-screen",{ref:"loading-screen",attrs:{loadingProgress:e.loadingProgress}}),n("copyright-bar"),n("my-canvas-editor")],1)},r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:!e.objLoaded,expression:"!objLoaded"}],staticClass:"loading-screen",class:{"fade-out":e.loadingScreenFadeout}},[n("div",{staticClass:"row1"},[e._v(e._s(e.$t("m.i.loadingScreenName")))]),n("div",{staticClass:"row2"},[n("div",{staticClass:"loader-container",class:{"visible-container":e.objLoading}},[n("div",{staticClass:"loader-label"},[e._v(" "+e._s(e.loadingPhases[e.$store.state.loadingPhase])),n("br"),e._v(e._s(e.$store.getters.loadingPercentage)+" ")]),n("div",{staticClass:"loader",style:{width:e.$store.getters.loadingPercentage}})])])])},l=[],c={data:function(){return{objLoading:!1,objLoaded:!1,loadingScreenFadeout:!1,showBtnContainer:!0,loadingPhases:[this.$t("m.i.loadingPhaseDownloadZip"),this.$t("m.i.loadingPhaseLoadObj")]}},mounted:function(){this.loadCanvas("/editor")},methods:{resetLoadingScreen:function(){this.objLoading=!1,this.objLoaded=!1,this.loadingScreenFadeout=!1,this.showBtnContainer=!0},startLoading:function(){this.showBtnContainer=!1,this.objLoading=!0},loadCanvas:function(e){var t=this;this.objLoading=!0,setTimeout((function(){t.showBtnContainer=!1,t.$emit("loadCanvas",e)}),500)},fadeIn:function(){this.objLoading=!0,this.loadingScreenFadeout=!1,this.objLoaded=!1},fadeOut:function(){var e=this;setTimeout((function(){e.loadingScreenFadeout=!0,setTimeout((function(){e.objLoaded=!0}),500)}),500)}}},u=c,d=(n("340d"),n("2877")),h=Object(d["a"])(u,s,l,!1,null,"25e05ae3",null),g=h.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"copyright-bar"},[e._v(e._s(e.$t("m.i.copyright")))])},p=[],m=(n("9444"),{}),v=Object(d["a"])(m,f,p,!1,null,"5d7ed53f",null),b=v.exports,C=n("b6f9"),x={name:"App",components:{LoadingScreen:g,CopyrightBar:b,MyCanvasEditor:C["default"]},data:function(){return{loadingProgress:0}},mounted:function(){this.$store.commit("setIsMobile"),this.$store.commit("setLoadingProgressComponent",this.$refs["loading-screen"])},methods:{}},y=x,S=(n("034f"),n("6544")),T=n.n(S),w=n("7496"),k=Object(d["a"])(y,i,r,!1,null,null,null),O=k.exports;T()(k,{VApp:w["a"]});var $=n("07a4"),P=n("f309"),_=n("5025"),I=n.n(_);n("d4b8"),n("5363");a["a"].use(P["a"]);var B=new P["a"]({lang:{locales:{zhHans:I.a},current:"zhHans"},icons:{iconfont:"mdi"}}),V=(n("bf40"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-btn",{staticClass:"small-btn-3",attrs:{tile:"",depressed:"",disabled:e.disabled,color:e.color},on:{click:function(t){return t.stopPropagation(),e.$emit("click")}}},[e._v(e._s(e.name))])],1)}),D=[],L={props:{name:String,disabled:{type:Boolean,default:!1},color:{type:String,default:""}}},j=L,E=(n("3c2b"),n("8336")),M=n("0fd9"),A=Object(d["a"])(j,V,D,!1,null,"da8d2736",null),N=A.exports;T()(A,{VBtn:E["a"],VRow:M["a"]});var R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"justify-space-between nf-buttons",class:{"vertical-btns":e.btns.length>=3||e.vertical},attrs:{"no-gutters":""}},e._l(e.btns,(function(t,a){return n("v-btn",{key:a,staticClass:"nf-btn",attrs:{tile:"",color:t.col},on:{click:function(n){return e.btnClicked(a,t.method)}}},[e._v(" "+e._s(t.label)+" ")])})),1)},z=[],F={props:{btns:{type:Array,default:function(){return[{label:"btn1",col:"red",method:"btn1Clicked"},{label:"btn2",col:"grey",method:"btn2Clicked"}]}},vertical:{type:Boolean,default:!1}},methods:{btnClicked:function(e,t){void 0!=t?this.$emit(t):this.$emit("btnClicked",e)}}},G=F,H=(n("4e72"),Object(d["a"])(G,R,z,!1,null,"a99552a2",null)),W=H.exports;T()(H,{VBtn:E["a"],VRow:M["a"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"justify-space-around",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"nf-btn-var-title"},[e._v(e._s(e.title))]),n("v-col",{staticClass:"nf-btn-var-btn"},[n("v-btn",{staticClass:"nf-btn",attrs:{tile:"",color:e.color},on:{click:function(t){return e.$emit("click")}}},[e._t("default",[e._v(e._s(e.name))])],2)],1)],1)},q=[],Y={props:{title:{type:String,default:"title"},name:{type:String,default:"name"},color:{type:String,default:"grey"}}},X=Y,J=(n("017e"),n("62ad")),Z=Object(d["a"])(X,U,q,!1,null,"61a171c4",null),K=Z.exports;T()(Z,{VBtn:E["a"],VCol:J["a"],VRow:M["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"8"}},[e._v(e._s(e.name))]),n("v-col",{attrs:{cols:"4"}},[n("v-btn",{staticClass:"small-btn-2",attrs:{tile:"",disabled:e.disabled,color:e.value},on:{click:function(t){return t.stopPropagation(),e.openColorController(t)}}})],1),e.colorPanelOpen?n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content"},model:{value:e.colorPanelOpen,callback:function(t){e.colorPanelOpen=t},expression:"colorPanelOpen"}},[n("v-color-picker",{attrs:{dark:"",value:e.value},on:{"update:color":e.colorControllerChanged}})],1):e._e()],1)},ee=[],te={props:{name:String,value:String,disabled:{type:Boolean,default:!1},alphaEnabled:{type:Boolean,default:!1}},data:function(){return{colorPanelOpen:!1}},methods:{openColorController:function(){this.colorPanelOpen=!0},colorControllerChanged:function(e){this.$emit("input",this.alphaEnabled?e.hexa:e.hex)}}},ne=te,ae=(n("aa47"),n("03a4")),oe=n("169a"),ie=Object(d["a"])(ne,Q,ee,!1,null,"61fc3452",null),re=ie.exports;T()(ie,{VBtn:E["a"],VCol:J["a"],VColorPicker:ae["a"],VDialog:oe["a"],VRow:M["a"]});var se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{class:{"no-row":e.small}},[0==e.small?n("v-col",{class:{"text--disabled":e.disabled},attrs:{cols:"8"}},[e._v(e._s(e.name))]):e._e(),0==e.small?n("v-col",{attrs:{cols:"4"}},[n("v-btn",{staticClass:"small-btn-2",attrs:{tile:"",disabled:e.disabled,color:e.threeToStr(e.value)},on:{click:function(t){return t.stopPropagation(),e.openColorController(t)}}})],1):n("v-icon",{staticClass:"small-btn-3",attrs:{disabled:e.disabled,color:e.threeToStr(e.value)},on:{click:function(t){return t.stopPropagation(),e.openColorController(t)}}},[e._v("mdi-alpha-c-box-outline")]),e.colorPanelOpen?n("v-dialog",{attrs:{"overlay-opacity":"0",width:"min-content"},model:{value:e.colorPanelOpen,callback:function(t){e.colorPanelOpen=t},expression:"colorPanelOpen"}},[n("v-color-picker",{attrs:{dark:"",value:e.threeToStr(e.value)},on:{"update:color":e.colorControllerChanged}})],1):e._e()],1)},le=[],ce=n("5a89"),ue={props:{name:String,value:{type:Object,default:function(){return new ce["d"](1,0,0)}},disabled:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},data:function(){return{colorPanelOpen:!1}},methods:{openColorController:function(){this.colorPanelOpen=!0},threeToStr:function(e){return"#"+e.getHexString()},colorControllerChanged:function(e){this.value.r=e.rgba.r/255,this.value.g=e.rgba.g/255,this.value.b=e.rgba.b/255,this.$emit("input",this.value)}}},de=ue,he=(n("65b1"),n("132d")),ge=Object(d["a"])(de,se,le,!1,null,"73df1c20",null),fe=ge.exports;T()(ge,{VBtn:E["a"],VCol:J["a"],VColorPicker:ae["a"],VDialog:oe["a"],VIcon:he["a"],VRow:M["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{light:"",label:e.displayedName,disabled:e.disabled,value:e.value,"hide-details":""},on:{change:e.change}})],1)],1)},me=[],ve={props:{label:{type:[Array,String],default:function(){return[]}},value:Boolean,disabled:{type:Boolean,default:!1}},computed:{displayedName:function(){return this.label.constructor==String?this.label:this.label[this.value+0]}},methods:{change:function(e){this.$emit("input",e)}}},be=ve,Ce=(n("e7cb"),n("ac7c")),xe=Object(d["a"])(be,pe,me,!1,null,"639c2a1c",null),ye=xe.exports;T()(xe,{VCheckbox:Ce["a"],VCol:J["a"],VRow:M["a"]});var Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{staticClass:"nf-toggle--name",class:{"text--disabled":e.disabled}},[e._v(e._s(e.name))]),n("v-col",{staticClass:"d-flex align-center nf-toggle--toggle"},[n("v-slider",{staticClass:"my-slider",attrs:{value:e.value,min:e.min,max:e.max,step:e.step,"thumb-label":!0,disabled:e.disabled,"hide-details":"","persistent-hint":""},on:{change:e.change}})],1)],1)},Te=[],we=(n("a9e3"),{props:{name:String,value:{type:Number,default:50},disabled:{type:Boolean,default:!1},step:{tyep:Number,default:1},min:{tyep:Number,default:1},max:{tyep:Number,default:100}},methods:{change:function(e){this.$emit("input",e)}}}),ke=we,Oe=(n("c53d"),n("ba0d")),$e=Object(d["a"])(ke,Se,Te,!1,null,"2d19600c",null),Pe=$e.exports;T()($e,{VCol:J["a"],VRow:M["a"],VSlider:Oe["a"]});var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-radio-group",{attrs:{value:e.value},on:{change:e.change}},e._l(e.radios,(function(e,t){return n("v-radio",{key:t,attrs:{label:e.label,disabled:e.disabled,value:void 0!=e.value?e.value:t}})})),1)},Ie=[],Be={props:{value:{type:Number,default:0},radios:{type:Array,default:function(){return[{label:"radio 1",disabled:!1},{label:"radio 2",disabled:!1},{label:"radio 3",disabled:!0}]}}},methods:{change:function(e){this.$emit("input",e)}}},Ve=Be,De=n("67b6"),Le=n("43a6"),je=Object(d["a"])(Ve,_e,Ie,!1,null,null,null),Ee=je.exports;T()(je,{VRadio:De["a"],VRadioGroup:Le["a"]});var Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{staticClass:"main-app-bar pl-2",attrs:{color:"grey darken-3",dark:""}},[n("span",[e._v(e._s(e.title))])])},Ae=[],Ne={name:"NlTitle",props:{title:String}},Re=Ne,ze=(n("2520"),n("40dc")),Fe=Object(d["a"])(Re,Me,Ae,!1,null,"4ef6f1f1",null),Ge=Fe.exports;T()(Fe,{VAppBar:ze["a"]});var He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"ma-0 pa-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.x,expression:"value.x"}],staticClass:"small-input",attrs:{type:"number"},domProps:{value:e.value.x},on:{input:[function(t){t.target.composing||e.$set(e.value,"x",t.target.value)},e.valueChanged]}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.y,expression:"value.y"}],staticClass:"small-input",attrs:{type:"number"},domProps:{value:e.value.y},on:{input:[function(t){t.target.composing||e.$set(e.value,"y",t.target.value)},e.valueChanged]}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.z,expression:"value.z"}],staticClass:"small-input",attrs:{type:"number"},domProps:{value:e.value.z},on:{input:[function(t){t.target.composing||e.$set(e.value,"z",t.target.value)},e.valueChanged]}})])},We=[],Ue={name:"NfVectorInput",props:{value:Object},methods:{valueChanged:function(){this.$emit("change",this.value)}}},qe=Ue,Ye=(n("6433"),Object(d["a"])(qe,He,We,!1,null,"7613c5be",null)),Xe=Ye.exports;T()(Ye,{VRow:M["a"]}),a["a"].component("nf-button",N),a["a"].component("nf-buttons",W),a["a"].component("nf-button-variant",K),a["a"].component("nf-color",re),a["a"].component("nf-color-three",fe),a["a"].component("nf-checkbox",ye),a["a"].component("nf-toggle",Pe),a["a"].component("nf-radio",Ee),a["a"].component("nl-title",Ge),a["a"].component("nf-vector-input",Xe);var Je=n("a925"),Ze=n("8c4f"),Ke=new Ze["a"]({mode:"history",routes:[{path:"/",component:null},{path:"/viewer",component:function(e){return n.e("chunk-119b8350").then(function(){var t=[n("5286")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/editor",component:function(e){return Promise.resolve().then(function(){var t=[n("b6f9")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]});Ke.beforeEach((function(e,t,n){"/"==e.path&&"/"!=t.path&&$["a"].commit("resetLoadingProgressComponent"),n()}));var Qe=Ke,et=(n("d3b7"),n("bc3a")),tt=n.n(et);function nt(){return new Promise((function(e){tt.a.get("lang/zh.json").then((function(t){e(t.data)}))}))}a["a"].config.productionTip=!1,a["a"].use(o["a"]),a["a"].use(Je["a"]),a["a"].use(Ze["a"]),nt().then((function(e){var t=new Je["a"]({locale:"zh-CN",messages:{"zh-CN":e}});new a["a"]({router:Qe,store:$["a"],vuetify:B,i18n:t,render:function(e){return e(O)}}).$mount("#app")}))},"5b42":function(e,t,n){},6433:function(e,t,n){"use strict";n("b6d6")},"65b1":function(e,t,n){"use strict";n("dd98")},"6ba8":function(e,t,n){},"6dfe":function(e,t,n){},7739:function(e,t,n){"use strict";n("7d42")},"7ab8":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");
/*! @source https://stackoverflow.com/questions/13405129/javascript-create-and-save-file# */
function a(e,t,n){var a=new Blob([e],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,t);else{var o=document.createElement("a"),i=URL.createObjectURL(a);o.href=i,o.download=t,document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(i)}),0)}}},"7d42":function(e,t,n){},8146:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"overlay-opacity":"0",width:"400",height:"400px"},model:{value:e.materialDialogOpen,callback:function(t){e.materialDialogOpen=t},expression:"materialDialogOpen"}},[[n("v-card",{staticClass:"pa-4 px-8"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-select",{attrs:{items:e.materialTypes,label:e.$t("m.i.material")},on:{change:e.materialTypeChanged},model:{value:e.selectedMaterial,callback:function(t){e.selectedMaterial=t},expression:"selectedMaterial"}})],1),n("v-row",{attrs:{"no-gutters":""}},[n("v-checkbox",{attrs:{label:e.$t("m.i.wireframe"),dense:""},on:{change:e.wireframeChanged},model:{value:e.isWireframe,callback:function(t){e.isWireframe=t},expression:"isWireframe"}})],1),n("nf-color-three",{attrs:{name:e.$t("m.i.mainColor"),value:e.primaryColor},on:{input:function(t){return e.$emit("materialChanged",[e.primaryColor,1])}}}),n("nf-color-three",{attrs:{name:e.$t("m.i.secondaryColor"),value:e.secondaryColor,disabled:0!=e.selectedMaterial},on:{input:function(t){return e.$emit("materialChanged",[e.secondaryColor,2])}}}),n("nf-toggle",{staticStyle:{margin:"12px 0"},attrs:{name:e.$t("m.i.shininess"),min:0,max:6,step:1,disabled:1!=e.selectedMaterial},on:{input:e.shininessChanged},model:{value:e.shininess,callback:function(t){e.shininess=t},expression:"shininess"}})],1)]],2)},o=[],i=(n("c975"),n("5a89")),r={props:{neuron:{type:Object,default:null},value:{type:Boolean,default:!1}},data:function(){return{materialDialogOpen:!1,materialTypes:[{text:this.$t("m.i.matGlow"),value:0},{text:this.$t("m.i.matSolid"),value:1},{text:this.$t("m.i.matFlat"),value:2}],selectedMaterial:0,primaryColor:new i["d"](0,0,0),secondaryColor:new i["d"](0,0,0),isWireframe:!1,shininess:2,shininessValues:[1,2,4,8,16,32,64,128]}},methods:{getMaterialType:function(e){return e?e.material.uniforms.type.value:-1},setValues:function(){this.neuron?(this.primaryColor=this.neuron.material.uniforms.primaryColor.value,this.secondaryColor=this.neuron.material.uniforms.secondaryColor.value,this.isWireframe=this.neuron.material.wireframe,this.shininess=this.shininessValues.indexOf(this.neuron.material.uniforms.shininess.value),-1==this.shininess&&(this.shininess=2)):this.shininess=2},shininessChanged:function(){this.neuron&&(this.neuron.material.uniforms.shininess.value=this.shininessValues[this.shininess]),this.$emit("materialChanged",[this.shininessValues[this.shininess],5])},materialTypeChanged:function(){this.neuron&&(this.neuron.material.uniforms.type.value=this.selectedMaterial),this.$emit("materialChanged",[this.selectedMaterial,3])},wireframeChanged:function(){this.neuron&&(this.neuron.material.wireframe=this.isWireframe),this.$emit("materialChanged",[this.isWireframe,4])}},watch:{value:function(e){e&&(this.materialDialogOpen=!0,this.neuron&&(this.selectedMaterial=this.getMaterialType(this.neuron)),this.setValues())},materialDialogOpen:function(e){e||this.$emit("input",!1)}}},s=r,l=n("2877"),c=n("6544"),u=n.n(c),d=n("b0af"),h=n("ac7c"),g=n("169a"),f=n("0fd9"),p=n("b974"),m=Object(l["a"])(s,a,o,!1,null,null,null);t["a"]=m.exports;u()(m,{VCard:d["a"],VCheckbox:h["a"],VDialog:g["a"],VRow:f["a"],VSelect:p["a"]})},8218:function(e,t,n){"use strict";n("368b")},"82e6":function(e,t,n){},"85ec":function(e,t,n){},"8a20":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("5a89"),o=n("07a4");function i(e){try{var t=n("f74e")("./"+e+".glsl");return t}catch(a){return o["a"].commit("alert",{content:"获取GLSL文件失败"}),null}}function r(e,t,n,o){var r=o.primaryColor,s=void 0===r?12632256:r,l=o.secondaryColor,c=void 0===l?0:l,u=o.isSelected,d=void 0!==u&&u,h=o.type,g=void 0===h?1:h,f=o.shininess,p=void 0===f?16:f,m=i("MainVertexShader"),v=i("MainFragmentShader"),b=new a["w"]({uniforms:{type:{type:"f",value:g},viewVector:{type:"v3",value:e.position},primaryColor:{type:"c",value:new a["d"](s)},secondaryColor:{type:"c",value:new a["d"](c)},light1Color:{type:"c",value:n[0].outColor},light2Color:{type:"c",value:n[1].outColor},light3Color:{type:"c",value:n[2].outColor},light2Dir:{type:"c",value:n[1].direction},light3Dir:{type:"c",value:n[2].direction},isSelected:{type:"b",value:d},isInfo:{type:"b",value:!1},idValue:{type:"b",value:t},shininess:{type:"f",value:p}},vertexShader:m,fragmentShader:v,side:a["h"]});return b}function s(e,t,n){var o=i("TagVertexShader"),r=i("TagFragmentShader"),s=new a["w"]({uniforms:{translation:{type:"c",value:new a["B"]},scale:{type:"v2",value:e},u_texture:{type:"t",value:t},isSelected:{type:"b",value:!1},idValue:{type:"b",value:n},isInfo:{type:"b",value:!1}},vertexShader:o,fragmentShader:r,side:a["h"]});return s.depthTest=!1,s.depthWrite=!1,s}},"938a":function(e,t){e.exports="uniform vec2 scale;\r\nvarying vec2 vsOutUv;\r\nvarying float test;\r\n\r\nmat4 getRotAndScaleMat(mat4 mat) {\r\n    mat4 rmatrix;\r\n\r\n    rmatrix[0][0] = mat[0][0] * scale[0];\r\n    rmatrix[0][1] = mat[1][0] * scale[0];\r\n    rmatrix[0][2] = mat[2][0] * scale[0];\r\n    rmatrix[0][3] = 0.0;\r\n\r\n    rmatrix[1][0] = mat[0][1] * scale[1];\r\n    rmatrix[1][1] = mat[1][1] * scale[1];\r\n    rmatrix[1][2] = mat[2][1] * scale[1];\r\n    rmatrix[1][3] = 0.0;\r\n\r\n    rmatrix[2][0] = mat[0][2];\r\n    rmatrix[2][1] = mat[1][2];\r\n    rmatrix[2][2] = mat[2][2];\r\n    rmatrix[2][3] = 0.0;\r\n    \r\n    rmatrix[3][0] = 0.0;\r\n    rmatrix[3][1] = 0.0;\r\n    rmatrix[3][2] = 0.0;\r\n    rmatrix[3][3] = 1.0;\r\n\r\n    return rmatrix;\r\n}\r\n\r\nvoid main()\r\n{\r\n    gl_Position = projectionMatrix * modelViewMatrix * getRotAndScaleMat(viewMatrix) * vec4( position, 1.0 );\r\n    vsOutUv = uv;\r\n    test = 1.0;\r\n}"},9444:function(e,t,n){"use strict";n("6dfe")},"97b1":function(e,t,n){"use strict";n("1553")},"97f5":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"right-panel-container"},[n("nl-title",{attrs:{title:e.$t("m.i.scene")}}),n("v-expansion-panels",{staticClass:"right-panel",staticStyle:{height:"0"},attrs:{tile:"",accordion:"",multiple:""},model:{value:e.openedPanels,callback:function(t){e.openedPanels=t},expression:"openedPanels"}},[e.isViewer?n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.file")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{btns:e.fileBtnGroup},on:{reload:e.reload,downloadConfig:e.downloadConfig,useConfig:e.useConfig,saveScreenshot:e.saveScreenshot}}),n("input",{ref:"json-file-input",staticStyle:{visibility:"hidden",position:"absolute"},attrs:{type:"file",accept:".json"},on:{change:e.fileInputChange}})],1)],1):e._e(),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.sceneSettings")))]),n("v-expansion-panel-content",[n("nf-color",{attrs:{name:e.$t("m.i.background")},on:{input:e.bgColorChanged},model:{value:e.bgColorVal,callback:function(t){e.bgColorVal=t},expression:"bgColorVal"}}),n("nf-buttons",{attrs:{btns:e.moreOptionsBtnGroup},on:{openMoreOptionsDialog:e.openMoreOptionsDialog}})],1)],1)],1),n("lights-dialog",{ref:"lights-dialog",attrs:{lights:e.lights},on:{lightValChanged:e.lightValChanged,controlsTypeChanged:e.controlsTypeChanged}})],1)},o=[],i=(n("4160"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"overlay-opacity":"0",width:"300"},model:{value:e.lightsDialogOpen,callback:function(t){e.lightsDialogOpen=t},expression:"lightsDialogOpen"}},[[n("v-row",{staticClass:"v-expansion-panel-header",attrs:{"no-gutters":""}},[e._v(e._s(e.$t("m.i.lightings")))]),n("v-flex",{staticClass:"pa-4 lights-dialog-card",attrs:{tile:"",flat:""}},e._l(e.lights,(function(t,a){return n("div",{key:a,staticClass:"mx-4"},[n("v-row",{staticClass:"mt-2",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"font-weight-bold d-flex align-center",attrs:{cols:"4"}},[e._v(e._s(e.$t("m.i.lightings"))+e._s(a+1))]),n("v-col",{attrs:{cols:"8"}},[n("nf-color-three",{attrs:{name:e.$t("m.i.color")},on:{input:function(t){return e.lightValChanged(a)}},model:{value:e.lights[a].color,callback:function(t){e.$set(e.lights[a],"color",t)},expression:"lights[i].color"}}),n("nf-toggle",{attrs:{name:e.$t("m.i.strength"),min:0,max:2,step:.05},on:{input:function(t){return e.lightValChanged(a)}},model:{value:e.lights[a].strength,callback:function(t){e.$set(e.lights[a],"strength",t)},expression:"lights[i].strength"}})],1)],1),a<e.lights.length-1?n("v-divider",{staticClass:"mt-2"}):e._e()],1)})),0),n("v-row",{staticClass:"v-expansion-panel-header",attrs:{"no-gutters":""}},[e._v(e._s(e.$t("m.i.camera")))]),n("v-flex",{staticClass:"pa-4 px-8 lights-dialog-card"},[n("v-select",{attrs:{items:e.cameraTypes,label:e.$t("m.i.cameraType")},on:{change:e.controlsTypeChanged},model:{value:e.selectedCameraType,callback:function(t){e.selectedCameraType=t},expression:"selectedCameraType"}}),e.lightsDialogOpen?n("nf-toggle",{attrs:{name:e.$t("m.i.cameraPanSpeed"),disabled:0==e.selectedCameraType,min:.1,max:2,step:.05},model:{value:e.$store.state.controls.panSpeed,callback:function(t){e.$set(e.$store.state.controls,"panSpeed",t)},expression:"$store.state.controls.panSpeed"}}):e._e()],1)]],2)}),r=[],s={props:{lights:{type:Array,default:function(){return[]}}},data:function(){return{lightsDialogOpen:!1,cameraTypes:[{value:0,text:this.$t("m.i.cameraType1")},{value:1,text:this.$t("m.i.cameraType2")}],selectedCameraType:0}},methods:{open:function(){this.lightsDialogOpen=!0,1==this.$store.getters.controlsType?this.selectedCameraType=1:this.selectedCameraType=0},lightValChanged:function(e){this.$emit("lightValChanged",e)},controlsTypeChanged:function(e){this.$emit("controlsTypeChanged",e)}}},l=s,c=(n("8218"),n("2877")),u=n("6544"),d=n.n(u),h=n("62ad"),g=n("169a"),f=n("ce7e"),p=n("0e8f"),m=n("0fd9"),v=n("b974"),b=Object(c["a"])(l,i,r,!1,null,"20614b50",null),C=b.exports;d()(b,{VCol:h["a"],VDialog:g["a"],VDivider:f["a"],VFlex:p["a"],VRow:m["a"],VSelect:v["a"]});var x={name:"ScenePanel",components:{LightsDialog:C},props:{isViewer:Boolean,bgColor:String,lights:Array,neuronList:Array},data:function(){return{fileBtnGroup:[{label:this.$t("m.i.relaodScene"),method:"reload"},{label:this.$t("m.i.saveScreenshot"),method:"saveScreenshot"}],moreOptionsBtnGroup:[{label:this.$t("m.i.moreOptions"),method:"openMoreOptionsDialog"}],openedPanels:[0,1],bgColorVal:"#ffff00",model:[]}},created:function(){this.bgColorVal=this.bgColor},methods:{reload:function(){var e=window.confirm(this.$t("m.a.qDoReloadScene"));e&&this.$emit("reload")},downloadConfig:function(){this.$emit("downloadConfig")},saveScreenshot:function(){this.$emit("saveScreenshot")},bgColorChanged:function(){this.$emit("bgColorChanged",this.bgColorVal)},lightValChanged:function(e){var t=this.lights[e];t.outColor.x=t.color.r,t.outColor.y=t.color.g,t.outColor.z=t.color.b,t.outColor=t.outColor.multiplyScalar(t.strength);var n="light"+(e+1)+"Color";this.neuronList.forEach((function(e){var a=e.neuron.material.uniforms[n].value;a.x=t.outColor.x,a.y=t.outColor.y,a.z=t.outColor.z})),this.$emit("renderOnce")},useConfig:function(){var e=this.$refs["json-file-input"];e.click()},fileInputChange:function(e){var t=this,n=new FileReader;n.readAsText(e.target.files[0],"UTF-8"),e.target.value="",n.onload=function(e){var n=e.target.result;try{var a=JSON.parse(n);if(void 0===a.fileList)throw"err";t.$emit("loadCanvas",a)}catch(o){t.$store.commit("alert",{content:this.$t("m.a.jsonFileInvalid")})}}},openMoreOptionsDialog:function(){this.$refs["lights-dialog"].open()},controlsTypeChanged:function(e){this.$emit("controlsTypeChanged",e)}}},y=x,S=(n("7739"),n("a523")),T=n("cd55"),w=n("49e2"),k=n("c865"),O=n("0393"),$=Object(c["a"])(y,a,o,!1,null,"152d05d6",null);t["a"]=$.exports;d()($,{VContainer:S["a"],VExpansionPanel:T["a"],VExpansionPanelContent:w["a"],VExpansionPanelHeader:k["a"],VExpansionPanels:O["a"]})},9952:function(e,t,n){"use strict";n("07f5")},"9a87":function(e,t,n){"use strict";n("401b")},"9f12":function(e,t,n){},aa47:function(e,t,n){"use strict";n("3774")},af59:function(e,t,n){},b2ad:function(e,t,n){"use strict";n("9f12")},b31f:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("cb29"),n("4160"),n("ac1f"),n("1276"),n("159b");var a=n("5a89"),o=n("8a20"),i=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;t||(t={});var l=Object.prototype.hasOwnProperty.call(t,"fontFace")?t["fontFace"]:"Arial",c=Object.prototype.hasOwnProperty.call(t,"fontSize")?t["fontSize"]:18,u=Object.prototype.hasOwnProperty.call(t,"fontColor")?t["fontColor"]:"rgba(0, 0, 0, 1)",d=!!Object.prototype.hasOwnProperty.call(t,"fontBold")&&t["fontBold"],h=!!Object.prototype.hasOwnProperty.call(t,"fontItalic")&&t["fontItalic"],g=Object.prototype.hasOwnProperty.call(t,"textAlign")?t["textAlign"]:"left",f=Object.prototype.hasOwnProperty.call(t,"borderThickness")?t["borderThickness"]:4,p=Object.prototype.hasOwnProperty.call(t,"borderColor")?t["borderColor"]:"rgba(0, 0, 0, 1)",m=Object.prototype.hasOwnProperty.call(t,"borderRadius")?t["borderRadius"]:0,v=Object.prototype.hasOwnProperty.call(t,"backgroundColor")?t["backgroundColor"]:"rgba(255, 255, 255, 1)";i||(i=document.createElement("canvas").getContext("2d")),i.font=(d?"Bold ":"")+(h?"Italic ":"")+c+"px "+l;var b=e.split("\n"),C=0;b.forEach((function(e){var t=i.measureText(e);C=t.width>C?t.width:C}));var x=1.4*c*b.length;r||(r=document.createElement("canvas")),r.width=C+2*f,r.height=x+2*f;var y=r.getContext("2d");y.font=i.font,y.fillStyle=v,y.strokeStyle=p,y.lineWidth=f,P(y,f/2,f/2,C+f,x+f-1,m),y.fillStyle=u,y.textAlign=g;var S={left:f,start:f,center:C/2+f,right:C+f,end:C+f},T=c+f;b.forEach((function(e){y.fillText(e,S[g],T),T+=1.4*c}));var w=new a["z"](r);w.needsUpdate=!0;var k=new a["A"](r.width/10,r.height/10),O=o["b"](k,w,n);if(!s){var $=new a["r"](1,1);s=new a["n"]($),s.frustumCulled=!1}return s.material=O,s.material.transparent=!0,s.updateMorphTargets(),{sprite:s,ruler:i,canvas:r};function P(e,t,n,a,o,i){e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+a-i,n),e.quadraticCurveTo(t+a,n,t+a,n+i),e.lineTo(t+a,n+o-i),e.quadraticCurveTo(t+a,n+o,t+a-i,n+o),e.lineTo(t+i,n+o),e.quadraticCurveTo(t,n+o,t,n+o-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath(),e.fill(),e.stroke()}}},b6d6:function(e,t,n){},b6f9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"canvas-container"},[n("alert-snackbar"),e.mouseHintShow?n("v-card",{staticClass:"pointer-tag pb-2 flex-column align-center",attrs:{color:"#80808080"}},[n("v-flex",{staticClass:"pa-2",domProps:{innerHTML:e._s(e.mouseHint)}}),n("v-btn",{attrs:{tile:""},on:{click:function(t){e.mouseHintShow=!1}}},[e._v(e._s(e.$t("m.i.gotIt")))])],1):e._e(),n("div",{ref:"canvas-box",staticClass:"canvas-box"},[n("canvas",{ref:"main-canvas",class:{"canvas--pointer-on":e.canvasPointerIsOn},attrs:{id:"main-canvas"},on:{mousedown:e.onCanvasMouseDown,mouseup:e.onCanvasClickedOrTouched,dblclick:e.onCanvasDblClick,touchstart:e.onCanvasTouchStart,touchend:e.onCanvasTouchEnd}})]),n("side-bar",{ref:"side-bar",staticClass:"editor-right-bar",attrs:{sceneIsSet:e.sceneIsSet},scopedSlots:e._u([{key:"file",fn:function(){return[n("file-panel",{on:{loadObj:e.loadObj,saveConfigJson:e.saveConfigJson}})]},proxy:!0},{key:"scene",fn:function(){return[n("scene-panel",{ref:"scenePanel",attrs:{isViewer:!1,bgColor:e.bgColor,lights:e.lights,neuronList:e.neuronList},on:{bgColorChanged:e.bgColorChanged,renderOnce:e.render,controlsTypeChanged:function(t){return e.controlsTypeChanged(t)}}})]},proxy:!0},{key:"draw",fn:function(){return[n("draw-panel",{ref:"drawPanel",attrs:{bgColor:e.bgColor,tagList:e.tagList,tagActionIndex:e.tagActionIndex,controls:e.controls},on:{startCreatingTag:e.startCreatingTag,endCreatingTag:e.endCreatingTag,startDeletingTag:e.startDeletingTag,cancelDeletingTag:e.cancelDeletingTag,startRelocatingTag:e.startRelocatingTag,cancelRelocatingTag:e.cancelRelocatingTag,startToggleSelectTag:e.startToggleSelectTag,cancelToggleSelectTag:e.cancelToggleSelectTag,renderOnce:e.render,drawPanelEnded:e.drawPanelEnded,deleteTag:e.deleteTag}})]},proxy:!0},{key:"neurons",fn:function(){return[n("neuron-panel",{ref:"neuronPanel",attrs:{router:"editor",neurons:e.loadedObj,camera:e.camera,controls:e.controls,neuronList:e.neuronList,groupList:e.groupList},on:{renderOnce:e.render}})]},proxy:!0}])}),n("material-dialog",{attrs:{neuron:e.rightClickSelectedNeuron},on:{materialChanged:e.render},model:{value:e.rightClickMaterialDialogOpen,callback:function(t){e.rightClickMaterialDialogOpen=t},expression:"rightClickMaterialDialogOpen"}})],1)},o=[],i=(n("4160"),n("c975"),n("a434"),n("b0c0"),n("b64b"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("ddb0"),n("5a89")),r=n("920c"),s=n("4721"),l=n("5a15"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"right-bar-wrapper"},[n("v-card",{staticClass:"right-bar-container",attrs:{tile:"",elevation:5}},[n("v-tooltip",{attrs:{left:e.isDesktop,bottom:!e.isDesktop},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"expand-retract-flex",attrs:{dark:"",tile:""},on:{click:function(t){return t.stopPropagation(),e.expandRetract(t)}}},"v-btn",o,!1),a),[n("v-icon",{attrs:{dark:""}},[e._v("mdi-arrow-left-drop-circle "+e._s(e.isDesktop?"mdi-arrow-left-drop-circle":"mdi-chevron-down-circle")+" "+e._s(e.$store.state.panelOpen?"mdi-rotate-180":void 0)+" ")])],1)]}}])},[n("span",[e._v(e._s(e.$store.state.panelOpen?e.$t("m.i.fold"):e.$t("m.i.unfold")))])]),n("v-tabs",{attrs:{"hide-slider":e.isDesktop,dense:"",vertical:e.isDesktop}},e._l(e.displayedItems,(function(t,a){return n("v-tooltip",{key:a,attrs:{left:e.isDesktop,bottom:!e.isDesktop},scopedSlots:e._u([{key:"activator",fn:function(a){var o=a.on,i=a.attrs;return[n("v-tab",e._g(e._b({on:{click:function(n){return n.stopPropagation(),e.togglePanelWrappers(t.itemIndex)}}},"v-tab",i,!1),o),[n("v-icon",[e._v(e._s(t.icon))])],1)]}}],null,!0)},[n("span",[e._v(e._s(t.tooltip))])])})),1)],1),n("aside",{staticClass:"panels-wrapper theme--light elevation-4",class:{"panels-wrapper-open":e.$store.state.panelOpen}},[0==e.$store.state.panelIndex?e._t("file"):e._e(),1==e.$store.state.panelIndex?e._t("scene"):2==e.$store.state.panelIndex?e._t("draw"):3==e.$store.state.panelIndex?e._t("neurons"):e._t("default")],2)],1)},u=[],d=(n("fb6a"),{name:"RightBar",props:{sceneIsSet:{type:Boolean,default:!1}},data:function(){return{items:[{icon:"mdi-file",tooltip:this.$t("m.i.file"),itemIndex:0},{icon:"mdi-brain",tooltip:this.$t("m.i.neuron"),itemIndex:3},{icon:"mdi-draw",tooltip:this.$t("m.i.draw"),itemIndex:2},{icon:"mdi-image",tooltip:this.$t("m.i.scene"),itemIndex:1}],documentWidth:0}},computed:{isDesktop:function(){return this.documentWidth>800},displayedItems:function(){return this.sceneIsSet?this.items:this.items.slice(0,1)}},mounted:function(){this.resized()},methods:{resized:function(){this.documentWidth=document.body.clientWidth},togglePanelWrappers:function(e){this.$store.commit("setPanelStat",{open:this.$store.state.panelIndex!=e||!this.$store.state.panelOpen,index:e})},expandRetract:function(){this.$store.commit("setPanelStat",{open:!this.$store.state.panelOpen})}}}),h=d,g=(n("e829"),n("2877")),f=n("6544"),p=n.n(f),m=n("8336"),v=n("b0af"),b=n("132d"),C=n("71a3"),x=n("fe57"),y=n("3a2f"),S=Object(g["a"])(h,c,u,!1,null,"3aaa95e6",null),T=S.exports;p()(S,{VBtn:m["a"],VCard:v["a"],VIcon:b["a"],VTab:C["a"],VTabs:x["a"],VTooltip:y["a"]});var w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"right-panel-container"},[n("nl-title",{attrs:{title:"文件"}}),n("v-expansion-panels",{staticClass:"right-panel",attrs:{tile:"",accordion:"",multiple:""},model:{value:e.openedPanels,callback:function(t){e.openedPanels=t},expression:"openedPanels"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.load")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{vertical:"",btns:e.loadObjBtn},on:{loadObj:e.loadObj,loadObjLocal:e.loadObjLocal}}),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"localFileInput",attrs:{type:"file"},on:{change:e.localFileLoaded}})],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.save")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{vertical:"",btns:e.saveObjBtn},on:{saveConfigJson:e.saveConfigJson}}),n("v-row",{staticClass:"pa-1",attrs:{"no-gutters":""}},[n("p",[n("b",[e._v("config的用法：")])]),n("p",[e._v("Config文件由"),n("code",[e._v("configPath.txt")]),e._v("指定，该文件包含config文件与之的相对路径和名称，如 "),n("v-card",{staticClass:"ma-1 pa-1",attrs:{light:"",width:"100%"}},[n("pre",[e._v("./model/config.json")])]),e._v("。")],1),n("p",[e._v("初始时的config文件应设置如下 "),n("v-card",{staticClass:"ma-1 pa-1",attrs:{light:"",width:"100%"}},[n("pre",[e._v('{\n    "fileList": [\n        "file_1.obj",\n        "file_2.zip"\n    ]\n}')])]),e._v(" 其中"),n("code",[e._v("file_1")]),e._v("、"),n("code",[e._v("file_2")]),e._v("等均为位于与config同级的"),n("code",[e._v("/objects")]),e._v("文件夹下需要包含在工程中的文件；文件后缀支持.zip和.obj两种，其中.zip文件为压缩后的若干.obj文件。")],1),n("p",[e._v("进行各种修改后，点击“保存config”，将原config替换为下载得到的文件，并将其路径和名称与"),n("code",[e._v("configPath.txt")]),e._v("相匹配。")])])],1)],1)],1)],1)},k=[],O={data:function(){return{openedPanels:[0,1],loadObjBtn:[{label:this.$t("m.i.reloadNeuron"),method:"loadObj"}],saveObjBtn:[{label:this.$t("m.i.saveConfig"),method:"saveConfigJson"}]}},methods:{loadObj:function(){var e=confirm(this.$t("m.a.qDoReloadNeuron"));e&&this.$emit("loadObj")},loadObjLocal:function(){this.$refs["localFileInput"].click()},localFileLoaded:function(e){this.$emit("loadObjLocal")},saveConfigJson:function(){this.$emit("saveConfigJson")}}},$=O,P=n("a523"),_=n("cd55"),I=n("49e2"),B=n("c865"),V=n("0393"),D=n("0fd9"),L=Object(g["a"])($,w,k,!1,null,"50d42134",null),j=L.exports;p()(L,{VCard:v["a"],VContainer:P["a"],VExpansionPanel:_["a"],VExpansionPanelContent:I["a"],VExpansionPanelHeader:B["a"],VExpansionPanels:V["a"],VRow:D["a"]});var E=n("97f5"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"right-panel-container"},[n("nl-title",{attrs:{title:e.$t("m.i.draw")}}),n("v-expansion-panels",{staticClass:"right-panel",attrs:{tile:"",accordion:"",multiple:""},model:{value:e.openedPanels,callback:function(t){e.openedPanels=t},expression:"openedPanels"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.tagOperations")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{btns:e.tagBtns},on:{createTag:e.createTag,deleteTag:e.deleteTag,relocateTag:e.relocateTag,toggleSelectTag:e.toggleSelectTag}})],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.tagList")))]),n("v-expansion-panel-content",{staticClass:"list-content"},[n("v-row",{attrs:{"no-gutters":""}},[n("tag-table",{ref:"tagTable",attrs:{tagList:e.tagList},on:{focusOnItem:e.focusOnItem,renderOnce:e.renderOnce,openModifyTagDialog:e.openModifyTagDialog},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(e._s(e.$t("m.i.tagBatchOperations")))]),n("v-expansion-panel-content",[n("nf-buttons",{attrs:{btns:e.batchBtns},on:{batchSetTag:e.batchSetTag,batchDeleteTag:e.batchDeleteTag}})],1)],1)],1),n("new-tag-dialog",{ref:"newTagDialog",attrs:{bgColor:e.bgColor},on:{newTagDialogClosed:e.newTagDialogClosed},model:{value:e.newTagDialogOpen,callback:function(t){e.newTagDialogOpen=t},expression:"newTagDialogOpen"}})],1)},A=[],N=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{staticClass:"height-no-limit",attrs:{"overlay-opacity":"0",width:"min-content",persistent:"",eager:""},model:{value:e.newTagDialogOpen,callback:function(t){e.newTagDialogOpen=t},expression:"newTagDialogOpen"}},[[n("v-card",{staticClass:"pa-4 group-dialog-card"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-textarea",{ref:"tagTextarea",attrs:{solo:"","no-resize":"",label:e.$t("m.i.content"),rows:"3",autofocus:"",disabled:!e.isOperatingOnSingleTag},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),n("v-col",{attrs:{"no-gutters":""}},[n("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[n("v-checkbox",{staticClass:"ma-0 pa-0",scopedSlots:e._u([{key:"label",fn:function(){return[n("v-icon",[e._v("mdi-format-bold")])]},proxy:!0}]),model:{value:e.fontBold,callback:function(t){e.fontBold=t},expression:"fontBold"}})],1),n("v-col",{attrs:{cols:"6"}},[n("nf-color",{staticClass:"tag-nfcolor",attrs:{name:e.$t("m.i.fontColor"),alphaEnabled:""},model:{value:e.fontColor,callback:function(t){e.fontColor=t},expression:"fontColor"}})],1)],1),n("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[n("v-checkbox",{staticClass:"ma-0 pa-0",scopedSlots:e._u([{key:"label",fn:function(){return[n("v-icon",[e._v("mdi-format-italic")])]},proxy:!0}]),model:{value:e.fontItalic,callback:function(t){e.fontItalic=t},expression:"fontItalic"}})],1),n("v-col",{attrs:{cols:"6"}},[n("nf-color",{staticClass:"tag-nfcolor",attrs:{name:e.$t("m.i.backgroundColor"),disabled:!e.hasBackground,alphaEnabled:""},model:{value:e.backgroundColor,callback:function(t){e.backgroundColor=t},expression:"backgroundColor"}})],1)],1),n("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[n("v-combobox",{attrs:{items:e.fontSizes,label:e.$t("m.i.fontSize"),dense:"",error:e.isFontSizeInputError},on:{focus:e.fontSizeFocused,"update:error":e.fontSizeUpdateError},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}})],1),n("v-col",{attrs:{cols:"6"}},[n("nf-color",{staticClass:"tag-nfcolor",attrs:{name:e.$t("m.i.borderColor"),disabled:!e.hasBorder,alphaEnabled:""},model:{value:e.borderColor,callback:function(t){e.borderColor=t},expression:"borderColor"}})],1)],1),n("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pr-2",attrs:{cols:"6"}},[n("v-btn",{attrs:{icon:"",outlined:"left"==e.textAlign},on:{click:function(t){e.textAlign="left"}}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-format-align-left")])],1),n("v-btn",{attrs:{icon:"",outlined:"center"==e.textAlign},on:{click:function(t){e.textAlign="center"}}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-format-align-center")])],1),n("v-btn",{attrs:{icon:"",outlined:"right"==e.textAlign},on:{click:function(t){e.textAlign="right"}}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-format-align-right")])],1)],1),n("v-col",{attrs:{cols:"6"}},[n("nf-toggle",{attrs:{name:e.$t("m.i.borderRadius"),disabled:!e.hasBorder,min:0,max:20},model:{value:e.borderRadius,callback:function(t){e.borderRadius=t},expression:"borderRadius"}})],1)],1),n("v-row",{staticClass:"new-tag--row",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pr-2 d-flex flex-row",attrs:{cols:"6"}},[n("v-checkbox",{staticClass:"ma-0 pa-0 pr-2",attrs:{label:e.$t("m.i.hasBorder")},model:{value:e.hasBorder,callback:function(t){e.hasBorder=t},expression:"hasBorder"}}),n("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{label:e.$t("m.i.background")},model:{value:e.hasBackground,callback:function(t){e.hasBackground=t},expression:"hasBackground"}})],1),n("v-col",{attrs:{cols:"6"}},[n("nf-toggle",{attrs:{name:e.$t("m.i.borderThickness"),disabled:!e.hasBorder,min:0,max:10},model:{value:e.borderThickness,callback:function(t){e.borderThickness=t},expression:"borderThickness"}})],1)],1)],1),n("v-row",{attrs:{"no-gutters":""}},[n("v-flex",{staticClass:"ma-2",style:{background:e.bgColor}},[n("v-flex",{staticClass:"d-flex justify-center align-center preview-window",on:{mousewheel:e.previewBlockRescaleOnScroll}},[n("div",{staticClass:"preview-block",style:{"border-width":e.hasBorder?e.borderThickness+"px":0,"border-color":e.borderColor,"border-radius":e.borderRadius+"px",background:e.hasBackground?e.backgroundColor:"none",color:e.fontColor,"font-size":e.fontSize+"px","font-weight":e.fontBold?"bold":"normal","font-style":e.fontItalic?"italic":"normal","text-align":e.textAlign,transform:"scale("+e.previewBlockScale+")"}},[e._v(e._s(e.text))]),n("v-btn-toggle",{staticClass:"scale-btns"},[n("v-btn",{attrs:{icon:"",small:"",plain:"",disabled:e.previewBlockScale<=.11},on:{click:function(t){return e.previewBlockRescale(!1)}}},[n("v-icon",[e._v("mdi-minus")])],1),n("v-flex",{staticClass:"scale-display"},[e._v(e._s(e.previewBlockScale.toFixed(1))+"×")]),n("v-btn",{attrs:{icon:"",small:"",plain:"",disabled:e.previewBlockScale>=9.99},on:{click:function(t){return e.previewBlockRescale(!0)}}},[n("v-icon",[e._v("mdi-plus")])],1),n("v-btn",{attrs:{icon:"",small:"",plain:""},on:{click:function(t){e.previewBlockScale=1}}},[n("v-icon",[e._v("mdi-refresh")])],1)],1)],1)],1)],1),n("v-row",{attrs:{"no-gutters":""}},[n("nf-buttons",{attrs:{btns:e.openCloseBtns},on:{confirm:function(t){return e.close(!0)},cancel:function(t){return e.close(!1)}}})],1)],1)]],2)}),R=[],z=n("b31f"),F={props:{value:{type:Boolean,default:!1},bgColor:{type:String,default:"#000000"}},data:function(){return{tagInfo:void 0,newTagDialogOpen:!1,isOperatingOnSingleTag:!0,openCloseBtns:[{label:this.$t("m.i.confirm"),col:"grey",method:"confirm"},{label:this.$t("m.i.cancel"),col:"red",method:"cancel"}],text:"",hasBorder:!0,hasBackground:!0,borderThickness:1,borderColor:"#000000ff",borderRadius:2,backgroundColor:"#80808050",fontColor:"#ffffffff",fontSize:24,fontBold:!0,fontItalic:!0,textAlign:"left",ruler:void 0,canvas:void 0,sprite:void 0,idValue:void 0,fontSizes:[8,10,12,14,16,18,20,22,24,26,28,36,48,72,108,144,196,256],oldFontSize:24,previewBlockScale:1,zoomStep:.1}},computed:{isFontSizeInputError:function(){return!(this.fontSize>=2&&this.fontSize<=1e3)}},methods:{setValues:function(e,t,n){this.tagInfo=e,this.tagInfo?(this.text=this.tagInfo.text,this.hasBorder=this.tagInfo.hasBorder,this.hasBackground=this.tagInfo.hasBackground,this.borderThickness=this.tagInfo.borderThickness,this.borderColor=this.tagInfo.borderColor,this.borderRadius=this.tagInfo.borderRadius,this.backgroundColor=this.tagInfo.backgroundColor,this.fontColor=this.tagInfo.fontColor,this.fontSize=this.tagInfo.fontSize,this.fontBold=this.tagInfo.fontBold,this.fontItalic=this.tagInfo.fontItalic,this.textAlign=this.tagInfo.textAlign,this.ruler=this.tagInfo.ruler,this.canvas=this.tagInfo.canvas,this.sprite=this.tagInfo.sprite,this.idValue=this.tagInfo.idValue):(this.ruler=void 0,this.canvas=void 0,this.sprite=void 0,this.idValue=n),this.text=t||this.text;var a=this.$refs["tagTextarea"].$el.getElementsByTagName("textarea")[0];this.$nextTick((function(){a.select()}))},fontSizeFocused:function(){this.oldFontSize=this.fontSize},fontSizeUpdateError:function(){var e=this;this.$store.commit("alert",{content:this.$t("m.a.fontSizeMustBeWithinRange")}),this.$nextTick((function(){e.fontSize=e.oldFontSize}))},previewBlockRescale:function(e){!e&&this.previewBlockScale>.11?this.previewBlockScale-=this.zoomStep:e&&this.previewBlockScale<9.99&&(this.previewBlockScale+=this.zoomStep)},previewBlockRescaleOnScroll:function(e){e.deltaY>0&&this.previewBlockScale>.11?this.previewBlockScale-=this.zoomStep:e.deltaY<0&&this.previewBlockScale<9.99&&(this.previewBlockScale+=this.zoomStep)},close:function(e){this.generatedSpriteInfo=!0,this.newTagDialogOpen=!1,this.$emit("input",this.newTagDialogOpen);var t=null;if(e){if(this.isOperatingOnSingleTag){var n=Object(z["a"])(this.text,{fontSize:this.fontSize,fontColor:this.fontColor,fontBold:this.fontBold,fontItalic:this.fontItalic,textAlign:this.textAlign,borderThickness:this.borderThickness,borderColor:this.hasBorder?this.borderColor:"#00000000",borderRadius:this.borderRadius,backgroundColor:this.hasBackground?this.backgroundColor:"#00000000"},this.idValue/1e3,this.ruler,this.canvas,this.sprite);t=n.sprite,this.ruler=n.ruler,this.canvas=n.canvas}this.tagInfo?(this.tagInfo.text=this.text,this.tagInfo.fontItalic=this.fontItalic,this.tagInfo.fontBold=this.fontBold,this.tagInfo.fontSize=this.fontSize,this.tagInfo.textAlign=this.textAlign,this.tagInfo.fontColor=this.fontColor,this.tagInfo.hasBorder=this.hasBorder,this.tagInfo.borderColor=this.borderColor,this.tagInfo.borderRadius=this.borderRadius,this.tagInfo.borderThickness=this.borderThickness,this.tagInfo.hasBackground=this.hasBackground,this.tagInfo.backgroundColor=this.backgroundColor,this.tagInfo.idValue=this.idValue,this.tagInfo.ruler=this.ruler,this.tagInfo.canvas=this.canvas):this.tagInfo={sprite:t,position:void 0,text:this.text,fontItalic:this.fontItalic,fontBold:this.fontBold,fontSize:this.fontSize,textAlign:this.textAlign,fontColor:this.fontColor,hasBorder:this.hasBorder,borderColor:this.borderColor,borderRadius:this.borderRadius,borderThickness:this.borderThickness,hasBackground:this.hasBackground,backgroundColor:this.backgroundColor,idValue:this.idValue,ruler:this.ruler,canvas:this.canvas},this.isOperatingOnSingleTag=!0,this.$emit("newTagDialogClosed",this.tagInfo)}else this.isOperatingOnSingleTag=!0}},watch:{value:function(e){e&&(this.newTagDialogOpen=!0)}}},G=F,H=(n("1b45"),n("a609")),W=n("ac7c"),U=n("62ad"),q=n("2b5d"),Y=n("169a"),X=n("0e8f"),J=n("a844"),Z=Object(g["a"])(G,N,R,!1,null,"df96088c",null),K=Z.exports;p()(Z,{VBtn:m["a"],VBtnToggle:H["a"],VCard:v["a"],VCheckbox:W["a"],VCol:U["a"],VCombobox:q["a"],VDialog:Y["a"],VFlex:X["a"],VIcon:b["a"],VRow:D["a"],VTextarea:J["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"tag-table",attrs:{headers:e.headers,items:e.tagList,"item-key":"idValue","show-select":"",dense:"","mobile-breakpoint":"0","disable-pagination":"","hide-default-footer":""},on:{"item-selected":e.itemSelected,"toggle-select-all":e.toggleSelectedAll},scopedSlots:e._u([{key:"item.text",fn:function(e){var t=e.item;return[n("div",{staticClass:"text-display",attrs:{title:t.text}},[n("input",{staticClass:"name-input",attrs:{disabled:""},domProps:{value:t.text}})])]}},{key:"item.settings",fn:function(t){var a=t.item;return[n("v-row",{staticClass:"settings-btns-row justify-center",attrs:{"no-gutters":""}},[n("v-icon",{attrs:{title:e.$t("m.i.draw")},on:{click:function(t){return e.$emit("openModifyTagDialog",a)}}},[e._v("mdi-draw")]),n("v-icon",{attrs:{title:e.$t("m.i.center")},on:{click:function(t){return e.focusClicked(a)}}},[e._v("mdi-camera")])],1)]}}]),model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})},ee=[],te={props:{value:{default:function(){return[]},type:Array},tagList:{type:Array,default:function(){return[]}}},data:function(){return{headers:[{text:this.$t("m.i.text"),value:"text",align:"center",width:100,groupable:!1,sortable:!0},{text:this.$t("m.i.settings"),value:"settings",align:"center",groupable:!1,sortable:!1}],selectedTags:[]}},methods:{forceRefreshSelectedTags:function(){this.selectedTags=this.value},itemSelected:function(e){var t=this;e&&this.setSelectMaterial(e.item,e.value),this.$nextTick((function(){t.$emit("input",t.selectedTags)}))},toggleSelectedAll:function(e){var t=this;e.value?(this.selectedTags=this.tagList,this.tagList.forEach((function(e){t.setSelectMaterial(e,!0)}))):(this.selectedTags=[],this.tagList.forEach((function(e){t.setSelectMaterial(e,!1)}))),this.itemSelected()},setSelectMaterial:function(e,t){e.sprite.material.uniforms.isSelected.value=t,this.valueChanged()},focusClicked:function(e){this.$emit("focusOnItem",e)},valueChanged:function(){this.$emit("renderOnce")}}},ne=te,ae=(n("4791"),n("8fea")),oe=Object(g["a"])(ne,Q,ee,!1,null,"25232e95",null),ie=oe.exports;p()(oe,{VDataTable:ae["a"],VIcon:b["a"],VRow:D["a"]});var re={components:{NewTagDialog:K,TagTable:ie},props:{bgColor:{type:String,default:"#000000"},tagList:{type:Array,default:function(){return[]}},tagActionIndex:{type:Number,default:0},controls:{default:null,type:Object}},data:function(){return{openedPanels:[0,1,2],tagBtns:[{label:this.$t("m.i.addTag"),method:"createTag"},{label:this.$t("m.i.deleteTag"),method:"deleteTag"},{label:this.$t("m.i.relocateTag"),method:"relocateTag"},{label:this.$t("m.i.toggleSelectTag"),method:"toggleSelectTag"}],batchBtns:[{label:this.$t("m.i.batchSetTag"),method:"batchSetTag"},{label:this.$t("m.i.batchDeleteTag"),method:"batchDeleteTag"}],tagIsBeingModified:!1,tagIsBeingBatchModified:!1,newTagDialogOpen:!1,tagPositionInfo:void 0,selectedTags:[]}},mounted:function(){this.newTagDialog=this.$refs["newTagDialog"]},methods:{createTag:function(){1!==this.tagActionIndex?this.$emit("startCreatingTag"):this.$emit("endCreatingTag")},tagPositionSet:function(e,t){this.tagPositionInfo=e,e[0]&&e[0].neuron?(this.newTagDialogOpen=!0,this.newTagDialog.setValues(void 0,e[0].neuron.name,t)):this.$store.commit("alert",{content:this.$t("m.a.neuronNotSelected")})},newTagDialogClosed:function(e){var t=this;this.tagIsBeingBatchModified?(this.tagIsBeingBatchModified=!1,this.selectedTags.forEach((function(n){var a=n.sprite.material.uniforms.isSelected.value,o=Object(z["a"])(n.text,{fontSize:e.fontSize,fontColor:e.fontColor,fontBold:e.fontBold,fontItalic:e.fontItalic,textAlign:e.textAlign,borderThickness:e.borderThickness,borderColor:e.hasBorder?e.borderColor:"#00000000",borderRadius:e.borderRadius,backgroundColor:e.hasBackground?e.backgroundColor:"#00000000"},n.idValue/1e3,n.ruler,n.canvas,n.sprite),i=o.sprite,r=o.ruler,s=o.canvas;n.sprite=i,n.fontItalic=e.fontItalic,n.fontBold=e.fontBold,n.fontSize=e.fontSize,n.textAlign=e.textAlign,n.fontColor=e.fontColor,n.hasBorder=e.hasBorder,n.borderColor=e.borderColor,n.borderRadius=e.borderRadius,n.borderThickness=e.borderThickness,n.hasBackground=e.hasBackground,n.backgroundColor=e.backgroundColor,n.ruler=r,n.canvas=s,n.sprite.material.uniforms.isSelected.value=a,t.renderOnce()}))):this.tagIsBeingModified?(e&&e.sprite&&this.$emit("renderOnce"),this.tagIsBeingModified=!1):(e&&e.sprite&&(e.sprite.position.set(this.tagPositionInfo[1],this.tagPositionInfo[2],this.tagPositionInfo[3]),e.position=[this.tagPositionInfo[1],this.tagPositionInfo[2],this.tagPositionInfo[3]]),this.$emit("endCreatingTag",e))},deleteTag:function(){2!=this.tagActionIndex?this.$emit("startDeletingTag"):this.$emit("cancelDeletingTag")},renderOnce:function(){this.$emit("renderOnce")},openModifyTagDialog:function(e){this.newTagDialogOpen=!0,this.tagIsBeingModified=!0,this.newTagDialog.setValues(e,e.text,e.idValue)},relocateTag:function(){3!=this.tagActionIndex?this.$emit("startRelocatingTag"):this.$emit("cancelRelocatingTag")},toggleSelectTag:function(){4!=this.tagActionIndex?this.$emit("startToggleSelectTag"):this.$emit("cancelToggleSelectTag")},toggleSelectTagChange:function(e){var t=this.selectedTags.indexOf(e);t<0?(this.selectedTags.push(e),e.sprite.material.uniforms.isSelected.value=!0):(this.selectedTags.splice(t,1),e.sprite.material.uniforms.isSelected.value=!1),this.$refs["tagTable"].forceRefreshSelectedTags(),this.renderOnce()},focusOnItem:function(e){this.controls.target.fromArray(e.position),this.controls.update(),this.renderOnce()},batchSetTag:function(){this.selectedTags.length<=0?this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")}):(this.tagIsBeingBatchModified=!0,this.newTagDialogOpen=!0,this.newTagDialog.isOperatingOnSingleTag=!1,this.newTagDialog.setValues(void 0,this.$t("m.i.exampleText"),0),this.renderOnce())},batchDeleteTag:function(){var e=this;if(this.selectedTags.length<=0)this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")});else{var t=confirm(this.$t("m.a.qDoBatchRemoveTag"));t&&(this.selectedTags.forEach((function(t){e.$emit("deleteTag",t)})),this.selectedTags.length=0,this.$refs["tagTable"].forceRefreshSelectedTags(),this.renderOnce()),this.renderOnce()}}},beforeDestroy:function(){this.$emit("drawPanelEnded")},watch:{tagActionIndex:function(e){switch(this.tagBtns[0].label=this.$t("m.i.addTag"),this.tagBtns[1].label=this.$t("m.i.deleteTag"),this.tagBtns[2].label=this.$t("m.i.relocateTag"),this.tagBtns[3].label=this.$t("m.i.toggleSelectTag"),e){case 1:this.tagBtns[0].label=this.$t("m.i.cancelAddTag");break;case 2:this.tagBtns[1].label=this.$t("m.i.cancelDeleteTag");break;case 3:this.tagBtns[2].label=this.$t("m.i.cancelRelocateTag");break;case 4:this.tagBtns[3].label=this.$t("m.i.cancelToggleSelectTag");break}}}},se=re,le=(n("97b1"),Object(g["a"])(se,M,A,!1,null,"4e0aef07",null)),ce=le.exports;p()(le,{VContainer:P["a"],VExpansionPanel:_["a"],VExpansionPanelContent:I["a"],VExpansionPanelHeader:B["a"],VExpansionPanels:V["a"],VRow:D["a"]});var ue=n("062b"),de=n("bed6"),he=n("8146"),ge=n("07b4"),fe=n("8a20"),pe=n("7ab8"),me=n("bc3a"),ve=n.n(me),be=n("c4e3"),Ce=n.n(be),xe=n("0083"),ye=n.n(xe),Se={name:"MyCanvas",components:{SideBar:T,FilePanel:j,ScenePanel:E["a"],DrawPanel:ce,NeuronPanel:ue["a"],AlertSnackbar:de["a"],MaterialDialog:he["a"]},data:function(){return{modelPath:void 0,fov:30,near:.1,far:1e4,canvasWidth:600,canvasHeight:400,canvas:void 0,canvasBox:void 0,sideBar:void 0,camera:void 0,scene:void 0,renderer:void 0,controls:void 0,three:void 0,bgColor:"#000000",blackColor:"#000000",sceneIsSet:!1,sceneIsFirstSet:!1,sceneIsOn:!0,panelsOpen:!1,lights:[{color:void 0,strength:1,outColor:void 0},{color:void 0,strength:.5,direction:new i["B"](1,0,0),outColor:void 0},{color:void 0,strength:.5,direction:new i["B"](-1,0,0),outColor:void 0}],loadedObj:void 0,neuronList:[],groupList:[],defaultGroupText:this.$t("m.i.defaultGroupText"),neuronCount:0,loadingProgress:0,individualUnzippingProgress:[],individualLoadingProgress:[],pickScene:void 0,pickingTexture:new i["C"](1,1,{type:i["g"]}),pixelBuffer:new Float32Array(4),elementDict:{},rightClickMaterialDialogOpen:!1,rightClickSelectedNeuron:void 0,tagActionIndex:0,tagList:[],tagIdCount:0,relocatingTag:void 0,cvsMouseOrTouchPosX:0,cvsMouseOrTouchPosY:0,fileList:[],pointerTagShow:!0,mouseHintShow:!0}},computed:{canvasPointerIsOn:function(){return 2===this.$store.state.panelIndex&&0!=this.tagActionIndex||3===this.$store.state.panelIndex},mouseHint:function(){if(2!==this.$store.state.panelIndex)return 3===this.$store.state.panelIndex?this.$t("m.i.mouseHintNeuron"):this.$t("m.i.mouseHintDblClick");switch(this.tagActionIndex){case 1:return this.$t("m.i.mouseHintCreateTag");case 2:return this.$t("m.i.mouseHintDeleteTag");case 3:return this.relocatingTag?this.$t("m.i.mouseHintRelocatingTag2"):this.$t("m.i.mouseHintRelocatingTag1");case 4:return this.$t("m.i.mouseHintToggleSelectTag");default:return this.$t("m.i.mouseHintDblClick")}}},mounted:function(){this.canvas=this.$refs["main-canvas"],this.canvasBox=this.$refs["canvas-box"],this.sideBar=this.$refs["side-bar"],window.onresize=this.render,window.onbeforeunload=function(e){var t=e||window.event;return t&&(e.returnValue=this.$t("m.a.qWindowsClose")),this.$t("m.a.qWindowsClose")},this.loadObj()},methods:{loadObj:function(){var e=this,t="./model/config.json";ve.a.get("./configPath.txt").then((function(n){t=n.data,e.modelPath=t.replace(/\/[^/]+$/,"")})).finally((function(){ve.a.get(t).then((function(t){e.sceneIsOn=!0,e.loadCanvas(t.data)}))}))},getRomoteZipFiles:function(e,t,n){var a=this;return new Promise((function(o,i){ye.a.getBinaryContent(e,{callback:function(e,t){e?i(e):o(t)},progress:function(e){a.loadingProgress-=a.individualUnzippingProgress[t]/n,a.individualUnzippingProgress[t]=e.loaded/e.total,a.loadingProgress+=a.individualUnzippingProgress[t]/n,a.$store.commit("loadingProgressChanged",a.loadingProgress)}})})).then((function(e){return Ce.a.loadAsync(e)})).then((function(e){Object.keys(e.files);return e}))},loadCanvas:function(e){var t=this;this.sceneIsSet=!1,this.canvasWidth=this.canvasBox.getBoundingClientRect().width,this.canvasHeight=this.canvasBox.getBoundingClientRect().height,this.canvas.style.width=this.canvasWidth,this.canvas.style.height=this.canvasHeight,this.sceneIsFirstSet||(this.scene=new i["v"],this.pickScene=new i["v"],this.pickScene.background=new i["d"](0)),this.scene.children.length=[],this.pickScene.children.length=[],this.lights.forEach((function(t,n){if(e.scene){var a=e.scene.lighting[n];t.color=new i["d"](a.color),t.strength=a.strength}else t.color=new i["d"](1,1,1);t.outColor=new i["B"](t.color.r,t.color.g,t.color.b),t.outColor.multiplyScalar(t.strength)})),this.sceneIsFirstSet||(this.renderer=new i["D"]({canvas:this.canvas,antialias:!0,preserveDrawingBuffer:!0})),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.renderLists.dispose(),e.scene&&e.scene.camera?this.controlsTypeChanged(1,e.scene.camera,!0):this.controlsTypeChanged(1,void 0,!1),this.loadedObj&&this.loadedObj.children&&(this.loadedObj.children.forEach((function(e){null})),this.loadedObj=null),this.loadedObj=new i["p"],this.elementDict={},this.tagIdCount=500,this.tagList.length=0,e.tags&&e.tags.forEach((function(e){t.addTagToScene(e)})),this.loadingProgress=0,this.$store.commit("loadingProgressChanged",this.loadingProgress),this.neuronList.length=0,this.fileList.length=0,this.groupList.length=0,this.neuronCount=0,this.$store.commit("setPanelStat",{open:!1,index:0});var n=!1;if(e.groups)for(var a in e.groups)a==this.defaultGroupText&&(n=!0),this.groupList.push(a);n||this.groupList.push(this.defaultGroupText),this.$store.commit("loadingScreenFadeIn"),this.individualLoadingProgress=0;var o={},r=[],s=0;e.fileList.forEach((function(e,n){t.fileList.push(e);var a=ge["a"].getFileType(e);".zip"==a&&(s+=1)})),s>0?(this.individualUnzippingProgress=new Float32Array(s),this.$store.state.loadingPhase=0):this.$store.state.loadingPhase=1;var l=0;e.fileList.forEach((function(e,n){t.fileList.push(e);var a=ge["a"].getFileType(e);if(".zip"==a){var i=t.modelPath+"/objects/".concat(e),c=t.getRomoteZipFiles(i,l,s).then((function(n){var a=Object.keys(n.files);a.forEach((function(a){var i=ge["a"].getFileType(a);if(".obj"==i){var r=e+"_"+a,s=n.file(a).async("string");o[r]=s,t.individualLoadingProgress+=1}}))}));r.push(c),l+=1}else".obj"==a&&(t.individualLoadingProgress+=1)})),Promise.all(r).then((function(){console.log("unzipped")})).catch((function(e){t.$store.commit("alert",{content:t.$t("m.a.fileUnableToUnzip")+e,timeout:1e6})})).finally((function(){t.$store.state.loadingPhase=1,t.loadingProgress=0,t.$store.commit("loadingProgressChanged",t.loadingProgress),t.individualLoadingProgress=new Float32Array(t.individualLoadingProgress),t.loadModels(o,e)}))},loadModels:function(e,t){var n=this,a=[],o={},r=function(e){t.groups[e].forEach((function(t){o[t]=e}))};for(var s in t.groups)r(s);var l=0;Object.keys(e).forEach((function(i){var r=e[i],s=n.loadModelLocal(r,l,n.individualLoadingProgress.length).then((function(e){n.addLoadedResultsToObj(e,t,i,o)}));a.push(s),l+=1})),t.fileList.forEach((function(e,i){var r=ge["a"].getFileType(e);if(".obj"==r){var s=n.loadModel(n.modelPath+"/objects/".concat(e),l,n.individualLoadingProgress.length).then((function(a){n.addLoadedResultsToObj(a,t,e,o)}));a.push(s),l+=1}})),Promise.all(a).then((function(){console.log("files loaded")})).catch((function(e){n.$store.commit("alert",{content:n.$t("m.a.fileUnableToLoad")+e,timeout:1e6})})).finally((function(){if(n.scene.add(n.loadedObj),!t.scene||!t.scene.camera){var e=new i["a"](n.loadedObj,16711680),a=e.geometry.boundingSphere;n.controlsTypeChanged(1,a,!1)}n.$store.commit("loadingScreenFadeOut"),n.sceneIsSet=!0,n.bgColor=t.scene?t.scene.background:"#000000",n.bgColorChanged(n.bgColor),n.sceneIsFirstSet=!0,n.render()}))},loadModel:function(e,t,n){var a=this;return new Promise((function(o,i){(new l["a"]).load(e,o,(function(e){a.loadingProgress-=a.individualLoadingProgress[t]/n,a.individualLoadingProgress[t]=e.loaded/e.total,a.loadingProgress+=a.individualLoadingProgress[t]/n,a.$store.commit("loadingProgressChanged",a.loadingProgress)}),(function(t){i(e)}))}))},loadModelLocal:function(e,t,n){var a=this;return new Promise((function(o,i){e.then((function(e){(new l["a"]).loadStr(e,o,(function(e){a.loadingProgress-=a.individualLoadingProgress[t]/n,a.individualLoadingProgress[t]=e.loaded/e.total,a.loadingProgress+=a.individualLoadingProgress[t]/n,a.$store.commit("loadingProgressChanged",a.loadingProgress)}),(function(e){i()}))}))}))},addLoadedResultsToObj:function(e,t,n,a){var o=this;e.children.forEach((function(e,i){o.neuronCount+=1;var r=o.neuronCount+1,s=ge["a"].sansFileType(n);i>0&&(s+="_"+(i+1));var l=t.aliases&&t.aliases[s]||s;e.name=l;var c=1,u="#b0b0b0",d="#000000",h=16,g=!0,f=t.materials?t.materials[l]:void 0;f&&(c=f.type,u=f.primaryColor,d=f.secondaryColor,h=f.shininess,g=1==f.visible),e.material=fe["a"](o.camera,r/1e3,o.lights,{type:c,primaryColor:u,secondaryColor:d,shininess:h}),e.visible=g;var p={index:r,group:a[l]||o.defaultGroupText,originalName:s,name:l,neuron:e};o.neuronList.push(p),o.elementDict[r]=p,o.loadedObj.add(e)}))},addTagToScene:function(e){var t=this.tagIdCount;this.tagIdCount+=1;var n=Object(z["a"])(e.text,{fontSize:e.fontSize,fontColor:e.fontColor,fontBold:e.fontBold,fontItalic:e.fontItalic,textAlign:e.textAlign,borderThickness:e.borderThickness,borderColor:e.hasBorder?e.borderColor:"#00000000",borderRadius:e.borderRadius,backgroundColor:e.hasBackground?e.backgroundColor:"#00000000"},t/1e3),a=n.sprite;a.position.set(e.position[0],e.position[1],e.position[2]),e.sprite=a,e.ruler=n.ruler,e.canvas=n.canvas,e.idValue=t,this.elementDict[t]=e,this.tagList.push(e),this.loadedObj.add(a)},controlsTypeChanged:function(e,t,n){n&&t&&void 0!==t.type&&(e=t.type),this.camera||(this.camera=new i["q"](this.fov,this.canvasWidth/this.canvasHeight,this.near,this.far));var a=new i["B"];n?a.fromArray(t.position):t?a.set(t.center.x-2*t.radius,t.center.y,t.center.z):a.copy(this.camera.position);var o=new i["B"];n?o.fromArray(t.target):t?o.set(t.center.x,t.center.y,t.center.z):this.controls&&o.copy(this.controls.target),this.controls&&this.controls.dispose();var l=new i["B"];if(n?l.fromArray(t.up):l.copy(this.camera.up),this.camera.position.copy(a),this.camera.up.copy(l),this.camera.updateProjectionMatrix(),0==e)this.camera.up.set(0,1,0),this.controls=new s["a"](this.camera,this.canvas);else{this.controls=new r["a"](this.camera,this.canvas),this.controls.staticMoving=!0;var c=.5;n&&t.panSpeed&&(c=t.panSpeed),this.controls.panSpeed=c}this.controls.target.copy(o),this.controls.removeEventListener("change",this.render),this.controls.addEventListener("change",this.render),this.controls.update(),this.$store.commit("setControls",this.controls)},renderNeedsResize:function(){this.canvasWidth=this.canvasBox.getBoundingClientRect().width,this.canvasHeight=this.canvasBox.getBoundingClientRect().height;var e=this.canvas.width!==this.canvasWidth||this.canvas.height!==this.canvasHeight;if(e)return this.sideBar.resized(),[this.canvasWidth,this.canvasHeight]},render:function(){var e=this.renderNeedsResize();this.sceneIsSet&&(void 0!==e&&(this.renderer.setSize(e[0],e[1],!1),this.canvas.style.width=e[0]+"px",this.canvas.style.height=e[1]+"px",this.camera.aspect=this.canvas.clientWidth/this.canvas.clientHeight,this.camera.updateProjectionMatrix()),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera))},bgColorChanged:function(e){this.bgColor=e,this.renderer.setClearColor(this.bgColor,1),this.render()},onTransitionEnd:function(e){e.target.classList.remove("fade-in")},getCanvasRelativePosition:function(e){var t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left)*this.canvas.width/t.width,y:(e.clientY-t.top)*this.canvas.height/t.height}},getClickInfo:function(e){var t=this.getClickInfoOnce(e);if(t[0])return t;for(var n=5,a={clientX:e.clientX,clientY:e.clientY},o=void 0,i=1;i<=n;i+=1){if(a.clientX-=i,o=this.getClickInfoOnce(a),o[0])return o;if(a.clientX+=2*i,o=this.getClickInfoOnce(a),o[0])return o;if(a.clientX-=i,a.clientY-=i,o=this.getClickInfoOnce(a),o[0])return o;if(a.clientY+=2*i,o=this.getClickInfoOnce(a),o[0])return o;a.clientY-=i}return t},getClickInfoOnce:function(e){var t=this.getCanvasRelativePosition(e),n=this.renderer.getPixelRatio();this.camera.setViewOffset(this.renderer.getContext().drawingBufferWidth,this.renderer.getContext().drawingBufferHeight,t.x*n|0,t.y*n|0,1,1),this.renderer.setClearColor(this.blackColor,1),this.renderer.setRenderTarget(this.pickingTexture),this.renderer.antialias=!1,this.pickScene.add(this.loadedObj),this.loadedObj.children.forEach((function(e){e.material.uniforms.isInfo.value=!0})),this.renderer.render(this.pickScene,this.camera),this.renderer.readRenderTargetPixels(this.pickingTexture,0,0,1,1,this.pixelBuffer);var a=Math.round(1e3*this.pixelBuffer[0]);return this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.bgColor,1),this.camera.clearViewOffset(),this.scene.add(this.loadedObj),this.loadedObj.children.forEach((function(e){e.material.uniforms.isInfo.value=!1})),this.renderer.antialias=!0,[this.elementDict[a],this.pixelBuffer[1],this.pixelBuffer[2],this.pixelBuffer[3]]},onCanvasMouseDown:function(e){e.preventDefault(),this.cvsMouseOrTouchPosX=e.clientX,this.cvsMouseOrTouchPosY=e.clientY},onCanvasTouchStart:function(e){this.cvsMouseOrTouchPosX=e.touches[0].clientX,this.cvsMouseOrTouchPosY=e.touches[0].clientY},onCanvasTouchEnd:function(e){this.onCanvasClickedOrTouched(e.changedTouches[0])},onCanvasDblClick:function(e){if(3!==this.$store.state.panelIndex){var t=this.getClickInfo(e);t[0]&&(void 0!==t[0].neuron?(this.controls.target.set(t[1],t[2],t[3]),this.controls.update()):(this.controls.target.fromArray(t[0].position),this.controls.update()))}},onCanvasClickedOrTouched:function(e){if(e.preventDefault&&e.preventDefault(),e.clientX===this.cvsMouseOrTouchPosX&&e.clientY===this.cvsMouseOrTouchPosY){var t=void 0;if(2==this.$store.state.panelIndex)if(t=this.getClickInfo(e),1==this.tagActionIndex)this.$refs["drawPanel"].tagPositionSet(t,this.tagIdCount),this.tagIdCount+=1;else if(2==this.tagActionIndex)if(t[0]&&t[0].sprite){var n=confirm(this.$t("m.a.qDoRemoveTag"));n&&(this.deleteTag(t[0]),this.render())}else this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")});else 3==this.tagActionIndex?this.relocatingTag?t[0]&&t[0].neuron?(this.relocatingTag.position[0]=t[1],this.relocatingTag.position[1]=t[2],this.relocatingTag.position[2]=t[3],this.relocatingTag.sprite.position.fromArray(this.relocatingTag.position),this.render(),this.cancelRelocatingTag()):this.$store.commit("alert",{content:this.$t("m.a.newLocationNotSelected")}):t[0]&&t[0].sprite?this.relocatingTag=t[0]:this.$store.commit("alert",{content:this.$t("m.a.tagNotSelected")}):4==this.tagActionIndex&&t[0]&&t[0].sprite&&this.$refs["drawPanel"].toggleSelectTagChange(t[0]);else 3==this.$store.state.panelIndex&&(t=this.getClickInfo(e),2==e.button?t[0]&&t[0].neuron&&(this.rightClickMaterialDialogOpen=!0,this.rightClickSelectedNeuron=t[0].neuron):t[0]&&t[0].neuron&&this.$refs["neuronPanel"].neuronPicked(t[0]))}},startCreatingTag:function(){this.tagActionIndex=1,this.mouseHintShow=!0,this.$store.commit("setPanelStat",{open:!1})},endCreatingTag:function(e){this.resetTagActionIndex(),e&&e.sprite&&(this.elementDict[e.idValue]=e,this.tagList.push(e),this.loadedObj.add(e.sprite),this.render()),this.$store.commit("setPanelStat",{open:!0})},startDeletingTag:function(){this.tagActionIndex=2,this.mouseHintShow=!0,this.$store.commit("setPanelStat",{open:!1})},cancelDeletingTag:function(){this.resetTagActionIndex(),this.$store.commit("setPanelStat",{open:!0})},deleteTag:function(e){var t=this.tagList.indexOf(e);t>=0&&this.tagList.splice(t,1),this.loadedObj.remove(e.sprite)},startRelocatingTag:function(){this.tagActionIndex=3,this.mouseHintShow=!0,this.$store.commit("setPanelStat",{open:!1})},cancelRelocatingTag:function(){this.resetTagActionIndex(),this.relocatingTag=void 0,this.$store.commit("setPanelStat",{open:!0})},startToggleSelectTag:function(){this.tagActionIndex=4,this.mouseHintShow=!0},cancelToggleSelectTag:function(){this.resetTagActionIndex()},resetTagActionIndex:function(){this.tagActionIndex=0},drawPanelEnded:function(){this.resetTagActionIndex(),this.tagList.forEach((function(e){e.sprite.material.uniforms.isSelected.value=!1})),this.render()},saveConfigJson:function(){try{new Blob}catch(u){this.$store.commit("alert",{content:this.$t("m.a.browserVersionTooOld")})}var e={};e["fileList"]=this.fileList;var t={},n={},a={};this.groupList.forEach((function(e){n[e]=[]})),this.neuronList.forEach((function(e){var o=n[e.group];void 0!=o?o.push(e.neuron.name):n[e.group]=[e.neuron.name],t[e.originalName]=e.neuron.name;var i=e.neuron.material;a[e.neuron.name]={type:i.uniforms.type.value,primaryColor:"#"+i.uniforms.primaryColor.value.getHexString(),secondaryColor:"#"+i.uniforms.secondaryColor.value.getHexString(),shininess:i.uniforms.shininess.value,visible:e.neuron.visible}})),e["aliases"]=t,e["groups"]=n,e["materials"]=a;var o=[];this.lights.forEach((function(e){o.push({color:"#"+e.color.getHexString(),strength:e.strength})}));var i=this.$store.getters.controlsType,r=.5;1==i&&this.controls.panSpeed&&(r=this.controls.panSpeed);var s={type:i,panSpeed:r,position:this.camera.position.toArray(),target:this.controls.target.toArray(),up:this.camera.up.toArray()};e["scene"]={background:this.bgColor,lighting:o,camera:s};var l=[];this.tagList.forEach((function(e){l.push({position:e.position,text:e.text,fontItalic:e.fontItalic,fontBold:e.fontBold,fontSize:e.fontSize,textAlign:e.textAlign,fontColor:e.fontColor,hasBorder:e.hasBorder,borderColor:e.borderColor,borderRadius:e.borderRadius,borderThickness:e.borderThickness,hasBackground:e.hasBackground,backgroundColor:e.backgroundColor})})),e["tags"]=l;var c=JSON.stringify(e,null,4);Object(pe["a"])(c,"config.json","text/plain")},saveScreenshot:function(){var e="image/jpeg",t=this.renderer.domElement.toDataURL(e),n=document.createElement("a");n.download="neuron.png",n.href=t,n.click()}},beforeDestroy:function(){window.removeEventListener("resize",this.render)}},Te=Se,we=(n("c8b2"),Object(g["a"])(Te,a,o,!1,null,"2c23f22f",null));t["default"]=we.exports;p()(we,{VBtn:m["a"],VCard:v["a"],VFlex:X["a"]})},bbcd:function(e,t){e.exports="// plain\r\nuniform vec3 primaryColor;\r\nuniform bool isSelected;\r\n\r\nvoid main()\r\n{\r\n    // draw dotted patterns\r\n    if(isSelected == true\r\n    && int(gl_FragCoord.x) % 5 < 2\r\n    && int(gl_FragCoord.y) % 5 < 2) {\r\n        gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\r\n    }\r\n    // draw original color\r\n    else {\r\n        gl_FragColor = vec4( primaryColor, 1.0 );\r\n    }\r\n}"},bed6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{timeout:e.timeout,color:"red"},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.attrs;return[n("v-btn",e._b({attrs:{color:"white",icon:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",a,!1),[n("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.content)+" ")])},o=[],i={data:function(){return{snackbar:!1,content:"My timeout is set to 2000.",timeout:3e3}},mounted:function(){this.$store.commit("setAlertOpenMethod",this.open)},methods:{open:function(e){this.content=e.content,void 0===e.timeout?this.timeout=3e3:this.timeout=e.timeout,this.snackbar=!0}}},r=i,s=n("2877"),l=n("6544"),c=n.n(l),u=n("8336"),d=n("132d"),h=n("2db4"),g=Object(s["a"])(r,a,o,!1,null,null,null);t["a"]=g.exports;c()(g,{VBtn:u["a"],VIcon:d["a"],VSnackbar:h["a"]})},c53d:function(e,t,n){"use strict";n("5b42")},c81e:function(e,t,n){},c8b2:function(e,t,n){"use strict";n("48cb")},cfaf:function(e,t){e.exports="uniform vec3 primaryColor;\r\nuniform vec3 secondaryColor;\r\nuniform vec3 light1Color;\r\nuniform vec3 light2Color;\r\nuniform vec3 light2Dir;\r\nuniform vec3 light3Color;\r\nuniform vec3 light3Dir;\r\nuniform float type;\r\nuniform bool isSelected;\r\nuniform bool isInfo;    // renders info if set to true\r\nuniform float idValue;  // a unique float value for this object\r\nuniform float shininess;\r\nvarying float intensity;\r\nvarying float vsOutType;\r\nvarying vec3 vsOutPosition;\r\nvarying vec3 vsOutCameraPosition;\r\nvarying vec3 vsOutnormal;\r\n\r\nvec3 calcParallelLight(vec3 normal, vec3 camDir, vec3 lightDir, vec3 lightCol, float specAdjustedWeight) {\r\n    // diffuse\r\n    float diffuseStrength = max(dot(normal, lightDir), 0.0);\r\n    // specular (blinn-phong)\r\n    vec3 bisector = normalize(camDir + lightDir);\r\n    float specularStrength = pow(max(dot(bisector, normal), 0.0), shininess) * specAdjustedWeight;\r\n    return lightCol * (0.2 + diffuseStrength * 0.5 + specularStrength);\r\n}\r\n\r\nvoid main()\r\n{\r\n    if(isInfo) {\r\n        gl_FragColor = vec4( idValue, vsOutPosition.x, vsOutPosition.y, vsOutPosition.z ); // r - id value; (g,b,a) => position\r\n    }\r\n    else {\r\n        // draw dotted patterns\r\n        if(isSelected == true\r\n        && int(gl_FragCoord.x) % 4 < 2\r\n        && int(gl_FragCoord.y) % 4 < 2) {\r\n            gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\r\n        }\r\n        // draw original color\r\n        else {\r\n            switch(int(vsOutType)) {\r\n                case 0:\r\n                // glow\r\n                    vec3 outColor = primaryColor * intensity + secondaryColor * (1.0 - intensity);\r\n                    gl_FragColor = vec4( outColor, 1.0 );\r\n                    break;\r\n                case 1:\r\n                // solid\r\n                    // 1. light from camera\r\n                    float camDist = distance(vsOutPosition, vsOutCameraPosition);\r\n                    vec3 normal = normalize(vsOutnormal);\r\n                    vec3 camDir = normalize(vsOutCameraPosition - vsOutPosition);\r\n                    // diffuse\r\n                    float diffuseStrength = max(dot(normal, camDir), 0.0);\r\n                    // specular (blinn-phong)\r\n                    float specStrength = pow(diffuseStrength, shininess);\r\n                    // attenuation\r\n                    float atten = 1.0 / (1.0 + 0.007 * camDist);\r\n                    // adjusts spec strength to balance the reflection outputs with varying shininess values\r\n                    float specAdjustedWeight = (log2(shininess) + 1.0) / 8.0;\r\n\r\n                    vec3 light1Result = \r\n                        primaryColor * (0.2 + diffuseStrength * 0.5 + specStrength * specAdjustedWeight) * light1Color * atten;\r\n                    vec3 light2Result =\r\n                        primaryColor * calcParallelLight(normal, camDir, light2Dir, light2Color, specAdjustedWeight);\r\n                    vec3 light3Result =\r\n                        primaryColor * calcParallelLight(normal, camDir, light3Dir, light3Color, specAdjustedWeight);\r\n\r\n                    gl_FragColor = vec4( (light1Result + light2Result + light3Result), 1.0 );\r\n                    break;\r\n                case 2:\r\n                // flat\r\n                    gl_FragColor = vec4( primaryColor, 1.0 );\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\t\r\n}"},dd98:function(e,t,n){},e5f4:function(e,t){e.exports="// glow\r\nvarying vec2 vsOutUv;\r\nuniform sampler2D u_texture;\r\nuniform bool isSelected;\r\nuniform bool isInfo;    // renders info if set to true\r\nuniform float idValue;  // a unique float value for this object\r\nvarying float test;\r\n\r\nvoid main()\r\n{\r\n    // draw dotted patterns\r\n    if(isInfo) {\r\n        gl_FragColor = vec4( idValue, 0.0, 0.0, 1.0 ); // r - id value\r\n    }\r\n    else if(isSelected == true\r\n    && int(gl_FragCoord.x) % 4 < 2\r\n    && int(gl_FragCoord.y) % 4 < 2) {\r\n        gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\r\n    }\r\n    else {\r\n\r\n        gl_FragColor = texture2D(u_texture, vsOutUv);\r\n    }\r\n    // if (gl_FragColor.a <= 0.0) {\r\n    //     gl_FragColor = vec4(test, 0.0, 0.0, 1.0);\r\n    // }\r\n}"},e7cb:function(e,t,n){"use strict";n("ec1d")},e829:function(e,t,n){"use strict";n("12b2")},eb99:function(e,t,n){},ec0d:function(e,t,n){},ec1d:function(e,t,n){},f74e:function(e,t,n){var a={"./MainFragmentShader.glsl":"cfaf","./MainVertexShader.glsl":"fdb3","./PlainFragmentShader.glsl":"bbcd","./PlainVertexShader.glsl":"1108","./TagFragmentShader.glsl":"e5f4","./TagVertexShader.glsl":"938a"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id="f74e"},fdb3:function(e,t){e.exports="uniform vec3 viewVector;\r\nuniform float type; // 0-glow 1-flat\r\nvarying float vsOutType;\r\nvarying float intensity;\r\nvarying vec3 vsOutPosition;\r\nvarying vec3 vsOutCameraPosition;\r\nvarying vec3 vsOutnormal;\r\n\r\nvoid main()\r\n{\r\n    if(type == 0.0) {\r\n        // glow\r\n        float angle = dot(normalize(normal), normalize(viewVector - position));\r\n        \r\n        intensity = 1.0 - abs(angle);\r\n        if(angle < 0.0) {\r\n            intensity *= 0.5;\r\n        }\r\n    }\r\n    else if(type == 1.0) {\r\n        // solid\r\n        vsOutnormal = normal;\r\n        vsOutCameraPosition = viewVector;\r\n\r\n    }\r\n\r\n    vsOutType = type + 0.1;\r\n    vsOutPosition = position;\r\n\t\r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}"}});
//# sourceMappingURL=app.3f0cedf4.js.map